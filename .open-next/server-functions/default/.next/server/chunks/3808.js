"use strict";exports.id=3808,exports.ids=[3808],exports.modules={73808:(a,b,c)=>{c.r(b),c.d(b,{default:()=>mo,grapesjs:()=>mp,usePlugin:()=>mq});var d,e,f,g,h,i,j,k,l,m,n={4729:(a,b,c)=>{var d,e,f;f=function(a,b){var c,d,e=Array.prototype.slice;function f(a,b,c){return c.length<=4?a.call(b,c[0],c[1],c[2],c[3]):a.apply(b,c)}function g(a,b){return e.call(a,b)}function h(b,c){return null!=b&&(a.isArray(c)||(c=g(arguments,1)),a.all(c,function(a){return a in b}))}var i=(c=!1,d=-1,function(){return c||(d++,c=!0,a.defer(function(){c=!1})),d});function j(){this.registeredObjects=[],this.cidIndexes=[]}function k(b,c,d,e){for(var f,g=0,h=c.length;g<h;g++)if(f=c[g]){if("on"===b){if(!e.objectRegistry.register(f))continue}else if(!e.objectRegistry.unregister(f))continue;a.isFunction(f[b])&&f[b]("all",d,e)}}function l(b,c){var d=c.type,e=c.undoTypes,f=!e[d]||e[d][b];a.isFunction(f)&&f(c.object,c.before,c.after,c.options)}function m(b,c,d,f,g){if(!d.isCurrentlyUndoRedoing&&("undo"!==b||-1!==d.pointer)&&("redo"!==b||d.pointer!==d.length-1)){d.isCurrentlyUndoRedoing=!0;var h,i,j="undo"===b;for(g?i=j&&d.pointer===d.length-1||!j&&-1===d.pointer?a.clone(d.models):e.apply(d.models,j?[0,d.pointer]:[d.pointer,d.length-1]):(h=d.at(j?d.pointer:d.pointer+1),i=f?d.where({magicFusionIndex:h.get("magicFusionIndex")}):[h]),d.pointer+=(j?-1:1)*i.length;h=j?i.pop():i.shift();)h[b]();d.isCurrentlyUndoRedoing=!1,c.trigger(b,c)}}j.prototype={isRegistered:function(b){return b&&b.cid?this.registeredObjects[b.cid]:a.contains(this.registeredObjects,b)},register:function(a){return!this.isRegistered(a)&&(a&&a.cid?(this.registeredObjects[a.cid]=a,this.cidIndexes.push(a.cid)):this.registeredObjects.push(a),!0)},unregister:function(b){if(this.isRegistered(b)){if(b&&b.cid)delete this.registeredObjects[b.cid],this.cidIndexes.splice(a.indexOf(this.cidIndexes,b.cid),1);else{var c=a.indexOf(this.registeredObjects,b);this.registeredObjects.splice(c,1)}return!0}return!1},get:function(){return a.map(this.cidIndexes,function(a){return this.registeredObjects[a]},this).concat(this.registeredObjects)}};var n={add:{undo:function(a,b,c,d){a.remove(c,d)},redo:function(a,b,c,d){d.index&&(d.at=d.index),a.add(c,d)},on:function(b,c,d){return{object:c,before:void 0,after:b,options:a.clone(d)}}},remove:{undo:function(a,b,c,d){"index"in d&&(d.at=d.index),a.add(b,d)},redo:function(a,b,c,d){a.remove(b,d)},on:function(b,c,d){return{object:c,before:b,after:void 0,options:a.clone(d)}}},change:{undo:function(b,c,d,e){a.isEmpty(c)?a.each(a.keys(d),b.unset,b):(b.set(c),e&&e.unsetData&&e.unsetData.before&&e.unsetData.before.length&&a.each(e.unsetData.before,b.unset,b))},redo:function(b,c,d,e){a.isEmpty(d)?a.each(a.keys(c),b.unset,b):(b.set(d),e&&e.unsetData&&e.unsetData.after&&e.unsetData.after.length&&a.each(e.unsetData.after,b.unset,b))},on:function(b,c){var d=b.changedAttributes(),e=a.keys(d),f=a.pick(b.previousAttributes(),e),g=a.keys(f),h=(c||(c={})).unsetData={after:[],before:[]};return e.length!=g.length&&(e.length>g.length?a.each(e,function(a){a in f||h.before.push(a)},this):a.each(g,function(a){a in d||h.after.push(a)})),{object:b,before:f,after:d,options:a.clone(c)}}},reset:{undo:function(a,b,c){a.reset(b)},redo:function(a,b,c){a.reset(c)},on:function(b,c){return{object:b,before:c.previousModels,after:a.clone(b.models)}}}};function o(){}function p(b,c,d,e){if("object"==typeof c)return a.each(c,function(a,c){2===b?p(b,a,d,e):p(b,c,a,d)});switch(b){case 0:h(d,"undo","redo","on")&&a.all(a.pick(d,"undo","redo","on"),a.isFunction)&&(e[c]=d);break;case 1:e[c]&&a.isObject(d)&&(e[c]=a.extend({},e[c],d));break;case 2:delete e[c]}return this}o.prototype=n;var q=b.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(a){l("undo",this.attributes)},redo:function(a){l("redo",this.attributes)}}),r=b.Collection.extend({model:q,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(a){this.maximumStackLength=a}}),s=b.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(b){this.stack=new r,this.objectRegistry=new j,this.undoTypes=new o,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(a,b){this.stack.setMaxLength(b)},this),b&&b.track&&this.startTracking(),b&&b.register&&(a.isArray(b.register)||a.isArguments(b.register)?f(this.register,this,b.register):this.register(b.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(a){!function(a,b,c,d){if(a.track&&!a.isCurrentlyUndoRedoing&&b in d&&(e=d[b],"function"==(j=typeof(g=e.condition))?!!f(g,e,c):"boolean"!==j||g)){var e,g,j,k,l=f(d[b].on,d[b],c);if(h(l,"object","before","after")){if(l.type=b,l.magicFusionIndex=i(),l.undoTypes=d,a.pointer<a.length-1)for(var k=a.length-a.pointer-1;k--;)a.pop();a.pointer=a.length,a.add(l),a.length>a.maximumStackLength&&(a.shift(),a.pointer--)}}}(this.stack,a,g(arguments,1),this.undoTypes)},register:function(){k("on",arguments,this._addToStack,this)},unregister:function(){k("off",arguments,this._addToStack,this)},unregisterAll:function(){f(this.unregister,this,this.objectRegistry.get())},undo:function(a){m("undo",this,this.stack,a)},undoAll:function(){m("undo",this,this.stack,!1,!0)},redo:function(a){m("redo",this,this.stack,a)},redoAll:function(){m("redo",this,this.stack,!1,!0)},isAvailable:function(a){var b=this.stack,c=b.length;switch(a){case"undo":return c>0&&b.pointer>-1;case"redo":return c>0&&b.pointer<c-1;default:return!1}},merge:function(b){for(var c,d=a.isArray(b)?b:g(arguments);c=d.pop();)c instanceof s&&c.stack instanceof r&&(c.stack=this.stack)},addUndoType:function(a,b){p(0,a,b,this.undoTypes)},changeUndoType:function(a,b){p(1,a,b,this.undoTypes)},removeUndoType:function(a){p(2,a,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return a.extend(s,{defaults:function(b){a.extend(s.prototype.defaults,b)},addUndoType:function(a,b){p(0,a,b,n)},changeUndoType:function(a,b){p(1,a,b,n)},removeUndoType:function(a){p(2,a,void 0,n)}}),b.UndoManager=s},d=[c(5706),c(4193)],void 0===(e=f.apply(b,d))||(a.exports=e)},4193:(a,b,c)=>{var d,e;!function(f){var g="object"==typeof self&&self.self===self&&self||"object"==typeof c.g&&c.g.global===c.g&&c.g;d=[c(5706),c(7774),b],void 0===(e=(function(a,b,c){g.Backbone=f(g,c,a,b)}).apply(b,d))||(a.exports=e)}(function(a,b,c,d){var e,f=a.Backbone,g=Array.prototype.slice;b.VERSION="1.4.1",b.$=d,b.noConflict=function(){return a.Backbone=f,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={},i=/\s+/,j=function(a,b,d,e,f){var g,h=0;if(d&&"object"==typeof d)for(void 0!==e&&("context"in f)&&void 0===f.context&&(f.context=e),g=c.keys(d);h<g.length;h++)b=j(a,b,g[h],d[g[h]],f);else if(d&&i.test(d))for(g=d.split(i);h<g.length;h++)b=a(b,g[h],e,f);else b=a(b,d,e,f);return b};h.on=function(a,b,c){return this._events=j(k,this._events||{},a,b,{context:c,ctx:this,listening:e}),e&&((this._listeners||(this._listeners={}))[e.id]=e,e.interop=!1),this},h.listenTo=function(a,b,d){if(!a)return this;var f=a._listenId||(a._listenId=c.uniqueId("l")),g=this._listeningTo||(this._listeningTo={}),h=e=g[f];h||(this._listenId||(this._listenId=c.uniqueId("l")),h=e=g[f]=new q(this,a));var i=l(a,b,d,this);if(e=void 0,i)throw i;return h.interop&&h.on(b,d),this};var k=function(a,b,c,d){if(c){var e=a[b]||(a[b]=[]),f=d.context,g=d.ctx,h=d.listening;h&&h.count++,e.push({callback:c,context:f,ctx:f||g,listening:h})}return a},l=function(a,b,c,d){try{a.on(b,c,d)}catch(a){return a}};h.off=function(a,b,c){return this._events&&(this._events=j(m,this._events,a,b,{context:c,listeners:this._listeners})),this},h.stopListening=function(a,b,d){var e=this._listeningTo;if(!e)return this;for(var f=a?[a._listenId]:c.keys(e),g=0;g<f.length;g++){var h=e[f[g]];if(!h)break;h.obj.off(b,d,this),h.interop&&h.off(b,d)}return c.isEmpty(e)&&(this._listeningTo=void 0),this};var m=function(a,b,d,e){if(a){var f,g=e.context,h=e.listeners,i=0;if(!b&&!g&&!d){for(f=c.keys(h);i<f.length;i++)h[f[i]].cleanup();return}for(f=b?[b]:c.keys(a);i<f.length;i++){var j=a[b=f[i]];if(!j)break;for(var k=[],l=0;l<j.length;l++){var m=j[l];if(d&&d!==m.callback&&d!==m.callback._callback||g&&g!==m.context)k.push(m);else{var n=m.listening;n&&n.off(b,d)}}k.length?a[b]=k:delete a[b]}return a}};h.once=function(a,b,c){var d=j(n,{},a,b,this.off.bind(this));return"string"==typeof a&&null==c&&(b=void 0),this.on(d,b,c)},h.listenToOnce=function(a,b,c){var d=j(n,{},b,c,this.stopListening.bind(this,a));return this.listenTo(a,d)};var n=function(a,b,d,e){if(d){var f=a[b]=c.once(function(){e(b,f),d.apply(this,arguments)});f._callback=d}return a};h.trigger=function(a){if(!this._events)return this;for(var b=Math.max(0,arguments.length-1),c=Array(b),d=0;d<b;d++)c[d]=arguments[d+1];return j(o,this._events,a,void 0,c),this};var o=function(a,b,c,d){if(a){var e=a[b],f=a.all;e&&f&&(f=f.slice()),e&&p(e,d),f&&p(f,[b].concat(d))}return a},p=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},q=function(a,b){this.id=a._listenId,this.listener=a,this.obj=b,this.interop=!0,this.count=0,this._events=void 0};q.prototype.on=h.on,q.prototype.off=function(a,b){var c;this.interop?(this._events=j(m,this._events,a,b,{context:void 0,listeners:void 0}),c=!this._events):(this.count--,c=0===this.count),c&&this.cleanup()},q.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},h.bind=h.on,h.unbind=h.off,c.extend(b,h);var r=b.Model=function(a,b){var d=a||{};b||(b={}),this.preinitialize.apply(this,arguments),this.cid=c.uniqueId(this.cidPrefix),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{});var e=c.result(this,"defaults");d=c.defaults(c.extend({},e,d),e),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(r.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},matches:function(a){return!!c.iteratee(a,this)(this.attributes)},set:function(a,b,d){if(null==a)return this;if("object"==typeof a?(e=a,d=b):(e={})[a]=b,d||(d={}),!this._validate(e,d))return!1;var e,f=d.unset,g=d.silent,h=[],i=this._changing;this._changing=!0,i||(this._previousAttributes=c.clone(this.attributes),this.changed={});var j=this.attributes,k=this.changed,l=this._previousAttributes;for(var m in e)b=e[m],c.isEqual(j[m],b)||h.push(m),c.isEqual(l[m],b)?delete k[m]:k[m]=b,f?delete j[m]:j[m]=b;if(this.idAttribute in e){var n=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,n,d)}if(!g){h.length&&(this._pending=d);for(var o=0;o<h.length;o++)this.trigger("change:"+h[o],this,j[h[o]],d)}if(i)return this;if(!g)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return!!this.hasChanged()&&c.clone(this.changed);var b,d=this._changing?this._previousAttributes:this.attributes,e={};for(var f in a){var g=a[f];c.isEqual(d[f],g)||(e[f]=g,b=!0)}return!!b&&e},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=c.extend({parse:!0},a);var b=this,d=a.success;return a.success=function(c){var e=a.parse?b.parse(c,a):c;if(!b.set(e,a))return!1;d&&d.call(a.context,b,c,a),b.trigger("sync",b,c,a)},T(this,a),this.sync("read",this,a)},save:function(a,b,d){null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b;var e,f=(d=c.extend({validate:!0,parse:!0},d)).wait;if(e&&!f){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;var g=this,h=d.success,i=this.attributes;d.success=function(a){g.attributes=i;var b=d.parse?g.parse(a,d):a;if(f&&(b=c.extend({},e,b)),b&&!g.set(b,d))return!1;h&&h.call(d.context,g,a,d),g.trigger("sync",g,a,d)},T(this,d),e&&f&&(this.attributes=c.extend({},i,e));var j=this.isNew()?"create":d.patch?"patch":"update";"patch"!==j||d.attrs||(d.attrs=e);var k=this.sync(j,this,d);return this.attributes=i,k},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=a.wait,f=function(){b.stopListening(),b.trigger("destroy",b,b.collection,a)};a.success=function(c){e&&f(),d&&d.call(a.context,b,c,a),b.isNew()||b.trigger("sync",b,c,a)};var g=!1;return this.isNew()?c.defer(a.success):(T(this,a),g=this.sync("delete",this,a)),e||f(),g},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||S();if(this.isNew())return a;var b=this.get(this.idAttribute);return a.replace(/[^\/]$/,"$&/")+encodeURIComponent(b)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend({},a,{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return!d||(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1)}});var s=b.Collection=function(a,b){b||(b={}),this.preinitialize.apply(this,arguments),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},t={add:!0,remove:!0,merge:!0},u={add:!0,remove:!1},v=function(a,b,c){c=Math.min(Math.max(c,0),a.length);var d,e=Array(a.length-c),f=b.length;for(d=0;d<e.length;d++)e[d]=a[d+c];for(d=0;d<f;d++)a[d+c]=b[d];for(d=0;d<e.length;d++)a[d+f+c]=e[d]};c.extend(s.prototype,h,{model:r,preinitialize:function(){},initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,u))},remove:function(a,b){b=c.extend({},b);var d=!c.isArray(a);a=d?[a]:a.slice();var e=this._removeModels(a,b);return!b.silent&&e.length&&(b.changes={added:[],merged:[],removed:e},this.trigger("update",this,b)),d?e[0]:e},set:function(a,b){if(null!=a){(b=c.extend({},t,b)).parse&&!this._isModel(a)&&(a=this.parse(a,b)||[]);var d,e,f=!c.isArray(a);a=f?[a]:a.slice();var g=b.at;null!=g&&(g*=1),g>this.length&&(g=this.length),g<0&&(g+=this.length+1);var h=[],i=[],j=[],k=[],l={},m=b.add,n=b.merge,o=b.remove,p=!1,q=this.comparator&&null==g&&!1!==b.sort,r=c.isString(this.comparator)?this.comparator:null;for(e=0;e<a.length;e++){d=a[e];var s=this.get(d);if(s){if(n&&d!==s){var u=this._isModel(d)?d.attributes:d;b.parse&&(u=s.parse(u,b)),s.set(u,b),j.push(s),q&&!p&&(p=s.hasChanged(r))}l[s.cid]||(l[s.cid]=!0,h.push(s)),a[e]=s}else m&&(d=a[e]=this._prepareModel(d,b))&&(i.push(d),this._addReference(d,b),l[d.cid]=!0,h.push(d))}if(o){for(e=0;e<this.length;e++)l[(d=this.models[e]).cid]||k.push(d);k.length&&this._removeModels(k,b)}var w=!1;if(h.length&&!q&&m&&o?(w=this.length!==h.length||c.some(this.models,function(a,b){return a!==h[b]}),this.models.length=0,v(this.models,h,0),this.length=this.models.length):i.length&&(q&&(p=!0),v(this.models,i,null==g?this.length:g),this.length=this.models.length),p&&this.sort({silent:!0}),!b.silent){for(e=0;e<i.length;e++)null!=g&&(b.index=g+e),(d=i[e]).trigger("add",d,this,b);(p||w)&&this.trigger("sort",this,b),(i.length||k.length||j.length)&&(b.changes={added:i,removed:k,merged:j},this.trigger("update",this,b))}return f?a[0]:a}},reset:function(a,b){b=b?c.clone(b):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a)},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a)},slice:function(){return g.apply(this.models,arguments)},get:function(a){if(null!=a)return this._byId[a]||this._byId[this.modelId(this._isModel(a)?a.attributes:a,a.idAttribute)]||a.cid&&this._byId[a.cid]},has:function(a){return null!=this.get(a)},at:function(a){return a<0&&(a+=this.length),this.models[a]},where:function(a,b){return this[b?"find":"filter"](a)},findWhere:function(a){return this.where(a,!0)},sort:function(a){var b=this.comparator;if(!b)throw Error("Cannot sort a set without a comparator");a||(a={});var d=b.length;return c.isFunction(b)&&(b=b.bind(this)),1===d||c.isString(b)?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return this.map(a+"")},fetch:function(a){var b=(a=c.extend({parse:!0},a)).success,d=this;return a.success=function(c){d[a.reset?"reset":"set"](c,a),b&&b.call(a.context,d,c,a),d.trigger("sync",d,c,a)},T(this,a),this.sync("read",this,a)},create:function(a,b){var d=(b=b?c.clone(b):{}).wait;if(!(a=this._prepareModel(a,b)))return!1;d||this.add(a,b);var e=this,f=b.success;return b.success=function(a,b,c){d&&e.add(a,c),f&&f.call(c.context,a,b,c)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a,b){return a[b||this.model.prototype.idAttribute||"id"]},values:function(){return new x(this,y)},keys:function(){return new x(this,z)},entries:function(){return new x(this,A)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){var d;return this._isModel(a)?(a.collection||(a.collection=this),a):((b=b?c.clone(b):{}).collection=this,(d=this.model.prototype?new this.model(a,b):this.model(a,b)).validationError)?(this.trigger("invalid",this,d.validationError,b),!1):d},_removeModels:function(a,b){for(var c=[],d=0;d<a.length;d++){var e=this.get(a[d]);if(e){var f=this.indexOf(e);this.models.splice(f,1),this.length--,delete this._byId[e.cid];var g=this.modelId(e.attributes,e.idAttribute);null!=g&&delete this._byId[g],b.silent||(b.index=f,e.trigger("remove",e,this,b)),c.push(e),this._removeReference(e,b)}}return c},_isModel:function(a){return a instanceof r},_addReference:function(a,b){this._byId[a.cid]=a;var c=this.modelId(a.attributes,a.idAttribute);null!=c&&(this._byId[c]=a),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){delete this._byId[a.cid];var c=this.modelId(a.attributes,a.idAttribute);null!=c&&delete this._byId[c],this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if(b){if(("add"===a||"remove"===a)&&c!==this)return;if("destroy"===a&&this.remove(b,d),"changeId"===a){var e=this.modelId(b.previousAttributes(),b.idAttribute),f=this.modelId(b.attributes,b.idAttribute);null!=e&&delete this._byId[e],null!=f&&(this._byId[f]=b)}}this.trigger.apply(this,arguments)}});var w="function"==typeof Symbol&&Symbol.iterator;w&&(s.prototype[w]=s.prototype.values);var x=function(a,b){this._collection=a,this._kind=b,this._index=0},y=1,z=2,A=3;w&&(x.prototype[w]=function(){return this}),x.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var a,b=this._collection.at(this._index);if(this._index++,this._kind===y)a=b;else{var c=this._collection.modelId(b.attributes,b.idAttribute);a=this._kind===z?c:[c,b]}return{value:a,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var B=b.View=function(a){this.cid=c.uniqueId("view"),this.preinitialize.apply(this,arguments),c.extend(this,c.pick(a,D)),this._ensureElement(),this.initialize.apply(this,arguments)},C=/^(\S+)\s*(.*)$/,D=["model","collection","el","id","attributes","className","tagName","events"];c.extend(B.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(a){return this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this},_setElement:function(a){this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0]},delegateEvents:function(a){if(a||(a=c.result(this,"events")),!a)return this;for(var b in this.undelegateEvents(),a){var d=a[b];if(c.isFunction(d)||(d=this[d]),d){var e=b.match(C);this.delegate(e[1],e[2],d.bind(this))}}return this},delegate:function(a,b,c){return this.$el.on(a+".delegateEvents"+this.cid,b,c),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(a,b,c){return this.$el.off(a+".delegateEvents"+this.cid,b,c),this},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"));else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a.class=c.result(this,"className")),this.setElement(this._createElement(c.result(this,"tagName"))),this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}});var E=function(a,b,c,d){switch(b){case 1:return function(){return a[c](this[d])};case 2:return function(b){return a[c](this[d],b)};case 3:return function(b,e){return a[c](this[d],G(b,this),e)};case 4:return function(b,e,f){return a[c](this[d],G(b,this),e,f)};default:return function(){var b=g.call(arguments);return b.unshift(this[d]),a[c].apply(a,b)}}},F=function(a,b,d,e){c.each(d,function(c,d){b[d]&&(a.prototype[d]=E(b,c,d,e))})},G=function(a,b){return c.isFunction(a)?a:c.isObject(a)&&!b._isModel(a)?H(a):c.isString(a)?function(b){return b.get(a)}:a},H=function(a){var b=c.matches(a);return function(a){return b(a.attributes)}};c.each([[s,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[r,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(a){var b=a[0],d=a[1],e=a[2];b.mixin=function(a){var d=c.reduce(c.functions(a),function(a,b){return a[b]=0,a},{});F(b,a,d,e)},F(b,c,d,e)}),b.sync=function(a,d,e){var f=I[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||S()),null==e.data&&d&&("create"===a||"update"===a||"patch"===a)&&(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){if(a.setRequestHeader("X-HTTP-Method-Override",f),h)return h.apply(this,arguments)}}"GET"===g.type||e.emulateJSON||(g.processData=!1);var i=e.error;e.error=function(a,b,c){e.textStatus=b,e.errorThrown=c,i&&i.call(e.context,a,b,c)};var j=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,j,e),j};var I={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var J=b.Router=function(a){a||(a={}),this.preinitialize.apply(this,arguments),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},K=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,M=/\*\w+/g,N=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(J.prototype,h,{preinitialize:function(){},initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);!1!==f.execute(e,g,d)&&(f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g))}),this},execute:function(a,b,c){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return RegExp("^"+(a=a.replace(N,"\\$&").replace(K,"(?:$1)?").replace(L,function(a,b){return b?a:"([^/?]+)"}).replace(M,"([^?]*?)"))+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var O=b.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,Q=/^\/+|\/+$/g,R=/#.*$/;O.started=!1,c.extend(O.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,"%2525"))},getSearch:function(){var a=this.location.href.replace(/#.*/,"").match(/\?.+/);return a?a[0]:""},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getPath:function(){var a=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===a.charAt(0)?a.slice(1):a},getFragment:function(a){return null==a&&(a=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),a.replace(P,"")},start:function(a){if(O.started)throw Error("Backbone.history has already been started");if(O.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Q,"/"),this._wantsHashChange&&this._wantsPushState)if(this._hasPushState||this.atRoot())this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});else{var b=this.root.slice(0,-1)||"/";return this.location.replace(b+"#"+this.getPath()),!0}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var d=document.body,e=d.insertBefore(this.iframe,d.firstChild).contentWindow;e.document.open(),e.document.close(),e.location.hash="#"+this.fragment}var f=window.addEventListener||function(a,b){return attachEvent("on"+a,b)};if(this._usePushState?f("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?f("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var a=window.removeEventListener||function(a,b){return detachEvent("on"+a,b)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&a("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();if(b===this.fragment&&this.iframe&&(b=this.getHash(this.iframe.contentWindow)),b===this.fragment)return!1;this.iframe&&this.navigate(b),this.loadUrl()},loadUrl:function(a){return!!this.matchRoot()&&(a=this.fragment=this.getFragment(a),c.some(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0}))},navigate:function(a,b){if(!O.started)return!1;b&&!0!==b||(b={trigger:!!b}),a=this.getFragment(a||"");var c=this.root;(""===a||"?"===a.charAt(0))&&(c=c.slice(0,-1)||"/");var d=c+a;a=a.replace(R,"");var e=this.decodeFragment(a);if(this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,d);else if(!this._wantsHashChange)return this.location.assign(d);else if(this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getHash(this.iframe.contentWindow)){var f=this.iframe.contentWindow;b.replace||(f.document.open(),f.document.close()),this._updateHash(f.location,a,b.replace)}if(b.trigger)return this.loadUrl(a)}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new O,r.extend=s.extend=J.extend=B.extend=O.extend=function(a,b){var d,e=this;return d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b),d.prototype=c.create(e.prototype,a),d.prototype.constructor=d,d.__super__=e.prototype,d};var S=function(){throw Error('A "url" property or function must be specified')},T=function(a,b){var c=b.error;b.error=function(d){c&&c.call(b.context,a,d,b),a.trigger("error",a,d,b)}};return b})},3640:(a,b,c)=>{!function(a){a.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(a,b){return/^[;{}]$/.test(b)}}),a.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(a,b,c,d){return this.jsonMode?/^[\[,{]$/.test(b)||/^}/.test(c):(";"!=b||!d.lexical||")"!=d.lexical.type)&&/^[;{}]$/.test(b)&&!/^;/.test(c)}});var b=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;a.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",newlineAfterToken:function(a,c,d,e){var f=!1;return"html"==this.configuration&&(f=!!e.context&&b.test(e.context.tagName)),!f&&("tag"==a&&/>$/.test(c)&&e.context||/^</.test(d))}}),a.defineExtension("commentRange",function(b,c,d){var e=this,f=a.innerMode(e.getMode(),e.getTokenAt(c).state).mode;e.operation(function(){if(b)e.replaceRange(f.commentEnd,d),e.replaceRange(f.commentStart,c),c.line==d.line&&c.ch==d.ch&&e.setCursor(c.line,c.ch+f.commentStart.length);else{var a=e.getRange(c,d),g=a.indexOf(f.commentStart),h=a.lastIndexOf(f.commentEnd);g>-1&&h>-1&&h>g&&(a=a.substr(0,g)+a.substring(g+f.commentStart.length,h)+a.substr(h+f.commentEnd.length)),e.replaceRange(a,c,d)}})}),a.defineExtension("autoIndentRange",function(a,b){var c=this;this.operation(function(){for(var d=a.line;d<=b.line;d++)c.indentLine(d,"smart")})}),a.defineExtension("autoFormatRange",function(b,c){var d=this,e=d.getMode(),f=d.getRange(b,c).split("\n"),g=a.copyState(e,d.getTokenAt(b).state),h=d.getOption("tabSize"),i="",j=0,k=0===b.ch;function l(){i+="\n",k=!0,++j}for(var m=0;m<f.length;++m){for(var n=new a.StringStream(f[m],h);!n.eol();){var o=a.innerMode(e,g),p=e.token(n,g),q=n.current();n.start=n.pos,(!k||/\S/.test(q))&&(i+=q,k=!1),!k&&o.mode.newlineAfterToken&&o.mode.newlineAfterToken(p,q,n.string.slice(n.pos)||f[m+1]||"",o.state)&&l()}!n.pos&&e.blankLine&&e.blankLine(g),!k&&m<f.length-1&&l()}d.operation(function(){d.replaceRange(i,b,c);for(var a=b.line+1,e=b.line+j;a<=e;++a)d.indentLine(a,"smart");d.setSelection(b,d.getCursor(!1))})})}(c(4408))},4408:function(a){a.exports=function(){var a,b,c,d,e,f,g,h,i,j=navigator.userAgent,k=navigator.platform,l=/gecko\/\d/i.test(j),m=/MSIE \d/.test(j),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(j),o=/Edge\/(\d+)/.exec(j),p=m||n||o,q=p&&(m?document.documentMode||6:+(o||n)[1]),r=!o&&/WebKit\//.test(j),s=r&&/Qt\/\d+\.\d+/.test(j),t=!o&&/Chrome\//.test(j),u=/Opera\//.test(j),v=/Apple Computer/.test(navigator.vendor),w=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(j),x=/PhantomJS/.test(j),y=v&&(/Mobile\/\w+/.test(j)||navigator.maxTouchPoints>2),z=/Android/.test(j),A=y||z||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(j),B=y||/Mac/.test(k),C=/\bCrOS\b/.test(j),D=/win/i.test(k),E=u&&j.match(/Version\/(\d*\.\d*)/);E&&(E=Number(E[1])),E&&E>=15&&(u=!1,r=!0);var F=B&&(s||u&&(null==E||E<12.11)),G=l||p&&q>=9;function H(a){return RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}var I=function(a,b){var c=a.className,d=H(b).exec(c);if(d){var e=c.slice(d.index+d[0].length);a.className=c.slice(0,d.index)+(e?d[1]+e:"")}};function J(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function K(a,b){return J(a).appendChild(b)}function L(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)e.appendChild(document.createTextNode(b));else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function M(a,b,c,d){var e=L(a,b,c,d);return e.setAttribute("role","presentation"),e}function N(a,b){if(3==b.nodeType&&(b=b.parentNode),a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)}function O(){var a;try{a=document.activeElement}catch(b){a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a}function P(a,b){var c=a.className;H(b).test(c)||(a.className+=(c?" ":"")+b)}function Q(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!H(c[d]).test(b)&&(b+=" "+c[d]);return b}d=document.createRange?function(a,b,c,d){var e=document.createRange();return e.setEnd(d||a,c),e.setStart(a,b),e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(a){return d}return d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d};var R=function(a){a.select()};function S(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function T(a,b,c){for(var d in b||(b={}),a)a.hasOwnProperty(d)&&(!1!==c||!b.hasOwnProperty(d))&&(b[d]=a[d]);return b}function U(a,b,c,d,e){null==b&&-1==(b=a.search(/[^\s\u00a0]/))&&(b=a.length);for(var f=d||0,g=e||0;;){var h=a.indexOf("	",f);if(h<0||h>=b)return g+(b-f);g+=h-f,g+=c-g%c,f=h+1}}y?R=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:p&&(R=function(a){try{a.select()}catch(a){}});var V=function(){this.id=null,this.f=null,this.time=0,this.handler=S(this.onTimeout,this)};function W(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return -1}V.prototype.onTimeout=function(a){a.id=0,a.time<=+new Date?a.f():setTimeout(a.handler,a.time-new Date)},V.prototype.set=function(a,b){this.f=b;var c=+new Date+a;(!this.id||c<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,a),this.time=c)};var X={toString:function(){return"CodeMirror.Pass"}},Y={scroll:!1},Z={origin:"*mouse"},$={origin:"+move"};function _(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("	",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);if(e+=f-d,e+=c-e%c,d=f+1,e>=b)return d}}var aa=[""];function ab(a){for(;aa.length<=a;)aa.push(ac(aa)+" ");return aa[a]}function ac(a){return a[a.length-1]}function ad(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function ae(){}function af(a,b){var c;return Object.create?c=Object.create(a):(ae.prototype=a,c=new ae),b&&T(b,c),c}var ag=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ah(a){return/\w/.test(a)||a>"\x80"&&(a.toUpperCase()!=a.toLowerCase()||ag.test(a))}function ai(a,b){return b?!!(b.source.indexOf("\\w")>-1&&ah(a))||b.test(a):ah(a)}function aj(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}var ak=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function al(a){return a.charCodeAt(0)>=768&&ak.test(a)}function am(a,b,c){for(;(c<0?b>0:b<a.length)&&al(a.charAt(b));)b+=c;return b}function an(a,b,c){for(var d=b>c?-1:1;;){if(b==c)return b;var e=(b+c)/2,f=d<0?Math.ceil(e):Math.floor(e);if(f==b)return a(f)?b:c;a(f)?c=f:b=f+d}}var ao=null;function ap(a,b,c){var d;ao=null;for(var e=0;e<a.length;++e){var f=a[e];if(f.from<b&&f.to>b)return e;f.to==b&&(f.from!=f.to&&"before"==c?d=e:ao=e),f.from==b&&(f.from!=f.to&&"before"!=c?d=e:ao=e)}return null!=d?d:ao}var aq=function(){var a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,b=/[stwN]/,c=/[LRr]/,d=/[Lb1n]/,e=/[1n]/;function f(a,b,c){this.level=a,this.from=b,this.to=c}return function(g,h){var i="ltr"==h?"L":"R";if(0==g.length||"ltr"==h&&!a.test(g))return!1;for(var j=g.length,k=[],l=0;l<j;++l)k.push(function(a){if(a<=247)return"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(a);if(1424<=a&&a<=1524)return"R";if(1536<=a&&a<=1785)return"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(a-1536);if(1774<=a&&a<=2220)return"r";if(8192<=a&&a<=8203)return"w";else if(8204==a)return"b";else return"L"}(g.charCodeAt(l)));for(var m=0,n=i;m<j;++m){var o=k[m];"m"==o?k[m]=n:n=o}for(var p=0,q=i;p<j;++p){var r=k[p];"1"==r&&"r"==q?k[p]="n":c.test(r)&&(q=r,"r"==r&&(k[p]="R"))}for(var s=1,t=k[0];s<j-1;++s){var u=k[s];"+"==u&&"1"==t&&"1"==k[s+1]?k[s]="1":","==u&&t==k[s+1]&&("1"==t||"n"==t)&&(k[s]=t),t=u}for(var v=0;v<j;++v){var w=k[v];if(","==w)k[v]="N";else if("%"==w){var x=void 0;for(x=v+1;x<j&&"%"==k[x];++x);for(var y=v&&"!"==k[v-1]||x<j&&"1"==k[x]?"1":"N",z=v;z<x;++z)k[z]=y;v=x-1}}for(var A=0,B=i;A<j;++A){var C=k[A];"L"==B&&"1"==C?k[A]="L":c.test(C)&&(B=C)}for(var D=0;D<j;++D)if(b.test(k[D])){var E=void 0;for(E=D+1;E<j&&b.test(k[E]);++E);for(var F=(D?k[D-1]:i)=="L",G=F==((E<j?k[E]:i)=="L")?F?"L":"R":i,H=D;H<E;++H)k[H]=G;D=E-1}for(var I,J=[],K=0;K<j;)if(d.test(k[K])){var L=K;for(++K;K<j&&d.test(k[K]);++K);J.push(new f(0,L,K))}else{var M=K,N=J.length,O=+("rtl"==h);for(++K;K<j&&"L"!=k[K];++K);for(var P=M;P<K;)if(e.test(k[P])){M<P&&(J.splice(N,0,new f(1,M,P)),N+=O);var Q=P;for(++P;P<K&&e.test(k[P]);++P);J.splice(N,0,new f(2,Q,P)),N+=O,M=P}else++P;M<K&&J.splice(N,0,new f(1,M,K))}return"ltr"==h&&(1==J[0].level&&(I=g.match(/^\s+/))&&(J[0].from=I[0].length,J.unshift(new f(0,0,I[0].length))),1==ac(J).level&&(I=g.match(/\s+$/))&&(ac(J).to-=I[0].length,J.push(new f(0,j-I[0].length,j)))),"rtl"==h?J.reverse():J}}();function ar(a,b){var c=a.order;return null==c&&(c=a.order=aq(a.text,b)),c}var as=[],at=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={});d[b]=(d[b]||as).concat(c)}};function au(a,b){return a._handlers&&a._handlers[b]||as}function av(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=a._handlers,e=d&&d[b];if(e){var f=W(e,c);f>-1&&(d[b]=e.slice(0,f).concat(e.slice(f+1)))}}}function aw(a,b){var c=au(a,b);if(c.length)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function ax(a,b,c){return"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}}),aw(a,c||b.type,a,b),aD(b)||b.codemirrorIgnore}function ay(a){var b=a._handlers&&a._handlers.cursorActivity;if(b)for(var c=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]),d=0;d<b.length;++d)-1==W(c,b[d])&&c.push(b[d])}function az(a,b){return au(a,b).length>0}function aA(a){a.prototype.on=function(a,b){at(this,a,b)},a.prototype.off=function(a,b){av(this,a,b)}}function aB(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function aC(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function aD(a){return null!=a.defaultPrevented?a.defaultPrevented:!1==a.returnValue}function aE(a){aB(a),aC(a)}function aF(a){return a.target||a.srcElement}function aG(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),B&&a.ctrlKey&&1==b&&(b=3),b}var aH=function(){if(p&&q<9)return!1;var a=L("div");return"draggable"in a||"dragDrop"in a}(),aI=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},aJ=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(a){return!1}}:function(a){var b;try{b=a.ownerDocument.selection.createRange()}catch(a){}return!!b&&b.parentElement()==a&&0!=b.compareEndPoints("StartToEnd",b)},aK="oncopy"in(a=L("div"))||(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy),aL=null,aM={},aN={};function aO(a,b){arguments.length>2&&(b.dependencies=Array.prototype.slice.call(arguments,2)),aM[a]=b}function aP(a){if("string"==typeof a&&aN.hasOwnProperty(a))a=aN[a];else if(a&&"string"==typeof a.name&&aN.hasOwnProperty(a.name)){var b=aN[a.name];"string"==typeof b&&(b={name:b}),(a=af(b,a)).name=b.name}else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return aP("application/xml");else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return aP("application/json");return"string"==typeof a?{name:a}:a||{name:"null"}}function aQ(a,b){var c=aM[(b=aP(b)).name];if(!c)return aQ(a,"text/plain");var d=c(a,b);if(aR.hasOwnProperty(b.name)){var e=aR[b.name];for(var f in e)e.hasOwnProperty(f)&&(d.hasOwnProperty(f)&&(d["_"+f]=d[f]),d[f]=e[f])}if(d.name=b.name,b.helperType&&(d.helperType=b.helperType),b.modeProps)for(var g in b.modeProps)d[g]=b.modeProps[g];return d}var aR={};function aS(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function aT(a,b){for(var c;a.innerMode&&(c=a.innerMode(b))&&c.mode!=a;)b=c.state,a=c.mode;return c||{mode:a,state:b}}function aU(a,b,c){return!a.startState||a.startState(b,c)}var aV=function(a,b,c){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=c};function aW(a,b){if((b-=a.first)<0||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(b<f){c=e;break}b-=f}return c.lines[b]}function aX(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function aY(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function aZ(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function a$(a){if(null==a.parent)return null;for(var b=a.parent,c=W(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function a_(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f,c+=e.chunkSize()}return c}while(!a.lines);for(var g=0;g<a.lines.length;++g){var h=a.lines[g].height;if(b<h)break;b-=h}return c+g}function a0(a,b){return b>=a.first&&b<a.first+a.size}function a1(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function a2(a,b,c){if(void 0===c&&(c=null),!(this instanceof a2))return new a2(a,b,c);this.line=a,this.ch=b,this.sticky=c}function a3(a,b){return a.line-b.line||a.ch-b.ch}function a4(a,b){return a.sticky==b.sticky&&0==a3(a,b)}function a5(a){return a2(a.line,a.ch)}function a6(a,b){return 0>a3(a,b)?b:a}function a7(a,b){return 0>a3(a,b)?a:b}function a8(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function a9(a,b){if(b.line<a.first)return a2(a.first,0);var c,d,e,f=a.first+a.size-1;return b.line>f?a2(f,aW(a,f).text.length):(c=b,d=aW(a,b.line).text.length,null==(e=c.ch)||e>d?a2(c.line,d):e<0?a2(c.line,0):c)}function ba(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=a9(a,b[d]);return c}aV.prototype.eol=function(){return this.pos>=this.string.length},aV.prototype.sol=function(){return this.pos==this.lineStart},aV.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},aV.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},aV.prototype.eat=function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},aV.prototype.eatWhile=function(a){for(var b=this.pos;this.eat(a););return this.pos>b},aV.prototype.eatSpace=function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},aV.prototype.skipToEnd=function(){this.pos=this.string.length},aV.prototype.skipTo=function(a){var b=this.string.indexOf(a,this.pos);if(b>-1)return this.pos=b,!0},aV.prototype.backUp=function(a){this.pos-=a},aV.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=U(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?U(this.string,this.lineStart,this.tabSize):0)},aV.prototype.indentation=function(){return U(this.string,null,this.tabSize)-(this.lineStart?U(this.string,this.lineStart,this.tabSize):0)},aV.prototype.match=function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a};if(d(this.string.substr(this.pos,a.length))==d(a))return!1!==b&&(this.pos+=a.length),!0}else{var e=this.string.slice(this.pos).match(a);return e&&e.index>0?null:(e&&!1!==b&&(this.pos+=e[0].length),e)}},aV.prototype.current=function(){return this.string.slice(this.start,this.pos)},aV.prototype.hideFirstChars=function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}},aV.prototype.lookAhead=function(a){var b=this.lineOracle;return b&&b.lookAhead(a)},aV.prototype.baseToken=function(){var a=this.lineOracle;return a&&a.baseToken(this.pos)};var bb=function(a,b){this.state=a,this.lookAhead=b},bc=function(a,b,c,d){this.state=b,this.doc=a,this.line=c,this.maxLookAhead=d||0,this.baseTokens=null,this.baseTokenPos=1};function bd(a,b,c,d){var e=[a.state.modeGen],f={};bm(a,b.text,a.doc.mode,c,function(a,b){return e.push(a,b)},f,d);for(var g=c.state,h=0;h<a.state.overlays.length;++h)!function(d){c.baseTokens=e;var h=a.state.overlays[d],i=1,j=0;c.state=!0,bm(a,b.text,h.mode,c,function(a,b){for(var c=i;j<a;){var d=e[i];d>a&&e.splice(i,1,a,e[i+1],d),i+=2,j=Math.min(a,d)}if(b)if(h.opaque)e.splice(c,i-c,a,"overlay "+b),i=c+2;else for(;c<i;c+=2){var f=e[c+1];e[c+1]=(f?f+" ":"")+"overlay "+b}},f),c.state=g,c.baseTokens=null,c.baseTokenPos=1}(h);return{styles:e,classes:f.bgClass||f.textClass?f:null}}function be(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=bf(a,a$(b)),e=b.text.length>a.options.maxHighlightLength&&aS(a.doc.mode,d.state),f=bd(a,b,d);e&&(d.state=e),b.stateAfter=d.save(!e),b.styles=f.styles,f.classes?b.styleClasses=f.classes:b.styleClasses&&(b.styleClasses=null),c===a.doc.highlightFrontier&&(a.doc.modeFrontier=Math.max(a.doc.modeFrontier,++a.doc.highlightFrontier))}return b.styles}function bf(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return new bc(d,!0,b);var f=function(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1e3:100),h=b;h>g;--h){if(h<=f.first)return f.first;var i=aW(f,h-1),j=i.stateAfter;if(j&&(!c||h+(j instanceof bb?j.lookAhead:0)<=f.modeFrontier))return h;var k=U(i.text,null,a.options.tabSize);(null==e||d>k)&&(e=h-1,d=k)}return e}(a,b,c),g=f>d.first&&aW(d,f-1).stateAfter,h=g?bc.fromSaved(d,g,f):new bc(d,aU(d.mode),f);return d.iter(f,b,function(c){bg(a,c.text,h);var d=h.line;c.stateAfter=d==b-1||d%5==0||d>=e.viewFrom&&d<e.viewTo?h.save():null,h.nextLine()}),c&&(d.modeFrontier=h.line),h}function bg(a,b,c,d){var e=a.doc.mode,f=new aV(b,a.options.tabSize,c);for(f.start=f.pos=d||0,""==b&&bh(e,c.state);!f.eol();)bi(e,f,c.state),f.start=f.pos}function bh(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode){var c=aT(a,b);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function bi(a,b,c,d){for(var e=0;e<10;e++){d&&(d[0]=aT(a,c).mode);var f=a.token(b,c);if(b.pos>b.start)return f}throw Error("Mode "+a.name+" failed to advance stream.")}bc.prototype.lookAhead=function(a){var b=this.doc.getLine(this.line+a);return null!=b&&a>this.maxLookAhead&&(this.maxLookAhead=a),b},bc.prototype.baseToken=function(a){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=a;)this.baseTokenPos+=2;var b=this.baseTokens[this.baseTokenPos+1];return{type:b&&b.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-a}},bc.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},bc.fromSaved=function(a,b,c){return b instanceof bb?new bc(a,aS(a.mode,b.state),c,b.lookAhead):new bc(a,aS(a.mode,b),c)},bc.prototype.save=function(a){var b=!1!==a?aS(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new bb(b,this.maxLookAhead):b};var bj=function(a,b,c){this.start=a.start,this.end=a.pos,this.string=a.current(),this.type=b||null,this.state=c};function bk(a,b,c,d){var e,f=a.doc,g=f.mode;b=a9(f,b);var h,i=aW(f,b.line),j=bf(a,b.line,c),k=new aV(i.text,a.options.tabSize,j);for(d&&(h=[]);(d||k.pos<b.ch)&&!k.eol();)k.start=k.pos,e=bi(g,k,j.state),d&&h.push(new bj(k,e,aS(f.mode,j.state)));return d?h:new bj(k,e,j.state)}function bl(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:RegExp("(?:^|\\s)"+c[2]+"(?:$|\\s)").test(b[d])||(b[d]+=" "+c[2])}return a}function bm(a,b,c,d,e,f,g){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var i,j=0,k=null,l=new aV(b,a.options.tabSize,d),m=a.options.addModeClass&&[null];for(""==b&&bl(bh(c,d.state),f);!l.eol();){if(l.pos>a.options.maxHighlightLength?(h=!1,g&&bg(a,b,d,l.pos),l.pos=b.length,i=null):i=bl(bi(c,l,d.state,m),f),m){var n=m[0].name;n&&(i="m-"+(i?n+" "+i:n))}if(!h||k!=i){for(;j<l.start;)e(j=Math.min(l.start,j+5e3),k);k=i}l.start=l.pos}for(;j<l.pos;){var o=Math.min(l.pos,j+5e3);e(o,k),j=o}}var bn=!1,bo=!1;function bp(a,b,c){this.marker=a,this.from=b,this.to=c}function bq(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function br(a,b){if(b.full)return null;var c=a0(a,b.from.line)&&aW(a,b.from.line).markedSpans,d=a0(a,b.to.line)&&aW(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==a3(b.from,b.to),h=function(a,b,c){var d;if(a)for(var e=0;e<a.length;++e){var f=a[e],g=f.marker;if(null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b)||f.from==b&&"bookmark"==g.type&&(!c||!f.marker.insertLeft)){var h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push(new bp(g,f.from,h?null:f.to))}}return d}(c,e,g),i=function(a,b,c){var d;if(a)for(var e=0;e<a.length;++e){var f=a[e],g=f.marker;if(null==f.to||(g.inclusiveRight?f.to>=b:f.to>b)||f.from==b&&"bookmark"==g.type&&(!c||f.marker.insertLeft)){var h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push(new bp(g,h?null:f.from-b,null==f.to?null:f.to-b))}}return d}(d,f,g),j=1==b.text.length,k=ac(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=bq(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var o=0;o<i.length;++o){var p=i[o];null!=p.to&&(p.to+=k),null==p.from?!bq(h,p.marker)&&(p.from=k,j&&(h||(h=[])).push(p)):(p.from+=k,j&&(h||(h=[])).push(p))}h&&(h=bs(h)),i&&i!=h&&(i=bs(i));var q=[h];if(!j){var r,s=b.text.length-2;if(s>0&&h)for(var t=0;t<h.length;++t)null==h[t].to&&(r||(r=[])).push(new bp(h[t].marker,null,null));for(var u=0;u<s;++u)q.push(r);q.push(i)}return q}function bs(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function bt(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function bu(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function bv(a){return a.inclusiveLeft?-1:0}function bw(a){return+!!a.inclusiveRight}function bx(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var d=a.find(),e=b.find(),f=a3(d.from,e.from)||bv(a)-bv(b);if(f)return-f;var g=a3(d.to,e.to)||bw(a)-bw(b);return g||b.id-a.id}function by(a,b){var c,d=bo&&a.markedSpans;if(d)for(var e=void 0,f=0;f<d.length;++f)(e=d[f]).marker.collapsed&&(b?e.from:e.to)==null&&(!c||0>bx(c,e.marker))&&(c=e.marker);return c}function bz(a,b,c,d,e){var f=aW(a,b),g=bo&&f.markedSpans;if(g)for(var h=0;h<g.length;++h){var i=g[h];if(i.marker.collapsed){var j=i.marker.find(0),k=a3(j.from,c)||bv(i.marker)-bv(e),l=a3(j.to,d)||bw(i.marker)-bw(e);if((!(k>=0)||!(l<=0))&&(!(k<=0)||!(l>=0))&&(k<=0&&(i.marker.inclusiveRight&&e.inclusiveLeft?a3(j.to,c)>=0:a3(j.to,c)>0)||k>=0&&(i.marker.inclusiveRight&&e.inclusiveLeft?0>=a3(j.from,d):0>a3(j.from,d))))return!0}}}function bA(a){for(var b;b=by(a,!0);)a=b.find(-1,!0).line;return a}function bB(a,b){var c=aW(a,b),d=bA(c);return c==d?b:a$(d)}function bC(a,b){if(b>a.lastLine())return b;var c,d=aW(a,b);if(!bD(a,d))return b;for(;c=by(d,!1);)d=c.find(1,!0).line;return a$(d)+1}function bD(a,b){var c=bo&&b.markedSpans;if(c){for(var d=void 0,e=0;e<c.length;++e)if((d=c[e]).marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&function a(b,c,d){if(null==d.to){var e=d.marker.find(1,!0);return a(b,e.line,bq(e.line.markedSpans,d.marker))}if(d.marker.inclusiveRight&&d.to==c.text.length)return!0;for(var f=void 0,g=0;g<c.markedSpans.length;++g)if((f=c.markedSpans[g]).marker.collapsed&&!f.marker.widgetNode&&f.from==d.to&&(null==f.to||f.to!=d.from)&&(f.marker.inclusiveLeft||d.marker.inclusiveRight)&&a(b,c,f))return!0}(a,b,d)))return!0}}function bE(a){a=bA(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;b+=e.height}for(var f=c.parent;f;f=(c=f).parent)for(var g=0;g<f.children.length;++g){var h=f.children[g];if(h==c)break;b+=h.height}return b}function bF(a){if(0==a.height)return 0;for(var b,c=a.text.length,d=a;b=by(d,!0);){var e=b.find(0,!0);d=e.from.line,c+=e.from.ch-e.to.ch}for(d=a;b=by(d,!1);){var f=b.find(0,!0);c-=d.text.length-f.from.ch,c+=(d=f.to.line).text.length-f.to.ch}return c}function bG(a){var b=a.display,c=a.doc;b.maxLine=aW(c,c.first),b.maxLineLength=bF(b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var c=bF(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}var bH=function(a,b,c){this.text=a,bu(this,b),this.height=c?c(this):1};bH.prototype.lineNo=function(){return a$(this)},aA(bH);var bI={},bJ={};function bK(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?bJ:bI;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function bL(a,b){var c=M("span",null,null,r?"padding-right: .1px":null),g={pre:M("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,trailingSpace:!1,splitSpaces:a.getOption("lineWrapping")};b.measure={};for(var h=0;h<=(b.rest?b.rest.length:0);h++){var i=h?b.rest[h-1]:b.line,j=void 0;g.pos=0,g.addToken=bM,function(a){if(null!=f)return f;var b=K(a,document.createTextNode("AA")),c=d(b,0,1).getBoundingClientRect(),e=d(b,1,2).getBoundingClientRect();return J(a),!!c&&c.left!=c.right&&(f=e.right-c.right<3)}(a.display.measure)&&(j=ar(i,a.doc.direction))&&(g.addToken=function(a,b){return function(c,d,e,f,g,h,i){e=e?e+" cm-force-border":"cm-force-border";for(var j=c.pos,k=j+d.length;;){for(var l=void 0,m=0;m<b.length&&(!((l=b[m]).to>j)||!(l.from<=j));m++);if(l.to>=k)return a(c,d,e,f,g,h,i);a(c,d.slice(0,l.to-j),e,f,null,h,i),f=null,d=d.slice(l.to-j),j=l.to}}}(g.addToken,j)),g.map=[];var k=b!=a.display.externalMeasured&&a$(i);(function(a,b,c){var d=a.markedSpans,e=a.text,f=0;if(!d){for(var g=1;g<c.length;g+=2)b.addToken(b,e.slice(f,f=c[g]),bK(c[g+1],b.cm.options));return}for(var h,i,j,k,l,m,n,o=e.length,p=0,q=1,r="",s=0;;){if(s==p){j=k=l=i="",n=null,m=null,s=1/0;for(var t=[],u=void 0,v=0;v<d.length;++v){var w=d[v],x=w.marker;if("bookmark"==x.type&&w.from==p&&x.widgetNode)t.push(x);else if(w.from<=p&&(null==w.to||w.to>p||x.collapsed&&w.to==p&&w.from==p)){if(null!=w.to&&w.to!=p&&s>w.to&&(s=w.to,k=""),x.className&&(j+=" "+x.className),x.css&&(i=(i?i+";":"")+x.css),x.startStyle&&w.from==p&&(l+=" "+x.startStyle),x.endStyle&&w.to==s&&(u||(u=[])).push(x.endStyle,w.to),x.title&&((n||(n={})).title=x.title),x.attributes)for(var y in x.attributes)(n||(n={}))[y]=x.attributes[y];x.collapsed&&(!m||0>bx(m.marker,x))&&(m=w)}else w.from>p&&s>w.from&&(s=w.from)}if(u)for(var z=0;z<u.length;z+=2)u[z+1]==s&&(k+=" "+u[z]);if(!m||m.from==p)for(var A=0;A<t.length;++A)bN(b,0,t[A]);if(m&&(m.from||0)==p){if(bN(b,(null==m.to?o+1:m.to)-p,m.marker,null==m.from),null==m.to)return;m.to==p&&(m=!1)}}if(p>=o)break;for(var B=Math.min(o,s);;){if(r){var C=p+r.length;if(!m){var D=C>B?r.slice(0,B-p):r;b.addToken(b,D,h?h+j:j,l,p+D.length==s?k:"",i,n)}if(C>=B){r=r.slice(B-p),p=B;break}p=C,l=""}r=e.slice(f,f=c[q++]),h=bK(c[q++],b.cm.options)}}})(i,g,be(a,i,k)),i.styleClasses&&(i.styleClasses.bgClass&&(g.bgClass=Q(i.styleClasses.bgClass,g.bgClass||"")),i.styleClasses.textClass&&(g.textClass=Q(i.styleClasses.textClass,g.textClass||""))),0==g.map.length&&g.map.push(0,0,g.content.appendChild(function(a){if(null==e){var b=L("span","");K(a,L("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(e=b.offsetWidth<=1&&b.offsetHeight>2&&!(p&&q<8))}var c=e?L("span",""):L("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return c.setAttribute("cm-text",""),c}(a.display.measure))),0==h?(b.measure.map=g.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(g.map),(b.measure.caches||(b.measure.caches=[])).push({}))}if(r){var l=g.content.lastChild;(/\bcm-tab\b/.test(l.className)||l.querySelector&&l.querySelector(".cm-tab"))&&(g.content.className="cm-tab-wrap-hack")}return aw(a,"renderLine",a,b.line,g.pre),g.pre.className&&(g.textClass=Q(g.pre.className,g.textClass||"")),g}function bM(a,b,c,d,e,f,g){if(b){var h,i=a.splitSpaces?function(a,b){if(a.length>1&&!/  /.test(a))return a;for(var c=b,d="",e=0;e<a.length;e++){var f=a.charAt(e);" "==f&&c&&(e==a.length-1||32==a.charCodeAt(e+1))&&(f="\xa0"),d+=f,c=" "==f}return d}(b,a.trailingSpace):b,j=a.cm.state.specialChars,k=!1;if(j.test(b)){h=document.createDocumentFragment();for(var l=0;;){j.lastIndex=l;var m=j.exec(b),n=m?m.index-l:b.length-l;if(n){var o=document.createTextNode(i.slice(l,l+n));p&&q<9?h.appendChild(L("span",[o])):h.appendChild(o),a.map.push(a.pos,a.pos+n,o),a.col+=n,a.pos+=n}if(!m)break;l+=n+1;var r=void 0;if("	"==m[0]){var s=a.cm.options.tabSize,t=s-a.col%s;(r=h.appendChild(L("span",ab(t),"cm-tab"))).setAttribute("role","presentation"),r.setAttribute("cm-text","	"),a.col+=t}else"\r"==m[0]||"\n"==m[0]?(r=h.appendChild(L("span","\r"==m[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",m[0]):((r=a.cm.options.specialCharPlaceholder(m[0])).setAttribute("cm-text",m[0]),p&&q<9?h.appendChild(L("span",[r])):h.appendChild(r)),a.col+=1;a.map.push(a.pos,a.pos+1,r),a.pos++}}else a.col+=b.length,h=document.createTextNode(i),a.map.push(a.pos,a.pos+b.length,h),p&&q<9&&(k=!0),a.pos+=b.length;if(a.trailingSpace=32==i.charCodeAt(b.length-1),c||d||e||k||f||g){var u=c||"";d&&(u+=d),e&&(u+=e);var v=L("span",[h],u,f);if(g)for(var w in g)g.hasOwnProperty(w)&&"style"!=w&&"class"!=w&&v.setAttribute(w,g[w]);return a.content.appendChild(v)}a.content.appendChild(h)}}function bN(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e),!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id)),e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e)),a.pos+=b,a.trailingSpace=!1}function bO(a,b,c){this.line=b,this.rest=function(a){for(var b,c;b=by(a,!1);)a=b.find(1,!0).line,(c||(c=[])).push(a);return c}(b),this.size=this.rest?a$(ac(this.rest))-c+1:1,this.node=this.text=null,this.hidden=bD(a,b)}function bP(a,b,c){for(var d,e=[],f=b;f<c;f=d){var g=new bO(a.doc,aW(a.doc,f),f);d=f+g.size,e.push(g)}return e}var bQ=null,bR=null;function bS(a,b){var c=au(a,b);if(c.length){var d,e=Array.prototype.slice.call(arguments,2);bQ?d=bQ.delayedCallbacks:bR?d=bR:(d=bR=[],setTimeout(bT,0));for(var f=function(a){d.push(function(){return c[a].apply(null,e)})},g=0;g<c.length;++g)f(g)}}function bT(){var a=bR;bR=null;for(var b=0;b<a.length;++b)a[b]()}function bU(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];"text"==f?function(a,b){var c=b.text.className,d=bW(a,b);b.text==b.node&&(b.node=d.pre),b.text.parentNode.replaceChild(d.pre,b.text),b.text=d.pre,d.bgClass!=b.bgClass||d.textClass!=b.textClass?(b.bgClass=d.bgClass,b.textClass=d.textClass,bX(a,b)):c&&(b.text.className=c)}(a,b):"gutter"==f?bY(a,b,c,d):"class"==f?bX(a,b):"widget"==f&&function(a,b,c){b.alignable&&(b.alignable=null);for(var d=H("CodeMirror-linewidget"),e=b.node.firstChild,f=void 0;e;e=f)f=e.nextSibling,d.test(e.className)&&b.node.removeChild(e);bZ(a,b,c)}(a,b,d)}b.changes=null}function bV(a){return a.node==a.text&&(a.node=L("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),p&&q<8&&(a.node.style.zIndex=2)),a.node}function bW(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):bL(a,b)}function bX(a,b){var c=b.bgClass?b.bgClass+" "+(b.line.bgClass||""):b.line.bgClass;if(c&&(c+=" CodeMirror-linebackground"),b.background)c?b.background.className=c:(b.background.parentNode.removeChild(b.background),b.background=null);else if(c){var d=bV(b);b.background=d.insertBefore(L("div",null,c),d.firstChild),a.display.input.setUneditable(b.background)}b.line.wrapClass?bV(b).className=b.line.wrapClass:b.node!=b.text&&(b.node.className="");var e=b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass;b.text.className=e||""}function bY(a,b,c,d){if(b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null),b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null),b.line.gutterClass){var e=bV(b);b.gutterBackground=L("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px"),a.display.input.setUneditable(b.gutterBackground),e.insertBefore(b.gutterBackground,b.text)}var f=b.line.gutterMarkers;if(a.options.lineNumbers||f){var g=bV(b),h=b.gutter=L("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");if(h.setAttribute("aria-hidden","true"),a.display.input.setUneditable(h),g.insertBefore(h,b.text),b.line.gutterClass&&(h.className+=" "+b.line.gutterClass),!a.options.lineNumbers||f&&f["CodeMirror-linenumbers"]||(b.lineNumber=h.appendChild(L("div",a1(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),f)for(var i=0;i<a.display.gutterSpecs.length;++i){var j=a.display.gutterSpecs[i].className,k=f.hasOwnProperty(j)&&f[j];k&&h.appendChild(L("div",[k],"CodeMirror-gutter-elt","left: "+d.gutterLeft[j]+"px; width: "+d.gutterWidth[j]+"px"))}}}function bZ(a,b,c){if(b$(a,b.line,b,c,!0),b.rest)for(var d=0;d<b.rest.length;d++)b$(a,b.rest[d],b,c,!1)}function b$(a,b,c,d,e){if(b.widgets)for(var f=bV(c),g=0,h=b.widgets;g<h.length;++g){var i=h[g],j=L("div",[i.node],"CodeMirror-linewidget"+(i.className?" "+i.className:""));i.handleMouseEvents||j.setAttribute("cm-ignore-events","true"),function(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}(i,j,c,d),a.display.input.setUneditable(j),e&&i.above?f.insertBefore(j,c.gutter||c.text):f.appendChild(j),bS(i,"redraw")}}function b_(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!N(document.body,a.node)){var c="position: relative;";a.coverGutter&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;"),a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;"),K(b.display.measure,L("div",[a.node],null,c))}return a.height=a.node.parentNode.offsetHeight}function b0(a,b){for(var c=aF(b);c!=a.wrapper;c=c.parentNode)if(!c||1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==a.sizer&&c!=a.mover)return!0}function b1(a){return a.lineSpace.offsetTop}function b2(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function b3(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=K(a.measure,L("pre","x","CodeMirror-line-like")),c=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,d={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};return isNaN(d.left)||isNaN(d.right)||(a.cachedPaddingH=d),d}function b4(a){return 50-a.display.nativeBarWidth}function b5(a){return a.display.scroller.clientWidth-b4(a)-a.display.barWidth}function b6(a){return a.display.scroller.clientHeight-b4(a)-a.display.barHeight}function b7(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(var e=0;e<a.rest.length;e++)if(a$(a.rest[e])>c)return{map:a.measure.maps[e],cache:a.measure.caches[e],before:!0}}function b8(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[cA(a,b)];var c=a.display.externalMeasured;if(c&&b>=c.lineN&&b<c.lineN+c.size)return c}function b9(a,b){var c,d,e,f,g=a$(b),h=b8(a,g);h&&!h.text?h=null:h&&h.changes&&(bU(a,h,g,cv(a)),a.curOp.forceUpdate=!0),h||(d=a$(c=bA(c=b)),(e=a.display.externalMeasured=new bO(a.doc,c,d)).lineN=d,f=e.built=bL(a,e),e.text=f.pre,K(a.display.lineMeasure,f.pre),h=e);var i=b7(h,b,g);return{line:b,view:h,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function ca(a,b,c,e,f){b.before&&(c=-1);var g,h=c+(e||"");return b.cache.hasOwnProperty(h)?g=b.cache[h]:(b.rect||(b.rect=b.view.text.getBoundingClientRect()),b.hasHeights||(!function(a,b,c){var d=a.options.lineWrapping,e=d&&b5(a);if(!b.measure.heights||d&&b.measure.width!=e){var f=b.measure.heights=[];if(d){b.measure.width=e;for(var g=b.text.firstChild.getClientRects(),h=0;h<g.length-1;h++){var i=g[h],j=g[h+1];Math.abs(i.bottom-j.bottom)>2&&f.push((i.bottom+j.top)/2-c.top)}}f.push(c.bottom-c.top)}}(a,b.view,b.rect),b.hasHeights=!0),(g=function(a,b,c,e){var f,g,h=cc(b.map,c,e),i=h.node,j=h.start,k=h.end,l=h.collapse;if(3==i.nodeType){for(var m=0;m<4;m++){for(;j&&al(b.line.text.charAt(h.coverStart+j));)--j;for(;h.coverStart+k<h.coverEnd&&al(b.line.text.charAt(h.coverStart+k));)++k;if((f=p&&q<9&&0==j&&k==h.coverEnd-h.coverStart?i.parentNode.getBoundingClientRect():function(a,b){var c=cb;if("left"==b)for(var d=0;d<a.length&&(c=a[d]).left==c.right;d++);else for(var e=a.length-1;e>=0&&(c=a[e]).left==c.right;e--);return c}(d(i,j,k).getClientRects(),e)).left||f.right||0==j)break;k=j,j-=1,l="right"}p&&q<11&&(f=function(a,b){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(a){if(null!=aL)return aL;var b=K(a,L("span","x")),c=b.getBoundingClientRect(),e=d(b,0,1).getBoundingClientRect();return aL=Math.abs(c.left-e.left)>1}(a))return b;var c=screen.logicalXDPI/screen.deviceXDPI,e=screen.logicalYDPI/screen.deviceYDPI;return{left:b.left*c,right:b.right*c,top:b.top*e,bottom:b.bottom*e}}(a.display.measure,f))}else j>0&&(l=e="right"),f=a.options.lineWrapping&&(g=i.getClientRects()).length>1?g["right"==e?g.length-1:0]:i.getBoundingClientRect();if(p&&q<9&&!j&&(!f||!f.left&&!f.right)){var n=i.parentNode.getClientRects()[0];f=n?{left:n.left,right:n.left+cu(a.display),top:n.top,bottom:n.bottom}:cb}for(var o=f.top-b.rect.top,r=f.bottom-b.rect.top,s=(o+r)/2,t=b.view.measure.heights,u=0;u<t.length-1&&!(s<t[u]);u++);var v=u?t[u-1]:0,w=t[u],x={left:("right"==l?f.right:f.left)-b.rect.left,right:("left"==l?f.left:f.right)-b.rect.left,top:v,bottom:w};return f.left||f.right||(x.bogus=!0),a.options.singleCursorHeightPerLine||(x.rtop=o,x.rbottom=r),x}(a,b,c,e)).bogus||(b.cache[h]=g)),{left:g.left,right:g.right,top:f?g.rtop:g.top,bottom:f?g.rbottom:g.bottom}}var cb={left:0,right:0,top:0,bottom:0};function cc(a,b,c){for(var d,e,f,g,h,i,j=0;j<a.length;j+=3)if(h=a[j],i=a[j+1],b<h?(e=0,f=1,g="left"):b<i?f=(e=b-h)+1:(j==a.length-3||b==i&&a[j+3]>b)&&(e=(f=i-h)-1,b>=i&&(g="right")),null!=e){if(d=a[j+2],h==i&&c==(d.insertLeft?"left":"right")&&(g=c),"left"==c&&0==e)for(;j&&a[j-2]==a[j-3]&&a[j-1].insertLeft;)d=a[(j-=3)+2],g="left";if("right"==c&&e==i-h)for(;j<a.length-3&&a[j+3]==a[j+4]&&!a[j+5].insertLeft;)d=a[(j+=3)+2],g="right";break}return{node:d,start:e,end:f,collapse:g,coverStart:h,coverEnd:i}}function cd(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function ce(a){a.display.externalMeasure=null,J(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)cd(a.display.view[b])}function cf(a){ce(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function cg(){return t&&z?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ch(){return t&&z?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function ci(a){var b=0;if(a.widgets)for(var c=0;c<a.widgets.length;++c)a.widgets[c].above&&(b+=b_(a.widgets[c]));return b}function cj(a,b,c,d,e){if(!e){var f=ci(b);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=bE(b);if("local"==d?g+=b1(a.display):g-=a.display.viewOffset,"page"==d||"window"==d){var h=a.display.lineSpace.getBoundingClientRect();g+=h.top+("window"==d?0:ch());var i=h.left+("window"==d?0:cg());c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function ck(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;if("page"==c)d-=cg(),e-=ch();else if("local"==c||!c){var f=a.display.sizer.getBoundingClientRect();d+=f.left,e+=f.top}var g=a.display.lineSpace.getBoundingClientRect();return{left:d-g.left,top:e-g.top}}function cl(a,b,c,d,e){var f,g;return d||(d=aW(a.doc,b.line)),cj(a,d,(f=d,g=b.ch,ca(a,b9(a,f),g,e)),c)}function cm(a,b,c,d,e,f){function g(b,g){var h=ca(a,e,b,g?"right":"left",f);return g?h.left=h.right:h.right=h.left,cj(a,d,h,c)}d=d||aW(a.doc,b.line),e||(e=b9(a,d));var h=ar(d,a.doc.direction),i=b.ch,j=b.sticky;if(i>=d.text.length?(i=d.text.length,j="before"):i<=0&&(i=0,j="after"),!h)return g("before"==j?i-1:i,"before"==j);function k(a,b,c){return g(c?a-1:a,1==h[b].level!=c)}var l=ap(h,i,j),m=ao,n=k(i,l,"before"==j);return null!=m&&(n.other=k(i,m,"before"!=j)),n}function cn(a,b){var c=0;b=a9(a.doc,b),a.options.lineWrapping||(c=cu(a.display)*b.ch);var d=aW(a.doc,b.line),e=bE(d)+b1(a.display);return{left:c,right:c,top:e,bottom:e+d.height}}function co(a,b,c,d,e){var f=a2(a,b,c);return f.xRel=e,d&&(f.outside=d),f}function cp(a,b,c){var d=a.doc;if((c+=a.display.viewOffset)<0)return co(d.first,0,null,-1,-1);var e=a_(d,c),f=d.first+d.size-1;if(e>f)return co(d.first+d.size-1,aW(d,f).text.length,null,1,1);b<0&&(b=0);for(var g=aW(d,e);;){var h=function(a,b,c,d,e){e-=bE(b);var f=b9(a,b),g=ci(b),h=0,i=b.text.length,j=!0,k=ar(b,a.doc.direction);if(k){var l=(a.options.lineWrapping?function(a,b,c,d,e,f,g){var h=cq(a,b,d,g),i=h.begin,j=h.end;/\s/.test(b.text.charAt(j-1))&&j--;for(var k=null,l=null,m=0;m<e.length;m++){var n=e[m];if(!(n.from>=j)&&!(n.to<=i)){var o=ca(a,d,1!=n.level?Math.min(j,n.to)-1:Math.max(i,n.from)).right,p=o<f?f-o+1e9:o-f;(!k||l>p)&&(k=n,l=p)}}return k||(k=e[e.length-1]),k.from<i&&(k={from:i,to:k.to,level:k.level}),k.to>j&&(k={from:k.from,to:j,level:k.level}),k}:function(a,b,c,d,e,f,g){var h=an(function(h){var i=e[h],j=1!=i.level;return cs(cm(a,a2(c,j?i.to:i.from,j?"before":"after"),"line",b,d),f,g,!0)},0,e.length-1),i=e[h];if(h>0){var j=1!=i.level,k=cm(a,a2(c,j?i.from:i.to,j?"after":"before"),"line",b,d);cs(k,f,g,!0)&&k.top>g&&(i=e[h-1])}return i})(a,b,c,f,k,d,e);h=(j=1!=l.level)?l.from:l.to-1,i=j?l.to:l.from-1}var m,n,o=null,p=null,q=an(function(b){var c=ca(a,f,b);return c.top+=g,c.bottom+=g,!!cs(c,d,e,!1)&&(c.top<=e&&c.left<=d&&(o=b,p=c),!0)},h,i),r=!1;if(p){var s=d-p.left<p.right-d,t=s==j;q=o+ +!t,n=t?"after":"before",m=s?p.left:p.right}else{!j&&(q==i||q==h)&&q++,n=0==q?"after":q==b.text.length?"before":ca(a,f,q-!!j).bottom+g<=e==j?"after":"before";var u=cm(a,a2(c,q,n),"line",b,f);m=u.left,r=e<u.top?-1:+(e>=u.bottom)}return co(c,q=am(b.text,q,1),n,r,d-m)}(a,g,e,b,c),i=function(a,b){var c,d=bo&&a.markedSpans;if(d)for(var e=0;e<d.length;++e){var f=d[e];f.marker.collapsed&&(null==f.from||f.from<b)&&(null==f.to||f.to>b)&&(!c||0>bx(c,f.marker))&&(c=f.marker)}return c}(g,h.ch+ +(h.xRel>0||h.outside>0));if(!i)return h;var j=i.find(1);if(j.line==e)return j;g=aW(d,e=j.line)}}function cq(a,b,c,d){d-=ci(b);var e=b.text.length,f=an(function(b){return ca(a,c,b-1).bottom<=d},e,0);return e=an(function(b){return ca(a,c,b).top>d},f,e),{begin:f,end:e}}function cr(a,b,c,d){c||(c=b9(a,b));var e=cj(a,b,ca(a,c,d),"line").top;return cq(a,b,c,e)}function cs(a,b,c,d){return!(a.bottom<=c)&&(a.top>c||(d?a.left:a.right)>b)}function ct(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==g){g=L("pre",null,"CodeMirror-line-like");for(var b=0;b<49;++b)g.appendChild(document.createTextNode("x")),g.appendChild(L("br"));g.appendChild(document.createTextNode("x"))}K(a.measure,g);var c=g.offsetHeight/50;return c>3&&(a.cachedTextHeight=c),J(a.measure),c||1}function cu(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=L("span","xxxxxxxxxx"),c=L("pre",[b],"CodeMirror-line-like");K(a.measure,c);var d=b.getBoundingClientRect(),e=(d.right-d.left)/10;return e>2&&(a.cachedCharWidth=e),e||10}function cv(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g){var h=a.display.gutterSpecs[g].className;c[h]=f.offsetLeft+f.clientLeft+e,d[h]=f.clientWidth}return{fixedPos:cw(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function cw(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function cx(a){var b=ct(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/cu(a.display)-3);return function(e){if(bD(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function cy(a){var b=a.doc,c=cx(a);b.iter(function(a){var b=c(a);b!=a.height&&aZ(a,b)})}function cz(a,b,c,d){var e=a.display;if(!c&&"true"==aF(b).getAttribute("cm-not-content"))return null;var f,g,h=e.lineSpace.getBoundingClientRect();try{f=b.clientX-h.left,g=b.clientY-h.top}catch(a){return null}var i,j=cp(a,f,g);if(d&&j.xRel>0&&(i=aW(a.doc,j.line).text).length==j.ch){var k=U(i,i.length,a.options.tabSize)-i.length;j=a2(j.line,Math.max(0,Math.round((f-b3(a.display).left)/cu(a.display))-k))}return j}function cA(a,b){if(b>=a.display.viewTo||(b-=a.display.viewFrom)<0)return null;for(var c=a.display.view,d=0;d<c.length;d++)if((b-=c[d].size)<0)return d}function cB(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),d||(d=0);var e=a.display;if(d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b),a.curOp.viewChanged=!0,b>=e.viewTo)bo&&bB(a.doc,b)<e.viewTo&&cD(a);else if(c<=e.viewFrom)bo&&bC(a.doc,c+d)>e.viewFrom?cD(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)cD(a);else if(b<=e.viewFrom){var f=cE(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):cD(a)}else if(c>=e.viewTo){var g=cE(a,b,b,-1);g?(e.view=e.view.slice(0,g.index),e.viewTo=g.lineN):cD(a)}else{var h=cE(a,b,b,-1),i=cE(a,c,c+d,1);h&&i?(e.view=e.view.slice(0,h.index).concat(bP(a,h.lineN,i.lineN)).concat(e.view.slice(i.index)),e.viewTo+=d):cD(a)}var j=e.externalMeasured;j&&(c<j.lineN?j.lineN+=d:b<j.lineN+j.size&&(e.externalMeasured=null))}function cC(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;if(e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null),!(b<d.viewFrom)&&!(b>=d.viewTo)){var f=d.view[cA(a,b)];if(null!=f.node){var g=f.changes||(f.changes=[]);-1==W(g,c)&&g.push(c)}}}function cD(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function cE(a,b,c,d){var e,f=cA(a,b),g=a.display.view;if(!bo||c==a.doc.first+a.doc.size)return{index:f,lineN:c};for(var h=a.display.viewFrom,i=0;i<f;i++)h+=g[i].size;if(h!=b){if(d>0){if(f==g.length-1)return null;e=h+g[f].size-b,f++}else e=h-b;b+=e,c+=e}for(;bB(a.doc,c)!=c;){if(f==(d<0?0:g.length-1))return null;c+=d*g[f-(d<0)].size,f+=d}return{index:f,lineN:c}}function cF(a){for(var b=a.display.view,c=0,d=0;d<b.length;d++){var e=b[d];!e.hidden&&(!e.node||e.changes)&&++c}return c}function cG(a){a.display.input.showSelection(a.display.input.prepareSelection())}function cH(a,b){void 0===b&&(b=!0);for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(b||g!=c.sel.primIndex){var h=c.sel.ranges[g];if(!(h.from().line>=a.display.viewTo)&&!(h.to().line<a.display.viewFrom)){var i=h.empty();(i||a.options.showCursorWhenSelecting)&&cI(a,h.head,e),i||function(a,b,c){var d=a.display,e=a.doc,f=document.createDocumentFragment(),g=b3(a.display),h=g.left,i=Math.max(d.sizerWidth,b5(a)-d.sizer.offsetLeft)-g.right,j="ltr"==e.direction;function k(a,b,c,d){b<0&&(b=0),b=Math.round(b),d=Math.round(d),f.appendChild(L("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px;\n                             top: "+b+"px; width: "+(null==c?i-a:c)+"px;\n                             height: "+(d-b)+"px"))}function l(b,c,d){var f,g,l=aW(e,b),m=l.text.length;function n(c,d){return cl(a,a2(b,c),"div",l,d)}function o(b,c,d){var e=cr(a,l,null,b),f="ltr"==c==("after"==d)?"left":"right";return n("after"==d?e.begin:e.end-(/\s/.test(l.text.charAt(e.end-1))?2:1),f)[f]}var p=ar(l,e.direction);return!function(a,b,c,d){if(!a)return d(b,c,"ltr",0);for(var e=!1,f=0;f<a.length;++f){var g=a[f];(g.from<c&&g.to>b||b==c&&g.to==b)&&(d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr",f),e=!0)}e||d(b,c,"ltr")}(p,c||0,null==d?m:d,function(a,b,e,l){var q,r,s,t,u="ltr"==e,v=n(a,u?"left":"right"),w=n(b-1,u?"right":"left"),x=null==c&&0==a,y=null==d&&b==m,z=0==l,A=!p||l==p.length-1;if(w.top-v.top<=3){var B=(j?x:y)&&z,C=(j?y:x)&&A,D=B?h:(u?v:w).left,E=C?i:(u?w:v).right;k(D,v.top,E-D,v.bottom)}else u?(q=j&&x&&z?h:v.left,r=j?i:o(a,e,"before"),s=j?h:o(b,e,"after"),t=j&&y&&A?i:w.right):(q=j?o(a,e,"before"):h,r=!j&&x&&z?i:v.right,s=!j&&y&&A?h:w.left,t=j?o(b,e,"after"):i),k(q,v.top,r-q,v.bottom),v.bottom<w.top&&k(h,v.bottom,null,w.top),k(s,w.top,t-s,w.bottom);(!f||0>cJ(v,f))&&(f=v),0>cJ(w,f)&&(f=w),(!g||0>cJ(v,g))&&(g=v),0>cJ(w,g)&&(g=w)}),{start:f,end:g}}var m=b.from(),n=b.to();if(m.line==n.line)l(m.line,m.ch,n.ch);else{var o=aW(e,m.line),p=aW(e,n.line),q=bA(o)==bA(p),r=l(m.line,m.ch,q?o.text.length+1:null).end,s=l(n.line,q?0:null,n.ch).start;q&&(r.top<s.top-2?(k(r.right,r.top,null,r.bottom),k(h,s.top,s.left,s.bottom)):k(r.right,r.top,s.left-r.right,r.bottom)),r.bottom<s.top&&k(h,r.bottom,null,s.top)}c.appendChild(f)}(a,h,f)}}return d}function cI(a,b,c){var d=cm(a,b,"div",null,null,!a.options.singleCursorHeightPerLine),e=c.appendChild(L("div","\xa0","CodeMirror-cursor"));if(e.style.left=d.left+"px",e.style.top=d.top+"px",e.style.height=Math.max(0,d.bottom-d.top)*a.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(a.getWrapperElement().className)){var f=cl(a,b,"div",null,null);f.right-f.left>0&&(e.style.width=f.right-f.left+"px")}if(d.other){var g=c.appendChild(L("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));g.style.display="",g.style.left=d.other.left+"px",g.style.top=d.other.top+"px",g.style.height=(d.other.bottom-d.other.top)*.85+"px"}}function cJ(a,b){return a.top-b.top||a.left-b.left}function cK(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="",a.options.cursorBlinkRate>0?b.blinker=setInterval(function(){a.hasFocus()||cO(a),b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):a.options.cursorBlinkRate<0&&(b.cursorDiv.style.visibility="hidden")}}function cL(a){!a.hasFocus()&&(a.display.input.focus(),a.state.focused||cN(a))}function cM(a){a.state.delayingBlurEvent=!0,setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,a.state.focused&&cO(a))},100)}function cN(a,b){a.state.delayingBlurEvent&&!a.state.draggingText&&(a.state.delayingBlurEvent=!1),"nocursor"!=a.options.readOnly&&(a.state.focused||(aw(a,"focus",a,b),a.state.focused=!0,P(a.display.wrapper,"CodeMirror-focused"),!a.curOp&&a.display.selForContextMenu!=a.doc.sel&&(a.display.input.reset(),r&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),cK(a))}function cO(a,b){a.state.delayingBlurEvent||(a.state.focused&&(aw(a,"blur",a,b),a.state.focused=!1,I(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function cP(a){for(var b=a.display,c=b.lineDiv.offsetTop,d=Math.max(0,b.scroller.getBoundingClientRect().top),e=b.lineDiv.getBoundingClientRect().top,f=0,g=0;g<b.view.length;g++){var h=b.view[g],i=a.options.lineWrapping,j=void 0,k=0;if(!h.hidden){if(e+=h.line.height,p&&q<8){var l=h.node.offsetTop+h.node.offsetHeight;j=l-c,c=l}else{var m=h.node.getBoundingClientRect();j=m.bottom-m.top,!i&&h.text.firstChild&&(k=h.text.firstChild.getBoundingClientRect().right-m.left-1)}var n=h.line.height-j;if((n>.005||n<-.005)&&(e<d&&(f-=n),aZ(h.line,j),cQ(h.line),h.rest))for(var o=0;o<h.rest.length;o++)cQ(h.rest[o]);if(k>a.display.sizerWidth){var r=Math.ceil(k/cu(a.display));r>a.display.maxLineLength&&(a.display.maxLineLength=r,a.display.maxLine=h.line,a.display.maxLineChanged=!0)}}}Math.abs(f)>2&&(b.scroller.scrollTop+=f)}function cQ(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b){var c=a.widgets[b],d=c.node.parentNode;d&&(c.height=d.offsetHeight)}}function cR(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop;d=Math.floor(d-b1(a));var e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,f=a_(b,d),g=a_(b,e);if(c&&c.ensure){var h=c.ensure.from.line,i=c.ensure.to.line;h<f?(f=h,g=a_(b,bE(aW(b,h))+a.wrapper.clientHeight)):Math.min(i,b.lastLine())>=g&&(f=a_(b,bE(aW(b,i))-a.wrapper.clientHeight),g=i)}return{from:f,to:Math.max(g,f+1)}}function cS(a,b){var c=a.display,d=ct(a.display);b.top<0&&(b.top=0);var e=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:c.scroller.scrollTop,f=b6(a),g={};b.bottom-b.top>f&&(b.bottom=b.top+f);var h=a.doc.height+b2(c),i=b.top<d,j=b.bottom>h-d;if(b.top<e)g.scrollTop=i?0:b.top;else if(b.bottom>e+f){var k=Math.min(b.top,(j?h:b.bottom)-f);k!=e&&(g.scrollTop=k)}var l=a.options.fixedGutter?0:c.gutters.offsetWidth,m=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:c.scroller.scrollLeft-l,n=b5(a)-c.gutters.offsetWidth,o=b.right-b.left>n;return o&&(b.right=b.left+n),b.left<10?g.scrollLeft=0:b.left<m?g.scrollLeft=Math.max(0,b.left+l-10*!o):b.right>n+m-3&&(g.scrollLeft=b.right+10*!o-n),g}function cT(a,b){null!=b&&(cW(a),a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+b)}function cU(a){cW(a);var b=a.getCursor();a.curOp.scrollToPos={from:b,to:b,margin:a.options.cursorScrollMargin}}function cV(a,b,c){(null!=b||null!=c)&&cW(a),null!=b&&(a.curOp.scrollLeft=b),null!=c&&(a.curOp.scrollTop=c)}function cW(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=cn(a,b.from),d=cn(a,b.to);cX(a,c,d,b.margin)}}function cX(a,b,c,d){var e=cS(a,{left:Math.min(b.left,c.left),top:Math.min(b.top,c.top)-d,right:Math.max(b.right,c.right),bottom:Math.max(b.bottom,c.bottom)+d});cV(a,e.scrollLeft,e.scrollTop)}function cY(a,b){2>Math.abs(a.doc.scrollTop-b)||(l||di(a,{top:b}),cZ(a,b,!0),l&&di(a),dd(a,100))}function cZ(a,b,c){b=Math.max(0,Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,b)),(a.display.scroller.scrollTop!=b||c)&&(a.doc.scrollTop=b,a.display.scrollbars.setScrollTop(b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b))}function c$(a,b,c,d){b=Math.max(0,Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth)),((c?b!=a.doc.scrollLeft:!(2>Math.abs(a.doc.scrollLeft-b)))||d)&&(a.doc.scrollLeft=b,dl(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function c_(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+b2(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+b4(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}var c0=function(a,b,c){this.cm=c;var d=this.vert=L("div",[L("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=L("div",[L("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");d.tabIndex=e.tabIndex=-1,a(d),a(e),at(d,"scroll",function(){d.clientHeight&&b(d.scrollTop,"vertical")}),at(e,"scroll",function(){e.clientWidth&&b(e.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,p&&q<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};c0.prototype.update=function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0";var e=a.viewHeight-(b?d:0);this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+e)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(b){this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px";var f=a.viewWidth-a.barLeft-(c?d:0);this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+f)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&a.clientHeight>0&&(0==d&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?d:0,bottom:b?d:0}},c0.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},c0.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},c0.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=B&&!w?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new V,this.disableVert=new V},c0.prototype.enableZeroWidthBar=function(a,b,c){a.style.pointerEvents="auto",b.set(1e3,function d(){var e=a.getBoundingClientRect();("vert"==c?document.elementFromPoint(e.right-1,(e.top+e.bottom)/2):document.elementFromPoint((e.right+e.left)/2,e.bottom-1))!=a?a.style.pointerEvents="none":b.set(1e3,d)})},c0.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz),a.removeChild(this.vert)};var c1=function(){};function c2(a,b){b||(b=c_(a));var c=a.display.barWidth,d=a.display.barHeight;c3(a,b);for(var e=0;e<4&&c!=a.display.barWidth||d!=a.display.barHeight;e++)c!=a.display.barWidth&&a.options.lineWrapping&&cP(a),c3(a,c_(a)),c=a.display.barWidth,d=a.display.barHeight}function c3(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px",c.heightForcer.style.borderBottom=d.bottom+"px solid transparent",d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="",d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}c1.prototype.update=function(){return{bottom:0,right:0}},c1.prototype.setScrollLeft=function(){},c1.prototype.setScrollTop=function(){},c1.prototype.clear=function(){};var c4={native:c0,null:c1};function c5(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&I(a.display.wrapper,a.display.scrollbars.addClass)),a.display.scrollbars=new c4[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller),at(b,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)}),b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?c$(a,b):cY(a,b)},a),a.display.scrollbars.addClass&&P(a.display.wrapper,a.display.scrollbars.addClass)}var c6=0;function c7(a){var b;a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++c6,markArrays:null},b=a.curOp,bQ?bQ.ops.push(b):b.ownsGroup=bQ={ops:[b],delayedCallbacks:[]}}function c8(a){var b=a.curOp;b&&function(a,b){var c=a.ownsGroup;if(c)try{var d=c.delayedCallbacks,e=0;do{for(;e<d.length;e++)d[e].call(null);for(var f=0;f<c.ops.length;f++){var g=c.ops[f];if(g.cursorActivityHandlers)for(;g.cursorActivityCalled<g.cursorActivityHandlers.length;)g.cursorActivityHandlers[g.cursorActivityCalled++].call(null,g.cm)}}while(e<d.length)}finally{bQ=null,b(c)}}(b,function(a){for(var b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;!function(a){for(var b,c=a.ops,d=0;d<c.length;d++)!function(a){var b=a.cm,c=b.display;(function(a){var b=a.display;!b.scrollbarsClipped&&b.scroller.offsetWidth&&(b.nativeBarWidth=b.scroller.offsetWidth-b.scroller.clientWidth,b.heightForcer.style.height=b4(a)+"px",b.sizer.style.marginBottom=-b.nativeBarWidth+"px",b.sizer.style.borderRightWidth=b4(a)+"px",b.scrollbarsClipped=!0)})(b),a.updateMaxLine&&bG(b),a.mustUpdate=a.viewChanged||a.forceUpdate||null!=a.scrollTop||a.scrollToPos&&(a.scrollToPos.from.line<c.viewFrom||a.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&b.options.lineWrapping,a.update=a.mustUpdate&&new df(b,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}(c[d]);for(var e=0;e<c.length;e++){(b=c[e]).updatedDisplay=b.mustUpdate&&dg(b.cm,b.update)}for(var f=0;f<c.length;f++)!function(a){var b,c,d=a.cm,e=d.display;a.updatedDisplay&&cP(d),a.barMeasure=c_(d),e.maxLineChanged&&!d.options.lineWrapping&&(a.adjustWidthTo=(b=e.maxLine,c=e.maxLine.text.length,ca(d,b9(d,b),c,void 0)).left+3,d.display.sizerWidth=a.adjustWidthTo,a.barMeasure.scrollWidth=Math.max(e.scroller.clientWidth,e.sizer.offsetLeft+a.adjustWidthTo+b4(d)+d.display.barWidth),a.maxScrollLeft=Math.max(0,e.sizer.offsetLeft+a.adjustWidthTo-b5(d))),(a.updatedDisplay||a.selectionChanged)&&(a.preparedSelection=e.input.prepareSelection())}(c[f]);for(var g=0;g<c.length;g++)!function(a){var b=a.cm;null!=a.adjustWidthTo&&(b.display.sizer.style.minWidth=a.adjustWidthTo+"px",a.maxScrollLeft<b.doc.scrollLeft&&c$(b,Math.min(b.display.scroller.scrollLeft,a.maxScrollLeft),!0),b.display.maxLineChanged=!1);var c=a.focus&&a.focus==O();a.preparedSelection&&b.display.input.showSelection(a.preparedSelection,c),(a.updatedDisplay||a.startHeight!=b.doc.height)&&c2(b,a.barMeasure),a.updatedDisplay&&dk(b,a.barMeasure),a.selectionChanged&&cK(b),b.state.focused&&a.updateInput&&b.display.input.reset(a.typing),c&&cL(a.cm)}(c[g]);for(var h=0;h<c.length;h++)!function(a){var b=a.cm,c=b.display,d=b.doc;if(a.updatedDisplay&&dh(b,a.update),null!=c.wheelStartX&&(null!=a.scrollTop||null!=a.scrollLeft||a.scrollToPos)&&(c.wheelStartX=c.wheelStartY=null),null!=a.scrollTop&&cZ(b,a.scrollTop,a.forceScroll),null!=a.scrollLeft&&c$(b,a.scrollLeft,!0,!0),a.scrollToPos){var e=function(a,b,c,d){null==d&&(d=0),a.options.lineWrapping||b!=c||(c="before"==b.sticky?a2(b.line,b.ch+1,"before"):b,b=b.ch?a2(b.line,"before"==b.sticky?b.ch-1:b.ch,"after"):b);for(var e,f=0;f<5;f++){var g=!1,h=cm(a,b),i=c&&c!=b?cm(a,c):h,j=cS(a,e={left:Math.min(h.left,i.left),top:Math.min(h.top,i.top)-d,right:Math.max(h.left,i.left),bottom:Math.max(h.bottom,i.bottom)+d}),k=a.doc.scrollTop,l=a.doc.scrollLeft;if(null!=j.scrollTop&&(cY(a,j.scrollTop),Math.abs(a.doc.scrollTop-k)>1&&(g=!0)),null!=j.scrollLeft&&(c$(a,j.scrollLeft),Math.abs(a.doc.scrollLeft-l)>1&&(g=!0)),!g)break}return e}(b,a9(d,a.scrollToPos.from),a9(d,a.scrollToPos.to),a.scrollToPos.margin);if(!ax(b,"scrollCursorIntoView")){var f=b.display,g=f.sizer.getBoundingClientRect(),h=null;if(e.top+g.top<0?h=!0:e.bottom+g.top>(window.innerHeight||document.documentElement.clientHeight)&&(h=!1),null!=h&&!x){var i=L("div","",null,"position: absolute;\n                         top: "+(e.top-f.viewOffset-b1(b.display))+"px;\n                         height: "+(e.bottom-e.top+b4(b)+f.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");b.display.lineSpace.appendChild(i),i.scrollIntoView(h),b.display.lineSpace.removeChild(i)}}}var j=a.maybeHiddenMarkers,k=a.maybeUnhiddenMarkers;if(j)for(var l=0;l<j.length;++l)j[l].lines.length||aw(j[l],"hide");if(k)for(var m=0;m<k.length;++m)k[m].lines.length&&aw(k[m],"unhide");c.wrapper.offsetHeight&&(d.scrollTop=b.display.scroller.scrollTop),a.changeObjs&&aw(b,"changes",b,a.changeObjs),a.update&&a.update.finish()}(c[h])}(a)})}function c9(a,b){if(a.curOp)return b();c7(a);try{return b()}finally{c8(a)}}function da(a,b){return function(){if(a.curOp)return b.apply(a,arguments);c7(a);try{return b.apply(a,arguments)}finally{c8(a)}}}function db(a){return function(){if(this.curOp)return a.apply(this,arguments);c7(this);try{return a.apply(this,arguments)}finally{c8(this)}}}function dc(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);c7(b);try{return a.apply(this,arguments)}finally{c8(b)}}}function dd(a,b){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(b,S(de,a))}function de(a){var b=a.doc;if(!(b.highlightFrontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=bf(a,b.highlightFrontier),e=[];b.iter(d.line,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(d.line>=a.display.viewFrom){var g=f.styles,h=f.text.length>a.options.maxHighlightLength?aS(b.mode,d.state):null,i=bd(a,f,d,!0);h&&(d.state=h),f.styles=i.styles;var j=f.styleClasses,k=i.classes;k?f.styleClasses=k:j&&(f.styleClasses=null);for(var l=!g||g.length!=f.styles.length||j!=k&&(!j||!k||j.bgClass!=k.bgClass||j.textClass!=k.textClass),m=0;!l&&m<g.length;++m)l=g[m]!=f.styles[m];l&&e.push(d.line),f.stateAfter=d.save(),d.nextLine()}else f.text.length<=a.options.maxHighlightLength&&bg(a,f.text,d),f.stateAfter=d.line%5==0?d.save():null,d.nextLine();if(+new Date>c)return dd(a,a.options.workDelay),!0}),b.highlightFrontier=d.line,b.modeFrontier=Math.max(b.modeFrontier,d.line),e.length&&c9(a,function(){for(var b=0;b<e.length;b++)cC(a,e[b],"text")})}}var df=function(a,b,c){var d=a.display;this.viewport=b,this.visible=cR(d,a.doc,b),this.editorIsHidden=!d.wrapper.offsetWidth,this.wrapperHeight=d.wrapper.clientHeight,this.wrapperWidth=d.wrapper.clientWidth,this.oldDisplayWidth=b5(a),this.force=c,this.dims=cv(a),this.events=[]};function dg(a,b){var c,d,e,f=a.display,g=a.doc;if(b.editorIsHidden)return cD(a),!1;if(!b.force&&b.visible.from>=f.viewFrom&&b.visible.to<=f.viewTo&&(null==f.updateLineNumbers||f.updateLineNumbers>=f.viewTo)&&f.renderedView==f.view&&0==cF(a))return!1;dm(a)&&(cD(a),b.dims=cv(a));var h=g.first+g.size,i=Math.max(b.visible.from-a.options.viewportMargin,g.first),j=Math.min(h,b.visible.to+a.options.viewportMargin);f.viewFrom<i&&i-f.viewFrom<20&&(i=Math.max(g.first,f.viewFrom)),f.viewTo>j&&f.viewTo-j<20&&(j=Math.min(h,f.viewTo)),bo&&(i=bB(a.doc,i),j=bC(a.doc,j));var k=i!=f.viewFrom||j!=f.viewTo||f.lastWrapHeight!=b.wrapperHeight||f.lastWrapWidth!=b.wrapperWidth;c=i,d=j,0==(e=a.display).view.length||c>=e.viewTo||d<=e.viewFrom?(e.view=bP(a,c,d),e.viewFrom=c):(e.viewFrom>c?e.view=bP(a,c,e.viewFrom).concat(e.view):e.viewFrom<c&&(e.view=e.view.slice(cA(a,c))),e.viewFrom=c,e.viewTo<d?e.view=e.view.concat(bP(a,e.viewTo,d)):e.viewTo>d&&(e.view=e.view.slice(0,cA(a,d)))),e.viewTo=d,f.viewOffset=bE(aW(a.doc,f.viewFrom)),a.display.mover.style.top=f.viewOffset+"px";var l=cF(a);if(!k&&0==l&&!b.force&&f.renderedView==f.view&&(null==f.updateLineNumbers||f.updateLineNumbers>=f.viewTo))return!1;var m=function(a){if(a.hasFocus())return null;var b=O();if(!b||!N(a.display.lineDiv,b))return null;var c={activeElt:b};if(window.getSelection){var d=window.getSelection();d.anchorNode&&d.extend&&N(a.display.lineDiv,d.anchorNode)&&(c.anchorNode=d.anchorNode,c.anchorOffset=d.anchorOffset,c.focusNode=d.focusNode,c.focusOffset=d.focusOffset)}return c}(a);l>4&&(f.lineDiv.style.display="none"),function(a,b,c){var d=a.display,e=a.options.lineNumbers,f=d.lineDiv,g=f.firstChild;function h(b){var c=b.nextSibling;return r&&B&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b),c}for(var i=d.view,j=d.viewFrom,k=0;k<i.length;k++){var l=i[k];if(l.hidden);else if(l.node&&l.node.parentNode==f){for(;g!=l.node;)g=h(g);var m=e&&null!=b&&b<=j&&l.lineNumber;l.changes&&(W(l.changes,"gutter")>-1&&(m=!1),bU(a,l,j,c)),m&&(J(l.lineNumber),l.lineNumber.appendChild(document.createTextNode(a1(a.options,j)))),g=l.node.nextSibling}else{var n=function(a,b,c,d){var e=bW(a,b);return b.text=b.node=e.pre,e.bgClass&&(b.bgClass=e.bgClass),e.textClass&&(b.textClass=e.textClass),bX(a,b),bY(a,b,c,d),bZ(a,b,d),b.node}(a,l,j,c);f.insertBefore(n,g)}j+=l.size}for(;g;)g=h(g)}(a,f.updateLineNumbers,b.dims),l>4&&(f.lineDiv.style.display=""),f.renderedView=f.view;if(m&&m.activeElt&&m.activeElt!=O()&&(m.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(m.activeElt.nodeName)&&m.anchorNode&&N(document.body,m.anchorNode)&&N(document.body,m.focusNode))){var n=window.getSelection(),o=document.createRange();o.setEnd(m.anchorNode,m.anchorOffset),o.collapse(!1),n.removeAllRanges(),n.addRange(o),n.extend(m.focusNode,m.focusOffset)}return J(f.cursorDiv),J(f.selectionDiv),f.gutters.style.height=f.sizer.style.minHeight=0,k&&(f.lastWrapHeight=b.wrapperHeight,f.lastWrapWidth=b.wrapperWidth,dd(a,400)),f.updateLineNumbers=null,!0}function dh(a,b){for(var c=b.viewport,d=!0;;d=!1){if(d&&a.options.lineWrapping&&b.oldDisplayWidth!=b5(a))d&&(b.visible=cR(a.display,a.doc,c));else if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+b2(a.display)-b6(a),c.top)}),b.visible=cR(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!dg(a,b))break;cP(a);var e=c_(a);cG(a),c2(a,e),dk(a,e),b.force=!1}b.signal(a,"update",a),(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)&&(b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo)}function di(a,b){var c=new df(a,b);if(dg(a,c)){cP(a),dh(a,c);var d=c_(a);cG(a),c2(a,d),dk(a,d),c.finish()}}function dj(a){var b=a.gutters.offsetWidth;a.sizer.style.marginLeft=b+"px",bS(a,"gutterChanged",a)}function dk(a,b){a.display.sizer.style.minHeight=b.docHeight+"px",a.display.heightForcer.style.top=b.docHeight+"px",a.display.gutters.style.height=b.docHeight+a.display.barHeight+b4(a)+"px"}function dl(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=cw(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&(c[g].gutter&&(c[g].gutter.style.left=f),c[g].gutterBackground&&(c[g].gutterBackground.style.left=f));var h=c[g].alignable;if(h)for(var i=0;i<h.length;i++)h[i].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function dm(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=a1(a.options,b.first+b.size-1),d=a.display;if(c.length!=d.lineNumChars){var e=d.measure.appendChild(L("div",[L("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,g=e.offsetWidth-f;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(f,d.lineGutter.offsetWidth-g)+1,d.lineNumWidth=d.lineNumInnerWidth+g,d.lineNumChars=d.lineNumInnerWidth?c.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",dj(a.display),!0}return!1}function dn(a,b){for(var c=[],d=!1,e=0;e<a.length;e++){var f=a[e],g=null;if("string"!=typeof f&&(g=f.style,f=f.className),"CodeMirror-linenumbers"==f)if(!b)continue;else d=!0;c.push({className:f,style:g})}return b&&!d&&c.push({className:"CodeMirror-linenumbers",style:null}),c}function dp(a){var b=a.gutters,c=a.gutterSpecs;J(b),a.lineGutter=null;for(var d=0;d<c.length;++d){var e=c[d],f=e.className,g=e.style,h=b.appendChild(L("div",null,"CodeMirror-gutter "+f));g&&(h.style.cssText=g),"CodeMirror-linenumbers"==f&&(a.lineGutter=h,h.style.width=(a.lineNumWidth||1)+"px")}b.style.display=c.length?"":"none",dj(a)}function dq(a){dp(a.display),cB(a),dl(a)}function dr(a,b,c,d){this.input=c,this.scrollbarFiller=L("div",null,"CodeMirror-scrollbar-filler"),this.scrollbarFiller.setAttribute("cm-not-content","true"),this.gutterFiller=L("div",null,"CodeMirror-gutter-filler"),this.gutterFiller.setAttribute("cm-not-content","true"),this.lineDiv=M("div",null,"CodeMirror-code"),this.selectionDiv=L("div",null,null,"position: relative; z-index: 1"),this.cursorDiv=L("div",null,"CodeMirror-cursors"),this.measure=L("div",null,"CodeMirror-measure"),this.lineMeasure=L("div",null,"CodeMirror-measure"),this.lineSpace=M("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var e=M("div",[this.lineSpace],"CodeMirror-lines");this.mover=L("div",[e],null,"position: relative"),this.sizer=L("div",[this.mover],"CodeMirror-sizer"),this.sizerWidth=null,this.heightForcer=L("div",null,null,"position: absolute; height: 50px; width: 1px;"),this.gutters=L("div",null,"CodeMirror-gutters"),this.lineGutter=null,this.scroller=L("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll"),this.scroller.setAttribute("tabIndex","-1"),this.wrapper=L("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror"),this.wrapper.setAttribute("translate","no"),p&&q<8&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0),r||l&&A||(this.scroller.draggable=!0),a&&(a.appendChild?a.appendChild(this.wrapper):a(this.wrapper)),this.viewFrom=this.viewTo=b.first,this.reportedViewFrom=this.reportedViewTo=b.first,this.view=[],this.renderedView=null,this.externalMeasured=null,this.viewOffset=0,this.lastWrapHeight=this.lastWrapWidth=0,this.updateLineNumbers=null,this.nativeBarWidth=this.barHeight=this.barWidth=0,this.scrollbarsClipped=!1,this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null,this.alignWidgets=!1,this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null,this.maxLine=null,this.maxLineLength=0,this.maxLineChanged=!1,this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null,this.shift=!1,this.selForContextMenu=null,this.activeTouch=null,this.gutterSpecs=dn(d.gutters,d.lineNumbers),dp(this),c.init(this)}df.prototype.signal=function(a,b){az(a,b)&&this.events.push(arguments)},df.prototype.finish=function(){for(var a=0;a<this.events.length;a++)aw.apply(null,this.events[a])};var ds=0,dt=null;function du(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;return null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail),null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta),{x:b,y:c}}function dv(a,b){var c=du(b),d=c.x,e=c.y,f=a.display,g=f.scroller,h=g.scrollWidth>g.clientWidth,i=g.scrollHeight>g.clientHeight;if(d&&h||e&&i){if(e&&B&&r){a:for(var j=b.target,k=f.view;j!=g;j=j.parentNode)for(var m=0;m<k.length;m++)if(k[m].node==j){a.display.currentWheelTarget=j;break a}}if(d&&!l&&!u&&null!=dt){e&&i&&cY(a,Math.max(0,g.scrollTop+e*dt)),c$(a,Math.max(0,g.scrollLeft+d*dt)),(!e||e&&i)&&aB(b),f.wheelStartX=null;return}if(e&&null!=dt){var n=e*dt,o=a.doc.scrollTop,p=o+f.wrapper.clientHeight;n<0?o=Math.max(0,o+n-50):p=Math.min(a.doc.height,p+n+50),di(a,{top:o,bottom:p})}ds<20&&(null==f.wheelStartX?(f.wheelStartX=g.scrollLeft,f.wheelStartY=g.scrollTop,f.wheelDX=d,f.wheelDY=e,setTimeout(function(){if(null!=f.wheelStartX){var a=g.scrollLeft-f.wheelStartX,b=g.scrollTop-f.wheelStartY,c=b&&f.wheelDY&&b/f.wheelDY||a&&f.wheelDX&&a/f.wheelDX;f.wheelStartX=f.wheelStartY=null,c&&(dt=(dt*ds+c)/(ds+1),++ds)}},200)):(f.wheelDX+=d,f.wheelDY+=e))}}p?dt=-.53:l?dt=15:t?dt=-.7:v&&(dt=-1/3);var dw=function(a,b){this.ranges=a,this.primIndex=b};dw.prototype.primary=function(){return this.ranges[this.primIndex]},dw.prototype.equals=function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(!a4(c.anchor,d.anchor)||!a4(c.head,d.head))return!1}return!0},dw.prototype.deepCopy=function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new dx(a5(this.ranges[b].anchor),a5(this.ranges[b].head));return new dw(a,this.primIndex)},dw.prototype.somethingSelected=function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},dw.prototype.contains=function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(a3(b,d.from())>=0&&0>=a3(a,d.to()))return c}return -1};var dx=function(a,b){this.anchor=a,this.head=b};function dy(a,b,c){var d=a&&a.options.selectionsMayTouch,e=b[c];b.sort(function(a,b){return a3(a.from(),b.from())}),c=W(b,e);for(var f=1;f<b.length;f++){var g=b[f],h=b[f-1],i=a3(h.to(),g.from());if(d&&!g.empty()?i>0:i>=0){var j=a7(h.from(),g.from()),k=a6(h.to(),g.to()),l=h.empty()?g.from()==g.head:h.from()==h.head;f<=c&&--c,b.splice(--f,2,new dx(l?k:j,l?j:k))}}return new dw(b,c)}function dz(a,b){return new dw([new dx(a,b||a)],0)}function dA(a){return a.text?a2(a.from.line+a.text.length-1,ac(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function dB(a,b){if(0>a3(a,b.from))return a;if(0>=a3(a,b.to))return dA(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;return a.line==b.to.line&&(d+=dA(b).ch-b.to.ch),a2(c,d)}function dC(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new dx(dB(e.anchor,b),dB(e.head,b)))}return dy(a.cm,c,a.sel.primIndex)}function dD(a,b,c){return a.line==b.line?a2(c.line,a.ch-b.ch+c.ch):a2(c.line+(a.line-b.line),a.ch)}function dE(a){a.doc.mode=aQ(a.options,a.doc.modeOption),dF(a)}function dF(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first,dd(a,100),a.state.modeGen++,a.curOp&&cB(a)}function dG(a,b){return 0==b.from.ch&&0==b.to.ch&&""==ac(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function dH(a,b,c,d){function e(a){return c?c[a]:null}function f(a,c,e){var f;a.text=c,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),bt(a),bu(a,e),(f=d?d(a):1)!=a.height&&aZ(a,f),bS(a,"change",a,b)}function g(a,b){for(var c=[],f=a;f<b;++f)c.push(new bH(j[f],e(f),d));return c}var h=b.from,i=b.to,j=b.text,k=aW(a,h.line),l=aW(a,i.line),m=ac(j),n=e(j.length-1),o=i.line-h.line;if(b.full)a.insert(0,g(0,j.length)),a.remove(j.length,a.size-j.length);else if(dG(a,b)){var p=g(0,j.length-1);f(l,l.text,n),o&&a.remove(h.line,o),p.length&&a.insert(h.line,p)}else if(k==l)if(1==j.length)f(k,k.text.slice(0,h.ch)+m+k.text.slice(i.ch),n);else{var q=g(1,j.length-1);q.push(new bH(m+k.text.slice(i.ch),n,d)),f(k,k.text.slice(0,h.ch)+j[0],e(0)),a.insert(h.line+1,q)}else if(1==j.length)f(k,k.text.slice(0,h.ch)+j[0]+l.text.slice(i.ch),e(0)),a.remove(h.line+1,o);else{f(k,k.text.slice(0,h.ch)+j[0],e(0)),f(l,m+l.text.slice(i.ch),n);var r=g(1,j.length-1);o>1&&a.remove(h.line+1,o-1),a.insert(h.line+1,r)}bS(a,"change",a,b)}function dI(a,b,c){!function a(d,e,f){if(d.linked)for(var g=0;g<d.linked.length;++g){var h=d.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;(!c||i)&&(b(h.doc,i),a(h.doc,d,i))}}}(a,null,!0)}function dJ(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b,b.cm=a,cy(a),dE(a),dK(a),a.options.direction=b.direction,a.options.lineWrapping||bG(a),a.options.mode=b.modeOption,cB(a)}function dK(a){("rtl"==a.doc.direction?P:I)(a.display.lineDiv,"CodeMirror-rtl")}function dL(a){this.done=[],this.undone=[],this.undoDepth=a?a.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a?a.maxGeneration:1}function dM(a,b){var c={from:a5(b.from),to:dA(b),text:aX(a,b.from,b.to)};return dQ(a,c,b.from.line,b.to.line+1),dI(a,function(a){return dQ(a,c,b.from.line,b.to.line+1)},!0),c}function dN(a){for(;a.length;)if(ac(a).ranges)a.pop();else break}function dO(a,b,c,d){var e,f,g=a.history;g.undone.length=0;var h,i=+new Date;if((g.lastOp==d||g.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&g.lastModTime>i-(a.cm?a.cm.options.historyEventDelay:500)||"*"==b.origin.charAt(0)))&&(e=g,h=g.lastOp==d?(dN(e.done),ac(e.done)):e.done.length&&!ac(e.done).ranges?ac(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),ac(e.done)):void 0))f=ac(h.changes),0==a3(b.from,b.to)&&0==a3(b.from,f.to)?f.to=dA(b):h.changes.push(dM(a,b));else{var j=ac(g.done);for(j&&j.ranges||dP(a.sel,g.done),h={changes:[dM(a,b)],generation:g.generation},g.done.push(h);g.done.length>g.undoDepth;)g.done.shift(),g.done[0].ranges||g.done.shift()}g.done.push(c),g.generation=++g.maxGeneration,g.lastModTime=g.lastSelTime=i,g.lastOp=g.lastSelOp=d,g.lastOrigin=g.lastSelOrigin=b.origin,f||aw(a,"historyAdded")}function dP(a,b){var c=ac(b);c&&c.ranges&&c.equals(a)||b.push(a)}function dQ(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function dR(a,b){var c=function(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=[],e=0;e<b.text.length;++e)d.push(function(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}(c[e]));return d}(a,b),d=br(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)b:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue b;f.push(i)}else g&&(c[e]=g)}return c}function dS(a,b,c){for(var d=[],e=0;e<a.length;++e){var f=a[e];if(f.ranges){d.push(c?dw.prototype.deepCopy.call(f):f);continue}var g=f.changes,h=[];d.push({changes:h});for(var i=0;i<g.length;++i){var j=g[i],k=void 0;if(h.push({from:j.from,to:j.to,text:j.text}),b)for(var l in j)(k=l.match(/^spans_(\d+)$/))&&W(b,Number(k[1]))>-1&&(ac(h)[l]=j[l],delete j[l])}}return d}function dT(a,b,c,d){if(!d)return new dx(c||b,b);var e=a.anchor;if(c){var f=0>a3(b,e);f!=0>a3(c,e)?(e=b,b=c):f!=0>a3(b,c)&&(b=c)}return new dx(e,b)}function dU(a,b,c,d,e){null==e&&(e=a.cm&&(a.cm.display.shift||a.extend)),dY(a,new dw([dT(a.sel.primary(),b,c,e)],0),d)}function dV(a,b,c){for(var d=[],e=a.cm&&(a.cm.display.shift||a.extend),f=0;f<a.sel.ranges.length;f++)d[f]=dT(a.sel.ranges[f],b[f],null,e);var g=dy(a.cm,d,a.sel.primIndex);dY(a,g,c)}function dW(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c,dY(a,dy(a.cm,e,a.sel.primIndex),d)}dx.prototype.from=function(){return a7(this.anchor,this.head)},dx.prototype.to=function(){return a6(this.anchor,this.head)},dx.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function dX(a,b,c){var d=a.history.done,e=ac(d);e&&e.ranges?(d[d.length-1]=b,dZ(a,b,c)):dY(a,b,c)}function dY(a,b,c){dZ(a,b,c),function(a,b,c,d){var e,f,g=a.history,h=d&&d.origin;c==g.lastSelOp||h&&g.lastSelOrigin==h&&(g.lastModTime==g.lastSelTime&&g.lastOrigin==h||(e=ac(g.done),"*"==(f=h.charAt(0))||"+"==f&&e.ranges.length==b.ranges.length&&e.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)))?g.done[g.done.length-1]=b:dP(b,g.done),g.lastSelTime=+new Date,g.lastSelOrigin=h,g.lastSelOp=c,d&&!1!==d.clearRedo&&dN(g.undone)}(a,a.sel,a.cm?a.cm.curOp.id:NaN,c)}function dZ(a,b,c){(az(a,"beforeSelectionChange")||a.cm&&az(a.cm,"beforeSelectionChange"))&&(e={ranges:(d=b).ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new dx(a9(a,b[c].anchor),a9(a,b[c].head))},origin:c&&c.origin},aw(a,"beforeSelectionChange",a,e),a.cm&&aw(a.cm,"beforeSelectionChange",a.cm,e),b=e.ranges!=d.ranges?dy(a.cm,e.ranges,e.ranges.length-1):d);var d,e,f=c&&c.bias||(0>a3(b.primary().head,a.sel.primary().head)?-1:1);d$(a,d0(a,b,f,!0)),!(c&&!1===c.scroll)&&a.cm&&"nocursor"!=a.cm.getOption("readOnly")&&cU(a.cm)}function d$(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=1,a.cm.curOp.selectionChanged=!0,ay(a.cm)),bS(a,"cursorActivity",a))}function d_(a){d$(a,d0(a,a.sel,null,!1))}function d0(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=b.ranges.length==a.sel.ranges.length&&a.sel.ranges[f],i=d2(a,g.anchor,h&&h.anchor,c,d),j=d2(a,g.head,h&&h.head,c,d);(e||i!=g.anchor||j!=g.head)&&(e||(e=b.ranges.slice(0,f)),e[f]=new dx(i,j))}return e?dy(a.cm,e,b.primIndex):b}function d1(a,b,c,d,e){var f=aW(a,b.line);if(f.markedSpans)for(var g=0;g<f.markedSpans.length;++g){var h=f.markedSpans[g],i=h.marker,j="selectLeft"in i?!i.selectLeft:i.inclusiveLeft,k="selectRight"in i?!i.selectRight:i.inclusiveRight;if((null==h.from||(j?h.from<=b.ch:h.from<b.ch))&&(null==h.to||(k?h.to>=b.ch:h.to>b.ch))){if(e&&(aw(i,"beforeCursorEnter"),i.explicitlyCleared))if(f.markedSpans){--g;continue}else break;if(!i.atomic)continue;if(c){var l=i.find(d<0?1:-1),m=void 0;if((d<0?k:j)&&(l=d3(a,l,-d,l&&l.line==b.line?f:null)),l&&l.line==b.line&&(m=a3(l,c))&&(d<0?m<0:m>0))return d1(a,l,b,d,e)}var n=i.find(d<0?-1:1);return(d<0?j:k)&&(n=d3(a,n,d,n.line==b.line?f:null)),n?d1(a,n,b,d,e):null}}return b}function d2(a,b,c,d,e){var f=d||1,g=d1(a,b,c,f,e)||!e&&d1(a,b,c,f,!0)||d1(a,b,c,-f,e)||!e&&d1(a,b,c,-f,!0);return g||(a.cantEdit=!0,a2(a.first,0))}function d3(a,b,c,d){if(c<0&&0==b.ch)if(b.line>a.first)return a9(a,a2(b.line-1));else return null;return c>0&&b.ch==(d||aW(a,b.line)).text.length?b.line<a.first+a.size-1?a2(b.line+1,0):null:new a2(b.line,b.ch+c)}function d4(a){a.setSelection(a2(a.firstLine(),0),a2(a.lastLine()),Y)}function d5(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){return d.canceled=!0}};return(c&&(d.update=function(b,c,e,f){b&&(d.from=a9(a,b)),c&&(d.to=a9(a,c)),e&&(d.text=e),void 0!==f&&(d.origin=f)}),aw(a,"beforeChange",a,d),a.cm&&aw(a.cm,"beforeChange",a.cm,d),d.canceled)?(a.cm&&(a.cm.curOp.updateInput=2),null):{from:d.from,to:d.to,text:d.text,origin:d.origin}}function d6(a,b,c){if(a.cm){if(!a.cm.curOp)return da(a.cm,d6)(a,b,c);if(a.cm.state.suppressEdits)return}if(!(az(a,"beforeChange")||a.cm&&az(a.cm,"beforeChange"))||(b=d5(a,b,!0))){var d=bn&&!c&&function(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;c.readOnly&&(!d||-1==W(d,c))&&(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(0),i=0;i<e.length;++i){var j=e[i];if(!(0>a3(j.to,h.from)||a3(j.from,h.to)>0)){var k=[i,1],l=a3(j.from,h.from),m=a3(j.to,h.to);!(l<0)&&(g.inclusiveLeft||l)||k.push({from:j.from,to:h.from}),!(m>0)&&(g.inclusiveRight||m)||k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-3}}return e}(a,b.from,b.to);if(d)for(var e=d.length-1;e>=0;--e)d7(a,{from:d[e].from,to:d[e].to,text:e?[""]:b.text,origin:b.origin});else d7(a,b)}}function d7(a,b){if(1!=b.text.length||""!=b.text[0]||0!=a3(b.from,b.to)){var c=dC(a,b);dO(a,b,c,a.cm?a.cm.curOp.id:NaN),ea(a,b,c,br(a,b));var d=[];dI(a,function(a,c){c||-1!=W(d,a.history)||(ee(a.history,b),d.push(a.history)),ea(a,b,null,br(a,b))})}}function d8(a,b,c){var d=a.cm&&a.cm.state.suppressEdits;if(!d||c){for(var e,f=a.history,g=a.sel,h="undo"==b?f.done:f.undone,i="undo"==b?f.undone:f.done,j=0;j<h.length&&(e=h[j],c?!e.ranges||e.equals(a.sel):e.ranges);j++);if(j!=h.length){for(f.lastOrigin=f.lastSelOrigin=null;;)if((e=h.pop()).ranges){if(dP(e,i),c&&!e.equals(a.sel))return void dY(a,e,{clearRedo:!1});g=e}else if(d)return void h.push(e);else break;var k=[];dP(g,i),i.push({changes:k,generation:f.generation}),f.generation=e.generation||++f.maxGeneration;for(var l=az(a,"beforeChange")||a.cm&&az(a.cm,"beforeChange"),m=e.changes.length-1;m>=0;--m){var n=function(c){var d=e.changes[c];if(d.origin=b,l&&!d5(a,d,!1))return h.length=0,{};k.push(dM(a,d));var f=c?dC(a,d):ac(h);ea(a,d,f,dR(a,d)),!c&&a.cm&&a.cm.scrollIntoView({from:d.from,to:dA(d)});var g=[];dI(a,function(a,b){b||-1!=W(g,a.history)||(ee(a.history,d),g.push(a.history)),ea(a,d,null,dR(a,d))})}(m);if(n)return n.v}}}}function d9(a,b){if(0!=b&&(a.first+=b,a.sel=new dw(ad(a.sel.ranges,function(a){return new dx(a2(a.anchor.line+b,a.anchor.ch),a2(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){cB(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)cC(a.cm,d,"gutter")}}function ea(a,b,c,d){if(a.cm&&!a.cm.curOp)return da(a.cm,ea)(a,b,c,d);if(b.to.line<a.first)return void d9(a,b.text.length-1-(b.to.line-b.from.line));if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);d9(a,e),b={from:a2(a.first,0),to:a2(b.to.line+e,b.to.ch),text:[ac(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:a2(f,aW(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=aX(a,b.from,b.to),c||(c=dC(a,b)),a.cm?function(a,b,c){var d=a.doc,e=a.display,f=b.from,g=b.to,h=!1,i=f.line;a.options.lineWrapping||(i=a$(bA(aW(d,f.line))),d.iter(i,g.line+1,function(a){if(a==e.maxLine)return h=!0,!0})),d.sel.contains(b.from,b.to)>-1&&ay(a),dH(d,b,c,cx(a)),!a.options.lineWrapping&&(d.iter(i,f.line+b.text.length,function(a){var b=bF(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0)),function(a,b){if(a.modeFrontier=Math.min(a.modeFrontier,b),!(a.highlightFrontier<b-10)){for(var c=a.first,d=b-1;d>c;d--){var e=aW(a,d).stateAfter;if(e&&(!(e instanceof bb)||d+e.lookAhead<b)){c=d+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,c)}}(d,f.line),dd(a,400);var j=b.text.length-(g.line-f.line)-1;b.full?cB(a):f.line!=g.line||1!=b.text.length||dG(a.doc,b)?cB(a,f.line,g.line+1,j):cC(a,f.line,"text");var k=az(a,"changes"),l=az(a,"change");if(l||k){var m={from:f,to:g,text:b.text,removed:b.removed,origin:b.origin};l&&bS(a,"change",a,m),k&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(m)}a.display.selForContextMenu=null}(a.cm,b,d):dH(a,b,d),dZ(a,c,Y),a.cantEdit&&d2(a,a2(a.firstLine(),0))&&(a.cantEdit=!1)}}function eb(a,b,c,d,e){var f;d||(d=c),0>a3(d,c)&&(c=(f=[d,c])[0],d=f[1]),"string"==typeof b&&(b=a.splitLines(b)),d6(a,{from:c,to:d,text:b,origin:e})}function ec(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function ed(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||((f=a[e]=f.deepCopy()).copied=!0);for(var h=0;h<f.ranges.length;h++)ec(f.ranges[h].anchor,b,c,d),ec(f.ranges[h].head,b,c,d);continue}for(var i=0;i<f.changes.length;++i){var j=f.changes[i];if(c<j.from.line)j.from=a2(j.from.line+d,j.from.ch),j.to=a2(j.to.line+d,j.to.ch);else if(b<=j.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}function ee(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;ed(a.done,c,d,e),ed(a.undone,c,d,e)}function ef(a,b,c,d){var e=b,f=b;return("number"==typeof b?f=aW(a,a8(a,b)):e=a$(b),null==e)?null:(d(f,e)&&a.cm&&cC(a.cm,e,c),f)}function eg(a){this.lines=a,this.parent=null;for(var b=0,c=0;c<a.length;++c)a[c].parent=this,b+=a[c].height;this.height=b}function eh(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d];b+=e.chunkSize(),c+=e.height,e.parent=this}this.size=b,this.height=c,this.parent=null}eg.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height,e.parent=null,bt(e),bS(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0;d<b.length;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;a<d;++a)if(c(this.lines[a]))return!0}},eh.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;if(d.removeInner(a,f),this.height-=g-d.height,e==f&&(this.children.splice(c--,1),d.parent=null),0==(b-=f))break;a=0}else a-=e}if(this.size-b<25&&(this.children.length>1||!(this.children[0]instanceof eg))){var h=[];this.collapse(h),this.children=[new eg(h)],this.children[0].parent=this}},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){if(e.insertInner(a,b,c),e.lines&&e.lines.length>50){for(var g=e.lines.length%25+25,h=g;h<e.lines.length;){var i=new eg(e.lines.slice(h,h+=25));e.height-=i.height,this.children.splice(++d,0,i),i.parent=this}e.lines=e.lines.slice(0,g),this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=new eh(a.children.splice(a.children.length-5,5));if(a.parent){a.size-=b.size,a.height-=b.height;var c=W(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else{var d=new eh(a.children);d.parent=a,a.children=[d,b],a=d}b.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){var g=Math.min(b,f-a);if(e.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=f}}};var ei=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a,this.node=b};function ej(a,b,c){bE(b)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&cT(a,c)}ei.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,d=a$(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=b_(this);aZ(c,Math.max(0,c.height-f)),a&&(c9(a,function(){ej(a,c,-f),cC(a,d,"widget")}),bS(a,"lineWidgetCleared",a,this,d))}},ei.prototype.changed=function(){var a=this,b=this.height,c=this.doc.cm,d=this.line;this.height=null;var e=b_(this)-b;e&&(bD(this.doc,d)||aZ(d,d.height+e),c&&c9(c,function(){c.curOp.forceUpdate=!0,ej(c,d,e),bS(c,"lineWidgetChanged",c,a,a$(d))}))},aA(ei);var ek=0,el=function(a,b){this.lines=[],this.type=b,this.doc=a,this.id=++ek};function em(a,b,c,d,e){if(d&&d.shared){var f,g,h,i,j,k,l,m;return f=a,g=b,h=c,i=d,j=e,(i=T(i)).shared=!1,l=(k=[em(f,g,h,i,j)])[0],m=i.widgetNode,dI(f,function(a){m&&(i.widgetNode=m.cloneNode(!0)),k.push(em(a,a9(a,g),a9(a,h),i,j));for(var b=0;b<a.linked.length;++b)if(a.linked[b].isParent)return;l=ac(k)}),new en(k,l)}if(a.cm&&!a.cm.curOp)return da(a.cm,em)(a,b,c,d,e);var n=new el(a,e),o=a3(b,c);if(d&&T(d,n,!1),o>0||0==o&&!1!==n.clearWhenEmpty)return n;if(n.replacedWith&&(n.collapsed=!0,n.widgetNode=M("span",[n.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||n.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(n.widgetNode.insertLeft=!0)),n.collapsed){if(bz(a,b.line,b,c,n)||b.line!=c.line&&bz(a,c.line,b,c,n))throw Error("Inserting collapsed marker partially overlapping an existing one");bo=!0}n.addToHistory&&dO(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var p,q=b.line,r=a.cm;if(a.iter(q,c.line+1,function(d){var e,f,g;r&&n.collapsed&&!r.options.lineWrapping&&bA(d)==r.display.maxLine&&(p=!0),n.collapsed&&q!=b.line&&aZ(d,0),e=new bp(n,q==b.line?b.ch:null,q==c.line?c.ch:null),(g=(f=a.cm&&a.cm.curOp)&&window.WeakSet&&(f.markedSpans||(f.markedSpans=new WeakSet)))&&g.has(d.markedSpans)?d.markedSpans.push(e):(d.markedSpans=d.markedSpans?d.markedSpans.concat([e]):[e],g&&g.add(d.markedSpans)),e.marker.attachLine(d),++q}),n.collapsed&&a.iter(b.line,c.line+1,function(b){bD(a,b)&&aZ(b,0)}),n.clearOnEnter&&at(n,"beforeCursorEnter",function(){return n.clear()}),n.readOnly&&(bn=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory()),n.collapsed&&(n.id=++ek,n.atomic=!0),r){if(p&&(r.curOp.updateMaxLine=!0),n.collapsed)cB(r,b.line,c.line+1);else if(n.className||n.startStyle||n.endStyle||n.css||n.attributes||n.title)for(var s=b.line;s<=c.line;s++)cC(r,s,"text");n.atomic&&d_(r.doc),bS(r,"markerAdded",r,n)}return n}el.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;if(b&&c7(a),az(this,"clear")){var c=this.find();c&&bS(this,"clear",c.from,c.to)}for(var d=null,e=null,f=0;f<this.lines.length;++f){var g=this.lines[f],h=bq(g.markedSpans,this);a&&!this.collapsed?cC(a,a$(g),"text"):a&&(null!=h.to&&(e=a$(g)),null!=h.from&&(d=a$(g))),g.markedSpans=function(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}(g.markedSpans,h),null==h.from&&this.collapsed&&!bD(this.doc,g)&&a&&aZ(g,ct(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var i=0;i<this.lines.length;++i){var j=bA(this.lines[i]),k=bF(j);k>a.display.maxLineLength&&(a.display.maxLine=j,a.display.maxLineLength=k,a.display.maxLineChanged=!0)}null!=d&&a&&this.collapsed&&cB(a,d,e+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&d_(a.doc)),a&&bS(a,"markerCleared",a,this,d,e),b&&c8(a),this.parent&&this.parent.clear()}},el.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=bq(f.markedSpans,this);if(null!=g.from&&(c=a2(b?f:a$(f),g.from),-1==a))return c;if(null!=g.to&&(d=a2(b?f:a$(f),g.to),1==a))return d}return c&&{from:c,to:d}},el.prototype.changed=function(){var a=this,b=this.find(-1,!0),c=this,d=this.doc.cm;b&&d&&c9(d,function(){var e=b.line,f=b8(d,a$(b.line));if(f&&(cd(f),d.curOp.selectionChanged=d.curOp.forceUpdate=!0),d.curOp.updateMaxLine=!0,!bD(c.doc,e)&&null!=c.height){var g=c.height;c.height=null;var h=b_(c)-g;h&&aZ(e,e.height+h)}bS(d,"markerChanged",d,a)})},el.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=W(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},el.prototype.detachLine=function(a){if(this.lines.splice(W(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}},aA(el);var en=function(a,b){this.markers=a,this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};function eo(a){return a.findMarks(a2(a.first,0),a.clipPos(a2(a.lastLine())),function(a){return a.parent})}en.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();bS(this,"clear")}},en.prototype.find=function(a,b){return this.primary.find(a,b)},aA(en);var ep=0,eq=function(a,b,c,d,e){if(!(this instanceof eq))return new eq(a,b,c,d,e);null==c&&(c=0),eh.call(this,[new eg([new bH("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=c;var f=a2(c,0);this.sel=dz(f),this.history=new dL(null),this.id=++ep,this.modeOption=b,this.lineSep=d,this.direction="rtl"==e?"rtl":"ltr",this.extend=!1,"string"==typeof a&&(a=this.splitLines(a)),dH(this,{from:f,to:f,text:a}),dY(this,dz(f),Y)};eq.prototype=af(eh.prototype,{constructor:eq,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=aY(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:dc(function(a){var b=a2(this.first,0),c=this.first+this.size-1;d6(this,{from:b,to:a2(c,aW(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0),this.cm&&cV(this.cm,0,0),dY(this,dz(b),Y)}),replaceRange:function(a,b,c,d){b=a9(this,b),c=c?a9(this,c):b,eb(this,a,b,c,d)},getRange:function(a,b,c){var d=aX(this,a9(this,a),a9(this,b));return!1===c?d:""===c?d.join(""):d.join(c||this.lineSeparator())},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},getLineHandle:function(a){if(a0(this,a))return aW(this,a)},getLineNumber:function(a){return a$(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=aW(this,a)),bA(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return a9(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:dc(function(a,b,c){var d;d=a9(this,"number"==typeof a?a2(a,b||0):a),dY(this,dz(d,null),c)}),setSelection:dc(function(a,b,c){var d,e;d=a9(this,a),e=a9(this,b||a),dY(this,dz(d,e),c)}),extendSelection:dc(function(a,b,c){dU(this,a9(this,a),b&&a9(this,b),c)}),extendSelections:dc(function(a,b){dV(this,ba(this,a),b)}),extendSelectionsBy:dc(function(a,b){dV(this,ba(this,ad(this.sel.ranges,a)),b)}),setSelections:dc(function(a,b,c){if(a.length){for(var d=[],e=0;e<a.length;e++)d[e]=new dx(a9(this,a[e].anchor),a9(this,a[e].head||a[e].anchor));null==b&&(b=Math.min(a.length-1,this.sel.primIndex)),dY(this,dy(this.cm,d,b),c)}}),addSelection:dc(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new dx(a9(this,a),a9(this,b||a))),dY(this,dy(this.cm,d,d.length-1),c)}),getSelection:function(a){for(var b,c=this.sel.ranges,d=0;d<c.length;d++){var e=aX(this,c[d].from(),c[d].to());b=b?b.concat(e):e}return!1===a?b:b.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=aX(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||this.lineSeparator())),b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:dc(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:this.splitLines(a[f]),origin:c}}for(var h=b&&"end"!=b&&function(a,b,c){for(var d=[],e=a2(a.first,0),f=e,g=0;g<b.length;g++){var h=b[g],i=dD(h.from,e,f),j=dD(dA(h),e,f);if(e=h.to,f=j,"around"==c){var k=a.sel.ranges[g],l=0>a3(k.head,k.anchor);d[g]=new dx(l?j:i,l?i:j)}else d[g]=new dx(i,i)}return new dw(d,a.sel.primIndex)}(this,d,b),i=d.length-1;i>=0;i--)d6(this,d[i]);h?dX(this,h):this.cm&&cU(this.cm)}),undo:dc(function(){d8(this,"undo")}),redo:dc(function(){d8(this,"redo")}),undoSelection:dc(function(){d8(this,"undo",!0)}),redoSelection:dc(function(){d8(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)!a.done[d].ranges&&++b;for(var e=0;e<a.undone.length;e++)!a.undone[e].ranges&&++c;return{undo:b,redo:c}},clearHistory:function(){var a=this;this.history=new dL(this.history),dI(this,function(b){return b.history=a.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:dS(this.history.done),undone:dS(this.history.undone)}},setHistory:function(a){var b=this.history=new dL(this.history);b.done=dS(a.done.slice(0),null,!0),b.undone=dS(a.undone.slice(0),null,!0)},setGutterMarker:dc(function(a,b,c){return ef(this,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&aj(d)&&(a.gutterMarkers=null),!0})}),clearGutter:dc(function(a){var b=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&ef(b,c,"gutter",function(){return c.gutterMarkers[a]=null,aj(c.gutterMarkers)&&(c.gutterMarkers=null),!0})})}),lineInfo:function(a){var b;if("number"==typeof a){if(!a0(this,a)||(b=a,!(a=aW(this,a))))return null}else if(null==(b=a$(a)))return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:dc(function(a,b,c){return ef(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(a[d]){if(H(c).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:dc(function(a,b,c){return ef(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",e=a[d];if(!e)return!1;if(null==c)a[d]=null;else{var f=e.match(H(c));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}return!0})}),addLineWidget:dc(function(a,b,c){var d,e,f;return d=this,e=new ei(d,b,c),(f=d.cm)&&e.noHScroll&&(f.display.alignWidgets=!0),ef(d,a,"widget",function(a){var b=a.widgets||(a.widgets=[]);if(null==e.insertAt?b.push(e):b.splice(Math.min(b.length,Math.max(0,e.insertAt)),0,e),e.line=a,f&&!bD(d,a)){var c=bE(a)<d.scrollTop;aZ(a,a.height+b_(e)),c&&cT(f,e.height),f.curOp.forceUpdate=!0}return!0}),f&&bS(f,"lineWidgetAdded",f,e,"number"==typeof a?a:a$(a)),e}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return em(this,a9(this,a),a9(this,b),c,c&&c.type||"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};return em(this,a=a9(this,a),a,c,"bookmark")},findMarksAt:function(a){a=a9(this,a);var b=[],c=aW(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=a9(this,a),b=a9(this,b);var d=[],e=a.line;return this.iter(a.line,b.line+1,function(f){var g=f.markedSpans;if(g)for(var h=0;h<g.length;h++){var i=g[h];!(null!=i.to&&e==a.line&&a.ch>=i.to||null==i.from&&e!=a.line||null!=i.from&&e==b.line&&i.from>=b.ch)&&(!c||c(i.marker))&&d.push(i.marker.parent||i.marker)}++e}),d},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first,d=this.lineSeparator().length;return this.iter(function(e){var f=e.text.length+d;if(f>a)return b=a,!0;a-=f,++c}),a9(this,a2(c,b))},indexFromPos:function(a){var b=(a=a9(this,a)).ch;if(a.line<this.first||a.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,a.line,function(a){b+=a.text.length+c}),b},copy:function(a){var b=new eq(aY(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel=this.sel,b.extend=!1,a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new eq(aY(this,b,c),a.mode||this.modeOption,b,this.lineSep,this.direction);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],!function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.find(),f=a.clipPos(e.from),g=a.clipPos(e.to);if(a3(f,g)){var h=em(a,f,g,d.primary,d.primary.type);d.markers.push(h),h.parent=d}}}(d,eo(this)),d},unlinkDoc:function(a){if(a instanceof e6&&(a=a.doc),this.linked){for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1),a.unlinkDoc(this),function(a){for(var b=0;b<a.length;b++)!function(b){var c=a[b],d=[c.primary.doc];dI(c.primary.doc,function(a){return d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==W(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}(b)}(eo(this));break}}if(a.history==this.history){var c=[a.id];dI(a,function(a){return c.push(a.id)},!0),a.history=new dL(null),a.history.done=dS(this.history.done,c),a.history.undone=dS(this.history.undone,c)}},iterLinkedDocs:function(a){dI(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):aI(a)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:dc(function(a){if("rtl"!=a&&(a="ltr"),a!=this.direction){var b;this.direction=a,this.iter(function(a){return a.order=null}),this.cm&&c9(b=this.cm,function(){dK(b),cB(b)})}})}),eq.prototype.eachLine=eq.prototype.iter;var er=0;function es(a){var b=this;if(et(b),!(ax(b,a)||b0(b.display,a))){aB(a),p&&(er=+new Date);var c=cz(b,a,!0),d=a.dataTransfer.files;if(!(!c||b.isReadOnly()))if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(){++g==e&&da(b,function(){var a={from:c=a9(b.doc,c),to:c,text:b.doc.splitLines(f.filter(function(a){return null!=a}).join(b.doc.lineSeparator())),origin:"paste"};d6(b.doc,a),dX(b.doc,dz(a9(b.doc,c),a9(b.doc,dA(a))))})()},i=function(a,c){if(b.options.allowDropFileTypes&&-1==W(b.options.allowDropFileTypes,a.type))return void h();var d=new FileReader;d.onerror=function(){return h()},d.onload=function(){var a=d.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(a))return void h();f[c]=a,h()},d.readAsText(a)},j=0;j<d.length;j++)i(d[j],j);else{if(b.state.draggingText&&b.doc.sel.contains(c)>-1){b.state.draggingText(a),setTimeout(function(){return b.display.input.focus()},20);return}try{var k,l=a.dataTransfer.getData("Text");if(l){if(b.state.draggingText&&!b.state.draggingText.copy&&(k=b.listSelections()),dZ(b.doc,dz(c,c)),k)for(var m=0;m<k.length;++m)eb(b.doc,"",k[m].anchor,k[m].head,"drag");b.replaceSelection(l,"around","paste"),b.display.input.focus()}}catch(a){}}}}function et(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function eu(a){if(document.getElementsByClassName){for(var b=document.getElementsByClassName("CodeMirror"),c=[],d=0;d<b.length;d++){var e=b[d].CodeMirror;e&&c.push(e)}c.length&&c[0].operation(function(){for(var b=0;b<c.length;b++)a(c[b])})}}var ev=!1;function ew(a){var b=a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize()}for(var ex={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ey=0;ey<10;ey++)ex[ey+48]=ex[ey+96]=String(ey);for(var ez=65;ez<=90;ez++)ex[ez]=String.fromCharCode(ez);for(var eA=1;eA<=12;eA++)ex[eA+111]=ex[eA+63235]="F"+eA;var eB={};function eC(a){var b,c,d,e,f=a.split(/-(?!$)/);a=f[f.length-1];for(var g=0;g<f.length-1;g++){var h=f[g];if(/^(cmd|meta|m)$/i.test(h))e=!0;else if(/^a(lt)?$/i.test(h))b=!0;else if(/^(c|ctrl|control)$/i.test(h))c=!0;else if(/^s(hift)?$/i.test(h))d=!0;else throw Error("Unrecognized modifier name: "+h)}return b&&(a="Alt-"+a),c&&(a="Ctrl-"+a),e&&(a="Cmd-"+a),d&&(a="Shift-"+a),a}function eD(a,b,c,d){var e=(b=eH(b)).call?b.call(a,d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return eD(a,b.fallthrough,c,d);for(var f=0;f<b.fallthrough.length;f++){var g=eD(a,b.fallthrough[f],c,d);if(g)return g}}}function eE(a){var b="string"==typeof a?a:ex[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function eF(a,b,c){var d=a;return b.altKey&&"Alt"!=d&&(a="Alt-"+a),(F?b.metaKey:b.ctrlKey)&&"Ctrl"!=d&&(a="Ctrl-"+a),(F?b.ctrlKey:b.metaKey)&&"Mod"!=d&&(a="Cmd-"+a),!c&&b.shiftKey&&"Shift"!=d&&(a="Shift-"+a),a}function eG(a,b){if(u&&34==a.keyCode&&a.char)return!1;var c=ex[a.keyCode];return null!=c&&!a.altGraphKey&&(3==a.keyCode&&a.code&&(c=a.code),eF(c,a,b))}function eH(a){return"string"==typeof a?eB[a]:a}function eI(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=a3(f.from,ac(d).to);){var g=d.pop();if(0>a3(g.from,f.from)){f.from=g.from;break}}d.push(f)}c9(a,function(){for(var b=d.length-1;b>=0;b--)eb(a.doc,"",d[b].from,d[b].to,"+delete");cU(a)})}function eJ(a,b,c){var d=am(a.text,b+c,c);return d<0||d>a.text.length?null:d}function eK(a,b,c){var d=eJ(a,b.ch,c);return null==d?null:new a2(b.line,d,c<0?"after":"before")}function eL(a,b,c,d,e){if(a){"rtl"==b.doc.direction&&(e=-e);var f=ar(c,b.doc.direction);if(f){var g,h=e<0?ac(f):f[0],i=e<0==(1==h.level)?"after":"before";if(h.level>0||"rtl"==b.doc.direction){var j=b9(b,c),k=ca(b,j,g=e<0?c.text.length-1:0).top;g=an(function(a){return ca(b,j,a).top==k},e<0==(1==h.level)?h.from:h.to-1,g),"before"==i&&(g=eJ(c,g,1))}else g=e<0?h.to:h.from;return new a2(d,g,i)}}return new a2(d,e<0?c.text.length:0,e<0?"before":"after")}eB.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},eB.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},eB.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},eB.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},eB.default=B?eB.macDefault:eB.pcDefault;var eM={selectAll:d4,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Y)},killLine:function(a){return eI(a,function(b){if(!b.empty())return{from:b.from(),to:b.to()};var c=aW(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:a2(b.head.line+1,0)}:{from:b.head,to:a2(b.head.line,c)}})},deleteLine:function(a){return eI(a,function(b){return{from:a2(b.from().line,0),to:a9(a.doc,a2(b.to().line+1,0))}})},delLineLeft:function(a){return eI(a,function(a){return{from:a2(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){return eI(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){return eI(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:d}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(a2(a.firstLine(),0))},goDocEnd:function(a){return a.extendSelection(a2(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(b){return eN(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(b){return eO(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(b){var c,d,e,f;return c=a,d=b.head.line,(f=function(a){for(var b;b=by(a,!1);)a=b.find(1,!0).line;return a}(e=aW(c.doc,d)))!=e&&(d=a$(f)),eL(!0,c,e,d,-1)},{origin:"+move",bias:-1})},goLineRight:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div")},$)},goLineLeft:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:c},"div")},$)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5,d=a.coordsChar({left:0,top:c},"div");return d.ch<a.getLine(d.line).search(/\S/)?eO(a,b.head):d},$)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"codepoint")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("	")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),g=U(a.getLine(f.line),f.ch,d);b.push(ab(d-g%d))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return c9(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++)if(b[d].empty()){var e=b[d].head,f=aW(a.doc,e.line).text;if(f){if(e.ch==f.length&&(e=new a2(e.line,e.ch-1)),e.ch>0)e=new a2(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),a2(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=aW(a.doc,e.line-1).text;g&&(e=new a2(e.line,1),a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+g.charAt(g.length-1),a2(e.line-1,g.length-1),e,"+transpose"))}}c.push(new dx(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){return c9(a,function(){for(var b=a.listSelections(),c=b.length-1;c>=0;c--)a.replaceRange(a.doc.lineSeparator(),b[c].anchor,b[c].head,"+input");b=a.listSelections();for(var d=0;d<b.length;d++)a.indentLine(b[d].from().line,null,!0);cU(a)})},openLine:function(a){return a.replaceSelection("\n","start")},toggleOverwrite:function(a){return a.toggleOverwrite()}};function eN(a,b){var c=aW(a.doc,b),d=bA(c);return d!=c&&(b=a$(d)),eL(!0,a,d,b,1)}function eO(a,b){var c=eN(a,b.line),d=aW(a.doc,c.line),e=ar(d,a.doc.direction);if(!e||0==e[0].level){var f=Math.max(c.ch,d.text.search(/\S/)),g=b.line==c.line&&b.ch<=f&&b.ch;return a2(c.line,g?0:f,c.sticky)}return c}function eP(a,b,c){if("string"==typeof b&&!(b=eM[b]))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=X}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}var eQ=new V;function eR(a,b,c,d){var e=a.state.keySeq;if(e){if(eE(b))return"handled";if(/\'$/.test(b)?a.state.keySeq=null:eQ.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())}),eS(a,e+" "+b,c,d))return!0}return eS(a,b,c,d)}function eS(a,b,c,d){var e=function(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=eD(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&eD(b,a.options.extraKeys,c,a)||eD(b,a.options.keyMap,c,a)}(a,b,d);return"multi"==e&&(a.state.keySeq=b),"handled"==e&&bS(a,"keyHandled",a,b,c),("handled"==e||"multi"==e)&&(aB(c),cK(a)),!!e}function eT(a,b){var c=eG(b,!0);return!!c&&(b.shiftKey&&!a.state.keySeq?eR(a,"Shift-"+c,b,function(b){return eP(a,b,!0)})||eR(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return eP(a,b)}):eR(a,c,b,function(b){return eP(a,b)}))}var eU=null;function eV(a){if((!a.target||a.target==this.display.input.getField())&&(this.curOp.focus=O(),!ax(this,a))){p&&q<11&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||a.shiftKey;var c=eT(this,a);u&&(eU=c?b:null,!c&&88==b&&!aK&&(B?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut")),l&&!B&&!c&&46==b&&a.shiftKey&&!a.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||function(a){var b=a.display.lineDiv;function c(a){18!=a.keyCode&&a.altKey||(I(b,"CodeMirror-crosshair"),av(document,"keyup",c),av(document,"mouseover",c))}P(b,"CodeMirror-crosshair"),at(document,"keyup",c),at(document,"mouseover",c)}(this)}}function eW(a){16==a.keyCode&&(this.doc.sel.shift=!1),ax(this,a)}function eX(a){if(a.target&&a.target!=this.display.input.getField()||b0(this.display,a)||ax(this,a)||a.ctrlKey&&!a.altKey||B&&a.metaKey)return;var b,c=a.keyCode,d=a.charCode;if(u&&c==eU){eU=null,aB(a);return}if(!(u&&(!a.which||a.which<10)&&eT(this,a))){var e=String.fromCharCode(null==d?c:d);"\b"!=e&&(b=this,eR(b,"'"+e+"'",a,function(a){return eP(b,a,!0)})||this.display.input.onKeyPress(a))}}var eY=function(a,b,c){this.time=a,this.pos=b,this.button=c};function eZ(a){var b,c=this.display;if(!(ax(this,a)||c.activeTouch&&c.input.supportsTouch())){if(c.input.ensurePolled(),c.shift=a.shiftKey,b0(c,a)){r||(c.scroller.draggable=!1,setTimeout(function(){return c.scroller.draggable=!0},100));return}if(!e0(this,a)){var d,e,f,g,j,k,l=cz(this,a),m=aG(a),n=l?(b=+new Date,i&&i.compare(b,l,m)?(h=i=null,"triple"):h&&h.compare(b,l,m)?(i=new eY(b,l,m),h=null,"double"):(h=new eY(b,l,m),i=null,"single")):"single";window.focus(),1==m&&this.state.selectingText&&this.state.selectingText(a),l&&(d=this,e=m,f=l,g=n,j=a,k="Click","double"==g?k="Double"+k:"triple"==g&&(k="Triple"+k),eR(d,eF(k=(1==e?"Left":2==e?"Middle":"Right")+k,j),j,function(a){if("string"==typeof a&&(a=eM[a]),!a)return!1;var b=!1;try{d.isReadOnly()&&(d.state.suppressEdits=!0),b=a(d,f)!=X}finally{d.state.suppressEdits=!1}return b}))||(1==m?l?function(a,b,c,d){p?setTimeout(S(cL,a),0):a.curOp.focus=O();var e,f,g,h,i,j,k,l,m,n,o,s,t=(null==(o=(n=a.getOption("configureMouse"))?n(a,c,d):{}).unit&&(o.unit=(C?d.shiftKey&&d.metaKey:d.altKey)?"rectangle":"single"==c?"char":"double"==c?"word":"line"),(null==o.extend||a.doc.extend)&&(o.extend=a.doc.extend||d.shiftKey),null==o.addNew&&(o.addNew=B?d.metaKey:d.ctrlKey),null==o.moveOnDrag&&(o.moveOnDrag=!(B?d.altKey:d.ctrlKey)),o),u=a.doc.sel;a.options.dragDrop&&aH&&!a.isReadOnly()&&"single"==c&&(s=u.contains(b))>-1&&(0>a3((s=u.ranges[s]).from(),b)||b.xRel>0)&&(a3(s.to(),b)>0||b.xRel<0)?(e=a,f=d,g=b,h=t,i=e.display,j=!1,k=da(e,function(a){r&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:cM(e)),av(i.wrapper.ownerDocument,"mouseup",k),av(i.wrapper.ownerDocument,"mousemove",l),av(i.scroller,"dragstart",m),av(i.scroller,"drop",k),j||(aB(a),h.addNew||dU(e.doc,g,null,null,h.extend),r&&!v||p&&9==q?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),l=function(a){j=j||Math.abs(f.clientX-a.clientX)+Math.abs(f.clientY-a.clientY)>=10},m=function(){return j=!0},r&&(i.scroller.draggable=!0),e.state.draggingText=k,k.copy=!h.moveOnDrag,at(i.wrapper.ownerDocument,"mouseup",k),at(i.wrapper.ownerDocument,"mousemove",l),at(i.scroller,"dragstart",m),at(i.scroller,"drop",k),e.state.delayingBlurEvent=!0,setTimeout(function(){return i.input.focus()},20),i.scroller.dragDrop&&i.scroller.dragDrop()):function(a,b,c,d){p&&cM(a);var e=a.display,f=a.doc;aB(b);var g,h,i=f.sel,j=i.ranges;if(d.addNew&&!d.extend?g=(h=f.sel.contains(c))>-1?j[h]:new dx(c,c):(g=f.sel.primary(),h=f.sel.primIndex),"rectangle"==d.unit)d.addNew||(g=new dx(c,c)),c=cz(a,b,!0,!0),h=-1;else{var k=e$(a,c,d.unit);g=d.extend?dT(g,k.anchor,k.head,d.extend):k}d.addNew?-1==h?(h=j.length,dY(f,dy(a,j.concat([g]),h),{scroll:!1,origin:"*mouse"})):j.length>1&&j[h].empty()&&"char"==d.unit&&!d.extend?(dY(f,dy(a,j.slice(0,h).concat(j.slice(h+1)),0),{scroll:!1,origin:"*mouse"}),i=f.sel):dW(f,h,g,Z):(h=0,dY(f,new dw([g],0),Z),i=f.sel);var l=c,m=e.wrapper.getBoundingClientRect(),n=0;function o(b){a.state.selectingText=!1,n=1/0,b&&(aB(b),e.input.focus()),av(e.wrapper.ownerDocument,"mousemove",q),av(e.wrapper.ownerDocument,"mouseup",r),f.history.lastSelOrigin=null}var q=da(a,function(b){0!==b.buttons&&aG(b)?function b(j){var k=++n,o=cz(a,j,!0,"rectangle"==d.unit);if(o)if(0!=a3(o,l)){a.curOp.focus=O(),function(b){if(0!=a3(l,b))if(l=b,"rectangle"==d.unit){for(var e=[],j=a.options.tabSize,k=U(aW(f,c.line).text,c.ch,j),m=U(aW(f,b.line).text,b.ch,j),n=Math.min(k,m),o=Math.max(k,m),p=Math.min(c.line,b.line),q=Math.min(a.lastLine(),Math.max(c.line,b.line));p<=q;p++){var r=aW(f,p).text,s=_(r,n,j);n==o?e.push(new dx(a2(p,s),a2(p,s))):r.length>s&&e.push(new dx(a2(p,s),a2(p,_(r,o,j))))}e.length||e.push(new dx(c,c)),dY(f,dy(a,i.ranges.slice(0,h).concat(e),h),{origin:"*mouse",scroll:!1}),a.scrollIntoView(b)}else{var t,u=g,v=e$(a,b,d.unit),w=u.anchor;a3(v.anchor,w)>0?(t=v.head,w=a7(u.from(),v.anchor)):(t=v.anchor,w=a6(u.to(),v.head));var x=i.ranges.slice(0);x[h]=function(a,b){var c,d=b.anchor,e=b.head,f=aW(a.doc,d.line);if(0==a3(d,e)&&d.sticky==e.sticky)return b;var g=ar(f);if(!g)return b;var h=ap(g,d.ch,d.sticky),i=g[h];if(i.from!=d.ch&&i.to!=d.ch)return b;var j=h+ +(i.from==d.ch!=(1!=i.level));if(0==j||j==g.length)return b;if(e.line!=d.line)c=(e.line-d.line)*("ltr"==a.doc.direction?1:-1)>0;else{var k=ap(g,e.ch,e.sticky),l=k-h||(e.ch-d.ch)*(1==i.level?-1:1);c=k==j-1||k==j?l<0:l>0}var m=g[j+(c?-1:0)],n=c==(1==m.level),o=n?m.from:m.to,p=n?"after":"before";return d.ch==o&&d.sticky==p?b:new dx(new a2(d.line,o,p),e)}(a,new dx(a9(f,w),t)),dY(f,dy(a,x,h),Z)}}(o);var p=cR(e,f);(o.line>=p.to||o.line<p.from)&&setTimeout(da(a,function(){n==k&&b(j)}),150)}else{var q=j.clientY<m.top?-20:20*(j.clientY>m.bottom);q&&setTimeout(da(a,function(){n==k&&(e.scroller.scrollTop+=q,b(j))}),50)}}(b):o(b)}),r=da(a,o);a.state.selectingText=r,at(e.wrapper.ownerDocument,"mousemove",q),at(e.wrapper.ownerDocument,"mouseup",r)}(a,d,b,t)}(this,l,n,a):aF(a)==c.scroller&&aB(a):2==m?(l&&dU(this.doc,l),setTimeout(function(){return c.input.focus()},20)):3==m&&(G?this.display.input.onContextMenu(a):cM(this)))}}}function e$(a,b,c){if("char"==c)return new dx(b,b);if("word"==c)return a.findWordAt(b);if("line"==c)return new dx(a2(b.line,0),a9(a.doc,a2(b.line+1,0)));var d=c(a,b);return new dx(d.from,d.to)}function e_(a,b,c,d){if(b.touches)e=b.touches[0].clientX,f=b.touches[0].clientY;else try{e=b.clientX,f=b.clientY}catch(a){return!1}if(e>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&aB(b);var e,f,g=a.display,h=g.lineDiv.getBoundingClientRect();if(f>h.bottom||!az(a,c))return aD(b);f-=h.top-g.viewOffset;for(var i=0;i<a.display.gutterSpecs.length;++i){var j=g.gutters.childNodes[i];if(j&&j.getBoundingClientRect().right>=e){var k=a_(a.doc,f),l=a.display.gutterSpecs[i];return aw(a,c,a,k,l.className,b),aD(b)}}}function e0(a,b){return e_(a,b,"gutterClick",!0)}function e1(a,b){var c,d;!(b0(a.display,b)||(c=a,d=b,az(c,"gutterContextMenu")&&e_(c,d,"gutterContextMenu",!1)))&&!ax(a,b,"contextmenu")&&(G||a.display.input.onContextMenu(b))}function e2(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),cf(a)}eY.prototype.compare=function(a,b,c){return this.time+400>a&&0==a3(b,this.pos)&&c==this.button};var e3={toString:function(){return"CodeMirror.Init"}},e4={},e5={};function e6(a,b){var c,d=this;if(!(this instanceof e6))return new e6(a,b);this.options=b=b?T(b):{},T(e4,b,!1);var e=b.value;"string"==typeof e?e=new eq(e,b.mode,null,b.lineSeparator,b.direction):b.mode&&(e.modeOption=b.mode),this.doc=e;var f=new e6.inputStyles[b.inputStyle](this),g=this.display=new dr(a,e,f,b);for(var h in g.wrapper.CodeMirror=this,e2(this),b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),c5(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new V,keySeq:null,specialChars:null},b.autofocus&&!A&&g.input.focus(),p&&q<11&&setTimeout(function(){return d.display.input.reset(!0)},20),function(a){var b=a.display;at(b.scroller,"mousedown",da(a,eZ)),p&&q<11?at(b.scroller,"dblclick",da(a,function(b){if(!ax(a,b)){var c=cz(a,b);if(!(!c||e0(a,b)||b0(a.display,b))){aB(b);var d=a.findWordAt(c);dU(a.doc,d.anchor,d.head)}}})):at(b.scroller,"dblclick",function(b){return ax(a,b)||aB(b)}),at(b.scroller,"contextmenu",function(b){return e1(a,b)}),at(b.input.getField(),"contextmenu",function(c){b.scroller.contains(c.target)||e1(a,c)});var c,d={end:0};function e(){b.activeTouch&&(c=setTimeout(function(){return b.activeTouch=null},1e3),(d=b.activeTouch).end=+new Date)}function f(a,b){if(null==b.left)return!0;var c=b.left-a.left,d=b.top-a.top;return c*c+d*d>400}at(b.scroller,"touchstart",function(e){if(!ax(a,e)&&!function(a){if(1!=a.touches.length)return!1;var b=a.touches[0];return b.radiusX<=1&&b.radiusY<=1}(e)&&!e0(a,e)){b.input.ensurePolled(),clearTimeout(c);var f=+new Date;b.activeTouch={start:f,moved:!1,prev:f-d.end<=300?d:null},1==e.touches.length&&(b.activeTouch.left=e.touches[0].pageX,b.activeTouch.top=e.touches[0].pageY)}}),at(b.scroller,"touchmove",function(){b.activeTouch&&(b.activeTouch.moved=!0)}),at(b.scroller,"touchend",function(c){var d=b.activeTouch;if(d&&!b0(b,c)&&null!=d.left&&!d.moved&&new Date-d.start<300){var g,h=a.coordsChar(b.activeTouch,"page");g=!d.prev||f(d,d.prev)?new dx(h,h):!d.prev.prev||f(d,d.prev.prev)?a.findWordAt(h):new dx(a2(h.line,0),a9(a.doc,a2(h.line+1,0))),a.setSelection(g.anchor,g.head),a.focus(),aB(c)}e()}),at(b.scroller,"touchcancel",e),at(b.scroller,"scroll",function(){b.scroller.clientHeight&&(cY(a,b.scroller.scrollTop),c$(a,b.scroller.scrollLeft,!0),aw(a,"scroll",a))}),at(b.scroller,"mousewheel",function(b){return dv(a,b)}),at(b.scroller,"DOMMouseScroll",function(b){return dv(a,b)}),at(b.wrapper,"scroll",function(){return b.wrapper.scrollTop=b.wrapper.scrollLeft=0}),b.dragFunctions={enter:function(b){ax(a,b)||aE(b)},over:function(b){if(!ax(a,b)){var c=a,d=b,e=cz(c,d);if(e){var f=document.createDocumentFragment();cI(c,e,f),c.display.dragCursor||(c.display.dragCursor=L("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),c.display.lineSpace.insertBefore(c.display.dragCursor,c.display.cursorDiv)),K(c.display.dragCursor,f)}aE(b)}},start:function(b){var c=a,d=b;if(p&&(!c.state.draggingText||new Date-er<100))return void aE(d);if(!(ax(c,d)||b0(c.display,d))&&(d.dataTransfer.setData("Text",c.getSelection()),d.dataTransfer.effectAllowed="copyMove",d.dataTransfer.setDragImage&&!v)){var e=L("img",null,null,"position: fixed; left: 0; top: 0;");e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",u&&(e.width=e.height=1,c.display.wrapper.appendChild(e),e._top=e.offsetTop),d.dataTransfer.setDragImage(e,0,0),u&&e.parentNode.removeChild(e)}},drop:da(a,es),leave:function(b){ax(a,b)||et(a)}};var g=b.input.getField();at(g,"keyup",function(b){return eW.call(a,b)}),at(g,"keydown",da(a,eV)),at(g,"keypress",da(a,eX)),at(g,"focus",function(b){return cN(a,b)}),at(g,"blur",function(b){return cO(a,b)})}(this),ev||(at(window,"resize",function(){null==c&&(c=setTimeout(function(){c=null,eu(ew)},100))}),at(window,"blur",function(){return eu(cO)}),ev=!0),c7(this),this.curOp.forceUpdate=!0,dJ(this,e),b.autofocus&&!A||this.hasFocus()?setTimeout(function(){d.hasFocus()&&!d.state.focused&&cN(d)},20):cO(this),e5)e5.hasOwnProperty(h)&&e5[h](this,b[h],e3);dm(this),b.finishInit&&b.finishInit(this);for(var i=0;i<e7.length;++i)e7[i](this);c8(this),r&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(g.lineDiv).textRendering&&(g.lineDiv.style.textRendering="auto")}e6.defaults=e4,e6.optionHandlers=e5;var e7=[];function e8(a,b,c,d){var e,f=a.doc;null==c&&(c="add"),"smart"==c&&(f.mode.indent?e=bf(a,b).state:c="prev");var g=a.options.tabSize,h=aW(f,b),i=U(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var j,k=h.text.match(/^\s*/)[0];if(d||/\S/.test(h.text)){if("smart"==c&&((j=f.mode.indent(e,h.text.slice(k.length),h.text))==X||j>150)){if(!d)return;c="prev"}}else j=0,c="not";"prev"==c?j=b>f.first?U(aW(f,b-1).text,null,g):0:"add"==c?j=i+a.options.indentUnit:"subtract"==c?j=i-a.options.indentUnit:"number"==typeof c&&(j=i+c),j=Math.max(0,j);var l="",m=0;if(a.options.indentWithTabs)for(var n=Math.floor(j/g);n;--n)m+=g,l+="	";if(m<j&&(l+=ab(j-m)),l!=k)return eb(f,l,a2(b,0),a2(b,k.length),"+input"),h.stateAfter=null,!0;for(var o=0;o<f.sel.ranges.length;o++){var p=f.sel.ranges[o];if(p.head.line==b&&p.head.ch<k.length){var q=a2(b,k.length);dW(f,o,new dx(q,q));break}}}e6.defineInitHook=function(a){return e7.push(a)};var e9=null;function fa(a,b,c,d,e){var f=a.doc;a.display.shift=!1,d||(d=f.sel);var g=new Date-200,h="paste"==e||a.state.pasteIncoming>g,i=aI(b),j=null;if(h&&d.ranges.length>1)if(e9&&e9.text.join("\n")==b){if(d.ranges.length%e9.text.length==0){j=[];for(var k=0;k<e9.text.length;k++)j.push(f.splitLines(e9.text[k]))}}else i.length==d.ranges.length&&a.options.pasteLinesPerSelection&&(j=ad(i,function(a){return[a]}));for(var l=a.curOp.updateInput,m=d.ranges.length-1;m>=0;m--){var n=d.ranges[m],o=n.from(),p=n.to();n.empty()&&(c&&c>0?o=a2(o.line,o.ch-c):a.state.overwrite&&!h?p=a2(p.line,Math.min(aW(f,p.line).text.length,p.ch+ac(i).length)):h&&e9&&e9.lineWise&&e9.text.join("\n")==i.join("\n")&&(o=p=a2(o.line,0)));var q={from:o,to:p,text:j?j[m%j.length]:i,origin:e||(h?"paste":a.state.cutIncoming>g?"cut":"+input")};d6(a.doc,q),bS(a,"inputRead",a,q)}b&&!h&&fc(a,b),cU(a),a.curOp.updateInput<2&&(a.curOp.updateInput=l),a.curOp.typing=!0,a.state.pasteIncoming=a.state.cutIncoming=-1}function fb(a,b){var c=a.clipboardData&&a.clipboardData.getData("Text");if(c)return a.preventDefault(),b.isReadOnly()||b.options.disableInput||c9(b,function(){return fa(b,c,0,null,"paste")}),!0}function fc(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;d>=0;d--){var e=c.ranges[d];if(!(e.head.ch>100)&&(!d||c.ranges[d-1].head.line!=e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars){for(var h=0;h<f.electricChars.length;h++)if(b.indexOf(f.electricChars.charAt(h))>-1){g=e8(a,e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(aW(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=e8(a,e.head.line,"smart"));g&&bS(a,"electricInput",a,e.head.line)}}}function fd(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line,f={anchor:a2(e,0),head:a2(e+1,0)};c.push(f),b.push(a.getRange(f.anchor,f.head))}return{text:b,ranges:c}}function fe(a,b,c,d){a.setAttribute("autocorrect",c?"":"off"),a.setAttribute("autocapitalize",d?"":"off"),a.setAttribute("spellcheck",!!b)}function ff(){var a=L("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),b=L("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return r?a.style.width="1000px":a.setAttribute("wrap","off"),y&&(a.style.border="1px solid black"),fe(a),b}function fg(a,b,c,d,e){var f=b,g=c,h=aW(a,b.line),i=e&&"rtl"==a.direction?-c:c;function j(f){if("codepoint"==d){var g,j,k=h.text.charCodeAt(b.ch+(c>0?0:-1));if(isNaN(k))g=null;else{var l=c>0?k>=55296&&k<56320:k>=56320&&k<57343;g=new a2(b.line,Math.max(0,Math.min(h.text.length,b.ch+c*(l?2:1))),-c)}}else g=e?function(a,b,c,d){var e,f=ar(b,a.doc.direction);if(!f)return eK(b,c,d);c.ch>=b.text.length?(c.ch=b.text.length,c.sticky="before"):c.ch<=0&&(c.ch=0,c.sticky="after");var g=ap(f,c.ch,c.sticky),h=f[g];if("ltr"==a.doc.direction&&h.level%2==0&&(d>0?h.to>c.ch:h.from<c.ch))return eK(b,c,d);var i=function(a,c){return eJ(b,a instanceof a2?a.ch:a,c)},j=function(c){return a.options.lineWrapping?(e=e||b9(a,b),cr(a,b,e,c)):{begin:0,end:b.text.length}},k=j("before"==c.sticky?i(c,-1):c.ch);if("rtl"==a.doc.direction||1==h.level){var l=1==h.level==d<0,m=i(c,l?1:-1);if(null!=m&&(l?m<=h.to&&m<=k.end:m>=h.from&&m>=k.begin))return new a2(c.line,m,l?"before":"after")}var n=function(a,b,d){for(var e=function(a,b){return b?new a2(c.line,i(a,1),"before"):new a2(c.line,a,"after")};a>=0&&a<f.length;a+=b){var g=f[a],h=b>0==(1!=g.level),j=h?d.begin:i(d.end,-1);if(g.from<=j&&j<g.to||(j=h?g.from:i(g.to,-1),d.begin<=j&&j<d.end))return e(j,h)}},o=n(g+d,d,k);if(o)return o;var p=d>0?k.end:i(k.begin,-1);return null!=p&&!(d>0&&p==b.text.length)&&(o=n(d>0?0:f.length-1,d,j(p)))?o:null}(a.cm,h,b,c):eK(h,b,c);if(null==g){if(!(!f&&!((j=b.line+i)<a.first)&&!(j>=a.first+a.size)&&(b=new a2(j,b.ch,b.sticky),h=aW(a,j))))return!1;b=eL(e,a.cm,h,b.line,i)}else b=g;return!0}if("char"==d||"codepoint"==d)j();else if("column"==d)j(!0);else if("word"==d||"group"==d)for(var k=null,l="group"==d,m=a.cm&&a.cm.getHelper(b,"wordChars"),n=!0;!(c<0)||j(!n);n=!1){var o=h.text.charAt(b.ch)||"\n",p=ai(o,m)?"w":l&&"\n"==o?"n":!l||/\s/.test(o)?null:"p";if(!l||n||p||(p="s"),k&&k!=p){c<0&&(c=1,j(),b.sticky="after");break}if(p&&(k=p),c>0&&!j(!n))break}var q=d2(a,b,f,g,!0);return a4(f,q)&&(q.hitSide=!0),q}function fh(a,b,c,d){var e,f,g=a.doc,h=b.left;if("page"==d){var i=Math.max(Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-.5*ct(a.display),3);f=(c>0?b.bottom:b.top)+c*i}else"line"==d&&(f=c>0?b.bottom+3:b.top-3);for(;(e=cp(a,h,f)).outside;){if(c<0?f<=0:f>=g.height){e.hitSide=!0;break}f+=5*c}return e}var fi=function(a){this.cm=a,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new V,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function fj(a,b){var c=b8(a,b.line);if(!c||c.hidden)return null;var d=aW(a.doc,b.line),e=b7(c,d,b.line),f=ar(d,a.doc.direction),g="left";f&&(g=ap(f,b.ch)%2?"right":"left");var h=cc(e.map,b.ch,g);return h.offset="right"==h.collapse?h.end:h.start,h}function fk(a,b){return b&&(a.bad=!0),a}function fl(a,b,c){var d;if(b==a.display.lineDiv){if(!(d=a.display.lineDiv.childNodes[c]))return fk(a.clipPos(a2(a.display.viewTo-1)),!0);b=null,c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return function(a,b,c){var d=a.text.firstChild,e=!1;if(!b||!N(d,b))return fk(a2(a$(a.line),0),!0);if(b==d&&(e=!0,b=d.childNodes[c],c=0,!b)){var f=a.rest?ac(a.rest):a.line;return fk(a2(a$(f),f.text.length),e)}var g=3==b.nodeType?b:null,h=b;for(!g&&1==b.childNodes.length&&3==b.firstChild.nodeType&&(g=b.firstChild,c&&(c=g.nodeValue.length));h.parentNode!=d;)h=h.parentNode;var i=a.measure,j=i.maps;function k(b,c,d){for(var e=-1;e<(j?j.length:0);e++)for(var f=e<0?i.map:j[e],g=0;g<f.length;g+=3){var h=f[g+2];if(h==b||h==c){var k=a$(e<0?a.line:a.rest[e]),l=f[g]+d;return(d<0||h!=b)&&(l=f[g+ +!!d]),a2(k,l)}}}var l=k(g,h,c);if(l)return fk(l,e);for(var m=h.nextSibling,n=g?g.nodeValue.length-c:0;m;m=m.nextSibling){if(l=k(m,m.firstChild,0))return fk(a2(l.line,l.ch-n),e);n+=m.textContent.length}for(var o=h.previousSibling,p=c;o;o=o.previousSibling){if(l=k(o,o.firstChild,-1))return fk(a2(l.line,l.ch+p),e);p+=o.textContent.length}}(f,b,c)}}fi.prototype.init=function(a){var b=this,c=this,d=c.cm,e=c.div=a.lineDiv;function f(a){for(var b=a.target;b;b=b.parentNode){if(b==e)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(b.className))break}return!1}function g(a){if(!(!f(a)||ax(d,a))){if(d.somethingSelected())e9={lineWise:!1,text:d.getSelections()},"cut"==a.type&&d.replaceSelection("",null,"cut");else{if(!d.options.lineWiseCopyCut)return;var b=fd(d);e9={lineWise:!0,text:b.text},"cut"==a.type&&d.operation(function(){d.setSelections(b.ranges,0,Y),d.replaceSelection("",null,"cut")})}if(a.clipboardData){a.clipboardData.clearData();var g=e9.text.join("\n");if(a.clipboardData.setData("Text",g),a.clipboardData.getData("Text")==g)return void a.preventDefault()}var h=ff(),i=h.firstChild;d.display.lineSpace.insertBefore(h,d.display.lineSpace.firstChild),i.value=e9.text.join("\n");var j=O();R(i),setTimeout(function(){d.display.lineSpace.removeChild(h),j.focus(),j==e&&c.showPrimarySelection()},50)}}e.contentEditable=!0,fe(e,d.options.spellcheck,d.options.autocorrect,d.options.autocapitalize),at(e,"paste",function(a){!(!f(a)||ax(d,a)||fb(a,d))&&q<=11&&setTimeout(da(d,function(){return b.updateFromDOM()}),20)}),at(e,"compositionstart",function(a){b.composing={data:a.data,done:!1}}),at(e,"compositionupdate",function(a){b.composing||(b.composing={data:a.data,done:!1})}),at(e,"compositionend",function(a){b.composing&&(a.data!=b.composing.data&&b.readFromDOMSoon(),b.composing.done=!0)}),at(e,"touchstart",function(){return c.forceCompositionEnd()}),at(e,"input",function(){b.composing||b.readFromDOMSoon()}),at(e,"copy",g),at(e,"cut",g)},fi.prototype.screenReaderLabelChanged=function(a){a?this.div.setAttribute("aria-label",a):this.div.removeAttribute("aria-label")},fi.prototype.prepareSelection=function(){var a=cH(this.cm,!1);return a.focus=O()==this.div,a},fi.prototype.showSelection=function(a,b){a&&this.cm.display.view.length&&((a.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(a))},fi.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},fi.prototype.showPrimarySelection=function(){var a=this.getSelection(),b=this.cm,c=b.doc.sel.primary(),e=c.from(),f=c.to();if(b.display.viewTo==b.display.viewFrom||e.line>=b.display.viewTo||f.line<b.display.viewFrom)return void a.removeAllRanges();var g=fl(b,a.anchorNode,a.anchorOffset),h=fl(b,a.focusNode,a.focusOffset);if(!g||g.bad||!h||h.bad||0!=a3(a7(g,h),e)||0!=a3(a6(g,h),f)){var i=b.display.view,j=e.line>=b.display.viewFrom&&fj(b,e)||{node:i[0].measure.map[2],offset:0},k=f.line<b.display.viewTo&&fj(b,f);if(!k){var m=i[i.length-1].measure,n=m.maps?m.maps[m.maps.length-1]:m.map;k={node:n[n.length-1],offset:n[n.length-2]-n[n.length-3]}}if(!j||!k)return void a.removeAllRanges();var o,p=a.rangeCount&&a.getRangeAt(0);try{o=d(j.node,j.offset,k.offset,k.node)}catch(a){}o&&(!l&&b.state.focused?(a.collapse(j.node,j.offset),o.collapsed||(a.removeAllRanges(),a.addRange(o))):(a.removeAllRanges(),a.addRange(o)),p&&null==a.anchorNode?a.addRange(p):l&&this.startGracePeriod()),this.rememberSelection()}},fi.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){a.gracePeriod=!1,a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)},fi.prototype.showMultipleSelections=function(a){K(this.cm.display.cursorDiv,a.cursors),K(this.cm.display.selectionDiv,a.selection)},fi.prototype.rememberSelection=function(){var a=this.getSelection();this.lastAnchorNode=a.anchorNode,this.lastAnchorOffset=a.anchorOffset,this.lastFocusNode=a.focusNode,this.lastFocusOffset=a.focusOffset},fi.prototype.selectionInEditor=function(){var a=this.getSelection();if(!a.rangeCount)return!1;var b=a.getRangeAt(0).commonAncestorContainer;return N(this.div,b)},fi.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&O()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},fi.prototype.blur=function(){this.div.blur()},fi.prototype.getField=function(){return this.div},fi.prototype.supportsTouch=function(){return!0},fi.prototype.receivedFocus=function(){var a=this,b=this;this.selectionInEditor()?setTimeout(function(){return a.pollSelection()},20):c9(this.cm,function(){return b.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))})},fi.prototype.selectionChanged=function(){var a=this.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},fi.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var a=this.getSelection(),b=this.cm;if(z&&t&&this.cm.display.gutterSpecs.length&&function(a){for(var b=a;b;b=b.parentNode)if(/CodeMirror-gutter-wrapper/.test(b.className))return!0;return!1}(a.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var c=fl(b,a.anchorNode,a.anchorOffset),d=fl(b,a.focusNode,a.focusOffset);c&&d&&c9(b,function(){dY(b.doc,dz(c,d),Y),(c.bad||d.bad)&&(b.curOp.selectionChanged=!0)})}}},fi.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a,b,c,d,e,f=this.cm,g=f.display,h=f.doc.sel.primary(),i=h.from(),j=h.to();if(0==i.ch&&i.line>f.firstLine()&&(i=a2(i.line-1,aW(f.doc,i.line-1).length)),j.ch==aW(f.doc,j.line).text.length&&j.line<f.lastLine()&&(j=a2(j.line+1,0)),i.line<g.viewFrom||j.line>g.viewTo-1)return!1;i.line==g.viewFrom||0==(a=cA(f,i.line))?(b=a$(g.view[0].line),c=g.view[0].node):(b=a$(g.view[a].line),c=g.view[a-1].node.nextSibling);var k=cA(f,j.line);if(k==g.view.length-1?(d=g.viewTo-1,e=g.lineDiv.lastChild):(d=a$(g.view[k+1].line)-1,e=g.view[k+1].node.previousSibling),!c)return!1;for(var l=f.doc.splitLines(function(a,b,c,d,e){var f="",g=!1,h=a.doc.lineSeparator(),i=!1;function j(){g&&(f+=h,i&&(f+=h),g=i=!1)}function k(a){a&&(j(),f+=a)}for(;!function b(c){if(1==c.nodeType){var f=c.getAttribute("cm-text");if(f)return void k(f);var l,m=c.getAttribute("cm-marker");if(m){var n,o=a.findMarks(a2(d,0),a2(e+1,0),(n=+m,function(a){return a.id==n}));o.length&&(l=o[0].find(0))&&k(aX(a.doc,l.from,l.to).join(h));return}if("false"!=c.getAttribute("contenteditable")){var p=/^(pre|div|p|li|table|br)$/i.test(c.nodeName);if(/^br$/i.test(c.nodeName)||0!=c.textContent.length){p&&j();for(var q=0;q<c.childNodes.length;q++)b(c.childNodes[q]);/^(pre|p)$/i.test(c.nodeName)&&(i=!0),p&&(g=!0)}}}else 3==c.nodeType&&k(c.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}(b),b!=c;)b=b.nextSibling,i=!1;return f}(f,c,e,b,d)),m=aX(f.doc,a2(b,0),a2(d,aW(f.doc,d).text.length));l.length>1&&m.length>1;)if(ac(l)==ac(m))l.pop(),m.pop(),d--;else if(l[0]==m[0])l.shift(),m.shift(),b++;else break;for(var n=0,o=0,p=l[0],q=m[0],r=Math.min(p.length,q.length);n<r&&p.charCodeAt(n)==q.charCodeAt(n);)++n;for(var s=ac(l),t=ac(m),u=Math.min(s.length-(1==l.length?n:0),t.length-(1==m.length?n:0));o<u&&s.charCodeAt(s.length-o-1)==t.charCodeAt(t.length-o-1);)++o;if(1==l.length&&1==m.length&&b==i.line)for(;n&&n>i.ch&&s.charCodeAt(s.length-o-1)==t.charCodeAt(t.length-o-1);)n--,o++;l[l.length-1]=s.slice(0,s.length-o).replace(/^\u200b+/,""),l[0]=l[0].slice(n).replace(/\u200b+$/,"");var v=a2(b,n),w=a2(d,m.length?ac(m).length-o:0);if(l.length>1||l[0]||a3(v,w))return eb(f.doc,l,v,w,"+input"),!0},fi.prototype.ensurePolled=function(){this.forceCompositionEnd()},fi.prototype.reset=function(){this.forceCompositionEnd()},fi.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},fi.prototype.readFromDOMSoon=function(){var a=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(a.readDOMTimeout=null,a.composing)if(!a.composing.done)return;else a.composing=null;a.updateFromDOM()},80))},fi.prototype.updateFromDOM=function(){var a=this;(this.cm.isReadOnly()||!this.pollContent())&&c9(this.cm,function(){return cB(a.cm)})},fi.prototype.setUneditable=function(a){a.contentEditable="false"},fi.prototype.onKeyPress=function(a){0!=a.charCode&&!this.composing&&(a.preventDefault(),this.cm.isReadOnly()||da(this.cm,fa)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0))},fi.prototype.readOnlyChanged=function(a){this.div.contentEditable=String("nocursor"!=a)},fi.prototype.onContextMenu=function(){},fi.prototype.resetPosition=function(){},fi.prototype.needsContentAttribute=!0;var fm=function(a){this.cm=a,this.prevInput="",this.pollingFast=!1,this.polling=new V,this.hasSelection=!1,this.composing=null};fm.prototype.init=function(a){var b=this,c=this,d=this.cm;this.createField(a);var e=this.textarea;function f(a){if(!ax(d,a)){if(d.somethingSelected())e9={lineWise:!1,text:d.getSelections()};else{if(!d.options.lineWiseCopyCut)return;var b=fd(d);e9={lineWise:!0,text:b.text},"cut"==a.type?d.setSelections(b.ranges,null,Y):(c.prevInput="",e.value=b.text.join("\n"),R(e))}"cut"==a.type&&(d.state.cutIncoming=+new Date)}}a.wrapper.insertBefore(this.wrapper,a.wrapper.firstChild),y&&(e.style.width="0px"),at(e,"input",function(){p&&q>=9&&b.hasSelection&&(b.hasSelection=null),c.poll()}),at(e,"paste",function(a){ax(d,a)||fb(a,d)||(d.state.pasteIncoming=+new Date,c.fastPoll())}),at(e,"cut",f),at(e,"copy",f),at(a.scroller,"paste",function(b){if(!(b0(a,b)||ax(d,b))){if(!e.dispatchEvent){d.state.pasteIncoming=+new Date,c.focus();return}var f=new Event("paste");f.clipboardData=b.clipboardData,e.dispatchEvent(f)}}),at(a.lineSpace,"selectstart",function(b){b0(a,b)||aB(b)}),at(e,"compositionstart",function(){var a=d.getCursor("from");c.composing&&c.composing.range.clear(),c.composing={start:a,range:d.markText(a,d.getCursor("to"),{className:"CodeMirror-composing"})}}),at(e,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},fm.prototype.createField=function(a){this.wrapper=ff(),this.textarea=this.wrapper.firstChild},fm.prototype.screenReaderLabelChanged=function(a){a?this.textarea.setAttribute("aria-label",a):this.textarea.removeAttribute("aria-label")},fm.prototype.prepareSelection=function(){var a=this.cm,b=a.display,c=a.doc,d=cH(a);if(a.options.moveInputWithCursor){var e=cm(a,c.sel.primary().head,"div"),f=b.wrapper.getBoundingClientRect(),g=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,e.top+g.top-f.top)),d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,e.left+g.left-f.left))}return d},fm.prototype.showSelection=function(a){var b=this.cm.display;K(b.cursorDiv,a.cursors),K(b.selectionDiv,a.selection),null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},fm.prototype.reset=function(a){if(!this.contextMenuPending&&!this.composing){var b=this.cm;if(b.somethingSelected()){this.prevInput="";var c=b.getSelection();this.textarea.value=c,b.state.focused&&R(this.textarea),p&&q>=9&&(this.hasSelection=c)}else!a&&(this.prevInput=this.textarea.value="",p&&q>=9&&(this.hasSelection=null))}},fm.prototype.getField=function(){return this.textarea},fm.prototype.supportsTouch=function(){return!1},fm.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!A||O()!=this.textarea))try{this.textarea.focus()}catch(a){}},fm.prototype.blur=function(){this.textarea.blur()},fm.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},fm.prototype.receivedFocus=function(){this.slowPoll()},fm.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll(),a.cm.state.focused&&a.slowPoll()})},fm.prototype.fastPoll=function(){var a=!1,b=this;b.pollingFast=!0,b.polling.set(20,function c(){b.poll()||a?(b.pollingFast=!1,b.slowPoll()):(a=!0,b.polling.set(60,c))})},fm.prototype.poll=function(){var a=this,b=this.cm,c=this.textarea,d=this.prevInput;if(this.contextMenuPending||!b.state.focused||aJ(c)&&!d&&!this.composing||b.isReadOnly()||b.options.disableInput||b.state.keySeq)return!1;var e=c.value;if(e==d&&!b.somethingSelected())return!1;if(p&&q>=9&&this.hasSelection===e||B&&/[\uf700-\uf7ff]/.test(e))return b.display.input.reset(),!1;if(b.doc.sel==b.display.selForContextMenu){var f=e.charCodeAt(0);if(8203!=f||d||(d=""),8666==f)return this.reset(),this.cm.execCommand("undo")}for(var g=0,h=Math.min(d.length,e.length);g<h&&d.charCodeAt(g)==e.charCodeAt(g);)++g;return c9(b,function(){fa(b,e.slice(g),d.length-g,null,a.composing?"*compose":null),e.length>1e3||e.indexOf("\n")>-1?c.value=a.prevInput="":a.prevInput=e,a.composing&&(a.composing.range.clear(),a.composing.range=b.markText(a.composing.start,b.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},fm.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},fm.prototype.onKeyPress=function(){p&&q>=9&&(this.hasSelection=null),this.fastPoll()},fm.prototype.onContextMenu=function(a){var b,c=this,d=c.cm,e=d.display,f=c.textarea;c.contextMenuPending&&c.contextMenuPending();var g=cz(d,a),h=e.scroller.scrollTop;if(g&&!u){d.options.resetSelectionOnContextMenu&&-1==d.doc.sel.contains(g)&&da(d,dY)(d.doc,dz(g),Y);var i=f.style.cssText,j=c.wrapper.style.cssText,k=c.wrapper.offsetParent.getBoundingClientRect();if(c.wrapper.style.cssText="position: static",f.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(a.clientY-k.top-5)+"px; left: "+(a.clientX-k.left-5)+"px;\n      z-index: 1000; background: "+(p?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",r&&(b=window.scrollY),e.input.focus(),r&&window.scrollTo(null,b),e.input.reset(),d.somethingSelected()||(f.value=c.prevInput=" "),c.contextMenuPending=n,e.selForContextMenu=d.doc.sel,clearTimeout(e.detectingSelectAll),p&&q>=9&&m(),G){aE(a);var l=function(){av(window,"mouseup",l),setTimeout(n,20)};at(window,"mouseup",l)}else setTimeout(n,50)}function m(){if(null!=f.selectionStart){var a=d.somethingSelected(),b=""+(a?f.value:"");f.value="",f.value=b,c.prevInput=a?"":"",f.selectionStart=1,f.selectionEnd=b.length,e.selForContextMenu=d.doc.sel}}function n(){if(c.contextMenuPending==n&&(c.contextMenuPending=!1,c.wrapper.style.cssText=j,f.style.cssText=i,p&&q<9&&e.scrollbars.setScrollTop(e.scroller.scrollTop=h),null!=f.selectionStart)){(!p||p&&q<9)&&m();var a=0,b=function(){e.selForContextMenu==d.doc.sel&&0==f.selectionStart&&f.selectionEnd>0&&""==c.prevInput?da(d,d4)(d):a++<10?e.detectingSelectAll=setTimeout(b,500):(e.selForContextMenu=null,e.input.reset())};e.detectingSelectAll=setTimeout(b,200)}}},fm.prototype.readOnlyChanged=function(a){a||this.reset(),this.textarea.disabled="nocursor"==a,this.textarea.readOnly=!!a},fm.prototype.setUneditable=function(){},fm.prototype.needsContentAttribute=!1;var fn=e6.optionHandlers;function fo(a,b,c,d){e6.defaults[a]=b,c&&(fn[a]=d?function(a,b,d){d!=e3&&c(a,b,d)}:c)}e6.defineOption=fo,e6.Init=e3,fo("value","",function(a,b){return a.setValue(b)},!0),fo("mode",null,function(a,b){a.doc.modeOption=b,dE(a)},!0),fo("indentUnit",2,dE,!0),fo("indentWithTabs",!1),fo("smartIndent",!0),fo("tabSize",4,function(a){dF(a),cf(a),cB(a)},!0),fo("lineSeparator",null,function(a,b){if(a.doc.lineSep=b,b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var f=a.text.indexOf(b,e);if(-1==f)break;e=f+b.length,c.push(a2(d,f))}d++});for(var e=c.length-1;e>=0;e--)eb(a.doc,b,c[e],a2(c[e].line,c[e].ch+b.length))}}),fo("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(a,b,c){a.state.specialChars=RegExp(b.source+(b.test("	")?"":"|	"),"g"),c!=e3&&a.refresh()}),fo("specialCharPlaceholder",function(a){var b=L("span","","cm-invalidchar");return b.title="\\u"+a.charCodeAt(0).toString(16),b.setAttribute("aria-label",b.title),b},function(a){return a.refresh()},!0),fo("electricChars",!0),fo("inputStyle",A?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor")},!0),fo("spellcheck",!1,function(a,b){return a.getInputField().spellcheck=b},!0),fo("autocorrect",!1,function(a,b){return a.getInputField().autocorrect=b},!0),fo("autocapitalize",!1,function(a,b){return a.getInputField().autocapitalize=b},!0),fo("rtlMoveVisually",!D),fo("wholeLineUpdateBefore",!0),fo("theme","default",function(a){e2(a),dq(a)},!0),fo("keyMap","default",function(a,b,c){var d=eH(b),e=c!=e3&&eH(c);e&&e.detach&&e.detach(a,d),d.attach&&d.attach(a,e||null)}),fo("extraKeys",null),fo("configureMouse",null),fo("lineWrapping",!1,function(a){a.options.lineWrapping?(P(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(I(a.display.wrapper,"CodeMirror-wrap"),bG(a)),cy(a),cB(a),cf(a),setTimeout(function(){return c2(a)},100)},!0),fo("gutters",[],function(a,b){a.display.gutterSpecs=dn(b,a.options.lineNumbers),dq(a)},!0),fo("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?cw(a.display)+"px":"0",a.refresh()},!0),fo("coverGutterNextToScrollbar",!1,function(a){return c2(a)},!0),fo("scrollbarStyle","native",function(a){c5(a),c2(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),fo("lineNumbers",!1,function(a,b){a.display.gutterSpecs=dn(a.options.gutters,b),dq(a)},!0),fo("firstLineNumber",1,dq,!0),fo("lineNumberFormatter",function(a){return a},dq,!0),fo("showCursorWhenSelecting",!1,cG,!0),fo("resetSelectionOnContextMenu",!0),fo("lineWiseCopyCut",!0),fo("pasteLinesPerSelection",!0),fo("selectionsMayTouch",!1),fo("readOnly",!1,function(a,b){"nocursor"==b&&(cO(a),a.display.input.blur()),a.display.input.readOnlyChanged(b)}),fo("screenReaderLabel",null,function(a,b){b=""===b?null:b,a.display.input.screenReaderLabelChanged(b)}),fo("disableInput",!1,function(a,b){b||a.display.input.reset()},!0),fo("dragDrop",!0,function(a,b,c){if(!b!=!(c&&c!=e3)){var d=a.display.dragFunctions,e=b?at:av;e(a.display.scroller,"dragstart",d.start),e(a.display.scroller,"dragenter",d.enter),e(a.display.scroller,"dragover",d.over),e(a.display.scroller,"dragleave",d.leave),e(a.display.scroller,"drop",d.drop)}}),fo("allowDropFileTypes",null),fo("cursorBlinkRate",530),fo("cursorScrollMargin",0),fo("cursorHeight",1,cG,!0),fo("singleCursorHeightPerLine",!0,cG,!0),fo("workTime",100),fo("workDelay",100),fo("flattenSpans",!0,dF,!0),fo("addModeClass",!1,dF,!0),fo("pollInterval",100),fo("undoDepth",200,function(a,b){return a.doc.history.undoDepth=b}),fo("historyEventDelay",1250),fo("viewportMargin",10,function(a){return a.refresh()},!0),fo("maxHighlightLength",1e4,dF,!0),fo("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()}),fo("tabindex",null,function(a,b){return a.display.input.getField().tabIndex=b||""}),fo("autofocus",null),fo("direction","ltr",function(a,b){return a.doc.setDirection(b)},!0),fo("phrases",null),b=e6.optionHandlers,c=e6.helpers={},e6.prototype={constructor:e6,focus:function(){window.focus(),this.display.input.focus()},setOption:function(a,c){var d=this.options,e=d[a];(d[a]!=c||"mode"==a)&&(d[a]=c,b.hasOwnProperty(a)&&da(this,b[a])(this,c,e),aw(this,"optionChange",this,a))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](eH(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:db(function(a,b){var c=a.token?a:e6.getMode(this.options,a);if(c.startState)throw Error("Overlays may not be stateful.");!function(a,b,c){for(var d=0,e=c(b);d<a.length&&c(a[d])<=e;)d++;a.splice(d,0,b)}(this.state.overlays,{mode:c,modeSpec:a,opaque:b&&b.opaque,priority:b&&b.priority||0},function(a){return a.priority}),this.state.modeGen++,cB(this)}),removeOverlay:db(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1),this.state.modeGen++,cB(this);return}}}),indentLine:db(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),a0(this.doc,a)&&e8(this,a,b,c)}),indentSelection:db(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(e8(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&cU(this));else{var f=e.from(),g=e.to(),h=Math.max(c,f.line);c=Math.min(this.lastLine(),g.line-!g.ch)+1;for(var i=h;i<c;++i)e8(this,i,a);var j=this.doc.sel.ranges;0==f.ch&&b.length==j.length&&j[d].from().ch>0&&dW(this.doc,d,new dx(f,j[d].to()),Y)}}}),getTokenAt:function(a,b){return bk(this,a,b)},getLineTokens:function(a,b){return bk(this,a2(a),b,!0)},getTokenTypeAt:function(a){a=a9(this.doc,a);var b,c=be(this,aW(this.doc,a.line)),d=0,e=(c.length-1)/2,f=a.ch;if(0==f)b=c[2];else for(;;){var g=d+e>>1;if((g?c[2*g-1]:0)>=f)e=g;else if(c[2*g+1]<f)d=g+1;else{b=c[2*g+2];break}}var h=b?b.indexOf("overlay "):-1;return h<0?b:0==h?null:b.slice(0,h-1)},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?e6.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var d=[];if(!c.hasOwnProperty(b))return d;var e=c[b],f=this.getModeAt(a);if("string"==typeof f[b])e[f[b]]&&d.push(e[f[b]]);else if(f[b])for(var g=0;g<f[b].length;g++){var h=e[f[b][g]];h&&d.push(h)}else f.helperType&&e[f.helperType]?d.push(e[f.helperType]):e[f.name]&&d.push(e[f.name]);for(var i=0;i<e._global.length;i++){var j=e._global[i];j.pred(f,this)&&-1==W(d,j.val)&&d.push(j.val)}return d},getStateAfter:function(a,b){var c=this.doc;return bf(this,(a=a8(c,null==a?c.first+c.size-1:a))+1,b).state},cursorCoords:function(a,b){var c=this.doc.sel.primary();return cm(this,null==a?c.head:"object"==typeof a?a9(this.doc,a):a?c.from():c.to(),b||"page")},charCoords:function(a,b){return cl(this,a9(this.doc,a),b||"page")},coordsChar:function(a,b){return cp(this,(a=ck(this,a,b||"page")).left,a.top)},lineAtHeight:function(a,b){return a=ck(this,{top:a,left:0},b||"page").top,a_(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b,c){var d,e=!1;if("number"==typeof a){var f=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>f&&(a=f,e=!0),d=aW(this.doc,a)}else d=a;return cj(this,d,{top:0,left:0},b||"page",c||e).top+(e?this.doc.height-bE(d):0)},defaultTextHeight:function(){return ct(this.display)},defaultCharWidth:function(){return cu(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f,g=this.display,h=(a=cm(this,a9(this.doc,a))).bottom,i=a.left;if(b.style.position="absolute",b.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(b),g.sizer.appendChild(b),"over"==d)h=a.top;else if("above"==d||"near"==d){var j=Math.max(g.wrapper.clientHeight,this.doc.height),k=Math.max(g.sizer.clientWidth,g.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>j)&&a.top>b.offsetHeight?h=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=j&&(h=a.bottom),i+b.offsetWidth>k&&(i=k-b.offsetWidth)}b.style.top=h+"px",b.style.left=b.style.right="","right"==e?(i=g.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?i=0:"middle"==e&&(i=(g.sizer.clientWidth-b.offsetWidth)/2),b.style.left=i+"px"),c&&(null!=(f=cS(this,{left:i,top:h,right:i+b.offsetWidth,bottom:h+b.offsetHeight})).scrollTop&&cY(this,f.scrollTop),null!=f.scrollLeft&&c$(this,f.scrollLeft))},triggerOnKeyDown:db(eV),triggerOnKeyPress:db(eX),triggerOnKeyUp:eW,triggerOnMouseDown:db(eZ),execCommand:function(a){if(eM.hasOwnProperty(a))return eM[a].call(null,this)},triggerElectric:db(function(a){fc(this,a)}),findPosH:function(a,b,c,d){var e=1;b<0&&(e=-1,b=-b);for(var f=a9(this.doc,a),g=0;g<b&&!(f=fg(this.doc,f,e,c,d)).hitSide;++g);return f},moveH:db(function(a,b){var c=this;this.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?fg(c.doc,d.head,a,b,c.options.rtlMoveVisually):a<0?d.from():d.to()},$)}),deleteH:db(function(a,b){var c=this.doc.sel,d=this.doc;c.somethingSelected()?d.replaceSelection("",null,"+delete"):eI(this,function(c){var e=fg(d,c.head,a,b,!1);return a<0?{from:e,to:c.head}:{from:c.head,to:e}})}),findPosV:function(a,b,c,d){var e=1,f=d;b<0&&(e=-1,b=-b);for(var g=a9(this.doc,a),h=0;h<b;++h){var i=cm(this,g,"div");if(null==f?f=i.left:i.left=f,(g=fh(this,i,e,c)).hitSide)break}return g},moveV:db(function(a,b){var c=this,d=this.doc,e=[],f=!this.display.shift&&!d.extend&&d.sel.somethingSelected();if(d.extendSelectionsBy(function(g){if(f)return a<0?g.from():g.to();var h=cm(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn),e.push(h.left);var i=fh(c,h,a,b);return"page"==b&&g==d.sel.primary()&&cT(c,cl(c,i,"div").top-h.top),i},$),e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=aW(this.doc,a.line).text,c=a.ch,d=a.ch;if(b){var e=this.getHelper(a,"wordChars");("before"==a.sticky||d==b.length)&&c?--c:++d;for(var f=b.charAt(c),g=ai(f,e)?function(a){return ai(a,e)}:/\s/.test(f)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!ai(a)};c>0&&g(b.charAt(c-1));)--c;for(;d<b.length&&g(b.charAt(d));)++d}return new dx(a2(a.line,c),a2(a.line,d))},toggleOverwrite:function(a){(null==a||a!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?P(this.display.cursorDiv,"CodeMirror-overwrite"):I(this.display.cursorDiv,"CodeMirror-overwrite"),aw(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==O()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:db(function(a,b){cV(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b4(this)-this.display.barHeight,width:a.scrollWidth-b4(this)-this.display.barWidth,clientHeight:b6(this),clientWidth:b5(this)}},scrollIntoView:db(function(a,b){if(null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:a2(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=b||0,null!=a.from.line){var c;c=a,cW(this),this.curOp.scrollToPos=c}else cX(this,a.from,a.to,a.margin)}),setSize:db(function(a,b){var c=this,d=function(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a};null!=a&&(this.display.wrapper.style.width=d(a)),null!=b&&(this.display.wrapper.style.height=d(b)),this.options.lineWrapping&&ce(this);var e=this.display.viewFrom;this.doc.iter(e,this.display.viewTo,function(a){if(a.widgets){for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){cC(c,e,"widget");break}}++e}),this.curOp.forceUpdate=!0,aw(this,"refresh",this)}),operation:function(a){return c9(this,a)},startOperation:function(){return c7(this)},endOperation:function(){return c8(this)},refresh:db(function(){var a=this.display.cachedTextHeight;cB(this),this.curOp.forceUpdate=!0,cf(this),cV(this,this.doc.scrollLeft,this.doc.scrollTop),dj(this.display),(null==a||Math.abs(a-ct(this.display))>.5||this.options.lineWrapping)&&cy(this),aw(this,"refresh",this)}),swapDoc:db(function(a){var b=this.doc;return b.cm=null,this.state.selectingText&&this.state.selectingText(),dJ(this,a),cf(this),this.display.input.reset(),cV(this,a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,bS(this,"swapDoc",this,b),b}),phrase:function(a){var b=this.options.phrases;return b&&Object.prototype.hasOwnProperty.call(b,a)?b[a]:a},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},aA(e6),e6.registerHelper=function(a,b,d){c.hasOwnProperty(a)||(c[a]=e6[a]={_global:[]}),c[a][b]=d},e6.registerGlobalHelper=function(a,b,d,e){e6.registerHelper(a,b,e),c[a]._global.push({pred:d,val:e})};var fp="iter insert remove copy getEditor constructor".split(" ");for(var fq in eq.prototype)eq.prototype.hasOwnProperty(fq)&&0>W(fp,fq)&&(e6.prototype[fq]=function(a){return function(){return a.apply(this.doc,arguments)}}(eq.prototype[fq]));return aA(eq),e6.inputStyles={textarea:fm,contenteditable:fi},e6.defineMode=function(a){e6.defaults.mode||"null"==a||(e6.defaults.mode=a),aO.apply(this,arguments)},e6.defineMIME=function(a,b){aN[a]=b},e6.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}}),e6.defineMIME("text/plain","null"),e6.defineExtension=function(a,b){e6.prototype[a]=b},e6.defineDocExtension=function(a,b){eq.prototype[a]=b},e6.fromTextArea=function(a,b){if((b=b?T(b):{}).value=a.value,!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex),!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder),null==b.autofocus){var c,d=O();b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}function e(){a.value=h.getValue()}if(a.form&&(at(a.form,"submit",e),!b.leaveSubmitMethodAlone)){var f=a.form;c=f.submit;try{var g=f.submit=function(){e(),f.submit=c,f.submit(),f.submit=g}}catch(a){}}b.finishInit=function(d){d.save=e,d.getTextArea=function(){return a},d.toTextArea=function(){d.toTextArea=isNaN,e(),a.parentNode.removeChild(d.getWrapperElement()),a.style.display="",a.form&&(av(a.form,"submit",e),b.leaveSubmitMethodAlone||"function"!=typeof a.form.submit||(a.form.submit=c))}},a.style.display="none";var h=e6(function(b){return a.parentNode.insertBefore(b,a.nextSibling)},b);return h},e6.off=av,e6.on=at,e6.wheelEventPixels=function(a){var b=du(a);return b.x*=dt,b.y*=dt,b},e6.Doc=eq,e6.splitLines=aI,e6.countColumn=U,e6.findColumn=_,e6.isWordChar=ah,e6.Pass=X,e6.signal=aw,e6.Line=bH,e6.changeEnd=dA,e6.scrollbarModel=c4,e6.Pos=a2,e6.cmpPos=a3,e6.modes=aM,e6.mimeModes=aN,e6.resolveMode=aP,e6.getMode=aQ,e6.modeExtensions=aR,e6.extendMode=function(a,b){T(b,aR.hasOwnProperty(a)?aR[a]:aR[a]={})},e6.copyState=aS,e6.startState=aU,e6.innerMode=aT,e6.commands=eM,e6.keyMap=eB,e6.keyName=eG,e6.isModifierKey=eE,e6.lookupKey=eD,e6.normalizeKeyMap=function(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if("..."==d){delete a[c];continue}for(var e=ad(c.split(" "),eC),f=0;f<e.length;f++){var g=void 0,h=void 0;f==e.length-1?(h=e.join(" "),g=d):(h=e.slice(0,f+1).join(" "),g="...");var i=b[h];if(i){if(i!=g)throw Error("Inconsistent bindings for "+h)}else b[h]=g}delete a[c]}for(var j in b)a[j]=b[j];return a},e6.StringStream=aV,e6.SharedTextMarker=en,e6.TextMarker=el,e6.LineWidget=ei,e6.e_preventDefault=aB,e6.e_stopPropagation=aC,e6.e_stop=aE,e6.addClass=P,e6.contains=N,e6.rmClass=I,e6.keyNames=ex,e6.version="5.63.0",e6}()},7389:(a,b,c)=>{!function(a){function b(a){for(var b={},c=0;c<a.length;++c)b[a[c].toLowerCase()]=!0;return b}a.defineMode("css",function(b,c){var d,e,f=c.inline;c.propertyKeywords||(c=a.resolveMode("text/css"));var g=b.indentUnit,h=c.tokenHooks,i=c.documentTypes||{},j=c.mediaTypes||{},k=c.mediaFeatures||{},l=c.mediaValueKeywords||{},m=c.propertyKeywords||{},n=c.nonStandardPropertyKeywords||{},o=c.fontProperties||{},p=c.counterDescriptors||{},q=c.colorKeywords||{},r=c.valueKeywords||{},s=c.allowNested,t=c.lineComment,u=!0===c.supportsAtComponent,v=!1!==b.highlightNonStandardPropertyKeywords;function w(a){return function(b,c){for(var e,f=!1;null!=(e=b.next());){if(e==a&&!f){")"==a&&b.backUp(1);break}f=!f&&"\\"==e}return e!=a&&(f||")"==a)||(c.tokenize=null),d="string","string"}}function x(a,b){return a.next(),a.match(/^\s*[\"\')]/,!1)?b.tokenize=null:b.tokenize=w(")"),d="(",null}function y(a,b,c){this.type=a,this.indent=b,this.prev=c}function z(a,b,c,d){return a.context=new y(c,b.indentation()+(!1===d?0:g),a.context),c}function A(a){return a.context.prev&&(a.context=a.context.prev),a.context.type}function B(a,b,c){return E[c.context.type](a,b,c)}function C(a,b,c,d){for(var e=d||1;e>0;e--)c.context=c.context.prev;return B(a,b,c)}function D(a){var b=a.current().toLowerCase();e=r.hasOwnProperty(b)?"atom":q.hasOwnProperty(b)?"keyword":"variable"}var E={};return E.top=function(a,b,c){if("{"==a)return z(c,b,"block");if("}"==a&&c.context.prev)return A(c);if(u&&/@component/i.test(a))return z(c,b,"atComponentBlock");if(/^@(-moz-)?document$/i.test(a))return z(c,b,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(a))return z(c,b,"atBlock");else if(/^@(font-face|counter-style)/i.test(a))return c.stateArg=a,"restricted_atBlock_before";else if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(a))return"keyframes";else if(a&&"@"==a.charAt(0))return z(c,b,"at");else if("hash"==a)e="builtin";else if("word"==a)e="tag";else if("variable-definition"==a)return"maybeprop";else if("interpolation"==a)return z(c,b,"interpolation");else if(":"==a)return"pseudo";else if(s&&"("==a)return z(c,b,"parens");return c.context.type},E.block=function(a,b,c){if("word"==a){var d=b.current().toLowerCase();return m.hasOwnProperty(d)?(e="property","maybeprop"):n.hasOwnProperty(d)?(e=v?"string-2":"property","maybeprop"):s?(e=b.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(e+=" error","maybeprop")}return"meta"==a?"block":s||"hash"!=a&&"qualifier"!=a?E.top(a,b,c):(e="error","block")},E.maybeprop=function(a,b,c){return":"==a?z(c,b,"prop"):B(a,b,c)},E.prop=function(a,b,c){if(";"==a)return A(c);if("{"==a&&s)return z(c,b,"propBlock");if("}"==a||"{"==a)return C(a,b,c);if("("==a)return z(c,b,"parens");if("hash"!=a||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(b.current())){if("word"==a)D(b);else if("interpolation"==a)return z(c,b,"interpolation")}else e+=" error";return"prop"},E.propBlock=function(a,b,c){return"}"==a?A(c):"word"==a?(e="property","maybeprop"):c.context.type},E.parens=function(a,b,c){return"{"==a||"}"==a?C(a,b,c):")"==a?A(c):"("==a?z(c,b,"parens"):"interpolation"==a?z(c,b,"interpolation"):("word"==a&&D(b),"parens")},E.pseudo=function(a,b,c){return"meta"==a?"pseudo":"word"==a?(e="variable-3",c.context.type):B(a,b,c)},E.documentTypes=function(a,b,c){return"word"==a&&i.hasOwnProperty(b.current())?(e="tag",c.context.type):E.atBlock(a,b,c)},E.atBlock=function(a,b,c){if("("==a)return z(c,b,"atBlock_parens");if("}"==a||";"==a)return C(a,b,c);if("{"==a)return A(c)&&z(c,b,s?"block":"top");if("interpolation"==a)return z(c,b,"interpolation");if("word"==a){var d=b.current().toLowerCase();e="only"==d||"not"==d||"and"==d||"or"==d?"keyword":j.hasOwnProperty(d)?"attribute":k.hasOwnProperty(d)?"property":l.hasOwnProperty(d)?"keyword":m.hasOwnProperty(d)?"property":n.hasOwnProperty(d)?v?"string-2":"property":r.hasOwnProperty(d)?"atom":q.hasOwnProperty(d)?"keyword":"error"}return c.context.type},E.atComponentBlock=function(a,b,c){return"}"==a?C(a,b,c):"{"==a?A(c)&&z(c,b,s?"block":"top",!1):("word"==a&&(e="error"),c.context.type)},E.atBlock_parens=function(a,b,c){return")"==a?A(c):"{"==a||"}"==a?C(a,b,c,2):E.atBlock(a,b,c)},E.restricted_atBlock_before=function(a,b,c){return"{"==a?z(c,b,"restricted_atBlock"):"word"==a&&"@counter-style"==c.stateArg?(e="variable","restricted_atBlock_before"):B(a,b,c)},E.restricted_atBlock=function(a,b,c){return"}"==a?(c.stateArg=null,A(c)):"word"==a?(e=("@font-face"!=c.stateArg||o.hasOwnProperty(b.current().toLowerCase()))&&("@counter-style"!=c.stateArg||p.hasOwnProperty(b.current().toLowerCase()))?"property":"error","maybeprop"):"restricted_atBlock"},E.keyframes=function(a,b,c){return"word"==a?(e="variable","keyframes"):"{"==a?z(c,b,"top"):B(a,b,c)},E.at=function(a,b,c){return";"==a?A(c):"{"==a||"}"==a?C(a,b,c):("word"==a?e="tag":"hash"==a&&(e="builtin"),"at")},E.interpolation=function(a,b,c){return"}"==a?A(c):"{"==a||";"==a?C(a,b,c):("word"==a?e="variable":"variable"!=a&&"("!=a&&")"!=a&&(e="error"),"interpolation")},{startState:function(a){return{tokenize:null,state:f?"block":"top",stateArg:null,context:new y(f?"block":"top",a||0,null)}},token:function(a,b){if(!b.tokenize&&a.eatSpace())return null;var c=(b.tokenize||function(a,b){var c=a.next();if(h[c]){var e=h[c](a,b);if(!1!==e)return e}if("@"==c)return a.eatWhile(/[\w\\\-]/),d=a.current(),"def";if("="==c||("~"==c||"|"==c)&&a.eat("="))return d="compare",null;if('"'==c||"'"==c)return b.tokenize=w(c),b.tokenize(a,b);if("#"==c)return a.eatWhile(/[\w\\\-]/),d="hash","atom";if("!"==c)return a.match(/^\s*\w*/),d="important","keyword";else if(/\d/.test(c)||"."==c&&a.eat(/\d/))return a.eatWhile(/[\w.%]/),d="unit","number";else if("-"===c){if(/[\d.]/.test(a.peek()))return a.eatWhile(/[\w.%]/),d="unit","number";else if(a.match(/^-[\w\\\-]*/))return(a.eatWhile(/[\w\\\-]/),a.match(/^\s*:/,!1))?d="variable-definition":d="variable","variable-2";else if(a.match(/^\w+-/))return d="meta","meta"}else if(/[,+>*\/]/.test(c))return d="select-op",null;else if("."==c&&a.match(/^-?[_a-z][_a-z0-9-]*/i))return d="qualifier","qualifier";else if(/[:;{}\[\]\(\)]/.test(c))return d=c,null;else return a.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(a.current())&&(b.tokenize=x),d="variable","variable callee"):/[\w\\\-]/.test(c)?(a.eatWhile(/[\w\\\-]/),d="word","property"):(d=null,null)})(a,b);return c&&"object"==typeof c&&(d=c[1],c=c[0]),e=c,"comment"!=d&&(b.state=E[b.state](d,a,b)),e},indent:function(a,b){var c=a.context,d=b&&b.charAt(0),e=c.indent;return"prop"==c.type&&("}"==d||")"==d)&&(c=c.prev),c.prev&&("}"==d&&("block"==c.type||"top"==c.type||"interpolation"==c.type||"restricted_atBlock"==c.type)?e=(c=c.prev).indent:(")"==d&&("parens"==c.type||"atBlock_parens"==c.type)||"{"==d&&("at"==c.type||"atBlock"==c.type))&&(e=Math.max(0,c.indent-g))),e},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:t,fold:"brace"}});var c=["domain","regexp","url","url-prefix"],d=b(c),e=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],f=b(e),g=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],h=b(g),i=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],j=b(i),k=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],l=b(k),m=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],n=b(m),o=b(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),p=b(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),q=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],r=b(q),s=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],t=b(s),u=c.concat(e).concat(g).concat(i).concat(k).concat(m).concat(q).concat(s);function v(a,b){for(var c,d=!1;null!=(c=a.next());){if(d&&"/"==c){b.tokenize=null;break}d="*"==c}return["comment","comment"]}a.registerHelper("hintWords","css",u),a.defineMIME("text/css",{documentTypes:d,mediaTypes:f,mediaFeatures:h,mediaValueKeywords:j,propertyKeywords:l,nonStandardPropertyKeywords:n,fontProperties:o,counterDescriptors:p,colorKeywords:r,valueKeywords:t,tokenHooks:{"/":function(a,b){return!!a.eat("*")&&(b.tokenize=v,v(a,b))}},name:"css"}),a.defineMIME("text/x-scss",{mediaTypes:f,mediaFeatures:h,mediaValueKeywords:j,propertyKeywords:l,nonStandardPropertyKeywords:n,colorKeywords:r,valueKeywords:t,fontProperties:o,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(a,b){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(b.tokenize=v,v(a,b)):["operator","operator"]},":":function(a){return!!a.match(/^\s*\{/,!1)&&[null,null]},$:function(a){return(a.match(/^[\w-]+/),a.match(/^\s*:/,!1))?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(a){return!!a.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),a.defineMIME("text/x-less",{mediaTypes:f,mediaFeatures:h,mediaValueKeywords:j,propertyKeywords:l,nonStandardPropertyKeywords:n,colorKeywords:r,valueKeywords:t,fontProperties:o,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(a,b){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(b.tokenize=v,v(a,b)):["operator","operator"]},"@":function(a){return a.eat("{")?[null,"interpolation"]:!a.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&((a.eatWhile(/[\w\\\-]/),a.match(/^\s*:/,!1))?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),a.defineMIME("text/x-gss",{documentTypes:d,mediaTypes:f,mediaFeatures:h,propertyKeywords:l,nonStandardPropertyKeywords:n,fontProperties:o,counterDescriptors:p,colorKeywords:r,valueKeywords:t,supportsAtComponent:!0,tokenHooks:{"/":function(a,b){return!!a.eat("*")&&(b.tokenize=v,v(a,b))}},name:"css",helperType:"gss"})}(c(4408))},8253:(a,b,c)=>{!function(a){var b={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},c={};function d(a,b){return RegExp((b?"^":"")+"</s*"+a+"s*>","i")}function e(a,b){for(var c in a)for(var d=b[c]||(b[c]=[]),e=a[c],f=e.length-1;f>=0;f--)d.unshift(e[f])}a.defineMode("htmlmixed",function(f,g){var h=a.getMode(f,{name:"xml",htmlMode:!0,multilineTagIndentFactor:g.multilineTagIndentFactor,multilineTagIndentPastTag:g.multilineTagIndentPastTag,allowMissingTagName:g.allowMissingTagName}),i={},j=g&&g.tags,k=g&&g.scriptTypes;if(e(b,i),j&&e(j,i),k)for(var l=k.length-1;l>=0;l--)i.script.unshift(["type",k[l].matches,k[l].mode]);function m(b,e){var g,j=h.token(b,e.htmlState),k=/\btag\b/.test(j);if(k&&!/[<>\s\/]/.test(b.current())&&(g=e.htmlState.tagName&&e.htmlState.tagName.toLowerCase())&&i.hasOwnProperty(g))e.inTag=g+" ";else if(e.inTag&&k&&/>$/.test(b.current())){var l=/^([\S]+) (.*)/.exec(e.inTag);e.inTag=null;var n=">"==b.current()&&function(a,b){for(var d=0;d<a.length;d++){var e=a[d];if(!e[0]||e[1].test(function(a,b){var d,e=a.match((d=c[b])?d:c[b]=RegExp("\\s+"+b+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"));return e?/^\s*(.*?)\s*$/.exec(e[2])[1]:""}(b,e[0])))return e[2]}}(i[l[1]],l[2]),o=a.getMode(f,n),p=d(l[1],!0),q=d(l[1],!1);e.token=function(a,b){var c,d,e;return a.match(p,!1)?(b.token=m,b.localState=b.localMode=null,null):(c=b.localMode.token(a,b.localState),(e=(d=a.current()).search(q))>-1?a.backUp(d.length-e):d.match(/<\/?$/)&&(a.backUp(d.length),a.match(q,!1)||a.match(d)),c)},e.localMode=o,e.localState=a.startState(o,h.indent(e.htmlState,"",""))}else e.inTag&&(e.inTag+=b.current(),b.eol()&&(e.inTag+=" "));return j}return{startState:function(){return{token:m,inTag:null,localMode:null,localState:null,htmlState:a.startState(h)}},copyState:function(b){var c;return b.localState&&(c=a.copyState(b.localMode,b.localState)),{token:b.token,inTag:b.inTag,localMode:b.localMode,localState:c,htmlState:a.copyState(h,b.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(b,c,d){return!b.localMode||/^\s*<\//.test(c)?h.indent(b.htmlState,c,d):b.localMode.indent?b.localMode.indent(b.localState,c,d):a.Pass},innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||h}}}},"xml","javascript","css"),a.defineMIME("text/html","htmlmixed")}(c(4408),c(9701),c(6061),c(7389))},6061:(a,b,c)=>{!function(a){a.defineMode("javascript",function(b,c){var d,e,f=b.indentUnit,g=c.statementIndent,h=c.jsonld,i=c.json||h,j=!1!==c.trackScope,k=c.typescript,l=c.wordCharacters||/[\w$\xa1-\uffff]/,m=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("keyword d"),f=a("operator"),g={type:"atom",style:"atom"};return{if:a("if"),while:b,with:b,else:c,do:c,try:c,finally:c,return:e,break:e,continue:e,new:a("new"),delete:d,void:d,throw:d,debugger:a("debugger"),var:a("var"),const:a("var"),let:a("var"),function:a("function"),catch:a("catch"),for:a("for"),switch:a("switch"),case:a("case"),default:a("default"),in:f,typeof:f,instanceof:f,true:g,false:g,null:g,undefined:g,NaN:g,Infinity:g,this:a("this"),class:a("class"),super:a("atom"),yield:d,export:a("export"),import:a("import"),extends:d,await:d}}(),n=/[+\-*&%=<>!?|~^@]/,o=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function p(a,b,c){return d=a,e=c,b}function q(a,b){var c,d=a.next();if('"'==d||"'"==d){return c=d,b.tokenize=function(a,b){var d,e=!1;if(h&&"@"==a.peek()&&a.match(o))return b.tokenize=q,p("jsonld-keyword","meta");for(;null!=(d=a.next())&&(d!=c||e);)e=!e&&"\\"==d;return e||(b.tokenize=q),p("string","string")},b.tokenize(a,b)}if("."==d&&a.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return p("number","number");if("."==d&&a.match(".."))return p("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(d))return p(d);if("="==d&&a.eat(">"))return p("=>","operator");else if("0"==d&&a.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return p("number","number");else if(/\d/.test(d))return a.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),p("number","number");else if("/"==d)if(a.eat("*"))return b.tokenize=r,r(a,b);else if(a.eat("/"))return a.skipToEnd(),p("comment","comment");else if(aZ(a,b,1))return!function(a){for(var b,c=!1,d=!1;null!=(b=a.next());){if(!c){if("/"==b&&!d)return;"["==b?d=!0:d&&"]"==b&&(d=!1)}c=!c&&"\\"==b}}(a),a.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),p("regexp","string-2");else return a.eat("="),p("operator","operator",a.current());else if("`"==d)return b.tokenize=s,s(a,b);else if("#"==d&&"!"==a.peek())return a.skipToEnd(),p("meta","meta");else if("#"==d&&a.eatWhile(l))return p("variable","property");else if("<"==d&&a.match("!--")||"-"==d&&a.match("->")&&!/\S/.test(a.string.slice(0,a.start)))return a.skipToEnd(),p("comment","comment");else if(n.test(d))return((">"!=d||!b.lexical||">"!=b.lexical.type)&&(a.eat("=")?("!"==d||"="==d)&&a.eat("="):/[<>*+\-|&?]/.test(d)&&(a.eat(d),">"==d&&a.eat(d))),"?"==d&&a.eat("."))?p("."):p("operator","operator",a.current());else if(l.test(d)){a.eatWhile(l);var e=a.current();if("."!=b.lastType){if(m.propertyIsEnumerable(e)){var f=m[e];return p(f.type,f.style,e)}if("async"==e&&a.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return p("async","keyword",e)}return p("variable","variable",e)}}function r(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=q;break}d="*"==c}return p("comment","comment")}function s(a,b){for(var c,d=!1;null!=(c=a.next());){if(!d&&("`"==c||"$"==c&&a.eat("{"))){b.tokenize=q;break}d=!d&&"\\"==c}return p("quasi","string-2",a.current())}function t(a,b){b.fatArrowAt&&(b.fatArrowAt=null);var c=a.string.indexOf("=>",a.start);if(!(c<0)){if(k){var d=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(a.string.slice(a.start,c));d&&(c=d.index)}for(var e=0,f=!1,g=c-1;g>=0;--g){var h=a.string.charAt(g),i="([{}])".indexOf(h);if(i>=0&&i<3){if(!e){++g;break}if(0==--e){"("==h&&(f=!0);break}}else if(i>=3&&i<6)++e;else if(l.test(h))f=!0;else if(/["'\/`]/.test(h))for(;;--g){if(0==g)return;if(a.string.charAt(g-1)==h&&"\\"!=a.string.charAt(g-2)){g--;break}}else if(f&&!e){++g;break}}f&&!e&&(b.fatArrowAt=g)}}var u={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function v(a,b,c,d,e,f){this.indented=a,this.column=b,this.type=c,this.prev=e,this.info=f,null!=d&&(this.align=d)}function w(a,b,c,d,e){var f=a.cc;for(x.state=a,x.stream=e,x.marked=null,x.cc=f,x.style=b,a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);;)if((f.length?f.pop():i?O:M)(c,d)){for(;f.length&&f[f.length-1].lex;)f.pop()();if(x.marked)return x.marked;if("variable"==c&&function(a,b){if(!j)return!1;for(var c=a.localVars;c;c=c.next)if(c.name==b)return!0;for(var d=a.context;d;d=d.prev)for(var c=d.vars;c;c=c.next)if(c.name==b)return!0}(a,d))return"variable-2";return b}}var x={state:null,column:null,marked:null,cc:null};function y(){for(var a=arguments.length-1;a>=0;a--)x.cc.push(arguments[a])}function z(){return y.apply(null,arguments),!0}function A(a,b){for(var c=b;c;c=c.next)if(c.name==a)return!0;return!1}function B(a){var b=x.state;if(x.marked="def",j){if(b.context){if("var"==b.lexical.info&&b.context&&b.context.block){var d=function a(b,c){if(!c)return null;if(c.block){var d=a(b,c.prev);return d?d==c.prev?c:new D(d,c.vars,!0):null}return A(b,c.vars)?c:new D(c.prev,new E(b,c.vars),!1)}(a,b.context);if(null!=d){b.context=d;return}}else if(!A(a,b.localVars)){b.localVars=new E(a,b.localVars);return}}c.globalVars&&!A(a,b.globalVars)&&(b.globalVars=new E(a,b.globalVars))}}function C(a){return"public"==a||"private"==a||"protected"==a||"abstract"==a||"readonly"==a}function D(a,b,c){this.prev=a,this.vars=b,this.block=c}function E(a,b){this.name=a,this.next=b}var F=new E("this",new E("arguments",null));function G(){x.state.context=new D(x.state.context,x.state.localVars,!1),x.state.localVars=F}function H(){x.state.context=new D(x.state.context,x.state.localVars,!0),x.state.localVars=null}function I(){x.state.localVars=x.state.context.vars,x.state.context=x.state.context.prev}function J(a,b){var c=function(){var c=x.state,d=c.indented;if("stat"==c.lexical.type)d=c.lexical.indented;else for(var e=c.lexical;e&&")"==e.type&&e.align;e=e.prev)d=e.indented;c.lexical=new v(d,x.stream.column(),a,null,c.lexical,b)};return c.lex=!0,c}function K(){var a=x.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function L(a){return function b(c){return c==a?z():";"==a||"}"==c||")"==c||"]"==c?y():z(b)}}function M(a,b){if("var"==a)return z(J("vardef",b),aw,L(";"),K);if("keyword a"==a)return z(J("form"),Q,M,K);if("keyword b"==a)return z(J("form"),M,K);if("keyword d"==a)return x.stream.match(/^\s*$/,!1)?z():z(J("stat"),S,L(";"),K);if("debugger"==a)return z(L(";"));if("{"==a)return z(J("}"),H,ag,K,I);if(";"==a)return z();if("if"==a)return"else"==x.state.lexical.info&&x.state.cc[x.state.cc.length-1]==K&&x.state.cc.pop()(),z(J("form"),Q,M,K,aC);if("function"==a)return z(aG);if("for"==a)return z(J("form"),H,aD,M,I,K);if("class"==a||k&&"interface"==b)return x.marked="keyword",z(J("form","class"==a?a:b),aL,K);if("variable"==a)if(k&&"declare"==b)return x.marked="keyword",z(M);else if(k&&("module"==b||"enum"==b||"type"==b)&&x.stream.match(/^\s*\w/,!1))return(x.marked="keyword","enum"==b)?z(aX):"type"==b?z(aI,L("operator"),al,L(";")):z(J("form"),ax,L("{"),J("}"),ag,K,K);else if(k&&"namespace"==b)return x.marked="keyword",z(J("form"),O,M,K);else if(k&&"abstract"==b)return x.marked="keyword",z(M);else return z(J("stat"),_);return"switch"==a?z(J("form"),Q,L("{"),J("}","switch"),H,ag,K,K,I):"case"==a?z(O,L(":")):"default"==a?z(L(":")):"catch"==a?z(J("form"),G,N,M,K,I):"export"==a?z(J("stat"),aP,K):"import"==a?z(J("stat"),aR,K):"async"==a?z(M):"@"==b?z(O,M):y(J("stat"),O,L(";"),K)}function N(a){if("("==a)return z(aJ,L(")"))}function O(a,b){return R(a,b,!1)}function P(a,b){return R(a,b,!0)}function Q(a){return"("!=a?y():z(J(")"),S,L(")"),K)}function R(a,b,c){if(x.state.fatArrowAt==x.stream.start){var d,e=c?Y:X;if("("==a)return z(G,J(")"),ae(aJ,")"),K,L("=>"),e,I);if("variable"==a)return y(G,ax,L("=>"),e,I)}var f=c?U:T;return u.hasOwnProperty(a)?z(f):"function"==a?z(aG,f):"class"==a||k&&"interface"==b?(x.marked="keyword",z(J("form"),aK,K)):"keyword c"==a||"async"==a?z(c?P:O):"("==a?z(J(")"),S,L(")"),K,f):"operator"==a||"spread"==a?z(c?P:O):"["==a?z(J("]"),aW,K,f):"{"==a?af(ab,"}",null,f):"quasi"==a?y(V,f):"new"==a?z((d=c,function(a){return"."==a?z(d?$:Z):"variable"==a&&k?z(at,d?U:T):y(d?P:O)})):z()}function S(a){return a.match(/[;\}\)\],]/)?y():y(O)}function T(a,b){return","==a?z(S):U(a,b,!1)}function U(a,b,c){var d=!1==c?T:U,e=!1==c?O:P;if("=>"==a)return z(G,c?Y:X,I);if("operator"==a)return/\+\+|--/.test(b)||k&&"!"==b?z(d):k&&"<"==b&&x.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?z(J(">"),ae(al,">"),K,d):"?"==b?z(O,L(":"),e):z(e);if("quasi"==a)return y(V,d);if(";"!=a){if("("==a)return af(P,")","call",d);if("."==a)return z(aa,d);if("["==a)return z(J("]"),S,L("]"),K,d);if(k&&"as"==b)return x.marked="keyword",z(al,d);if("regexp"==a)return x.state.lastType=x.marked="operator",x.stream.backUp(x.stream.pos-x.stream.start-1),z(e)}}function V(a,b){return"quasi"!=a?y():"${"!=b.slice(b.length-2)?z(V):z(S,W)}function W(a){if("}"==a)return x.marked="string-2",x.state.tokenize=s,z(V)}function X(a){return t(x.stream,x.state),y("{"==a?M:O)}function Y(a){return t(x.stream,x.state),y("{"==a?M:P)}function Z(a,b){if("target"==b)return x.marked="keyword",z(T)}function $(a,b){if("target"==b)return x.marked="keyword",z(U)}function _(a){return":"==a?z(K,M):y(T,L(";"),K)}function aa(a){if("variable"==a)return x.marked="property",z()}function ab(a,b){if("async"==a)return x.marked="property",z(ab);if("variable"==a||"keyword"==x.style){var c;return(x.marked="property","get"==b||"set"==b)?z(ac):(k&&x.state.fatArrowAt==x.stream.start&&(c=x.stream.match(/^\s*:\s*/,!1))&&(x.state.fatArrowAt=x.stream.pos+c[0].length),z(ad))}if("number"==a||"string"==a)return x.marked=h?"property":x.style+" property",z(ad);if("jsonld-keyword"==a)return z(ad);if(k&&C(b))return x.marked="keyword",z(ab);else if("["==a)return z(O,ah,L("]"),ad);else if("spread"==a)return z(P,ad);else if("*"==b)return x.marked="keyword",z(ab);else if(":"==a)return y(ad)}function ac(a){return"variable"!=a?y(ad):(x.marked="property",z(aG))}function ad(a){return":"==a?z(P):"("==a?y(aG):void 0}function ae(a,b,c){function d(e,f){if(c?c.indexOf(e)>-1:","==e){var g=x.state.lexical;return"call"==g.info&&(g.pos=(g.pos||0)+1),z(function(c,d){return c==b||d==b?y():y(a)},d)}return e==b||f==b?z():c&&c.indexOf(";")>-1?y(a):z(L(b))}return function(c,e){return c==b||e==b?z():y(a,d)}}function af(a,b,c){for(var d=3;d<arguments.length;d++)x.cc.push(arguments[d]);return z(J(b,c),ae(a,b),K)}function ag(a){return"}"==a?z():y(M,ag)}function ah(a,b){if(k){if(":"==a)return z(al);if("?"==b)return z(ah)}}function ai(a,b){if(k&&(":"==a||"in"==b))return z(al)}function aj(a){if(k&&":"==a)if(x.stream.match(/^\s*\w+\s+is\b/,!1))return z(O,ak,al);else return z(al)}function ak(a,b){if("is"==b)return x.marked="keyword",z()}function al(a,b){return"keyof"==b||"typeof"==b||"infer"==b||"readonly"==b?(x.marked="keyword",z("typeof"==b?P:al)):"variable"==a||"void"==b?(x.marked="type",z(as)):"|"==b||"&"==b?z(al):"string"==a||"number"==a||"atom"==a?z(as):"["==a?z(J("]"),ae(al,"]",","),K,as):"{"==a?z(J("}"),an,K,as):"("==a?z(ae(ar,")"),am,as):"<"==a?z(ae(al,">"),al):"quasi"==a?y(ap,as):void 0}function am(a){if("=>"==a)return z(al)}function an(a){return a.match(/[\}\)\]]/)?z():","==a||";"==a?z(an):y(ao,an)}function ao(a,b){if("variable"==a||"keyword"==x.style)return x.marked="property",z(ao);if("?"==b||"number"==a||"string"==a)return z(ao);if(":"==a)return z(al);if("["==a)return z(L("variable"),ai,L("]"),ao);if("("==a)return y(aH,ao);else if(!a.match(/[;\}\)\],]/))return z()}function ap(a,b){return"quasi"!=a?y():"${"!=b.slice(b.length-2)?z(ap):z(al,aq)}function aq(a){if("}"==a)return x.marked="string-2",x.state.tokenize=s,z(ap)}function ar(a,b){return"variable"==a&&x.stream.match(/^\s*[?:]/,!1)||"?"==b?z(ar):":"==a?z(al):"spread"==a?z(ar):y(al)}function as(a,b){return"<"==b?z(J(">"),ae(al,">"),K,as):"|"==b||"."==a||"&"==b?z(al):"["==a?z(al,L("]"),as):"extends"==b||"implements"==b?(x.marked="keyword",z(al)):"?"==b?z(al,L(":"),al):void 0}function at(a,b){if("<"==b)return z(J(">"),ae(al,">"),K,as)}function au(){return y(al,av)}function av(a,b){if("="==b)return z(al)}function aw(a,b){return"enum"==b?(x.marked="keyword",z(aX)):y(ax,ah,aA,aB)}function ax(a,b){return k&&C(b)?(x.marked="keyword",z(ax)):"variable"==a?(B(b),z()):"spread"==a?z(ax):"["==a?af(az,"]"):"{"==a?af(ay,"}"):void 0}function ay(a,b){return"variable"!=a||x.stream.match(/^\s*:/,!1)?("variable"==a&&(x.marked="property"),"spread"==a)?z(ax):"}"==a?y():"["==a?z(O,L("]"),L(":"),ay):z(L(":"),ax,aA):(B(b),z(aA))}function az(){return y(ax,aA)}function aA(a,b){if("="==b)return z(P)}function aB(a){if(","==a)return z(aw)}function aC(a,b){if("keyword b"==a&&"else"==b)return z(J("form","else"),M,K)}function aD(a,b){return"await"==b?z(aD):"("==a?z(J(")"),aE,K):void 0}function aE(a){return"var"==a?z(aw,aF):"variable"==a?z(aF):y(aF)}function aF(a,b){return")"==a?z():";"==a?z(aF):"in"==b||"of"==b?(x.marked="keyword",z(O,aF)):y(O,aF)}function aG(a,b){return"*"==b?(x.marked="keyword",z(aG)):"variable"==a?(B(b),z(aG)):"("==a?z(G,J(")"),ae(aJ,")"),K,aj,M,I):k&&"<"==b?z(J(">"),ae(au,">"),K,aG):void 0}function aH(a,b){return"*"==b?(x.marked="keyword",z(aH)):"variable"==a?(B(b),z(aH)):"("==a?z(G,J(")"),ae(aJ,")"),K,aj,I):k&&"<"==b?z(J(">"),ae(au,">"),K,aH):void 0}function aI(a,b){return"keyword"==a||"variable"==a?(x.marked="type",z(aI)):"<"==b?z(J(">"),ae(au,">"),K):void 0}function aJ(a,b){return("@"==b&&z(O,aJ),"spread"==a)?z(aJ):k&&C(b)?(x.marked="keyword",z(aJ)):k&&"this"==a?z(ah,aA):y(ax,ah,aA)}function aK(a,b){return"variable"==a?aL(a,b):aM(a,b)}function aL(a,b){if("variable"==a)return B(b),z(aM)}function aM(a,b){return"<"==b?z(J(">"),ae(au,">"),K,aM):"extends"==b||"implements"==b||k&&","==a?("implements"==b&&(x.marked="keyword"),z(k?al:O,aM)):"{"==a?z(J("}"),aN,K):void 0}function aN(a,b){return"async"==a||"variable"==a&&("static"==b||"get"==b||"set"==b||k&&C(b))&&x.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(x.marked="keyword",z(aN)):"variable"==a||"keyword"==x.style?(x.marked="property",z(aO,aN)):"number"==a||"string"==a?z(aO,aN):"["==a?z(O,ah,L("]"),aO,aN):"*"==b?(x.marked="keyword",z(aN)):k&&"("==a?y(aH,aN):";"==a||","==a?z(aN):"}"==a?z():"@"==b?z(O,aN):void 0}function aO(a,b){if("!"==b||"?"==b)return z(aO);if(":"==a)return z(al,aA);if("="==b)return z(P);var c=x.state.lexical.prev;return y(c&&"interface"==c.info?aH:aG)}function aP(a,b){return"*"==b?(x.marked="keyword",z(aV,L(";"))):"default"==b?(x.marked="keyword",z(O,L(";"))):"{"==a?z(ae(aQ,"}"),aV,L(";")):y(M)}function aQ(a,b){return"as"==b?(x.marked="keyword",z(L("variable"))):"variable"==a?y(P,aQ):void 0}function aR(a){return"string"==a?z():"("==a?y(O):"."==a?y(T):y(aS,aT,aV)}function aS(a,b){return"{"==a?af(aS,"}"):("variable"==a&&B(b),"*"==b&&(x.marked="keyword"),z(aU))}function aT(a){if(","==a)return z(aS,aT)}function aU(a,b){if("as"==b)return x.marked="keyword",z(aS)}function aV(a,b){if("from"==b)return x.marked="keyword",z(O)}function aW(a){return"]"==a?z():y(ae(P,"]"))}function aX(){return y(J("form"),ax,L("{"),J("}"),ae(aY,"}"),K,K)}function aY(){return y(ax,aA)}function aZ(a,b,c){return b.tokenize==q&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(b.lastType)||"quasi"==b.lastType&&/\{\s*$/.test(a.string.slice(0,a.pos-(c||0)))}return I.lex=!0,K.lex=!0,{startState:function(a){var b={tokenize:q,lastType:"sof",cc:[],lexical:new v((a||0)-f,0,"block",!1),localVars:c.localVars,context:c.localVars&&new D(null,null,!1),indented:a||0};return c.globalVars&&"object"==typeof c.globalVars&&(b.globalVars=c.globalVars),b},token:function(a,b){if(a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),t(a,b)),b.tokenize!=r&&a.eatSpace())return null;var c=b.tokenize(a,b);return"comment"==d?c:(b.lastType="operator"==d&&("++"==e||"--"==e)?"incdec":d,w(b,c,d,e,a))},indent:function(b,d){if(b.tokenize==r||b.tokenize==s)return a.Pass;if(b.tokenize!=q)return 0;var e,h=d&&d.charAt(0),i=b.lexical;if(!/^\s*else\b/.test(d))for(var j=b.cc.length-1;j>=0;--j){var k=b.cc[j];if(k==K)i=i.prev;else if(k!=aC&&k!=I)break}for(;("stat"==i.type||"form"==i.type)&&("}"==h||(e=b.cc[b.cc.length-1])&&(e==T||e==U)&&!/^[,\.=+\-*:?[\(]/.test(d));)i=i.prev;g&&")"==i.type&&"stat"==i.prev.type&&(i=i.prev);var l=i.type,m=h==l;if("vardef"==l)return i.indented+("operator"==b.lastType||","==b.lastType?i.info.length+1:0);if("form"==l&&"{"==h)return i.indented;if("form"==l)return i.indented+f;if("stat"==l)return i.indented+("operator"==b.lastType||","==b.lastType||n.test(d.charAt(0))||/[,.]/.test(d.charAt(0))?g||f:0);if("switch"==i.info&&!m&&!1!=c.doubleIndentSwitch)return i.indented+(/^(?:case|default)\b/.test(d)?f:2*f);else if(i.align)return i.column+ +!m;else return i.indented+(m?0:f)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:i?null:"/*",blockCommentEnd:i?null:"*/",blockCommentContinue:i?null:" * ",lineComment:i?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:i?"json":"javascript",jsonldMode:h,jsonMode:i,expressionAllowed:aZ,skipExpression:function(b){w(b,"atom","atom","true",new a.StringStream("",2,null))}}}),a.registerHelper("wordChars","javascript",/[\w$]/),a.defineMIME("text/javascript","javascript"),a.defineMIME("text/ecmascript","javascript"),a.defineMIME("application/javascript","javascript"),a.defineMIME("application/x-javascript","javascript"),a.defineMIME("application/ecmascript","javascript"),a.defineMIME("application/json",{name:"javascript",json:!0}),a.defineMIME("application/x-json",{name:"javascript",json:!0}),a.defineMIME("application/manifest+json",{name:"javascript",json:!0}),a.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),a.defineMIME("text/typescript",{name:"javascript",typescript:!0}),a.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(c(4408))},9701:(a,b,c)=>{!function(a){var b={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},c={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};a.defineMode("xml",function(d,e){var f,g,h=d.indentUnit,i={},j=e.htmlMode?b:c;for(var k in j)i[k]=j[k];for(var k in e)i[k]=e[k];function l(a,b){function c(c){return b.tokenize=c,c(a,b)}var d=a.next();if("<"==d)if(a.eat("!"))if(a.eat("["))if(a.match("CDATA["))return c(n("atom","]]>"));else return null;else if(a.match("--"))return c(n("comment","--\x3e"));else if(a.match("DOCTYPE",!0,!0))return a.eatWhile(/[\w\._\-]/),c(function a(b){return function(c,d){for(var e;null!=(e=c.next());)if("<"==e)return d.tokenize=a(b+1),d.tokenize(c,d);else if(">"==e)if(1!=b)return d.tokenize=a(b-1),d.tokenize(c,d);else{d.tokenize=l;break}return"meta"}}(1));else return null;else if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),b.tokenize=n("meta","?>"),"meta";else return f=a.eat("/")?"closeTag":"openTag",b.tokenize=m,"tag bracket";return"&"==d?(a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"))?"atom":"error":(a.eatWhile(/[^&<]/),null)}function m(a,b){var c,d,e=a.next();if(">"==e||"/"==e&&a.eat(">"))return b.tokenize=l,f=">"==e?"endTag":"selfcloseTag","tag bracket";if("="==e)return f="equals",null;if("<"==e){b.tokenize=l,b.state=s,b.tagName=b.tagStart=null;var g=b.tokenize(a,b);return g?g+" tag error":"tag error"}if(!/[\'\"]/.test(e))return a.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word";return c=e,(d=function(a,b){for(;!a.eol();)if(a.next()==c){b.tokenize=m;break}return"string"}).isInAttribute=!0,b.tokenize=d,b.stringStartCol=a.column(),b.tokenize(a,b)}function n(a,b){return function(c,d){for(;!c.eol();){if(c.match(b)){d.tokenize=l;break}c.next()}return a}}function o(a){return a&&a.toLowerCase()}function p(a,b,c){this.prev=a.context,this.tagName=b||"",this.indent=a.indented,this.startOfLine=c,(i.doNotIndent.hasOwnProperty(b)||a.context&&a.context.noIndent)&&(this.noIndent=!0)}function q(a){a.context&&(a.context=a.context.prev)}function r(a,b){for(var c;;){if(!a.context||(c=a.context.tagName,!i.contextGrabbers.hasOwnProperty(o(c))||!i.contextGrabbers[o(c)].hasOwnProperty(o(b))))return;q(a)}}function s(a,b,c){return"openTag"==a?(c.tagStart=b.column(),t):"closeTag"==a?u:s}function t(a,b,c){return"word"==a?(c.tagName=b.current(),g="tag",x):i.allowMissingTagName&&"endTag"==a?(g="tag bracket",x(a,b,c)):(g="error",t)}function u(a,b,c){if("word"==a){var d=b.current();return(c.context&&c.context.tagName!=d&&i.implicitlyClosed.hasOwnProperty(o(c.context.tagName))&&q(c),c.context&&c.context.tagName==d||!1===i.matchClosing)?(g="tag",v):(g="tag error",w)}return i.allowMissingTagName&&"endTag"==a?(g="tag bracket",v(a,b,c)):(g="error",w)}function v(a,b,c){return"endTag"!=a?(g="error",v):(q(c),s)}function w(a,b,c){return g="error",v(a,b,c)}function x(a,b,c){if("word"==a)return g="attribute",y;if("endTag"==a||"selfcloseTag"==a){var d=c.tagName,e=c.tagStart;return c.tagName=c.tagStart=null,"selfcloseTag"==a||i.autoSelfClosers.hasOwnProperty(o(d))?r(c,d):(r(c,d),c.context=new p(c,d,e==c.indented)),s}return g="error",x}function y(a,b,c){return"equals"==a?z:(i.allowMissing||(g="error"),x(a,b,c))}function z(a,b,c){return"string"==a?A:"word"==a&&i.allowUnquoted?(g="string",x):(g="error",x(a,b,c))}function A(a,b,c){return"string"==a?A:x(a,b,c)}return l.isInText=!0,{startState:function(a){var b={tokenize:l,state:s,indented:a||0,tagName:null,tagStart:null,context:null};return null!=a&&(b.baseIndent=a),b},token:function(a,b){if(!b.tagName&&a.sol()&&(b.indented=a.indentation()),a.eatSpace())return null;f=null;var c=b.tokenize(a,b);return(c||f)&&"comment"!=c&&(g=null,b.state=b.state(f||c,a,b),g&&(c="error"==g?c+" error":g)),c},indent:function(b,c,d){var e=b.context;if(b.tokenize.isInAttribute)if(b.tagStart==b.indented)return b.stringStartCol+1;else return b.indented+h;if(e&&e.noIndent)return a.Pass;if(b.tokenize!=m&&b.tokenize!=l)return d?d.match(/^(\s*)/)[0].length:0;if(b.tagName)if(!1!==i.multilineTagIndentPastTag)return b.tagStart+b.tagName.length+2;else return b.tagStart+h*(i.multilineTagIndentFactor||1);if(i.alignCDATA&&/<!\[CDATA\[/.test(c))return 0;var f=c&&/^<(\/)?([\w_:\.-]*)/.exec(c);if(f&&f[1])for(;e;)if(e.tagName==f[2]){e=e.prev;break}else if(i.implicitlyClosed.hasOwnProperty(o(e.tagName)))e=e.prev;else break;else if(f)for(;e;){var g=i.contextGrabbers[o(e.tagName)];if(g&&g.hasOwnProperty(o(f[2])))e=e.prev;else break}for(;e&&e.prev&&!e.startOfLine;)e=e.prev;return e?e.indent+h:b.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:i.htmlMode?"html":"xml",helperType:i.htmlMode?"html":"xml",skipAttribute:function(a){a.state==z&&(a.state=x)},xmlCurrentTag:function(a){return a.tagName?{name:a.tagName,close:"closeTag"==a.type}:null},xmlCurrentContext:function(a){for(var b=[],c=a.context;c;c=c.prev)b.push(c.tagName);return b.reverse()}}}),a.defineMIME("text/xml","xml"),a.defineMIME("application/xml","xml"),a.mimeModes.hasOwnProperty("text/html")||a.defineMIME("text/html",{name:"xml",htmlMode:!0})}(c(4408))},7058:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(9156),e=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();let f=function(a){function b(b,c,d){var e=a.call(this,c,d)||this;return e._module=b,e}return e(b,a),Object.defineProperty(b.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),b}(d.Kx)},179:(a,b,c)=>{c.d(b,{A:()=>g,F:()=>d});var d,e=c(7058),f=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){a.Select="select",a.Hover="hover",a.Spacing="spacing",a.Target="target",a.Resize="resize"}(d||(d={}));let g=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return f(b,a),b.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(b.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"component",{get:function(){var a;return this.get("component")||(null==(a=this.get("componentView"))?void 0:a.model)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"componentView",{get:function(){var a;return this.get("componentView")||(null==(a=this.get("component"))?void 0:a.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"el",{get:function(){var a;return null==(a=this.componentView)?void 0:a.el},enumerable:!1,configurable:!0}),b.prototype.getBoxRect=function(a){var b=this.el,c=this.em.Canvas.getCanvasView(),d=this.get("boxRect");return d||(b&&c?c.getElBoxRect(b,a):{x:0,y:0,width:0,height:0})},b.prototype.getStyle=function(a){void 0===a&&(a={});var b=a.boxRect||this.getBoxRect(a),c=b.width,d=b.height,e=b.x,f=b.y;return{width:"".concat(c,"px"),height:"".concat(d,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(e,"px ").concat(f,"px")}},b.prototype.isType=function(a){return this.type===a},b}(e.A)},1738:(a,b,c)=>{var d;c.d(b,{A:()=>e}),function(a){a.run="command:run",a.runCommand="command:run:",a.runBeforeCommand="command:run:before:",a.abort="command:abort:",a.stop="command:stop",a.stopCommand="command:stop:",a.stopBeforeCommand="command:stop:before:",a.call="command:call",a.callCommand="command:call:"}(d||(d={}));let e=d},9484:(a,b,c)=>{c.r(b),c.d(b,{default:()=>d});let d={run:function(a){a.Components.clear(),a.Css.clear()}}},9516:(a,b,c)=>{c.r(b),c.d(b,{default:()=>g});var d=c(5706),e=c(9966),f=c(6294);let g={run:function(a){(0,d.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=a,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(a){this.toggleMove(),this.disableDragger()},onKeyUp:function(a){" "===(0,f.Ch)(a)&&this.editor.stopCommand(this.id)},enableDragger:function(a){this.toggleDragger(1,a)},disableDragger:function(a){this.toggleDragger(0,a)},toggleDragger:function(a,b){var c=this.canvasModel,d=this.em,f=this.dragger;this.getCanvas().classList[a?"add":"remove"]("".concat(this.ppfx,"is__grabbing")),f||(f=new e.A({getPosition:function(){return{x:c.get("x"),y:c.get("y")}},setPosition:function(a){var b=a.x,d=a.y;c.set({x:b,y:d})},onStart:function(a,b){d.trigger("canvas:move:start",b)},onDrag:function(a,b){d.trigger("canvas:move",b)},onEnd:function(a,b){d.trigger("canvas:move:end",b)}}),this.dragger=f),a?f.start(b):f.stop()},toggleMove:function(a){var b=this.ppfx,c=a?"add":"remove",d=a?"on":"off",e={on:f.on,off:f.AU},g=this.getCanvas(),h=["".concat(b,"is__grab")];a||h.push("".concat(b,"is__grabbing")),h.forEach(function(a){return g.classList[c](a)}),e[d](document,"keyup",this.onKeyUp),e[d](g,"mousedown",this.enableDragger),e[d](document,"mouseup",this.disableDragger)}}},9946:(a,b,c)=>{c.r(b),c.d(b,{default:()=>i,defineCommand:()=>h});var d=c(9156),e=c(1738),f=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),g=function(){return(g=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function h(a){return a}let i=function(a){function b(b){var c=a.call(this,0)||this;c.config=b||{},c.em=c.config.em||{};var d=c.config.stylePrefix;return c.pfx=d,c.ppfx=c.config.pStylePrefix,c.hoverClass="".concat(d,"hover"),c.badgeClass="".concat(d,"badge"),c.plhClass="".concat(d,"placeholder"),c.freezClass="".concat(c.ppfx,"freezed"),c.canvas=c.em.Canvas,c.init(c.config),c}return f(b,a),b.prototype.onFrameScroll=function(a){},b.prototype.getCanvas=function(){return this.canvas.getElement()},b.prototype.getCanvasBody=function(){return this.canvas.getBody()},b.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},b.prototype.offset=function(a){var b=a.getBoundingClientRect();return{top:b.top+a.ownerDocument.body.scrollTop,left:b.left+a.ownerDocument.body.scrollLeft}},b.prototype.init=function(a){},b.prototype.callRun=function(a,b){void 0===b&&(b={});var c=this.id;if(a.trigger("".concat(e.A.runBeforeCommand).concat(c),{options:b}),b.abort)return void a.trigger("".concat(e.A.abort).concat(c),{options:b});var d=b.sender||a,f=this.run(a,d,b),h={id:c,result:f,options:b},i=g(g({},h),{type:"run"});return this.noStop||(a.Commands.active[c]=f),a.trigger("".concat(e.A.runCommand).concat(c),h),a.trigger("".concat(e.A.callCommand).concat(c),i),a.trigger(e.A.run,h),a.trigger(e.A.call,i),f},b.prototype.callStop=function(a,b){void 0===b&&(b={});var c=this.id,d=b.sender||a;a.trigger("".concat(e.A.stopBeforeCommand).concat(c),{options:b});var f=this.stop(a,d,b),h={id:c,result:f,options:b},i=g(g({},h),{type:"stop"});return delete a.Commands.active[c],a.trigger("".concat(e.A.stopCommand).concat(c),h),a.trigger("".concat(e.A.callCommand).concat(c),i),a.trigger(e.A.stop,h),a.trigger(e.A.call,i),f},b.prototype.stopCommand=function(a){this.em.Commands.stop(this.id,a)},b.prototype.run=function(a,b,c){},b.prototype.stop=function(a,b,c){},b}(d.Kx)},7801:(a,b,c)=>{c.r(b),c.d(b,{default:()=>f});var d=c(5706),e=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))};let f={run:function(a,b,c){var f=this;void 0===c&&(c={});var g=[],h=c.component||a.getSelectedAll();return(h=(0,d.isArray)(h)?e([],h,!0):[h]).filter(Boolean).forEach(function(a){var b,c;if(!a.get("removable"))return f.em.logWarning("The element is not removable",{component:a});g.push(a),((null==(c=null==(b=a.delegate)?void 0:b.remove)?void 0:c.call(b,a))||a).remove()}),a.selectRemove(g),g}}},4864:(a,b,c)=>{c.r(b),c.d(b,{default:()=>i});var d=c(5706),e=c(9966),f=c(1166),g=function(){return(g=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},h="dmode";let i={run:function(a,b,c){var f,i,j=this;if(void 0===c&&(c={}),(0,d.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget"),!c.target)throw Error("Target option is required");var k=g({doc:null==(f=c.target.getEl())?void 0:f.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){var a;return null!=(a=j.guidesStatic)?a:[]},guidesTarget:function(){var a;return null!=(a=j.guidesTarget)?a:[]}},null!=(i=c.dragger)?i:{});this.setupGuides(),this.opts=c,this.editor=a,this.em=a.getModel(),this.target=c.target,this.isTran="translate"==c.mode,this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var l=this.dragger;return l?l.setOptions(k):(l=new e.A(k),this.dragger=l),c.event&&l.start(c.event),this.toggleDrag(!0),this.em.trigger("".concat(h,":start"),this.getEventOpts()),l},getEventOpts:function(){var a,b,c=null!=(b=null==(a=this.guidesTarget)?void 0:a.filter(function(a){return a.active}))?b:[];return{mode:this.opts.mode,component:this.target,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic,guidesMatched:this.getGuidesMatched(c),command:this}},stop:function(){this.toggleDrag()},setupGuides:function(){var a;(null!=(a=this.guides)?a:[]).forEach(function(a){var b,c=a.guide;null==(b=null==c?void 0:c.parentNode)||b.removeChild(c)}),this.guides=[]},getGuidesContainer:function(){var a,b,c,e,f=this,g=this.guidesEl;if(!g){var h=this.editor,i=this.em,j=this.opts,k=null!=(a=h.getConfig().stylePrefix)?a:"",l=document.createElement("div"),m=document.createElement("div"),n='<div class="'.concat(k,"guide-info__line ").concat(k,'danger-bg">\n        <div class="').concat(k,"guide-info__content ").concat(k,'danger-color"></div>\n      </div>');(g=document.createElement("div")).className="".concat(k,"guides"),l.className="".concat(k,"guide-info ").concat(k,"guide-info__x"),m.className="".concat(k,"guide-info ").concat(k,"guide-info__y"),l.innerHTML=n,m.innerHTML=n,g.appendChild(l),g.appendChild(m),null==(b=h.Canvas.getGlobalToolsEl())||b.appendChild(g),this.guidesEl=g,this.elGuideInfoX=l,this.elGuideInfoY=m,this.elGuideInfoContentX=null!=(c=l.querySelector(".".concat(k,"guide-info__content")))?c:void 0,this.elGuideInfoContentY=null!=(e=m.querySelector(".".concat(k,"guide-info__content")))?e:void 0,i.on("canvas:update frame:scroll",(0,d.debounce)(function(){var a;f.updateGuides(),j.debug&&(null==(a=f.guides)||a.forEach(function(a){return f.renderGuide(a)}))},200))}return g},getGuidesStatic:function(){var a=this,b=[],c=this.target.getEl(),e=null==c?void 0:c.parentElement;return e?((0,d.each)(e.children,function(d){return b=b.concat(c!==d?a.getElementGuides(d):[])}),b.concat(this.getElementGuides(e))):[]},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(a){var b,c,e,f=this;(null!=(b=null!=a?a:this.guides)?b:[]).forEach(function(a){var b=a.origin,g=c===b?e:f.getElementPos(b);c=b,e=g,(0,d.each)(f.getGuidePosUpdate(a,g),function(b,c){a[c]=b}),a.originRect=g})},getGuidePosUpdate:function(a,b){var c={},d=b.top,e=b.height,f=b.left,g=b.width;switch(a.type){case"t":c.y=d;break;case"b":c.y=d+e;break;case"l":c.x=f;break;case"r":c.x=f+g;break;case"x":c.x=f+g/2;break;case"y":c.y=d+e/2}return c},renderGuide:function(a){if(!this.opts.skipGuidesRender){var b,c,d=null!=(b=a.guide)?b:document.createElement("div"),e=a.active?2:1;if(d.style.cssText="position: absolute; background-color: ".concat(a.active?"green":"red",";"),!d.children.length){var f=document.createElement("div");f.style.cssText="position: absolute; color: red; padding: 5px; top: 0; left: 0;",d.appendChild(f)}return a.y?(d.style.width="100%",d.style.height="".concat(e).concat("px"),d.style.top="".concat(a.y).concat("px"),d.style.left="0"):(d.style.width="".concat(e).concat("px"),d.style.height="100%",d.style.left="".concat(a.x).concat("px"),d.style.top="0".concat("px")),a.guide||null==(c=this.guidesContainer)||c.appendChild(d),d}},getElementPos:function(a){return this.editor.Canvas.getElementPos(a,{noScroll:1})},getElementGuides:function(a){var b=this,c=this.opts,d=this.getElementPos(a),e=(0,f.getComponentModel)(a),h=(0,f.getComponentView)(a),i=d.top,j=d.height,k=d.left,l=d.width,m=[{type:"t",y:i},{type:"b",y:i+j},{type:"l",x:k},{type:"r",x:k+l},{type:"x",x:k+l/2},{type:"y",y:i+j/2}].map(function(f){var i=c.debug?b.renderGuide(f):void 0;return g(g({},f),{component:e,componentView:h,componentEl:a,origin:a,componentElRect:d,originRect:d,guideEl:i,guide:i})});return m.forEach(function(a){var c;return null==(c=b.guides)?void 0:c.push(a)}),m},getTranslate:function(a,b){void 0===b&&(b="x");var c=0;return(a||"").split(" ").forEach(function(a){var d=a.trim(),e="translate".concat(b.toUpperCase(),"(");0===d.indexOf(e)&&(c=parseFloat(d.replace(e,"")))}),c},setTranslate:function(a,b,c){var d="translate".concat(b.toUpperCase(),"("),e="".concat(d).concat(c,")"),f=(a||"").split(" ").map(function(a){return 0===a.trim().indexOf(d)&&(a=e),a}).join(" ");return 0>f.indexOf(d)&&(f+=" ".concat(e)),f},getPosition:function(){var a=this.target,b=this.isTran,c=a.getStyle(),d=c.transform,e=c.left,f=c.top,g=0,h=0;return b&&d?(g=this.getTranslate(d),h=this.getTranslate(d,"y")):(g=parseFloat(null!=e?e:"0"),h=parseFloat(null!=f?f:"0")),{x:g,y:h}},setPosition:function(a){var b,c,e=a.x,f=a.y,g=a.end,h=a.position,i=a.width,j=a.height,k=this.target,l=this.isTran,m=this.em,n=this.opts,o=!g,p="".concat(parseInt("".concat(e),10)).concat("px"),q="".concat(parseInt("".concat(f),10)).concat("px"),r={};if(l){var s=null!=(c=null==(b=k.getStyle())?void 0:b.transform)?c:"";s=this.setTranslate(s,"x",p),r={transform:s=this.setTranslate(s,"y",q),__p:o}}else{var t={position:h,width:i,height:j},u={left:p,top:q,__p:o};(0,d.keys)(t).forEach(function(a){var b=t[a];b&&(u[a]=b)}),r=u}n.addStyle?n.addStyle({component:k,styles:r,partial:!g}):k.addStyle(r,{avoidStore:!g}),m.Styles.__emitCmpStyleUpdate(r,{components:m.getSelected()})},_getDragData:function(){var a=this.target;return{target:a,parent:a.parent(),index:a.index()}},onStart:function(a){var b,c=this.target,d=this.editor,e=this.isTran,f=this.opts,g=d.Canvas,h=c.getStyle(),i="absolute",j=[i,"relative"];if(null==(b=f.onStart)||b.call(f,this._getDragData()),!e){if(h.position!==i){var k=g.offset(c.getEl()),l=k.left,m=k.top,n=k.width,o=k.height,p=c.parent(),q=null;do{var r=null==p?void 0:p.getStyle(),s=null==r?void 0:r.position;s&&(q=j.indexOf(s)>=0?p:null),p=null==p?void 0:p.parent()}while(p&&!q);if(f.center){var t=g.getMouseRelativeCanvas(a),u=t.x,v=t.y;l=u,m=v}else if(q){var w=g.offset(q.getEl());l-=w.left,m-=w.top}this.setPosition({x:l,y:m,width:"".concat(n,"px"),height:"".concat(o,"px"),position:i})}this.guidesStatic=this.getGuidesStatic()}},onDrag:function(a){var b,c,d=this,e=this.guidesTarget,f=this.opts;this.updateGuides(e),f.debug&&(null==e||e.forEach(function(a){return d.renderGuide(a)})),f.guidesInfo&&this.renderGuideInfo(null!=(b=null==e?void 0:e.filter(function(a){return a.active}))?b:[]),null==(c=f.onDrag)||c.call(f,this._getDragData()),this.opts.event=a,this.em.trigger("".concat(h,":move"),this.getEventOpts())},onEnd:function(a,b,c){var d,e=this.editor,f=this.opts,i=this.id;null==(d=f.onEnd)||d.call(f,a,c,g(g({event:a},c),this._getDragData())),e.stopCommand("".concat(i)),this.hideGuidesInfo(),this.em.trigger("".concat(h,":end"),this.getEventOpts())},hideGuidesInfo:function(){var a=this;["X","Y"].forEach(function(b){var c=a["elGuideInfo".concat(b)];c&&(c.style.display="none")})},renderGuideInfo:function(a){var b=this;void 0===a&&(a=[]),this.hideGuidesInfo(),this.getGuidesMatched(a).forEach(function(a){b.opts.skipGuidesRender||b.renderSingleGuideInfo(a),b.em.trigger("".concat(h,":active"),g(g({},b.getEventOpts()),a))})},renderSingleGuideInfo:function(a){var b=a.posFirst,c=a.posSecond,e=a.size,f=a.sizeRaw,g=a.guide,h=a.elGuideInfo,i=a.elGuideInfoCnt,j="y"==((0,d.isUndefined)(g.x)?"y":"x"),k=h.style;k.display="",k[j?"top":"left"]="".concat(b,"px"),k[j?"left":"top"]="".concat(c,"px"),k[j?"width":"height"]="".concat(e,"px"),i.innerHTML="".concat(Math.round(f),"px")},getGuidesMatched:function(a){var b=this;void 0===a&&(a=[]);var c=this.guidesStatic,e=void 0===c?[]:c;return a.map(function(a){var c=a.origin,f=a.x,g=b.getElementPos(c),h=(0,d.isUndefined)(f)?"y":"x",i="y"===h,j=g[i?"left":"top"],k=g.rect[i?"left":"top"],l=i?j+g.width:j+g.height,m=i?k+g.rect.width:k+g.rect.height,n=e.filter(function(b){var c;return b.type===a.type||(null==(c=({l:["r","x"],r:["l","x"],x:["l","r"],t:["b","y"],b:["t","y"],y:["t","b"]})[a.type])?void 0:c.includes(b.type))}).map(function(a){var b=a.originRect,c=b.left,d=b.width,e=b.top,f=b.height,g=i?c+d:e+f;return{gap:g<j?j-g:(i?c:e)-l,guide:a}}).filter(function(a){return a.gap>0}).sort(function(a,b){return a.gap-b.gap}).map(function(a){return a.guide}).filter(function(b){switch(a.type){case"l":case"r":case"x":return 1>Math.abs(b.x-a.x);case"t":case"b":case"y":return 1>Math.abs(b.y-a.y);default:return!1}})[0];if(!n)return null;var o=n.originRect,p=o.left,q=o.width,r=o.top,s=o.height,t=o.rect,u=i?p<g.left:r<g.top,v=i?t.left:t.top,w=i?p+q:r+s,x=i?t.left+t.width:t.top+t.height,y=i?a.y:a.x;return{guide:a,guidesStatic:e,matched:n,posFirst:y,posSecond:u?w:l,size:u?j-w:(i?p:r)-l,sizeRaw:u?k-x:v-m,elGuideInfo:b["elGuideInfo".concat(h.toUpperCase())],elGuideInfoCnt:b["elGuideInfoContent".concat(h.toUpperCase())]}}).filter(Boolean)},toggleDrag:function(a){var b=this.ppfx,c=this.editor,d=a?"add":"remove",e=c.Canvas,f=e.getBody();["".concat(b,"is__grabbing")].forEach(function(a){return f.classList[d](a)}),e[a?"startAutoscroll":"stopAutoscroll"]()},editor:void 0,em:void 0,opts:void 0,target:void 0}},6134:(a,b,c)=>{c.r(b),c.d(b,{default:()=>d});let d={run:function(a){if(a.Canvas.hasFocus()){var b=[];a.getSelectedAll().forEach(function(a){var c=a.components(),d=c&&c.filter(function(a){return a.get("selectable")})[0];d&&b.push(d)}),b.length&&a.select(b)}}}},914:(a,b,c)=>{c.r(b),c.d(b,{default:()=>d});let d={run:function(a,b,c){if(void 0===c&&(c={}),a.Canvas.hasFocus()||c.force){var d=[];a.getSelectedAll().forEach(function(a){for(var b=a.parent();b&&!b.get("selectable");)b=b.parent();b&&d.push(b)}),d.length&&a.select(d)}}}},5547:(a,b,c)=>{c.r(b),c.d(b,{default:()=>d});let d={run:function(a){if(a.Canvas.hasFocus()){var b=[];a.getSelectedAll().forEach(function(a){var c,d=a.parent();if(d){var e=d.components().length,f=0,g=0;do f++,c=(g=a.index()+f)<=e?d.getChildAt(g):null;while(c&&!c.get("selectable"));b.push(c||a)}}),b.length&&a.select(b)}}}},8655:(a,b,c)=>{c.r(b),c.d(b,{default:()=>d});let d={run:function(a){if(a.Canvas.hasFocus()){var b=[];a.getSelectedAll().forEach(function(a){var c,d=a.parent();if(d){var e=0,f=0;do e++,c=(f=a.index()-e)>=0?d.getChildAt(f):null;while(c&&!c.get("selectable"));b.push(c||a)}}),b.length&&a.select(b)}}}},7640:(a,b,c)=>{c.r(b),c.d(b,{default:()=>e});var d=c(5706);let e={run:function(a,b,c){void 0===c&&(c={});var e=c.target,f=[];if(!e.get("styles"))return f;var g=e.get("type"),h=a.Pages.getAllWrappers();if(!(0,d.flatten)(h.map(function(a){return a.findType(g)})).length){var i=a.CssComposer.getAll();f=i.filter(function(a){return a.get("group")==="cmp:".concat(g)}),i.remove(f)}return f}}},5837:(a,b,c)=>{c.r(b),c.d(b,{default:()=>e});var d=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))};let e={run:function(a){var b=a.getModel(),c=d([],a.getSelectedAll(),!0).map(function(a){var b,c;return(null==(c=null==(b=a.delegate)?void 0:b.copy)?void 0:c.call(b,a))||a}).filter(Boolean);c.length&&b.set("clipboard",c)}}},6477:(a,b,c)=>{c.r(b),c.d(b,{default:()=>e});var d=c(6294);let e={run:function(a,b,c){var e=this;void 0===c&&(c={}),b&&b.set&&b.set("active",0);var f=a.getConfig(),g=a.Modal,h=f.stylePrefix;if(this.cm=a.CodeManager||null,!this.editors){var i=this.buildEditor("htmlmixed","hopscotch","HTML"),j=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=i.model,this.cssEditor=j.model;var k=(0,d.a_)("div",{class:"".concat(h,"export-dl")});k.appendChild(i.el),k.appendChild(j.el),this.editors=k}g.open({title:f.textViewCode,content:this.editors}).getModel().once("change:open",function(){return a.stopCommand("".concat(e.id))}),this.htmlEditor.setContent(a.getHtml(c.optsHtml)),this.cssEditor.setContent(a.getCss(c.optsCss))},stop:function(a){var b=a.Modal;b&&b.close()},buildEditor:function(a,b,c){var d=this.em.CodeManager,e=d.createViewer({label:c,codeName:a,theme:b}),f=new d.EditorView({model:e,config:d.getConfig()}).render().el;return{model:e,el:f}}}},1772:(a,b,c)=>{c.r(b),c.d(b,{default:()=>e});var d=c(5706);let e={isEnabled:function(){var a=document;return!!a.fullscreenElement||!!a.webkitFullscreenElement||!!a.mozFullScreenElement},enable:function(a){var b="";return a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen?(b="webkit",a.webkitRequestFullscreen()):a.mozRequestFullScreen?(b="moz",a.mozRequestFullScreen()):a.msRequestFullscreen&&a.msRequestFullscreen(),b},disable:function(){var a=document;this.isEnabled()&&(a.exitFullscreen?a.exitFullscreen():a.webkitExitFullscreen?a.webkitExitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.msExitFullscreen&&a.msExitFullscreen())},fsChanged:function(a){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(a||"","fullscreenchange"),this.fsChanged))},run:function(a,b,c){void 0===c&&(c={}),this.sender=b;var e=c.target,f=(0,d.isElement)(e)?e:document.querySelector(e),g=this.enable(f||a.getContainer());this.fsChanged=this.fsChanged.bind(this,g),document.addEventListener(g+"fullscreenchange",this.fsChanged)},stop:function(a,b){b&&b.set&&b.set("active",!1),this.disable()}}},741:(a,b,c)=>{c.r(b),c.d(b,{default:()=>i});var d=c(5706),e=c(7774),f=c(6294),g=c(9317),h=c(1406);let i=(0,d.extend)({},h.default,g.default,{init:function(a){g.default.init.apply(this,arguments),(0,d.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=a,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];g.default.enable.apply(this,a),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var c=this.$wrapper;c.css("cursor","move"),c.on("mousedown",this.initSorter),c.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(a){var b=(0,e.default)(a.target).data("model").get("draggable");b&&(this.cacheEl=null,this.startSelectPosition(a.target,this.frameEl.contentDocument),this.sorter.draggable=b,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,f.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(a){var b=a.get("draggable");if(b){this.cacheEl=null;var c=a.view.el;this.startSelectPosition(c,this.frameEl.contentDocument),this.sorter.draggable=b,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,f.on)(this.getContentWindow(),"keydown",this.rollback)}},initSorterFromModels:function(a){this.cacheEl=null;var b=a[a.length-1],c=this.em.getCurrentFrame(),d=b.getEl(null==c?void 0:c.model).ownerDocument,e=a.map(function(a){var b;return null==(b=null==a?void 0:a.view)?void 0:b.el});this.startSelectPosition(e,d,{onStart:this.onStart}),this.sorter.eventHandlers.legacyOnMoveClb=this.onDrag,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,f.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,f.AU)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,f.AU)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(a,b){},rollback:function(a,b){(27==(a.which||a.keyCode)||b)&&this.sorter.cancelDrag()},getBadgeEl:function(){return this.$badge||(this.$badge=(0,e.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,e.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];g.default.stop.apply(this,a),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass),this.$wrapper.css("cursor","").unbind().removeClass(this.noSelClass)}})},2924:(a,b,c)=>{c.r(b),c.d(b,{default:()=>f});var d=c(5706),e=c(6294);let f={open:function(a){var b=this,c=this.editor,e=this.title,f=this.config,g=this.am,h=f.custom;if((0,d.isFunction)(h.open))return h.open(g.__customData());c.Modal.open({title:e,content:a}).onceClose(function(){return c.stopCommand(b.id)})},close:function(){var a=this.config.custom;if((0,d.isFunction)(a.close))return a.close(this.am.__customData());var b=this.editor.Modal;b&&b.close()},run:function(a,b,c){void 0===c&&(c={});var d=a.AssetManager,f=d.getConfig(),g=c.types,h=void 0===g?[]:g,i=c.accept,j=c.select;if(this.title=c.modalTitle||a.t("assetManager.modalTitle")||"",this.editor=a,this.config=f,this.am=d,d.setTarget(c.target),d.onClick(c.onClick),d.onDblClick(c.onDblClick),d.onSelect(c.onSelect),d.__behaviour({select:j,types:h,options:c}),f.custom)this.rendered=this.rendered||(0,e.a_)("div"),this.rendered.className="".concat(f.stylePrefix,"custom-wrp"),d.__behaviour({container:this.rendered}),d.__trgCustom();else{if(!this.rendered||h){var k=d.getAll().filter(function(a){return a});h&&h.length&&(k=k.filter(function(a){return -1!==h.indexOf(a.get("type"))})),d.render(k),this.rendered=d.getContainer()}if(i){var l=this.rendered.querySelector("input#".concat(f.stylePrefix,"uploadFile"));l&&l.setAttribute("accept",i)}}return this.open(this.rendered),this},stop:function(a){this.editor=a,this.close(this.rendered)}}},3963:(a,b,c)=>{c.r(b),c.d(b,{default:()=>f});var d=c(5706),e=c(6294);let f={open:function(){var a=this.container,b=this.editor,c=this.bm,e=this.config,f=e.custom,g=e.appendTo;if((0,d.isFunction)(f.open))return f.open(c.__customData());if(this.firstRender&&!g){var h="views-container",i=b.Panels;(i.getPanel(h)||i.addPanel({id:h})).set("appendContent",a).trigger("change:appendContent"),f||a.appendChild(c.render())}a&&(a.style.display="block")},close:function(){var a=this.container,b=this.config.custom;if((0,d.isFunction)(b.close))return b.close(this.bm.__customData());a&&(a.style.display="none")},run:function(a){var b=a.Blocks;this.config=b.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,e.a_)("div"),this.editor=a,this.bm=b;var c=this.container;b.__behaviour({container:c}),this.config.custom&&b.__trgCustom(),this.open()},stop:function(){this.close()}}},1479:(a,b,c)=>{c.r(b),c.d(b,{default:()=>d});let d={run:function(a){var b=a.LayerManager,c=a.Panels,d=b.getConfig();if(!d.appendTo){if(!this.layers){var e="views-container",f=document.createElement("div"),g=c.getPanel(e)||c.addPanel({id:e});d.custom?b.__trgCustom({container:f}):f.appendChild(b.render()),g.set("appendContent",f).trigger("change:appendContent"),this.layers=f}this.layers.style.display="block"}},stop:function(){var a=this.layers;a&&(a.style.display="none")}}},3473:(a,b,c)=>{c.r(b),c.d(b,{default:()=>e});var d=c(7774);let e={run:function(a,b){if(this.sender=b,!this.$cnt){var c=a.getConfig(),e=a.Panels,f=a.DeviceManager,g=a.SelectorManager,h=a.StyleManager,i="change:appendContent",j=(0,d.default)("<div></div>"),k=(0,d.default)("<div></div>"),l=(0,d.default)("<div></div>"),m=(0,d.default)("<div></div>");if(this.$cnt=j,this.$cntInner=k,k.append(l),k.append(m),j.append(k),f&&c.showDevices){var n=e.addPanel({id:"devices-c"}),o=f.render();n.set("appendContent",o).trigger(i)}var p=g.getConfig();p.custom?g.__trgCustom({container:l.get(0)}):p.appendTo||l.append(g.render([])),this.sm=h;var q=h.getConfig(),r=q.stylePrefix;this.$header=(0,d.default)('<div class="'.concat(r,'header">').concat(a.t("styleManager.empty"),"</div>")),j.append(this.$header),q.custom?h.__trgCustom({container:m.get(0)}):q.appendTo||m.append(h.render());var s="views-container";(e.getPanel(s)||e.addPanel({id:s})).set("appendContent",j).trigger(i);var t=a.getModel();this.listenTo(t,h.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var a=this.sender,b=this.sm,c=this.$cntInner,d=this.$header;(!a||!a.get||a.get("active"))&&b&&(b.getSelected()?(null==c||c.show(),null==d||d.hide()):(null==c||c.hide(),null==d||d.show()))},stop:function(){var a,b;null==(a=this.$cntInner)||a.hide(),null==(b=this.$header)||b.hide()}}},5054:(a,b,c)=>{c.r(b),c.d(b,{default:()=>e});var d=c(7774);let e={run:function(a,b){this.sender=b;var c,e=a.getModel(),f=a.Config.stylePrefix,g=a.TraitManager,h=g.getConfig();if(!h.appendTo){if(!this.$cn){this.$cn=(0,d.default)("<div></div>"),this.$cn2=(0,d.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,d.default)("<div>").append('<div class="'.concat(h.stylePrefix,'header">').concat(e.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),h.custom?g.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(f,'traits-label">').concat(e.t("traitManager.label"),"</div>")),this.$cn2.append(g.render()));var i=a.Panels;null==(c=i.getPanel("views-container")?i.getPanel("views-container"):i.addPanel({id:"views-container"}))||c.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=a.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var a=this.sender;(!a||!a.get||a.get("active"))&&(1===this.target.getSelectedAll().length?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},6979:(a,b,c)=>{c.r(b),c.d(b,{default:()=>e});var d=c(5706);let e={run:function(a,b,c){void 0===c&&(c={});var e=a.getModel(),g=e.get("clipboard"),h=a.getSelected();(null==g?void 0:g.length)&&h&&(a.getSelectedAll().forEach(function(b){var h,i,j,k,l=(null==(i=null==(h=b.delegate)?void 0:h.copy)?void 0:i.call(h,b))||b,m=l.collection;if(m){var n={at:l.index()+1,action:c.action||"paste-component"};k=(0,d.contains)(g,l)&&l.get("copyable")?m.add(l.clone(),n):f(a,g,l.parent(),n)}else{var o=null==(j=e.Pages.getSelected())?void 0:j.getMainComponent(),n={at:(null==o?void 0:o.components().length)||0,action:c.action||"paste-component"};k=f(a,g,o,n)}(k=(0,d.isArray)(k)?k:[k]).forEach(function(b){return a.trigger("component:paste",b)})}),h.emitUpdate())}};function f(a,b,c,d){var e=b.filter(function(a){return a.get("copyable")}).filter(function(b){return a.Components.canMove(c,b).result});return c.components().add(e.map(function(a){return a.clone()}),d)}},4457:(a,b,c)=>{c.r(b),c.d(b,{default:()=>g});var d=c(5706),e=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},f="core:component-outline";let g={getPanels:function(a){return this.panels||(this.panels=a.Panels.getPanels()),this.panels},preventDrag:function(a){a.abort=1},tglEffects:function(a){var b=this.em;if(b){var c=b.Canvas,e=c.getBody(),f=c.getToolbarEl();f&&(f.style.display=a?"none":"");var g=e.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,d.each)(g,function(b){return b.style.pointerEvents=a?"all":""}),b[a?"on":"off"]("run:tlb-move:before",this.preventDrag)}},run:function(a,b){var c=this;this.sender=b,this.selected=e([],a.getSelectedAll(),!0),a.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=a.Commands.isActive(f)),this.shouldRunSwVisibility&&a.stopCommand(f),a.getModel().stopDefault();var d=this.getPanels(a),g=a.Canvas.getElement(),h=a.getEl(),i=a.Config.stylePrefix;if(!this.helper){var j=document.createElement("span");j.className="".concat(i,"off-prv fa fa-eye-slash"),h.appendChild(j),j.onclick=function(){return c.stopCommand()},this.helper=j}this.helper.style.display="inline-block",d.forEach(function(a){return a.set("visible",!1)});var k=g.style;k.width="100%",k.height="100%",k.top="0",k.left="0",k.padding="0",k.margin="0",a.refresh(),this.tglEffects(1)},stop:function(a){var b=this.sender,c=void 0===b?{}:b,d=this.selected;c.set&&c.set("active",0);var e=this.getPanels(a);this.shouldRunSwVisibility&&(a.runCommand(f),this.shouldRunSwVisibility=!1),a.getModel().runDefault(),e.forEach(function(a){return a.set("visible",!0)}),a.Canvas.getElement().setAttribute("style",""),d&&a.select(d),delete this.selected,this.helper&&(this.helper.style.display="none"),a.refresh(),this.tglEffects()}}},5493:(a,b,c)=>{c.r(b),c.d(b,{ConvertUnitsToPx:()=>d,default:()=>i});var d,e=c(2225),f=c(1166),g=function(){return(g=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},h=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};!function(a){a.pt="pt",a.pc="pc",a.in="in",a.cm="cm",a.mm="mm",a.vw="vw",a.vh="vh",a.vmin="vmin",a.vmax="vmax",a.svw="svw",a.lvw="lvw",a.dvw="dvw",a.svh="svh",a.lvh="lvh",a.dvh="dvh",a.perc="%"}(d||(d={}));let i={run:function(a,b,c){var d,i,j=this,k=a.Canvas,l=a.Utils,m=a.em,n=k.getCanvasView(),o=m.config.stylePrefix||"",p="".concat(o,"resizing"),q=c.onStart,r=void 0===q?function(){}:q,s=c.onMove,t=void 0===s?function(){}:s,u=c.onEnd,v=void 0===u?function(){}:u,w=c.updateTarget,x=void 0===w?function(){}:w,y=c.el,z=c.componentView,A=c.component,B=c.skipPositionUpdate,C=h(c,["onStart","onMove","onEnd","updateTarget","el","componentView","component","skipPositionUpdate"]),D=y||(null==z?void 0:z.el)||A.getEl(),E={component:A,el:D},F=function(a,b,c){var d=c.docs;d&&d.forEach(function(b){var c=b.body,d=c.className||"";c.className=("add"==a?"".concat(d," ").concat(p):d.replace(p,"")).trim()})},G=g(g({appendTo:k.getResizerEl(),prefix:a.getConfig().stylePrefix,posFetcher:n.getElementPos.bind(n),mousePosFetcher:k.getMouseRelativePos.bind(k),docs:[document],updateOnMove:!0,skipUnitAdjustments:!0,onStart:function(b,h){r(b,h);var j,k=h.el,l=h.config,n=h.resizer,o=l.keyHeight,p=l.keyWidth,q=l.currentUnit,s=l.keepAutoHeight,t=l.keepAutoWidth;F("add",b,h),d=m.Styles.getModelToStyle(A),i=getComputedStyle(k);var u=d.getStyle(),v=g({},n.startDim),w=u[p];l.autoWidth=t&&"auto"===w,isNaN(parseFloat(w))&&(w=i[p]);var x=u[o];l.autoHeight=s&&"auto"===x,isNaN(parseFloat(x))&&(x=i[o]);var y=parseFloat(w),z=parseFloat(x),B=(0,f.getUnitFromValue)(w),C=(0,f.getUnitFromValue)(x);q&&(l.unitWidth=B,l.unitHeight=C);var D=g(g({},E),{event:b,rect:v,model:d,modelWidth:{value:w,property:p,number:y,unit:B},modelHeight:{value:x,property:o,number:z,unit:C}});a.trigger(e.I.resizeStart,D),a.trigger(e.I.resize,g(g({},D),{type:"start"})),null==(j=c.afterStart)||j.call(c)},onMove:function(b,c){t(b,c);var d=c.resizer,f=g(g({},E),{event:b,delta:d.delta,pointer:d.currentPos,rect:d.rectDim});a.trigger(e.I.resizeStart,f),a.trigger(e.I.resize,g(g({},f),{type:"move"}))},onEnd:function(b,d){v(b,d),F("remove",b,d);var f,h=d.resizer,i=g(g({},E),{event:b,rect:h.rectDim,moved:h.moved});a.trigger(e.I.resizeEnd,i),a.trigger(e.I.resize,g(g({},E),{type:"end"})),null==(f=c.afterEnd)||f.call(c)},updateTarget:function(b,c,f){if(x(b,c,f),d){var h,l=f.store,n=f.selectedHandler,o=f.config,p=f.resizer,q=f.event,r=o.keyHeight,s=o.keyWidth,t=o.autoHeight,u=o.autoWidth,v=o.unitWidth,w=o.unitHeight,y=["tc","bc"].indexOf(n)>=0,z=["cl","cr"].indexOf(n)>=0,C=!l,F={};if(!y){var G=(null==(h=k.getBody())?void 0:h.offsetWidth)||0,H=c.w<G?c.w:G;F[s]=u?"auto":j.convertPxToUnit({el:D,elComputedStyle:i,valuePx:H,unit:v})}z||(F[r]=t?"auto":j.convertPxToUnit({el:D,elComputedStyle:i,valuePx:c.h,unit:w,isHeight:!0})),!B&&m.getDragMode(A)&&(F.top="".concat(c.t,"px"),F.left="".concat(c.l,"px"));var I=!1,J=function(a){I=!0;var b=g(g({},a||F),{__p:C});d.addStyle(b,{avoidStore:C}),m.Styles.__emitCmpStyleUpdate(b,{components:A})},K=g(g({},E),{rect:c,partial:C,event:q,style:F,updateStyle:J,convertPxToUnit:function(a){return j.convertPxToUnit(g({el:D,elComputedStyle:i},a))},delta:p.delta,pointer:p.currentPos});a.trigger(e.I.resizeUpdate,K),I||J()}}},C),c.options),H=this.canvasResizer;return H||(this.canvasResizer=new l.Resizer(G),H=this.canvasResizer),H.setOptions(G,!0),H.blur(),H.focus(D),H},stop:function(){var a;null==(a=this.canvasResizer)||a.blur()},convertPxToUnit:function(a){var b=a.el,c=a.valuePx,e=a.unit,f=a.dpi,g=void 0===f?96:f,h=a.roundDecimals,i=a.isHeight,j=a.elComputedStyle,k=b.ownerDocument.defaultView,l=(null==k?void 0:k.innerWidth)||1,m=window.innerHeight||1,n=c,o=e;switch(e){case d.pt:n=72/g*c;break;case d.pc:n=6/g*c;break;case d.in:n=c/g;break;case d.cm:n=c/(g/2.54);break;case d.mm:n=c/(g/25.4);break;case d.vw:n=c/l*100;break;case d.vh:n=c/m*100;break;case d.vmin:n=c/Math.min(l,m)*100;break;case d.vmax:n=c/Math.max(l,m)*100;break;case d.perc:var p=b.parentElement,q=b.offsetParent,r=(null==j?void 0:j.position)==="absolute"?q:p,s=(null==r?void 0:r.offsetWidth)||1,t=(null==r?void 0:r.offsetHeight)||1;n=c/(i?t:s)*100;break;case d.svw:case d.lvw:case d.dvw:n=c/l*100;break;case d.svh:case d.lvh:case d.dvh:n=c/m*100;break;default:o="px"}return"".concat(+n.toFixed(void 0===h?3:h)).concat(o)}}},9317:(a,b,c)=>{c.r(b),c.d(b,{default:()=>v});var d,e=c(5706),f=c(179),g=c(9156),h=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),i=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return h(b,a),b.prototype.defaults=function(){return{command:"",attributes:{}}},b}(g.Kx),j=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return j(b,a),b}(g.pM);k.prototype.model=i;var l=c(2225),m=c(8242),n=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),o=function(){return(o=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},p=function(a){function b(b){var c=a.call(this,b)||this;return c.em=b.config.em,c}return n(b,a),b.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},b.prototype.attributes=function(){return this.model.get("attributes")},b.prototype.handleClick=function(a){a.preventDefault(),a.stopPropagation();var b=this.em,c=b.Canvas.getFrameEl().getBoundingClientRect(),d=c.left,e=c.top,f=o(o({},a),{clientX:a.clientX-d,clientY:a.clientY-e});b.trigger("toolbar:run:before",{event:f}),this.execCommand(f)},b.prototype.execCommand=function(a){var b=this.em,c=this.model,d={event:a},f=c.get("command"),g=b.Editor;(0,e.isFunction)(f)&&f(g,null,d),(0,e.isString)(f)&&g.runCommand(f,d)},b.prototype.render=function(){var a=this.em,b=this.$el,c=this.model,d=c.get("id"),e=c.get("label"),f=a.getConfig().stylePrefix;return b.addClass("".concat(f,"toolbar-item")),d&&b.addClass("".concat(f,"toolbar-item__").concat(d)),e&&b.append(e),this},b}(g.Ss),q=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),r=function(a){function b(b){var c=a.call(this,b)||this,d=b.em;return c.em=d,c.config={em:d},c.listenTo(c.collection,"reset",c.render),c}return q(b,a),b.prototype.onRender=function(){var a=this.em.config.stylePrefix;this.el.className="".concat(a,"toolbar-items")},b}(m.A);r.prototype.itemView=p;var s=c(6294),t=c(1166),u=function(){return(u=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};let v={activeResizer:!1,init:function(){this.onSelect=(0,e.debounce)(this.onSelect,0),(0,e.bindAll)(this,"onHover","onOut","onClick","onCanvasScroll","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),d=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(a){var b=this,c=this.em,d=this.canvas.getCanvasView().el,e=c.getConfig().listenToEl,f=c.getContainer().parentNode,g=a?"on":"off",h={on:s.on,off:s.AU},i=l.I.update;!e.length&&f&&e.push(f);var j=function(a,c,d){h[g](d,"scroll",b.onCanvasScroll,!0),h[g](c,"mouseover",b.onHover),h[g](c,"mouseleave",b.onOut),h[g](c,"click",b.onClick),h[g](a,"scroll",b.onFrameScroll,!0),h[g](a,"resize",b.onFrameResize)};h[g](window,"resize",this.onFrameUpdated),h[g](e,"scroll",this.onContainerChange),c[g]("component:toggled ".concat(i," undo redo"),this.onSelect,this),c[g]("change:componentHovered",this.onHovered,this),c[g]("".concat(l.I.resize," styleable:change ").concat(l.I.input),this.updateGlobalPos,this),c[g]("".concat(i,":toolbar"),this._upToolbar,this),c[g]("frame:updated",this.onFrameUpdated,this),c[g]("canvas:updateTools",this.onFrameUpdated,this),c[g](c.Canvas.events.refresh,this.updateAttached,this),c.Canvas.getFrames().forEach(function(a){var b=a.view,c=null==b?void 0:b.getWindow();c&&j(c,null==b?void 0:b.getBody(),d)})},onHover:function(a){a.stopPropagation();var b=this.em,c=a.target,d=(0,t.getComponentView)(c),e=null==d?void 0:d.frameView,f=null==d?void 0:d.model;if(!f)for(var g=c.parentNode;!f&&g&&!(0,s.ZQ)(g);)f=(0,t.getComponentModel)(g),g=g.parentNode;this.currentDoc=c.ownerDocument,b.setHovered(f,{useValid:!0}),e&&b.setCurrentFrame(e)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(a,b){var c,d=this,e={};b?null==(c=b.views)||c.forEach(function(a){var c=a.el,f=d.getElementPos(c);e={el:c,pos:f,component:b,view:a},c.ownerDocument===d.currentDoc&&(d.elHovered=e),d.updateToolsLocal(e)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(a){var b=a.view,c=b&&b.getToolsEl();c&&d.toggleToolsEl(0,0,{el:c})}))},onSelect:function(){var a=this.em,b=a.getSelected(),c=a.getCurrentFrame(),d=b&&b.getView(null==c?void 0:c.model),e=null==d?void 0:d.el,f={};if(e&&(0,s.zN)(e)){var g=this.getElementPos(e);f={el:e,pos:g,component:b,view:d}}this.elSelected=f,this.updateToolsGlobal(),this.updateLocalPos(f),this.initResize(b)},updateGlobalPos:function(){var a=this.getElSelected();a.el&&(a.pos=this.getElementPos(a.el),this.updateToolsGlobal())},updateLocalPos:function(a){var b=this.getElHovered();b.el&&(b.pos=this.getElementPos(b.el),this.updateToolsLocal(a))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(a,b,c){void 0===c&&(c={});var d=c.el||this.canvas.getToolsEl(b);return d&&(d.style.display=a?"":"none"),d||{}},showElementOffset:function(a,b,c){void 0===c&&(c={}),d&&this.editor.runCommand("show-offset",{el:a,elPos:b,view:c.view,force:1,top:0,left:0})},hideElementOffset:function(a){this.editor.stopCommand("show-offset",{view:a})},showFixedElementOffset:function(a,b){this.editor.runCommand("show-offset",{el:a,elPos:b,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(a){this.canvas.getHighlighter(a).style.opacity=0},onClick:function(a){a.stopPropagation(),a.preventDefault();var b=this.em;if(b.get("_cmpDrag"))return b.set("_cmpDrag");var c=a.target,d=(0,t.getComponentModel)(c);if(!d)for(var e=c.parentNode;!d&&e&&!(0,s.ZQ)(e);)d=(0,t.getComponentModel)(e),e=e.parentNode;if(d){if(b.isEditing()&&(!d.get("textable")&&d.isChildOf("text")||b.getEditing()!==d))return;this.select(d,a)}},select:function(a,b){if(a){var c=this.em;c.setSelected(a,{event:b,useValid:!0}),this.initResize(c.getSelected())}},updateBadge:function(a,b,c){void 0===c&&(c={});var d=this.canvas,e=(0,t.getComponentModel)(a),f=this.getBadge(c),g=f.style;if(!e||!e.get("badgable")){g.display="none";return}if(!c.posOnly){var h=this.canvas.getConfig(),i=e.getIcon(),j=h.pStylePrefix||"",k="".concat(j,"badge"),l=h.customBadgeLabel,m="".concat(i?'<div class="'.concat(k,'__icon">').concat(i,"</div>"):"",'\n        <div class="').concat(k,'__name">').concat(e.getName(),"</div>");f.innerHTML=l?l(e):m}g.display="block";var n=d.getTargetToElementFixed(a,f,{pos:b}).top,o=c.leftOff<0?-c.leftOff:0;g.top=n+"px",g.left=o+"px"},showHighlighter:function(a){this.canvas.getHighlighter(a).style.opacity=""},initResize:function(a){var b,c=this,g=this.em,h=this.canvas,i=g.Editor,j=!(0,e.isElement)(a)&&(0,s.GW)(a)?a:g.getSelected(),k=null==(b=null==j?void 0:j.get)?void 0:b.call(j,"resizable"),m=f.F.Resize,n=h.hasCustomSpot(m);h.removeSpots({type:m});var o={component:j,hasCustomResize:n,resizable:k};j&&g.trigger(l.I.resizeInit,o);var p=o.resizable;if(j&&p){h.addSpot({type:m,component:j});var q=(0,e.isElement)(a)?a:j.getEl(),r=(0,t.isObject)(p)?p:{};if(n||!q||this.activeResizer)return;this.resizer=i.runCommand("resize",u(u({},r),{el:q,component:j,force:!0,afterStart:function(){d=!1,c.activeResizer=!0},afterEnd:function(){d=!0,c.activeResizer=!1}}))}else{if(n)return;i.stopCommand("resize"),this.resizer=null}},updateToolbar:function(a){var b=this.canvas,c=this.config.em,d=a===c?c.getSelected():a,e=b.getToolbarEl(),g=e.style,h=d.get("toolbar"),i=c.config.showToolbar,j=!b.hasCustomSpot(f.F.Select);if(d&&i&&h&&h.length&&j){if(g.display="",!this.toolbar){e.innerHTML="",this.toolbar=new k(h);var l=new r({collection:this.toolbar,em:c});e.appendChild(l.render().el)}this.toolbar.reset(h),g.top="-100px",g.left="0"}else g.display="none"},updateToolbarPos:function(a){var b=this.canvas.getToolbarEl().style;b.top="".concat(a.top).concat("px"),b.left="".concat(a.left).concat("px"),b.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(a){return void 0===a&&(a={}),this.canvas.getBadgeEl(a.view)},onCanvasScroll:function(a){this.onFrameScroll(a),this.onContainerChange()},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(a){return a&&"selected"===a.get("status")},updateToolsLocal:function(a){var b=this.em.getConfig(),c=a||this.getElHovered(),d=c.el,e=c.pos,g=c.view,h=c.component;if(!d){this.lastHovered=0;return}var i=h.get("hoverable"),j=this.lastHovered!==d,k=this.canvas.hasCustomSpot(f.F.Hover);j&&i&&(this.lastHovered=d,k?this.hideHighlighter(g):this.showHighlighter(g),this.showElementOffset(d,e,{view:g})),this.isCompSelected(h)&&(this.hideHighlighter(g),b.showOffsetsSelected||this.hideElementOffset(g));var l=this.toggleToolsEl(1,g),m=l.style,n=this.canvas.canvasRectOffset(d,e),o=n.top,p=n.left;k||this.updateBadge(d,e,u(u({},j?{}:{posOnly:1}),{view:g,topOff:o,leftOff:p})),m.top=o+"px",m.left=p+"px",m.width=e.width+"px",m.height=e.height+"px",this._trgToolUp("local",{component:h,el:l,top:o,left:p,width:e.width,height:e.height})},_upToolbar:(0,e.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(a,b){void 0===b&&(b={}),this.em.trigger("canvas:tools:update",u({type:a},b))},updateToolsGlobal:function(a){void 0===a&&(a={});var b=this.getElSelected(),c=b.el,d=b.pos,e=b.component;if(!c){this.toggleToolsEl(),this.lastSelected=0;return}var f=this.canvas;(this.lastSelected!==c||a.force)&&(this.lastSelected=c,this.updateToolbar(e));var g=this.toggleToolsEl(1),h=g.style,i=f.getTargetToElementFixed(c,f.getToolbarEl(),{pos:d}),j=i.canvasOffsetTop,k=i.canvasOffsetLeft;h.top=j+"px",h.left=k+"px",h.width=d.width+"px",h.height=d.height+"px",this.updateToolbarPos({top:i.top,left:i.left}),this._trgToolUp("global",{component:e,el:g,top:j,left:k,width:d.width,height:d.height})},updateAttached:(0,e.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,e.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(a){return this.canvas.getCanvasView().getElementPos(a,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(a){a&&a.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(a){(0,t.hasWin)()&&(this.editor=a&&a.get("Editor"),this.enable())},stop:function(a,b,c){if(void 0===c&&(c={}),(0,t.hasWin)()){var d=this.em,e=this.editor;this.onHovered(),this.stopSelectComponent(),c.preserveSelected||d.setSelected(),this.toggleToolsEl(),this.updateAttached.cancel(),e&&e.stopCommand("resize")}}}},1406:(a,b,c)=>{c.r(b),c.d(b,{default:()=>g});var d=c(7774),e=c(1447),f=c(8433);let g={startSelectPosition:function(a,b,c){void 0===c&&(c={}),this.isPointed=!1;var d=this.em.Utils,g=a[0].ownerDocument.body;d&&(this.sorter=new d.ComponentSorter({em:this.em,treeClass:e.A,containerContext:{container:g,containerSel:"*",itemSel:"*",pfx:this.ppfx,document:b,placeholderElement:this.canvas.getPlacerEl()},positionOptions:{windowMargin:1,canvasRelative:!0},dragBehavior:{dragDirection:f.A.BothDirections,nested:!0}})),c.onStart&&(this.sorter.eventHandlers.legacyOnStartSort=c.onStart),a&&a.length>0&&this.sorter.startSort(a.map(function(a){return{element:a}}))},getOffsetDim:function(){var a=this.offset(this.canvas.getFrameEl()),b=this.offset(this.canvas.getElement());return{top:a.top-b.top,left:a.left-b.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex="after"==this.posMethod&&0!==this.cDim.length?this.posIndex+1:this.posIndex,this.sorter&&this.sorter.cancelDrag(),this.cDim&&(this.posIsLastEl=0!==this.cDim.length&&"after"==this.posMethod&&this.posIndex==this.cDim.length,this.posTargetEl=0===this.cDim.length?(0,d.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,d.default)(this.cDim[this.posIndex][5]).parent():(0,d.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(a,b,c){var d=a||0,e=c.length,f=0!==e&&"after"==(b||"before")&&d==e;return 0===e||(f||c[d][4])&&(!c[d-1]||c[d-1][4])&&(!f||c[d-1][4])?0:1},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},9395:(a,b,c)=>{c.r(b),c.d(b,{default:()=>h});var d=c(5706),e=c(179),f=c(7774),g=function(){return(g=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};let h={getOffsetMethod:function(a){return"get"+(a||"")+"OffsetViewerEl"},run:function(a,b,c){var h=this.canvas,i=c||{},j=i.state||"",k=a.getConfig(),l=this.em.getZoomDecimal(),m=i.el;if(!k.showOffsets||!(m instanceof HTMLElement)||!k.showOffsetsSelected&&"Fixed"==j)return void a.stopCommand("".concat(this.id),c);if(!h.hasCustomSpot(e.F.Spacing)){var n=g({},i.elPos||h.getElementPos(m));(0,d.isUndefined)(i.top)||(n.top=i.top),(0,d.isUndefined)(i.left)||(n.left=i.left);var o=window.getComputedStyle(m),p=this.ppfx,q=j+"State",r=h[this.getOffsetMethod(j)](c.view);r.style.opacity="";var s=this["marginT"+j],t=this["marginB"+j],u=this["marginL"+j],v=this["marginR"+j],w=this["padT"+j],x=this["padB"+j],y=this["padL"+j],z=this["padR"+j];if(r.childNodes.length&&(this[q]="1",s=r.querySelector("[data-offset-m-t]"),t=r.querySelector("[data-offset-m-b]"),u=r.querySelector("[data-offset-m-l]"),v=r.querySelector("[data-offset-m-r]"),w=r.querySelector("[data-offset-p-t]"),x=r.querySelector("[data-offset-p-b]"),y=r.querySelector("[data-offset-p-l]"),z=r.querySelector("[data-offset-p-r]")),!this[q]){var A=j.toLowerCase(),B=A+"margin-v",C=A+"padding-v",D=(0,f.default)('<div class="'.concat(p,'marginName">')).get(0),E=(0,f.default)('<div class="'.concat(p,'paddingName">')).get(0),F="".concat(p+B+"-el"," ").concat(p+B),G="".concat(p+C+"-el"," ").concat(p+C);s=(0,f.default)('<div class="'.concat(F,'-top"></div>')).get(0),t=(0,f.default)('<div class="'.concat(F,'-bottom"></div>')).get(0),u=(0,f.default)('<div class="'.concat(F,'-left"></div>')).get(0),v=(0,f.default)('<div class="'.concat(F,'-right"></div>')).get(0),w=(0,f.default)('<div class="'.concat(G,'-top"></div>')).get(0),x=(0,f.default)('<div class="'.concat(G,'-bottom"></div>')).get(0),y=(0,f.default)('<div class="'.concat(G,'-left"></div>')).get(0),z=(0,f.default)('<div class="'.concat(G,'-right"></div>')).get(0),this["marginT"+j]=s,this["marginB"+j]=t,this["marginL"+j]=u,this["marginR"+j]=v,this["padT"+j]=w,this["padB"+j]=x,this["padL"+j]=y,this["padR"+j]=z,D.appendChild(s),D.appendChild(t),D.appendChild(u),D.appendChild(v),E.appendChild(w),E.appendChild(x),E.appendChild(y),E.appendChild(z),r.appendChild(D),r.appendChild(E),this[q]="1"}var H=parseFloat(o.marginLeft.replace("px",""))*l,I=parseFloat(o.marginRight.replace("px",""))*l,J=parseFloat(o.marginTop.replace("px",""))*l,K=parseFloat(o.marginBottom.replace("px",""))*l,L=s.style,M=t.style,N=u.style,O=v.style,P=w.style,Q=x.style,R=y.style,S=z.style,T=parseFloat(n.left),U=parseFloat(o.width)*l+"px";L.height=J+"px",L.width=U,L.top=n.top-J+"px",L.left=T+"px",M.height=K+"px",M.width=U,M.top=n.top+n.height+"px",M.left=T+"px";var V=n.height+J+K+"px",W=n.top-J+"px";N.height=V,N.width=H+"px",N.top=W,N.left=T-H+"px",O.height=V,O.width=I+"px",O.top=W,O.left=T+n.width+"px";var X=parseFloat(o.paddingTop)*l;P.height=X+"px";var Y=parseFloat(o.paddingBottom)*l;Q.height=Y+"px";var Z=n.height-Y-X+"px",$=n.top+X+"px";R.height=Z,R.width=parseFloat(o.paddingLeft)*l+"px",R.top=$;var _=parseFloat(o.paddingRight)*l;S.height=Z,S.width=_+"px",S.top=$}},stop:function(a,b,c){void 0===c&&(c={});var d=(c||{}).state||"",e=this.getOffsetMethod(d),f=c.view;this.canvas[e](f).style.opacity=0}}},7285:(a,b,c)=>{c.r(b),c.d(b,{default:()=>f});var d=c(5706),e=c(1166);let f={init:function(){(0,d.bindAll)(this,"_onFramesChange")},run:function(a){this.toggleVis(a,!0)},stop:function(a){this.toggleVis(a,!1)},toggleVis:function(a,b){if(void 0===b&&(b=!0),!a.Commands.isActive("preview")){var c=a.Canvas,d=b?"on":"off";c.getModel()[d]("change:frames",this._onFramesChange),this.handleFrames(c.getFrames(),b)}},handleFrames:function(a,b){var c=this;a.forEach(function(a){var d;(null==(d=a.view)?void 0:d.loaded)&&c._upFrame(a,b),a.__ol||(a.on("loaded",function(){return c._upFrame(a)}),a.__ol=!0)})},_onFramesChange:function(a,b){this.handleFrames(b)},_upFrame:function(a,b){var c,d=this.ppfx,f=this.em,g=this.id,h=(0,e.isDef)(b)?b:f.Commands.isActive(g);null==(c=a.view)||c.getBody().classList[h?"add":"remove"]("".concat(d,"dashed"))}}},9156:(a,b,c)=>{c.d(b,{Kx:()=>j,Ss:()=>l,e2:()=>i,lK:()=>m,pM:()=>k,x2:()=>d});var d,e=c(4193),f=c.n(e),g=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),h=function(){return(h=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},i="add remove reset change",j=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return g(b,a),b}(f().Model),k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return g(b,a),b}(f().Collection),l=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return g(b,a),b}(f().View);!function(a){a.Screen="screen",a.World="world"}(d||(d={}));var m={x:0,y:0};h(h({},m),{width:0,height:0})},2225:(a,b,c)=>{var d,e;c.d(b,{I:()=>e,t:()=>d}),function(a){a.remove="component:remove",a.add="component:add",a.move="component:move"}(d||(d={})),function(a){a.add="component:add",a.remove="component:remove",a.removeBefore="component:remove:before",a.removed="component:removed",a.create="component:create",a.update="component:update",a.updateInside="component:update-inside",a.styleUpdate="component:styleUpdate",a.styleUpdateProperty="component:styleUpdate:",a.select="component:select",a.selectBefore="component:select:before",a.mount="component:mount",a.scriptMount="component:script:mount",a.scriptMountBefore="component:script:mount:before",a.scriptUnmount="component:script:unmount",a.render="component:render",a.input="component:input",a.resize="component:resize",a.resizeStart="component:resize:start",a.resizeMove="component:resize:move",a.resizeEnd="component:resize:end",a.resizeUpdate="component:resize:update",a.resizeInit="component:resize:init",a.symbolMainAdd="symbol:main:add",a.symbolMainUpdate="symbol:main:update",a.symbolMainUpdateDeep="symbol:main:update-deep",a.symbolMainRemove="symbol:main:remove",a.symbolMain="symbol:main",a.symbolInstanceAdd="symbol:instance:add",a.symbolInstanceRemove="symbol:instance:remove",a.symbolInstance="symbol:instance",a.symbol="symbol"}(e||(e={}))},8242:(a,b,c)=>{c.d(b,{A:()=>h});var d=c(5706),e=c(9156),f=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),g=function(a){function b(b,c,d){void 0===b&&(b={}),void 0===d&&(d=!1);var e=a.call(this,b)||this;return e.itemsView="",e.itemType="type",e.reuseView=!1,e.config=c||b.config||{},d&&e.listenTo(e.collection,"add",e.addTo),e.items=[],e}return f(b,a),b.prototype.addTo=function(a){this.add(a)},b.prototype.itemViewNotFound=function(a){var b=this.config,c=this.ns,d=b.em,e="".concat(c?"[".concat(c,"]: "):"","'").concat(a,"' type not found");d&&d.logWarning(e)},b.prototype.add=function(a,b){var c,e=this.config,f=this.reuseView,g=this.items,h=this.itemsView||{},i=b||null,j=this.itemView,k=a.get(this.itemType);h[k]?j=h[k]:!k||h[k]||(0,d.includes)(["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],k)||this.itemViewNotFound(k),c=a.view&&f?a.view:new j({model:a,config:e},e),g&&g.push(c);var l=c.render().el;i?i.appendChild(l):this.$el.append(l)},b.prototype.render=function(){var a=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(b){this.add(b,a)},this),this.$el.append(a),this.onRender(),this},b.prototype.onRender=function(){},b.prototype.onRemoveBefore=function(a,b){},b.prototype.onRemove=function(a,b){},b.prototype.remove=function(b){void 0===b&&(b={});var c=this.items;return this.onRemoveBefore(c,b),this.clearItems(),a.prototype.remove.call(this),this.onRemove(c,b),this},b.prototype.clearItems=function(){this.items},b}(e.Ss);let h=g;g.prototype.itemView=""},9966:(a,b,c)=>{c.d(b,{A:()=>i});var d=c(5706),e=c(6294),f=function(){return(f=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},g=function(){return{x:0,y:0}},h=["x","y"];let i=function(){function a(a){return void 0===a&&(a={}),this.opts={snapGuides:{x:5,y:5},snapOffset:5,scale:1},(0,d.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(a),this.delta=g(),this.lastScroll=g(),this.lastScrollDiff=g(),this.startPointer=g(),this.startPosition=g(),this.globScrollDiff=g(),this.currentPointer=g(),this.position=g(),this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return a.prototype.setOptions=function(a){void 0===a&&(a={}),this.opts=f(f({},this.opts),a)},a.prototype.toggleDrag=function(a){var b=this.getDocumentEl(),c=this.getContainerEl(),d=this.getWindowEl(),f=a?"on":"off",g={on:e.on,off:e.AU};g[f](c,"mousemove dragover",this.drag),g[f](b,"mouseup dragend touchend",this.stop),g[f](b,"keydown",this.keyHandle),g[f](d,"scroll",this.handleScroll)},a.prototype.handleScroll=function(){var a=this.lastScroll,b=this.delta,c=this.getScrollInfo(),d={x:c.x-a.x,y:c.y-a.y};this.move(b.x+d.x,b.y+d.y),this.lastScrollDiff=d},a.prototype.start=function(a){var b=this.opts,c=b.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(a),this.guidesStatic=(0,d.result)(b,"guidesStatic")||[],this.guidesTarget=(0,d.result)(b,"guidesTarget")||[],(0,d.isFunction)(c)&&c(a,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff=g(),this.globScrollDiff=g(),this.drag(a)},a.prototype.drag=function(a){var b=this,c=this.opts,e=this.lastScrollDiff,i=this.globScrollDiff,j=c.onDrag,k=this.startPointer,l=this.getPointerPos(a),m={x:i.x+e.x,y:i.y+e.y};this.globScrollDiff=m;var n={x:l.x-k.x+m.x,y:l.y-k.y+m.y};this.lastScrollDiff=g();var o=function(e){h.forEach(function(a){return e[a]=e[a]*(0,d.result)(c,"scale")}),b.delta=e,b.move(e.x,e.y),(0,d.isFunction)(j)&&j(a,b)},p=f({},n);if(this.currentPointer=l,this.lastScroll=this.getScrollInfo(),o(n),this.guidesTarget.length){var q=this.snapGuides(p),r=q.newDelta,s=q.trgX,t=q.trgY;(s||t)&&o(r)}0===a.which&&this.stop(a)},a.prototype.snapGuides=function(a){var b=this,c=f({},a),e=this.trgX,g=this.trgY;return this.guidesTarget.forEach(function(c){c.x&&b.trgX||c.y&&b.trgY||(c.active=!1,b.guidesStatic.forEach(function(f){if((!c.y||!f.x)&&(!c.x||!f.y)){var h=c.y&&f.y,i=h?"y":"x",j=c[i],k=f[i],l=a[i],m=h?g:e;b.isPointIn(j,k,{axis:i})&&(0,d.isUndefined)(m)&&b.setGuideLock(c,l-(j-k))}}))}),e=this.trgX,g=this.trgY,h.forEach(function(e){var f=e.toUpperCase(),g=b["trg".concat(f)];g&&!b.isPointIn(a[e],g.lock,{axis:e})&&(b.setGuideLock(g,null),g=null),g&&!(0,d.isUndefined)(g.lock)&&(c[e]=g.lock)}),{newDelta:c,trgX:this.trgX,trgY:this.trgY}},a.prototype.isPointIn=function(a,b,c){var d,e=void 0===c?{}:c,f=e.offset,g=e.axis,h=this.opts,i=h.snapGuides,j=void 0===i?{}:i,k=h.snapOffset,l="x"===g?j.x:"y"===g?j.y:void 0,m=0===l?0:null!=(d=null!=f?f:l)?d:void 0===k?0:k;return 0!==m&&(a>=b&&a<=b+m||a<=b&&a>=b-m)},a.prototype.setGuideLock=function(a,b){var c=(0,d.isUndefined)(a.x)?"Y":"X",e="trg".concat(c);return null!==b?(a.active=!0,a.lock=b,this[e]=a):(delete a.active,delete a.lock,delete this[e]),a},a.prototype.stop=function(a,b){void 0===b&&(b={});var c=this.delta,e=!!b.cancel,f=e?0:c.x,g=e?0:c.y;this.toggleDrag(),this.move(f,g,!0);var h=this.opts.onEnd;(0,d.isFunction)(h)&&h(a,this,{cancelled:e})},a.prototype.keyHandle=function(a){(0,e.v$)(a)&&this.stop(a,{cancel:!0})},a.prototype.move=function(a,b,c){var e=this.el,f=this.opts,g=this.startPosition;if(g){var h=f.setPosition,i=g.x+a,j=g.y+b;this.position={x:i,y:j,end:c},(0,d.isFunction)(h)&&h(this.position),e&&(e.style.left="".concat(i,"px"),e.style.top="".concat(j,"px"))}},a.prototype.getContainerEl=function(){var a=this.opts.container;return a?[a]:this.getDocumentEl()},a.prototype.getWindowEl=function(){return this.getContainerEl().map(function(a){var b=a.ownerDocument||a;return b.defaultView||b.parentWindow})},a.prototype.getDocumentEl=function(a){var b=this.opts.doc;if(a=a||this.el,!this.docs.length){var c=[document];a&&c.push(a.ownerDocument),b&&c.push(b),this.docs=c}return this.docs},a.prototype.getPointerPos=function(a){var b=this.opts.getPointerPosition,c=(0,e.G2)(a);return b?b(a):{x:c.clientX,y:c.clientY}},a.prototype.getStartPosition=function(){var a=this.el,b=this.opts.getPosition,c=g();return(0,d.isFunction)(b)?c=b():a&&(c={x:parseFloat(a.style.left),y:parseFloat(a.style.top)}),c},a.prototype.getScrollInfo=function(){var a=this.opts.doc,b=a&&a.body;return{y:b?b.scrollTop:0,x:b?b.scrollLeft:0}},a.prototype.detectAxisLock=function(a,b){var c=Math.abs(a),d=Math.abs(b);return b>=c||b<=-c?"x":a>d||a<-d?"y":void 0},a}()},7774:(a,b,c)=>{c.r(b),c.d(b,{default:()=>ao});var d,e="undefined"!=typeof document?document:null,f="undefined"!=typeof window?window:null,g=Array.prototype,h=g.filter,i=g.indexOf,j=g.map,k=g.push,l=g.reverse,m=g.slice,n=g.splice,o=/^#[\w-]*$/,p=/^\.[\w-]*$/,q=/<.+>/,r=/^\w+$/;function s(a,b){return void 0===b&&(b=e),p.test(a)?b.getElementsByClassName(a.slice(1)):r.test(a)?b.getElementsByTagName(a):b.querySelectorAll(a)}function t(a,b){if(void 0===b&&(b=e),a){if(a.__cash)return a;var c=a;if(D(a)){if(b.__cash&&(b=b[0]),!(c=o.test(a)?b.getElementById(a.slice(1)):q.test(a)?al(a):s(a,b)))return}else if(C(a))return this.ready(a);(c.nodeType||c===f)&&(c=[c]),this.length=c.length;for(var d=0,g=this.length;d<g;d++)this[d]=c[d]}}function u(a,b){return new t(a,b)}var v=u.fn=u.prototype=t.prototype={constructor:u,__cash:!0,length:0,splice:n};v.get=function(a){return void 0===a?m.call(this):this[a<0?a+this.length:a]},v.eq=function(a){return u(this.get(a))},v.first=function(){return this.eq(0)},v.last=function(){return this.eq(-1)},v.map=function(a){return u(j.call(this,function(b,c){return a.call(b,c,b)}))},v.slice=function(){return u(m.apply(this,arguments))};var w=/(?:^\w|[A-Z]|\b\w)/g,x=/[\s-_]+/g;function y(a){return a.replace(w,function(a,b){return a[!b?"toLowerCase":"toUpperCase"]()}).replace(x,"")}function z(a,b){for(var c=0,d=a.length;c<d&&!1!==b.call(a[c],a[c],c,a);c++);}u.camelCase=y,u.each=z,v.each=function(a){return z(this,function(b,c){return a.call(b,c,b)}),this},v.removeProp=function(a){return this.each(function(b,c){delete c[a]})},u.extend=v.extend=function(a){void 0===a&&(a=this);for(var b=arguments,c=b.length,d=c<2?0:1;d<c;d++)for(var e in b[d])a[e]=b[d][e];return a};var A=1;function B(a,b){var c=a&&(a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector);return!!c&&c.call(a,b)}function C(a){return"function"==typeof a}function D(a){return"string"==typeof a}function E(a){return!isNaN(parseFloat(a))&&isFinite(a)}u.guid=1,u.matches=B,u.isFunction=C,u.isString=D,u.isNumeric=E;var F=Array.isArray;function G(a){return D(a)?function(b,c){return B(c,a)}:a.__cash?function(b,c){return a.is(c)}:function(a,b,c){return b===c}}u.isArray=F,v.prop=function(a,b){if(a){if(D(a))return arguments.length<2?this[0]&&this[0][a]:this.each(function(c,d){d[a]=b});for(var c in a)this.prop(c,a[c]);return this}},v.filter=function(a){if(!a)return u();var b=C(a)?a:G(a);return u(h.call(this,function(c,d){return b.call(c,d,c,a)}))};var H=/\S+/g;function I(a){return D(a)&&a.match(H)||[]}function J(a){return a.filter(function(a,b,c){return c.indexOf(a)===b})}function K(a,b,c){if(1===a.nodeType){var d=f.getComputedStyle(a,null);return b?c?d.getPropertyValue(b):d[b]:d}}function L(a,b){return parseInt(K(a,b),10)||0}v.hasClass=function(a){var b=I(a),c=!1;return b.length&&this.each(function(a,d){return!(c=d.classList.contains(b[0]))}),c},v.removeAttr=function(a){var b=I(a);return b.length?this.each(function(a,c){z(b,function(a){c.removeAttribute(a)})}):this},v.attr=function(a,b){if(a){if(D(a)){if(arguments.length<2){if(!this[0])return;var c=this[0].getAttribute(a);return null===c?void 0:c}return null===b?this.removeAttr(a):this.each(function(c,d){d.setAttribute(a,b)})}for(var d in a)this.attr(d,a[d]);return this}},v.toggleClass=function(a,b){var c=I(a),d=void 0!==b;return c.length?this.each(function(a,e){z(c,function(a){d?b?e.classList.add(a):e.classList.remove(a):e.classList.toggle(a)})}):this},v.addClass=function(a){return this.toggleClass(a,!0)},v.removeClass=function(a){return arguments.length?this.toggleClass(a,!1):this.attr("class","")},u.unique=J,v.add=function(a,b){return u(J(this.get().concat(u(a,b).get())))};var M=/^--/;function N(a){return M.test(a)}var O={},P=e&&e.createElement("div"),Q=P?P.style:{},R=["webkit","moz","ms","o"];function S(a,b){if(void 0===b&&(b=N(a)),b)return a;if(!O[a]){var c=y(a),d=""+c.charAt(0).toUpperCase()+c.slice(1);z((c+" "+R.join(d+" ")+d).split(" "),function(b){if(b in Q)return O[a]=b,!1})}return O[a]}u.prefixedProp=S;var T={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function U(a,b,c){return void 0===c&&(c=N(a)),!c&&!T[a]&&E(b)?b+"px":b}v.css=function(a,b){if(D(a)){var c=N(a);return(a=S(a,c),arguments.length<2)?this[0]&&K(this[0],a,c):a?(b=U(a,b,c),this.each(function(d,e){1===e.nodeType&&(c?e.style.setProperty(a,b):e.style[a]=b)})):this}for(var d in a)this.css(d,a[d]);return this};var V="__cashData",W=/^data-(.*)/;function X(a){return a[V]=a[V]||{}}function Y(a,b){var c=X(a);if(b){if(!(b in c)){var d=a.dataset?a.dataset[b]||a.dataset[y(b)]:u(a).attr("data-"+b);if(void 0!==d){try{d=JSON.parse(d)}catch(a){}c[b]=d}}return c[b]}return c}function Z(a,b){return L(a,"border"+(b?"Left":"Top")+"Width")+L(a,"padding"+(b?"Left":"Top"))+L(a,"padding"+(b?"Right":"Bottom"))+L(a,"border"+(b?"Right":"Bottom")+"Width")}function $(a,b){for(var c=0,d=b.length;c<d;c++)if(0>a.indexOf(b[c]))return!1;return!0}u.hasData=function(a){return V in a},v.data=function(a,b){var c=this;if(!a){if(!this[0])return;return z(this[0].attributes,function(a){var b=a.name.match(W);b&&c.data(b[1])}),Y(this[0])}if(D(a))return void 0===b?this[0]&&Y(this[0],a):this.each(function(c,d){X(d)[a]=b});for(var d in a)this.data(d,a[d]);return this},v.removeData=function(a){return this.each(function(b,c){void 0===a?delete c[V]:delete X(c)[a]})},z(["Width","Height"],function(a){v["inner"+a]=function(){if(this[0])return this[0]===f?f["inner"+a]:this[0]["client"+a]}}),z(["width","height"],function(a,b){v[a]=function(c){return this[0]?arguments.length?(c=parseInt(c,10),this.each(function(d,e){if(1===e.nodeType){var f=K(e,"boxSizing");e.style[a]=U(a,c+("border-box"===f?Z(e,!b):0))}})):this[0]===f?this[0][y("outer-"+a)]:this[0].getBoundingClientRect()[a]-Z(this[0],!b):void 0===c?void 0:this}}),z(["Width","Height"],function(a,b){v["outer"+a]=function(c){if(this[0])return this[0]===f?f["outer"+a]:this[0]["offset"+a]+(c?L(this[0],"margin"+(b?"Top":"Left"))+L(this[0],"margin"+(b?"Bottom":"Right")):0)}});var _="__cashEvents";function aa(a){return a[_]=a[_]||{}}function ab(a){var b=a.split(".");return[b[0],b.slice(1).sort()]}function ac(a,b,c,d){var e=aa(a);if(b){var f=e[b];if(!f)return;d&&(d.guid=d.guid||A++),e[b]=f.filter(function(e){var f=e[0],g=e[1];if(d&&g.guid!==d.guid||!$(f,c))return!0;a.removeEventListener(b,g)})}else if(c&&c.length)for(b in e)ac(a,b,c,d);else for(b in e)!function(a,b,c){z(a[c],function(a){a[0];var d=a[1];b.removeEventListener(c,d)}),delete a[c]}(e,a,b)}v.off=function(a,b){var c=this;return void 0===a?this.each(function(a,b){return ac(b)}):z(I(a),function(a){var d=ab(a),e=d[0],f=d[1];c.each(function(a,c){return ac(c,e,f,b)})}),this},v.on=function(a,b,c,d){var e=this;if(!D(a)){for(var f in a)this.on(f,b,a[f]);return this}return C(b)&&(c=b,b=!1),z(I(a),function(a){var f=ab(a),g=f[0],h=f[1];e.each(function(a,e){var f,i=function a(f){if(!f.namespace||$(h,f.namespace.split("."))){var i=e;if(b){for(var j=f.target;!B(j,b);)if(j===e||!(j=j.parentNode))return;i=j}f.namespace=f.namespace||"";var k=c.call(i,f,f.data);d&&ac(e,g,h,a),!1===k&&(f.preventDefault(),f.stopPropagation())}};i.guid=c.guid=c.guid||A++,i.guid=i.guid||A++,(f=aa(e))[g]=f[g]||[],f[g].push([h,i]),e.addEventListener(g,i)})}),this},v.one=function(a,b,c){return this.on(a,b,c,!0)},v.ready=function(a){var b=function(){return a(u)};return"loading"!==e.readyState?setTimeout(b):e.addEventListener("DOMContentLoaded",b),this},v.trigger=function(a,b){var c=a;if(D(a)){var d=ab(a),f=d[0],g=d[1];(c=e.createEvent("HTMLEvents")).initEvent(f,!0,!0),c.namespace=g.join(".")}return c.data=b,this.each(function(a,b){b.dispatchEvent(c)})};var ad=/select-one/i,ae=/select-multiple/i;function af(a){var b,c=a.type;return ad.test(c)?a.selectedIndex<0?null:a.options[a.selectedIndex].value:ae.test(c)?(b=[],z(a.options,function(a){!a.selected||a.disabled||a.parentNode.disabled||b.push(a.value)}),b):a.value}var ag=/%20/g,ah=/file|reset|submit|button|image/i,ai=/radio|checkbox/i;v.serialize=function(){var a="";return this.each(function(b,c){z(c.elements||[c],function(b){if(!(b.disabled||!b.name||"FIELDSET"===b.tagName||ah.test(b.type)||ai.test(b.type)&&!b.checked)){var c=af(b);void 0!==c&&z(F(c)?c:[c],function(c){var d;a+=(d=b.name,"&"+encodeURIComponent(d)+"="+encodeURIComponent(c).replace(ag,"+"))})}})}),a.substr(1)},v.val=function(a){return void 0===a?this[0]&&af(this[0]):this.each(function(b,c){var d=ae.test(c.type),e=null===a?d?[]:"":a;d&&F(e)?z(c.options,function(a){a.selected=e.indexOf(a.value)>=0}):c.value=e})},v.clone=function(){return this.map(function(a,b){return b.cloneNode(!0)})},v.detach=function(){return this.each(function(a,b){b.parentNode&&b.parentNode.removeChild(b)})};var aj=/^\s*<(\w+)[^>]*>/,ak=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function al(a){if(!d){var b=e.createElement("table"),c=e.createElement("tr");d={"*":e.createElement("div"),tr:e.createElement("tbody"),td:c,th:c,thead:b,tbody:b,tfoot:b}}if(!D(a))return[];if(ak.test(a))return[e.createElement(RegExp.$1)];var f=d[aj.test(a)&&RegExp.$1]||d["*"];return f.innerHTML=a,u(f.childNodes).detach().get()}function am(a,b,c){if(void 0!==b){var d=D(b);!d&&b.length?z(b,function(b){return am(a,b,c)}):z(a,d?function(a){a.insertAdjacentHTML(c?"afterbegin":"beforeend",b)}:function(a,d){var e;return e=d?b.cloneNode(!0):b,void(c?a.insertBefore(e,a.childNodes[0]):a.appendChild(e))})}}u.parseHTML=al,v.empty=function(){var a=this[0];if(a)for(;a.firstChild;)a.removeChild(a.firstChild);return this},v.append=function(){var a=this;return z(arguments,function(b){am(a,b)}),this},v.appendTo=function(a){return am(u(a),this),this},v.html=function(a){if(void 0===a)return this[0]&&this[0].innerHTML;var b=a.nodeType?a[0].outerHTML:a;return this.each(function(a,c){c.innerHTML=b})},v.insertAfter=function(a){var b=this;return u(a).each(function(a,c){var d=c.parentNode;b.each(function(b,e){d.insertBefore(a?e.cloneNode(!0):e,c.nextSibling)})}),this},v.after=function(){var a=this;return z(l.apply(arguments),function(b){l.apply(u(b).slice()).insertAfter(a)}),this},v.insertBefore=function(a){var b=this;return u(a).each(function(a,c){var d=c.parentNode;b.each(function(b,e){d.insertBefore(a?e.cloneNode(!0):e,c)})}),this},v.before=function(){var a=this;return z(arguments,function(b){u(b).insertBefore(a)}),this},v.prepend=function(){var a=this;return z(arguments,function(b){am(a,b,!0)}),this},v.prependTo=function(a){return am(u(a),l.apply(this.slice()),!0),this},v.remove=function(){return this.detach().off()},v.replaceWith=function(a){var b=this;return this.each(function(c,d){var e=d.parentNode;if(e){var f=c?u(a).clone():u(a);if(!f[0])return b.remove(),!1;e.replaceChild(f[0],d),u(f[0]).after(f.slice(1))}})},v.replaceAll=function(a){return u(a).replaceWith(this),this},v.text=function(a){return void 0===a?this[0]?this[0].textContent:"":this.each(function(b,c){c.textContent=a})};var an=e&&e.documentElement;v.offset=function(){var a=this[0];if(a){var b=a.getBoundingClientRect();return{top:b.top+f.pageYOffset-an.clientTop,left:b.left+f.pageXOffset-an.clientLeft}}},v.offsetParent=function(){return u(this[0]&&this[0].offsetParent)},v.position=function(){var a=this[0];if(a)return{left:a.offsetLeft,top:a.offsetTop}},v.children=function(a){var b=[];return(this.each(function(a,c){k.apply(b,c.children)}),b=u(J(b)),a)?b.filter(function(b,c){return B(c,a)}):b},v.contents=function(){var a=[];return this.each(function(b,c){k.apply(a,"IFRAME"===c.tagName?[c.contentDocument]:c.childNodes)}),u(a.length&&J(a))},v.find=function(a){for(var b=[],c=0,d=this.length;c<d;c++){var e=s(a,this[c]);e.length&&k.apply(b,e)}return u(b.length&&J(b))},v.has=function(a){var b=D(a)?function(b,c){return!!s(a,c).length}:function(b,c){return c.contains(a)};return this.filter(b)},v.is=function(a){if(!a||!this[0])return!1;var b=G(a),c=!1;return this.each(function(d,e){return!(c=b(d,e,a))}),c},v.next=function(){return u(this[0]&&this[0].nextElementSibling)},v.not=function(a){if(!a||!this[0])return this;var b=G(a);return this.filter(function(c,d){return!b(c,d,a)})},v.parent=function(){var a=[];return this.each(function(b,c){c&&c.parentNode&&a.push(c.parentNode)}),u(J(a))},v.index=function(a){var b=a?u(a)[0]:this[0],c=a?this:u(b).parent().children();return i.call(c,b)},v.closest=function(a){return a&&this[0]?this.is(a)?this.filter(a):this.parent().closest(a):u()},v.parents=function(a){var b,c=[];return this.each(function(d,f){for(b=f;b&&b.parentNode&&b!==e.body.parentNode;)b=b.parentNode,(!a||a&&B(b,a))&&c.push(b)}),u(J(c))},v.prev=function(){return u(this[0]&&this[0].previousElementSibling)},v.siblings=function(){var a=this[0];return this.parent().children().filter(function(b,c){return c!==a})};let ao=u},6294:(a,b,c)=>{c.d(b,{AU:()=>G,BC:()=>o,C8:()=>v,Ch:()=>y,Ci:()=>B,D8:()=>f,G2:()=>z,GW:()=>u,GZ:()=>q,I6:()=>j,LJ:()=>D,Sc:()=>n,X6:()=>k,Xy:()=>w,YZ:()=>h,ZQ:()=>g,_I:()=>H,a_:()=>p,af:()=>s,bG:()=>m,cx:()=>i,ir:()=>t,kk:()=>E,on:()=>F,rp:()=>C,v$:()=>A,yL:()=>r,zN:()=>l});var d=c(5706),e=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},f="transitionend oTransitionEnd transitionend webkitTransitionEnd",g=function(a){return(null==a?void 0:a.nodeType)===Node.DOCUMENT_NODE},h=function(a){var b=a&&a.parentNode;b&&b.removeChild(a)};function i(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(Array.isArray(a[0])?a[0]:e([],a,!0)).filter(Boolean).join(" ")}var j=function(a,b){return a.querySelectorAll(b)},k=function(a,b){return void 0===b&&(b={}),a&&a.setAttribute&&(0,d.each)(b,function(b,c){return a.setAttribute(c,b)})},l=function(a){var b;return a&&!!(a.offsetWidth||a.offsetHeight||(null==(b=a.getClientRects)?void 0:b.call(a).length))},m=function(a,b){var c;null==(c=a.parentNode)||c.replaceChild(b,a)},n=function(a,b,c){var e=a.childNodes,f=e.length,g=(0,d.isUndefined)(c)?f:c;(0,d.isString)(b)&&(a.insertAdjacentHTML("beforeEnd",b),b=a.lastChild,a.removeChild(b)),g>=f?a.appendChild(b):a.insertBefore(b,e[g])},o=function(a,b){return n(a,b)},p=function(a,b,c){void 0===b&&(b={});var e=document.createElement(a);return b&&(0,d.each)(b,function(a,b){return e.setAttribute(b,a)}),c&&((0,d.isString)(c)?e.innerHTML=c:e.appendChild(c)),e},q=function(a){return document.createTextNode(a)},r=function(a,b){var c,d=a.type;try{c=new window[b](d,a)}catch(a){(c=document.createEvent(b)).initEvent(d,!0,!0)}return c._parentEvent=a,0===d.indexOf("key")&&(c.keyCodeVal=a.keyCode,["keyCode","which"].forEach(function(a){Object.defineProperty(c,a,{get:function(){return this.keyCodeVal}})})),c},s=function(a,b){void 0===b&&(b=[]),(Array.isArray(b)?b:[b]).forEach(function(b){var c=b.tag||"div",e=b.attributes||{},f=document.createElement(c);(0,d.each)(e,function(a,b){f.setAttribute(b,a)}),a.appendChild(f)})},t=function(a){return(null==a?void 0:a.nodeType)===Node.TEXT_NODE},u=function(a){return a&&!t(a)&&(null==a?void 0:a.nodeType)!==Node.COMMENT_NODE},v=function(a){var b,c={top:0,left:0,width:0,height:0};if(!a)return c;if(t(a)){var d=document.createRange();d.selectNode(a),b=d.getBoundingClientRect(),d.detach()}return b||(a.getBoundingClientRect?a.getBoundingClientRect():c)},w=function(a){var b=(null==a?void 0:a.ownerDocument)||document,c=b.documentElement,d=b.defaultView||window;return{x:(d.pageXOffset||c.scrollLeft||0)-(c.clientLeft||0),y:(d.pageYOffset||c.scrollTop||0)-(c.clientTop||0)}},x=function(a){return a.which||a.keyCode},y=function(a){return String.fromCharCode(x(a))},z=function(a){return a.touches&&a.touches[0]?a.touches[0]:a},A=function(a){return 27===x(a)},B=function(a){return 13===x(a)},C=function(a){return a.ctrlKey||a.metaKey},D=function(a){if(!a)return"";var b=a.name,c=a.publicId,d=a.systemId;return"<!DOCTYPE ".concat(b).concat(c?' PUBLIC "'.concat(c,'"'):"").concat(!c&&d?' SYSTEM "'.concat(d,'"'):"",">")},E=function(a){void 0===a&&(a={});var b=[];return(0,d.each)(a,function(a,c){return b.push("".concat(c,'="').concat(a,'"'))}),b.join(" ")},F=function(a,b,c,e){var f=b.split(/\s+/),g=(0,d.isArray)(a)?a:[a];f.forEach(function(a){g.forEach(function(b){return null==b?void 0:b.addEventListener(a,c,e)})})},G=function(a,b,c,e){var f=b.split(/\s+/),g=(0,d.isArray)(a)?a:[a];f.forEach(function(a){g.forEach(function(b){return null==b?void 0:b.removeEventListener(a,c,e)})})},H=function(a){return a.replace(/-([a-zA-Z0-9])/g,function(a,b){return b.toUpperCase()})}},1166:(a,b,c)=>{c.r(b),c.d(b,{appendStyles:()=>z,buildBase64UrlFromSvg:()=>Y,camelCase:()=>D,capitalize:()=>Q,createId:()=>X,deepMerge:()=>M,escape:()=>I,escapeAltQuoteAttrValue:()=>L,escapeAttrValue:()=>K,escapeNodeContent:()=>J,find:()=>H,get:()=>m,getComponentModel:()=>V,getComponentView:()=>U,getElement:()=>G,getGlobal:()=>u,getModel:()=>N,getUiClass:()=>y,getUnitFromValue:()=>B,getViewEl:()=>S,hasDnd:()=>F,hasWin:()=>t,isBultInMethod:()=>p,isComponent:()=>T,isDef:()=>s,isEmptyObj:()=>P,isObject:()=>O,isRule:()=>R,matches:()=>x,normalizeFloat:()=>E,normalizeKey:()=>q,serialize:()=>o,set:()=>n,setViewEl:()=>W,shallowDiff:()=>A,stringToPath:()=>k,toLowerCase:()=>v,upFirst:()=>C,wait:()=>r});var d=c(5706),e=c(6294),f=function(){return(f=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},g=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},h={},i=/\\(\\)?/g,j=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=function(a){var b=[];return 46===a.charCodeAt(0)&&b.push(""),a.replace(j,function(a,c,d,e){return b.push(d?e.replace(i,"$1"):c||a),""}),b};function l(a,b){return(0,d.isArray)(a)?a:b.hasOwnProperty(a)?[a]:k(a)}var m=function(a,b,c){for(var d,e=l(b,a),f=e.length,g=0;null!=a&&g<f;)a=a["".concat(e[g++])];return null!=(d=g&&g==f?a:void 0)?d:c},n=function(a,b,c){if(!O(a))return!1;var d=l(b,a),e=d.length;if(0===e)return!1;if(1===e)return a[d[0]]=c,!0;var f=d.slice(0,-1),g=d[e-1],h=m(a,f);if(h){if(Array.isArray(h)){var i=+g;if(!isNaN(i))return h[i]=c,!0}else if(O(h))return h[g]=c,!0}return!1},o=function(a){return JSON.parse(JSON.stringify(a))},p=function(a){return(0,d.isFunction)(h[a])},q=function(a){return p(a)?"_".concat(a):a},r=function(a){return void 0===a&&(a=0),new Promise(function(b){return setTimeout(b,a)})},s=function(a){return void 0!==a},t=function(){return"undefined"!=typeof window},u=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:c.g},v=function(a){return(a||"").toLowerCase()},w=t()?window.Element.prototype:{},x=w.matches||w.webkitMatchesSelector||w.mozMatchesSelector||w.msMatchesSelector,y=function(a,b){var c=a.getConfig(),d=c.stylePrefix;return[c.customUI&&"".concat(d,"cui"),b].filter(function(a){return a}).join(" ")},z=function(a,b){void 0===b&&(b={});var c=(0,d.isArray)(a)?g([],a,!0):[a];if(c.length){var e=c.shift();if(e&&(!b.unique||!document.querySelector('link[href="'.concat(e,'"]')))){var f=document.head,h=document.createElement("link");h.href=e,h.rel="stylesheet",b.prepand?f.insertBefore(h,f.firstChild):f.appendChild(h)}z(c)}},A=function(a,b){var c={},e=(0,d.keys)(b);for(var f in a)if(a.hasOwnProperty(f)){var g=a[f],h=b[f];e.indexOf(f)>=0?g!==h&&(c[f]=h):c[f]=null}for(var f in b)b.hasOwnProperty(f)&&(0,d.isUndefined)(a[f])&&(c[f]=b[f]);return c},B=function(a){return a.replace(parseFloat(a),"")},C=function(a){return a[0].toUpperCase()+a.toLowerCase().slice(1)},D=function(a){return a.replace(/-./g,function(a){return a[1].toUpperCase()})},E=function(a,b,c){void 0===b&&(b=1),void 0===c&&(c=0);var d=0;if(isNaN(a))return c;if(Math.floor(a=parseFloat(a))!==a){var e=b.toString().split(".")[1];d=e?e.length:0}return d?parseFloat(a.toFixed(d)):a},F=function(a){return"draggable"in document.createElement("i")&&(!a||a.config.nativeDnD)},G=function(a){return(0,d.isElement)(a)||(0,e.ir)(a)?a:a&&a.getEl?a.getEl():void 0},H=function(a,b){var c=null;return a.some(function(d,e){return b(d,e,a)?(c=d,1):0}),c},I=function(a){return void 0===a&&(a=""),"".concat(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},J=function(a){return void 0===a&&(a=""),"".concat(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},K=function(a){return void 0===a&&(a=""),"".concat(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},L=function(a){return void 0===a&&(a=""),"".concat(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;")},M=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(var c=f({},a[0]),d=1;d<a.length;d++){var e=f({},a[d]);for(var g in e){var h=c[g],i=e[g];O(h)&&O(i)?c[g]=M(h,i):c[g]=i}}return c},N=function(a,b){var c;return!b&&a&&a.__cashData?c=a.__cashData.model:b&&(0,d.isElement)(a)&&(c=b(a).data("model")),c},O=function(a){return a&&!Array.isArray(a)&&"object"==typeof a},P=function(a){return Object.keys(a).length<=0},Q=function(a){return void 0===a&&(a=""),a&&a.charAt(0).toUpperCase()+a.substring(1)},R=function(a){return a&&a.toCSS},S=function(a){return null==a?void 0:a.__gjsv},T=function(a){return!!(null==a?void 0:a.toHTML)},U=function(a){return S(a)},V=function(a){var b;return null==(b=U(a))?void 0:b.model},W=function(a,b){a.__gjsv=b},X=function(a){void 0===a&&(a=16);for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=c.length,e=0;e<a;e++)b+=c.charAt(Math.floor(Math.random()*d));return b},Y=function(a){if(a&&"<svg"===a.substr(0,4)){var b="";return t()?b=window.btoa(a):"undefined"!=typeof Buffer&&(b=Buffer.from(a,"utf8").toString("base64")),b?"data:image/svg+xml;base64,".concat(b):a}return a}},6756:(a,b,c)=>{c.d(b,{h:()=>f});var d=c(3178),e=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),f=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.displayCache=new Map,b}return e(b,a),b.prototype.getChildren=function(){return this.getDisplayedChildren()},b.prototype.getDisplayedChildren=function(){var a=this;return this.model.components().filter(function(b){return a.isChildDisplayed(b)}).map(function(b){return new a.constructor(b)})},b.prototype.isChildDisplayed=function(a){if(this.displayCache.has(a))return this.displayCache.get(a);var b,c=!!(b=a.getEl())&&"object"==typeof b&&b.nodeType===Node.ELEMENT_NODE&&"none"!==window.getComputedStyle(b).display&&b.offsetWidth>0&&b.offsetHeight>0;return this.displayCache.set(a,c),c},b.prototype.getParent=function(){var a=this.model.parent();return a?new this.constructor(a):null},b.prototype.addChildAt=function(a,b,c){if(void 0===c&&(c={action:"add-component"}),(null==(e=null==(d=this.model)?void 0:d.isInstanceOf)?void 0:e.call(d,"text"))&&(null==(g=null==(f=null==a?void 0:a.model)?void 0:f.get)?void 0:g.call(f,"textable")))return null==(k=null==(j=null==(i=null==(h=this.model)?void 0:h.getView)?void 0:i.call(h))?void 0:j.insertComponent)?void 0:k.call(j,null==a?void 0:a.model,{action:c.action});var d,e,f,g,h,i,j,k,l=this.model.components().add(a.model,{at:this.getRealIndex(b),action:c.action});return new this.constructor(l)},b.prototype.removeChildAt=function(a,b){void 0===b&&(b={temporary:!1});var c=this.model.components().at(this.getRealIndex(a));c&&this.model.components().remove(c,b)},b.prototype.indexOfChild=function(a){return this.getDisplayIndex(a)},b.prototype.getDisplayIndex=function(a){var b=this.getDisplayedChildren();return b?b.findIndex(function(b){return b.model===a.model}):-1},b.prototype.getRealIndex=function(a){if(-1===a)return -1;for(var b=0,c=this.model.components(),d=0;d<c.length;d++){var e=c.at(d);if(this.isChildDisplayed(e)&&b++,b===a+1)return d}return -1},b.prototype.canMove=function(a,b){return this.model.em.Components.canMove(this.model,a.model,this.getRealIndex(b)).result},b.prototype.equals=function(a){return!!(null==a?void 0:a._model)&&this._model.getId()===a._model.getId()},b.prototype.restNodeState=function(){this.clearState();var a=this.model;this.setContentEditable(!1),a.em.getEditing()===a&&this.disableEditing()},b.prototype.setContentEditable=function(a){this.element&&this.isTextNode()&&(this.element.contentEditable=a?"true":"false")},b.prototype.disableEditing=function(){var a,b;null==(b=null==(a=this.view)?void 0:a.disableEditing)||b.call(a)},b.prototype.clearState=function(){var a,b;null==(b=(a=this.model).set)||b.call(a,"status","")},b.prototype.setSelectedParentState=function(){var a,b;null==(b=(a=this.model).set)||b.call(a,"status","selected-parent")},b.prototype.isTextNode=function(){var a,b;return null==(b=(a=this.model).isInstanceOf)?void 0:b.call(a,"text")},b.prototype.isTextable=function(){var a,b;return null==(b=(a=this.model).get)?void 0:b.call(a,"textable")},b}(d.$)},1447:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(6756),e=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();let f=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b._dropAreaConfig={ratio:.8,minUndroppableDimension:1,maxUndroppableDimension:15},b}return e(b,a),Object.defineProperty(b.prototype,"view",{get:function(){var a,b;return null==(b=(a=this.model).getView)?void 0:b.call(a)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"element",{get:function(){var a,b;return null==(b=(a=this.model).getEl)?void 0:b.call(a)},enumerable:!1,configurable:!0}),b}(d.h)},3178:(a,b,c)=>{c.d(b,{$:()=>d});var d=function(){function a(a,b){void 0===b&&(b={}),this._dropAreaConfig={ratio:1,minUndroppableDimension:0,maxUndroppableDimension:0},this._model=a,this._dragSource=b}return Object.defineProperty(a.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dragSource",{get:function(){return this._dragSource},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dropArea",{get:function(){var a,b;return this.getParent()?null==(b=this.nodeDimensions)?void 0:b.getDropArea(this._dropAreaConfig):null==(a=this.nodeDimensions)?void 0:a.clone()},enumerable:!1,configurable:!0}),a.prototype.isWithinDropBounds=function(a,b){return!!this.dropArea&&this.dropArea.isWithinBounds(a,b)},a.prototype.equals=function(a){return!!(null==a?void 0:a._model)&&this._model===a._model},a.prototype.adjustDimensions=function(a){var b,c;(0!==a.topDifference||0!==a.leftDifference)&&(null==(b=this.nodeDimensions)||b.adjustDimensions(a),null==(c=this.childrenDimensions)||c.forEach(function(b){return b.adjustDimensions(a)}))},a}()},8433:(a,b,c)=>{var d;c.d(b,{A:()=>d}),function(a){a.Vertical="Vertical",a.Horizontal="Horizontal",a.BothDirections="BothDirections"}(d||(d={}))},585:(a,b,c)=>{var d={"./CanvasClear":9484,"./CanvasClear.ts":9484,"./CanvasMove":9516,"./CanvasMove.ts":9516,"./CommandAbstract":9946,"./CommandAbstract.ts":9946,"./ComponentDelete":7801,"./ComponentDelete.ts":7801,"./ComponentDrag":4864,"./ComponentDrag.ts":4864,"./ComponentEnter":6134,"./ComponentEnter.ts":6134,"./ComponentExit":914,"./ComponentExit.ts":914,"./ComponentNext":5547,"./ComponentNext.ts":5547,"./ComponentPrev":8655,"./ComponentPrev.ts":8655,"./ComponentStyleClear":7640,"./ComponentStyleClear.ts":7640,"./CopyComponent":5837,"./CopyComponent.ts":5837,"./ExportTemplate":6477,"./ExportTemplate.ts":6477,"./Fullscreen":1772,"./Fullscreen.ts":1772,"./MoveComponent":741,"./MoveComponent.ts":741,"./OpenAssets":2924,"./OpenAssets.ts":2924,"./OpenBlocks":3963,"./OpenBlocks.ts":3963,"./OpenLayers":1479,"./OpenLayers.ts":1479,"./OpenStyleManager":3473,"./OpenStyleManager.ts":3473,"./OpenTraitManager":5054,"./OpenTraitManager.ts":5054,"./PasteComponent":6979,"./PasteComponent.ts":6979,"./Preview":4457,"./Preview.ts":4457,"./Resize":5493,"./Resize.ts":5493,"./SelectComponent":9317,"./SelectComponent.ts":9317,"./SelectPosition":1406,"./SelectPosition.ts":1406,"./ShowOffset":9395,"./ShowOffset.ts":9395,"./SwitchVisibility":7285,"./SwitchVisibility.ts":7285};function e(a){return c(f(a))}function f(a){if(!c.o(d,a)){var b=Error("Cannot find module '"+a+"'");throw b.code="MODULE_NOT_FOUND",b}return d[a]}e.keys=function(){return Object.keys(d)},e.resolve=f,a.exports=e,e.id=585},5706:(a,b,c)=>{c.r(b),c.d(b,{VERSION:()=>e,after:()=>bv,all:()=>bP,allKeys:()=>an,any:()=>bQ,assign:()=>aF,before:()=>bw,bind:()=>bj,bindAll:()=>bm,chain:()=>bf,chunk:()=>co,clone:()=>aJ,collect:()=>bJ,compact:()=>cd,compose:()=>bu,constant:()=>Z,contains:()=>bR,countBy:()=>b1,create:()=>aI,debounce:()=>br,default:()=>ct,defaults:()=>aG,defer:()=>bp,delay:()=>bo,detect:()=>bG,difference:()=>cf,drop:()=>cb,each:()=>bI,escape:()=>a3,every:()=>bP,extend:()=>aE,extendOwn:()=>aF,filter:()=>bN,find:()=>bG,findIndex:()=>bA,findKey:()=>by,findLastIndex:()=>bB,findWhere:()=>bH,first:()=>ca,flatten:()=>ce,foldl:()=>bL,foldr:()=>bM,forEach:()=>bI,functions:()=>aC,get:()=>aO,groupBy:()=>b_,has:()=>aP,head:()=>ca,identity:()=>aQ,include:()=>bR,includes:()=>bR,indexBy:()=>b0,indexOf:()=>bE,initial:()=>b9,inject:()=>bL,intersection:()=>cj,invert:()=>aB,invoke:()=>bS,isArguments:()=>W,isArray:()=>T,isArrayBuffer:()=>K,isBoolean:()=>B,isDataView:()=>S,isDate:()=>G,isElement:()=>C,isEmpty:()=>ah,isEqual:()=>am,isError:()=>I,isFinite:()=>X,isFunction:()=>N,isMap:()=>av,isMatch:()=>ai,isNaN:()=>Y,isNull:()=>z,isNumber:()=>F,isObject:()=>y,isRegExp:()=>H,isSet:()=>ax,isString:()=>E,isSymbol:()=>J,isTypedArray:()=>ad,isUndefined:()=>A,isWeakMap:()=>aw,isWeakSet:()=>ay,iteratee:()=>aV,keys:()=>ag,last:()=>cc,lastIndexOf:()=>bF,map:()=>bJ,mapObject:()=>aX,matcher:()=>aR,matches:()=>aR,max:()=>bV,memoize:()=>bn,methods:()=>aC,min:()=>bW,mixin:()=>cq,negate:()=>bt,noop:()=>aY,now:()=>a0,object:()=>cm,omit:()=>b8,once:()=>bx,pairs:()=>aA,partial:()=>bi,partition:()=>b2,pick:()=>b7,pluck:()=>bT,property:()=>aS,propertyOf:()=>aZ,random:()=>a_,range:()=>cn,reduce:()=>bL,reduceRight:()=>bM,reject:()=>bO,rest:()=>cb,restArguments:()=>x,result:()=>bc,sample:()=>bX,select:()=>bN,shuffle:()=>bY,size:()=>b5,some:()=>bQ,sortBy:()=>bZ,sortedIndex:()=>bC,tail:()=>cb,take:()=>ca,tap:()=>aK,template:()=>bb,templateSettings:()=>a5,throttle:()=>bq,times:()=>a$,toArray:()=>b4,toPath:()=>aL,transpose:()=>ck,unescape:()=>a4,union:()=>ci,uniq:()=>ch,unique:()=>ch,uniqueId:()=>be,unzip:()=>ck,values:()=>az,where:()=>bU,without:()=>cg,wrap:()=>bs,zip:()=>cl});var d={};c.r(d),c.d(d,{VERSION:()=>e,after:()=>bv,all:()=>bP,allKeys:()=>an,any:()=>bQ,assign:()=>aF,before:()=>bw,bind:()=>bj,bindAll:()=>bm,chain:()=>bf,chunk:()=>co,clone:()=>aJ,collect:()=>bJ,compact:()=>cd,compose:()=>bu,constant:()=>Z,contains:()=>bR,countBy:()=>b1,create:()=>aI,debounce:()=>br,default:()=>cr,defaults:()=>aG,defer:()=>bp,delay:()=>bo,detect:()=>bG,difference:()=>cf,drop:()=>cb,each:()=>bI,escape:()=>a3,every:()=>bP,extend:()=>aE,extendOwn:()=>aF,filter:()=>bN,find:()=>bG,findIndex:()=>bA,findKey:()=>by,findLastIndex:()=>bB,findWhere:()=>bH,first:()=>ca,flatten:()=>ce,foldl:()=>bL,foldr:()=>bM,forEach:()=>bI,functions:()=>aC,get:()=>aO,groupBy:()=>b_,has:()=>aP,head:()=>ca,identity:()=>aQ,include:()=>bR,includes:()=>bR,indexBy:()=>b0,indexOf:()=>bE,initial:()=>b9,inject:()=>bL,intersection:()=>cj,invert:()=>aB,invoke:()=>bS,isArguments:()=>W,isArray:()=>T,isArrayBuffer:()=>K,isBoolean:()=>B,isDataView:()=>S,isDate:()=>G,isElement:()=>C,isEmpty:()=>ah,isEqual:()=>am,isError:()=>I,isFinite:()=>X,isFunction:()=>N,isMap:()=>av,isMatch:()=>ai,isNaN:()=>Y,isNull:()=>z,isNumber:()=>F,isObject:()=>y,isRegExp:()=>H,isSet:()=>ax,isString:()=>E,isSymbol:()=>J,isTypedArray:()=>ad,isUndefined:()=>A,isWeakMap:()=>aw,isWeakSet:()=>ay,iteratee:()=>aV,keys:()=>ag,last:()=>cc,lastIndexOf:()=>bF,map:()=>bJ,mapObject:()=>aX,matcher:()=>aR,matches:()=>aR,max:()=>bV,memoize:()=>bn,methods:()=>aC,min:()=>bW,mixin:()=>cq,negate:()=>bt,noop:()=>aY,now:()=>a0,object:()=>cm,omit:()=>b8,once:()=>bx,pairs:()=>aA,partial:()=>bi,partition:()=>b2,pick:()=>b7,pluck:()=>bT,property:()=>aS,propertyOf:()=>aZ,random:()=>a_,range:()=>cn,reduce:()=>bL,reduceRight:()=>bM,reject:()=>bO,rest:()=>cb,restArguments:()=>x,result:()=>bc,sample:()=>bX,select:()=>bN,shuffle:()=>bY,size:()=>b5,some:()=>bQ,sortBy:()=>bZ,sortedIndex:()=>bC,tail:()=>cb,take:()=>ca,tap:()=>aK,template:()=>bb,templateSettings:()=>a5,throttle:()=>bq,times:()=>a$,toArray:()=>b4,toPath:()=>aL,transpose:()=>ck,unescape:()=>a4,union:()=>ci,uniq:()=>ch,unique:()=>ch,uniqueId:()=>be,unzip:()=>ck,values:()=>az,where:()=>bU,without:()=>cg,wrap:()=>bs,zip:()=>cl});var e="1.13.1",f="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},g=Array.prototype,h=Object.prototype,i="undefined"!=typeof Symbol?Symbol.prototype:null,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n="undefined"!=typeof ArrayBuffer,o="undefined"!=typeof DataView,p=Array.isArray,q=Object.keys,r=Object.create,s=n&&ArrayBuffer.isView,t=isNaN,u=isFinite,v=!({toString:null}).propertyIsEnumerable("toString"),w=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function x(a,b){return b=null==b?a.length-1:+b,function(){for(var c=Math.max(arguments.length-b,0),d=Array(c),e=0;e<c;e++)d[e]=arguments[e+b];switch(b){case 0:return a.call(this,d);case 1:return a.call(this,arguments[0],d);case 2:return a.call(this,arguments[0],arguments[1],d)}var f=Array(b+1);for(e=0;e<b;e++)f[e]=arguments[e];return f[b]=d,a.apply(this,f)}}function y(a){var b=typeof a;return"function"===b||"object"===b&&!!a}function z(a){return null===a}function A(a){return void 0===a}function B(a){return!0===a||!1===a||"[object Boolean]"===l.call(a)}function C(a){return!!(a&&1===a.nodeType)}function D(a){var b="[object "+a+"]";return function(a){return l.call(a)===b}}let E=D("String"),F=D("Number"),G=D("Date"),H=D("RegExp"),I=D("Error"),J=D("Symbol"),K=D("ArrayBuffer");var L=D("Function"),M=f.document&&f.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof M&&(L=function(a){return"function"==typeof a});let N=L,O=D("Object");var P=o&&O(new DataView(new ArrayBuffer(8))),Q="undefined"!=typeof Map&&O(new Map),R=D("DataView");let S=P?function(a){return null!=a&&N(a.getInt8)&&K(a.buffer)}:R,T=p||D("Array");function U(a,b){return null!=a&&m.call(a,b)}var V=D("Arguments");!function(){V(arguments)||(V=function(a){return U(a,"callee")})}();let W=V;function X(a){return!J(a)&&u(a)&&!isNaN(parseFloat(a))}function Y(a){return F(a)&&t(a)}function Z(a){return function(){return a}}function $(a){return function(b){var c=a(b);return"number"==typeof c&&c>=0&&c<=0x1fffffffffffff}}function _(a){return function(b){return null==b?void 0:b[a]}}let aa=_("byteLength"),ab=$(aa);var ac=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;let ad=n?function(a){return s?s(a)&&!S(a):ab(a)&&ac.test(l.call(a))}:Z(!1),ae=_("length");function af(a,b){b=function(a){for(var b={},c=a.length,d=0;d<c;++d)b[a[d]]=!0;return{contains:function(a){return b[a]},push:function(c){return b[c]=!0,a.push(c)}}}(b);var c=w.length,d=a.constructor,e=N(d)&&d.prototype||h,f="constructor";for(U(a,f)&&!b.contains(f)&&b.push(f);c--;)(f=w[c])in a&&a[f]!==e[f]&&!b.contains(f)&&b.push(f)}function ag(a){if(!y(a))return[];if(q)return q(a);var b=[];for(var c in a)U(a,c)&&b.push(c);return v&&af(a,b),b}function ah(a){if(null==a)return!0;var b=ae(a);return"number"==typeof b&&(T(a)||E(a)||W(a))?0===b:0===ae(ag(a))}function ai(a,b){var c=ag(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;f<d;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0}function aj(a){return a instanceof aj?a:this instanceof aj?void(this._wrapped=a):new aj(a)}function ak(a){return new Uint8Array(a.buffer||a,a.byteOffset||0,aa(a))}aj.VERSION=e,aj.prototype.value=function(){return this._wrapped},aj.prototype.valueOf=aj.prototype.toJSON=aj.prototype.value,aj.prototype.toString=function(){return String(this._wrapped)};var al="[object DataView]";function am(a,b){return function a(b,c,d,e){if(b===c)return 0!==b||1/b==1/c;if(null==b||null==c)return!1;if(b!=b)return c!=c;var f=typeof b;return("function"===f||"object"===f||"object"==typeof c)&&function b(c,d,e,f){c instanceof aj&&(c=c._wrapped),d instanceof aj&&(d=d._wrapped);var g=l.call(c);if(g!==l.call(d))return!1;if(P&&"[object Object]"==g&&S(c)){if(!S(d))return!1;g=al}switch(g){case"[object RegExp]":case"[object String]":return""+c==""+d;case"[object Number]":if(+c!=+c)return+d!=+d;return 0==+c?1/c==1/d:+c==+d;case"[object Date]":case"[object Boolean]":return+c==+d;case"[object Symbol]":return i.valueOf.call(c)===i.valueOf.call(d);case"[object ArrayBuffer]":case al:return b(ak(c),ak(d),e,f)}var h="[object Array]"===g;if(!h&&ad(c)){if(aa(c)!==aa(d))return!1;if(c.buffer===d.buffer&&c.byteOffset===d.byteOffset)return!0;h=!0}if(!h){if("object"!=typeof c||"object"!=typeof d)return!1;var j=c.constructor,k=d.constructor;if(j!==k&&!(N(j)&&j instanceof j&&N(k)&&k instanceof k)&&"constructor"in c&&"constructor"in d)return!1}f=f||[];for(var m=(e=e||[]).length;m--;)if(e[m]===c)return f[m]===d;if(e.push(c),f.push(d),h){if((m=c.length)!==d.length)return!1;for(;m--;)if(!a(c[m],d[m],e,f))return!1}else{var n,o=ag(c);if(m=o.length,ag(d).length!==m)return!1;for(;m--;)if(!(U(d,n=o[m])&&a(c[n],d[n],e,f)))return!1}return e.pop(),f.pop(),!0}(b,c,d,e)}(a,b)}function an(a){if(!y(a))return[];var b=[];for(var c in a)b.push(c);return v&&af(a,b),b}function ao(a){var b=ae(a);return function(c){if(null==c||ae(an(c)))return!1;for(var d=0;d<b;d++)if(!N(c[a[d]]))return!1;return a!==at||!N(c[ap])}}var ap="forEach",aq=["clear","delete"],ar=["get","has","set"],as=aq.concat(ap,ar),at=aq.concat(ar),au=["add"].concat(aq,ap,"has");let av=Q?ao(as):D("Map"),aw=Q?ao(at):D("WeakMap"),ax=Q?ao(au):D("Set"),ay=D("WeakSet");function az(a){for(var b=ag(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d}function aA(a){for(var b=ag(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d}function aB(a){for(var b={},c=ag(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b}function aC(a){var b=[];for(var c in a)N(a[c])&&b.push(c);return b.sort()}function aD(a,b){return function(c){var d=arguments.length;if(b&&(c=Object(c)),d<2||null==c)return c;for(var e=1;e<d;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;i<h;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}}let aE=aD(an),aF=aD(ag),aG=aD(an,!0);function aH(a){if(!y(a))return{};if(r)return r(a);var b=function(){};b.prototype=a;var c=new b;return b.prototype=null,c}function aI(a,b){var c=aH(a);return b&&aF(c,b),c}function aJ(a){return y(a)?T(a)?a.slice():aE({},a):a}function aK(a,b){return b(a),a}function aL(a){return T(a)?a:[a]}function aM(a){return aj.toPath(a)}function aN(a,b){for(var c=b.length,d=0;d<c;d++){if(null==a)return;a=a[b[d]]}return c?a:void 0}function aO(a,b,c){var d=aN(a,aM(b));return A(d)?c:d}function aP(a,b){for(var c=(b=aM(b)).length,d=0;d<c;d++){var e=b[d];if(!U(a,e))return!1;a=a[e]}return!!c}function aQ(a){return a}function aR(a){return a=aF({},a),function(b){return ai(b,a)}}function aS(a){return a=aM(a),function(b){return aN(b,a)}}function aT(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}}function aU(a,b,c){return null==a?aQ:N(a)?aT(a,b,c):y(a)&&!T(a)?aR(a):aS(a)}function aV(a,b){return aU(a,b,1/0)}function aW(a,b,c){return aj.iteratee!==aV?aj.iteratee(a,b):aU(a,b,c)}function aX(a,b,c){b=aW(b,c);for(var d=ag(a),e=d.length,f={},g=0;g<e;g++){var h=d[g];f[h]=b(a[h],h,a)}return f}function aY(){}function aZ(a){return null==a?aY:function(b){return aO(a,b)}}function a$(a,b,c){var d=Array(Math.max(0,a));b=aT(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d}function a_(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))}aj.toPath=aL,aj.iteratee=aV;let a0=Date.now||function(){return new Date().getTime()};function a1(a){var b=function(b){return a[b]},c="(?:"+ag(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}}let a2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a3=a1(a2),a4=a1(aB(a2)),a5=aj.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var a6=/(.)^/,a7={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},a8=/\\|'|\r|\n|\u2028|\u2029/g;function a9(a){return"\\"+a7[a]}var ba=/^\s*(\w|\$)+\s*$/;function bb(a,b,c){!b&&c&&(b=c);var d,e=RegExp([((b=aG({},b,aj.templateSettings)).escape||a6).source,(b.interpolate||a6).source,(b.evaluate||a6).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(a8,a9),f=h+b.length,c?g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?g+="'+\n((__t=("+d+"))==null?'':__t)+\n'":e&&(g+="';\n"+e+"\n__p+='"),b}),g+="';\n";var h=b.variable;if(h){if(!ba.test(h))throw Error("variable is not a bare identifier: "+h)}else g="with(obj||{}){\n"+g+"}\n",h="obj";g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=Function(h,"_",g)}catch(a){throw a.source=g,a}var i=function(a){return d.call(this,a,aj)};return i.source="function("+h+"){\n"+g+"}",i}function bc(a,b,c){var d=(b=aM(b)).length;if(!d)return N(c)?c.call(a):c;for(var e=0;e<d;e++){var f=null==a?void 0:a[b[e]];void 0===f&&(f=c,e=d),a=N(f)?f.call(a):f}return a}var bd=0;function be(a){var b=++bd+"";return a?a+b:b}function bf(a){var b=aj(a);return b._chain=!0,b}function bg(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=aH(a.prototype),g=a.apply(f,e);return y(g)?g:f}var bh=x(function(a,b){var c=bh.placeholder,d=function(){for(var e=0,f=b.length,g=Array(f),h=0;h<f;h++)g[h]=b[h]===c?arguments[e++]:b[h];for(;e<arguments.length;)g.push(arguments[e++]);return bg(a,d,this,this,g)};return d});bh.placeholder=aj;let bi=bh,bj=x(function(a,b,c){if(!N(a))throw TypeError("Bind must be called on a function");var d=x(function(e){return bg(a,d,b,this,c.concat(e))});return d}),bk=$(ae);function bl(a,b,c,d){if(d=d||[],b||0===b){if(b<=0)return d.concat(a)}else b=1/0;for(var e=d.length,f=0,g=ae(a);f<g;f++){var h=a[f];if(bk(h)&&(T(h)||W(h)))if(b>1)bl(h,b-1,c,d),e=d.length;else for(var i=0,j=h.length;i<j;)d[e++]=h[i++];else c||(d[e++]=h)}return d}let bm=x(function(a,b){var c=(b=bl(b,!1,!1)).length;if(c<1)throw Error("bindAll must be passed function names");for(;c--;){var d=b[c];a[d]=bj(a[d],a)}return a});function bn(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return U(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c}let bo=x(function(a,b,c){return setTimeout(function(){return a.apply(null,c)},b)}),bp=bi(bo,aj,1);function bq(a,b,c){var d,e,f,g,h=0;c||(c={});var i=function(){h=!1===c.leading?0:a0(),d=null,g=a.apply(e,f),d||(e=f=null)},j=function(){var j=a0();h||!1!==c.leading||(h=j);var k=b-(j-h);return e=this,f=arguments,k<=0||k>b?(d&&(clearTimeout(d),d=null),h=j,g=a.apply(e,f),d||(e=f=null)):d||!1===c.trailing||(d=setTimeout(i,k)),g};return j.cancel=function(){clearTimeout(d),h=0,d=e=f=null},j}function br(a,b,c){var d,e,f,g,h,i=function(){var j=a0()-e;b>j?d=setTimeout(i,b-j):(d=null,c||(g=a.apply(h,f)),d||(f=h=null))},j=x(function(j){return h=this,f=j,e=a0(),!d&&(d=setTimeout(i,b),c&&(g=a.apply(h,f))),g});return j.cancel=function(){clearTimeout(d),d=f=h=null},j}function bs(a,b){return bi(b,a)}function bt(a){return function(){return!a.apply(this,arguments)}}function bu(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}}function bv(a,b){return function(){if(--a<1)return b.apply(this,arguments)}}function bw(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=null),c}}let bx=bi(bw,2);function by(a,b,c){b=aW(b,c);for(var d,e=ag(a),f=0,g=e.length;f<g;f++)if(b(a[d=e[f]],d,a))return d}function bz(a){return function(b,c,d){c=aW(c,d);for(var e=ae(b),f=a>0?0:e-1;f>=0&&f<e;f+=a)if(c(b[f],f,b))return f;return -1}}let bA=bz(1),bB=bz(-1);function bC(a,b,c,d){for(var e=(c=aW(c,d,1))(b),f=0,g=ae(a);f<g;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f}function bD(a,b,c){return function(d,e,f){var g=0,h=ae(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!=e)return(f=b(k.call(d,g,h),Y))>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&f<h;f+=a)if(d[f]===e)return f;return -1}}let bE=bD(1,bA,bC),bF=bD(-1,bB);function bG(a,b,c){var d=(bk(a)?bA:by)(a,b,c);if(void 0!==d&&-1!==d)return a[d]}function bH(a,b){return bG(a,aR(b))}function bI(a,b,c){if(b=aT(b,c),bk(a))for(d=0,e=a.length;d<e;d++)b(a[d],d,a);else{var d,e,f=ag(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a}function bJ(a,b,c){b=aW(b,c);for(var d=!bk(a)&&ag(a),e=(d||a).length,f=Array(e),g=0;g<e;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f}function bK(a){var b=function(b,c,d,e){var f=!bk(b)&&ag(b),g=(f||b).length,h=a>0?0:g-1;for(e||(d=b[f?f[h]:h],h+=a);h>=0&&h<g;h+=a){var i=f?f[h]:h;d=c(d,b[i],i,b)}return d};return function(a,c,d,e){var f=arguments.length>=3;return b(a,aT(c,e,4),d,f)}}let bL=bK(1),bM=bK(-1);function bN(a,b,c){var d=[];return b=aW(b,c),bI(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d}function bO(a,b,c){return bN(a,bt(aW(b)),c)}function bP(a,b,c){b=aW(b,c);for(var d=!bk(a)&&ag(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0}function bQ(a,b,c){b=aW(b,c);for(var d=!bk(a)&&ag(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1}function bR(a,b,c,d){return bk(a)||(a=az(a)),("number"!=typeof c||d)&&(c=0),bE(a,b,c)>=0}let bS=x(function(a,b,c){var d,e;return N(b)?e=b:(d=(b=aM(b)).slice(0,-1),b=b[b.length-1]),bJ(a,function(a){var f=e;if(!f){if(d&&d.length&&(a=aN(a,d)),null==a)return;f=a[b]}return null==f?f:f.apply(a,c)})});function bT(a,b){return bJ(a,aS(b))}function bU(a,b){return bN(a,aR(b))}function bV(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b||"number"==typeof b&&"object"!=typeof a[0]&&null!=a){a=bk(a)?a:az(a);for(var h=0,i=a.length;h<i;h++)null!=(d=a[h])&&d>f&&(f=d)}else b=aW(b,c),bI(a,function(a,c,d){((e=b(a,c,d))>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f}function bW(a,b,c){var d,e,f=1/0,g=1/0;if(null==b||"number"==typeof b&&"object"!=typeof a[0]&&null!=a){a=bk(a)?a:az(a);for(var h=0,i=a.length;h<i;h++)null!=(d=a[h])&&d<f&&(f=d)}else b=aW(b,c),bI(a,function(a,c,d){((e=b(a,c,d))<g||e===1/0&&f===1/0)&&(f=a,g=e)});return f}function bX(a,b,c){if(null==b||c)return bk(a)||(a=az(a)),a[a_(a.length-1)];var d=bk(a)?aJ(a):az(a),e=ae(d);b=Math.max(Math.min(b,e),0);for(var f=e-1,g=0;g<b;g++){var h=a_(g,f),i=d[g];d[g]=d[h],d[h]=i}return d.slice(0,b)}function bY(a){return bX(a,1/0)}function bZ(a,b,c){var d=0;return b=aW(b,c),bT(bJ(a,function(a,c,e){return{value:a,index:d++,criteria:b(a,c,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return -1}return a.index-b.index}),"value")}function b$(a,b){return function(c,d,e){var f=b?[[],[]]:{};return d=aW(d,e),bI(c,function(b,e){var g=d(b,e,c);a(f,b,g)}),f}}let b_=b$(function(a,b,c){U(a,c)?a[c].push(b):a[c]=[b]}),b0=b$(function(a,b,c){a[c]=b}),b1=b$(function(a,b,c){U(a,c)?a[c]++:a[c]=1}),b2=b$(function(a,b,c){a[+!c].push(b)},!0);var b3=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function b4(a){return a?T(a)?k.call(a):E(a)?a.match(b3):bk(a)?bJ(a,aQ):az(a):[]}function b5(a){return null==a?0:bk(a)?a.length:ag(a).length}function b6(a,b,c){return b in c}let b7=x(function(a,b){var c={},d=b[0];if(null==a)return c;N(d)?(b.length>1&&(d=aT(d,b[1])),b=an(a)):(d=b6,b=bl(b,!1,!1),a=Object(a));for(var e=0,f=b.length;e<f;e++){var g=b[e],h=a[g];d(h,g,a)&&(c[g]=h)}return c}),b8=x(function(a,b){var c,d=b[0];return N(d)?(d=bt(d),b.length>1&&(c=b[1])):(b=bJ(bl(b,!1,!1),String),d=function(a,c){return!bR(b,c)}),b7(a,d,c)});function b9(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))}function ca(a,b,c){return null==a||a.length<1?null==b||c?void 0:[]:null==b||c?a[0]:b9(a,a.length-b)}function cb(a,b,c){return k.call(a,null==b||c?1:b)}function cc(a,b,c){return null==a||a.length<1?null==b||c?void 0:[]:null==b||c?a[a.length-1]:cb(a,Math.max(0,a.length-b))}function cd(a){return bN(a,Boolean)}function ce(a,b){return bl(a,b,!1)}let cf=x(function(a,b){return b=bl(b,!0,!0),bN(a,function(a){return!bR(b,a)})}),cg=x(function(a,b){return cf(a,b)});function ch(a,b,c,d){B(b)||(d=c,c=b,b=!1),null!=c&&(c=aW(c,d));for(var e=[],f=[],g=0,h=ae(a);g<h;g++){var i=a[g],j=c?c(i,g,a):i;b&&!c?(g&&f===j||e.push(i),f=j):c?bR(f,j)||(f.push(j),e.push(i)):bR(e,i)||e.push(i)}return e}let ci=x(function(a){return ch(bl(a,!0,!0))});function cj(a){for(var b=[],c=arguments.length,d=0,e=ae(a);d<e;d++){var f,g=a[d];if(!bR(b,g)){for(f=1;f<c&&bR(arguments[f],g);f++);f===c&&b.push(g)}}return b}function ck(a){for(var b=a&&bV(a,ae).length||0,c=Array(b),d=0;d<b;d++)c[d]=bT(a,d);return c}let cl=x(ck);function cm(a,b){for(var c={},d=0,e=ae(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c}function cn(a,b,c){null==b&&(b=a||0,a=0),c||(c=b<a?-1:1);for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e}function co(a,b){if(null==b||b<1)return[];for(var c=[],d=0,e=a.length;d<e;)c.push(k.call(a,d,d+=b));return c}function cp(a,b){return a._chain?aj(b).chain():b}function cq(a){return bI(aC(a),function(b){var c=aj[b]=a[b];aj.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),cp(this,c.apply(aj,a))}}),aj}bI(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];aj.prototype[a]=function(){var c=this._wrapped;return null!=c&&(b.apply(c,arguments),("shift"===a||"splice"===a)&&0===c.length&&delete c[0]),cp(this,c)}}),bI(["concat","join","slice"],function(a){var b=g[a];aj.prototype[a]=function(){var a=this._wrapped;return null!=a&&(a=b.apply(a,arguments)),cp(this,a)}});let cr=aj;var cs=cq(d);cs._=cs;let ct=cs}},o={};function p(a){var b=o[a];if(void 0!==b)return b.exports;var c=o[a]={exports:{}};return n[a].call(c.exports,c,c.exports,p),c.exports}p.n=a=>{var b=a&&a.__esModule?()=>a.default:()=>a;return p.d(b,{a:b}),b},p.d=(a,b)=>{for(var c in b)p.o(b,c)&&!p.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:b[c]})},p.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(a){if("object"==typeof window)return window}}(),p.o=(a,b)=>Object.prototype.hasOwnProperty.call(a,b),p.r=a=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var q={};p.d(q,{Ay:()=>mn,I0:()=>mm,nu:()=>ml});var r=p(5706),s=p(1166);function t(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=a.raw;return d.reduce(function(a,c,e){var f=b[e-1],g=d[e-1];return Array.isArray(f)?f=f.join(""):g&&"$"===g.slice(-1)?a=a.slice(0,-1):f=(0,s.escape)(f),a+f+c})}var u=p(4193),v=p.n(u),w=p(7774),x=p(9156),y=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),z=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return y(b,a),b}(x.Kx),A=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return y(b,a),b.prototype.getByComponent=function(a){var b=this;return this.filter(function(c){return b.getComponent(c)===a})[0]},b.prototype.addComponent=function(a,b){var c=this,d=((0,r.isArray)(a)?a:[a]).filter(function(a){return!c.hasComponent(a)}).map(function(a){return new z({component:a})})[0];return this.push(d,b)},b.prototype.getComponent=function(a){return a.get("component")},b.prototype.hasComponent=function(a){var b=this.getByComponent(a);return b&&this.contains(b)},b.prototype.lastComponent=function(){var a=this.last();return a?this.getComponent(a):void 0},b.prototype.allComponents=function(){var a=this;return this.map(function(b){return a.getComponent(b)}).filter(function(a){return a})},b.prototype.removeComponent=function(a,b){var c=this,d=((0,r.isArray)(a)?a:[a]).map(function(a){return c.getByComponent(a)});return this.remove(d,b)},b}(x.pM),B=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),C=function(){return(C=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},D=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},E=function(){function a(a,b,c){this.debounced=[],this.collections=[],this.cls=[],this.events={},this._em=a,this._name=b;var d=this.name.charAt(0).toLowerCase()+this.name.slice(1),e=(0,r.isUndefined)(a.config[d])?a.config[this.name]:a.config[d],f=!0===e?{}:e||{};f.pStylePrefix=a.config.pStylePrefix||"",(0,r.isUndefined)(e)||e||(f._disable=1),f.em=a,this._config=(0,s.deepMerge)(c||{},f)}return Object.defineProperty(a.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),a.prototype.render=function(a){},a.prototype.postLoad=function(a){},a.prototype.onInit=function(){},Object.defineProperty(a.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(a){return a?this.config[a]:this.config},a.prototype.__logWarn=function(a,b){void 0===b&&(b={}),this.em.logWarning("[".concat(this.name,"]: ").concat(a),b)},a.prototype.destroy=function(){this.__destroy()},a.prototype.__destroy=function(){var a,b,c;null==(a=this.view)||a.remove(),null==(b=this.state)||b.stopListening(),null==(c=this.state)||c.clear(),this.debounced.forEach(function(a){return a.cancel()}),this.collections.forEach(function(a){a.stopListening(),a.reset()})},a.prototype.__appendTo=function(){var a=this.getConfig().appendTo;if(a){var b=(0,r.isElement)(a)?a:document.querySelector(a);if(!b)return this.__logWarn('"appendTo" element not found');b.appendChild(this.render())}},a}(),F=function(a){function b(b,c,d,e,f,g){void 0===g&&(g={});var h=a.call(this,b,c,f)||this;return h.cls=[],h._itemCache=new Map,h.private=!1,h.all=d,e&&(h.events=e),g.skipListen||h.__initListen(),h}return B(b,a),b.prototype.postLoad=function(a){},b.prototype.render=function(a){},b.prototype.getProjectData=function(a){var b={},c=this.storageKey;return c&&(b[c]=a||this.getAll()),b},b.prototype.loadProjectData=function(a,b){void 0===a&&(a={}),void 0===b&&(b={});var c=b.all,d=b.onResult,e=b.reset,f=this.storageKey,g={action:"load"},h=c||this.all,i=a[f];if("string"==typeof i)try{i=JSON.parse(i)}catch(a){this.__logWarn("Data parsing failed",{input:i})}return e&&i&&h.reset(void 0,g),d?i&&d(i,g):i&&(0,s.isDef)(i.length)&&h.reset(i,g),i},b.prototype.clear=function(a){void 0===a&&(a={});var b=this.all;return b&&b.reset(void 0,a),this},b.prototype.getAll=function(){return D([],this.all.models,!0)},b.prototype.getAllMap=function(){return this.getAll().reduce(function(a,b){return a[b.get(b.idAttribute)]=b,a},{})},b.prototype._makeCacheKey=function(a){return""},b.prototype._cacheItem=function(a){var b=this._makeCacheKey(a);b&&this._itemCache.set(b,a)},b.prototype._uncacheItem=function(a){var b=this._makeCacheKey(a);b&&this._itemCache.delete(b)},b.prototype._clearItemCache=function(){this._itemCache.clear()},b.prototype._onItemsResetCache=function(a){var b=this;this._clearItemCache(),a.each(function(a){return b._cacheItem(a)})},b.prototype._onItemKeyChange=function(a){for(var b,c=0,d=this._itemCache.entries();c<d.length;c++){var e=d[c],f=e[0];if(e[1]===a){b=f;break}}b&&this._itemCache.delete(b),this._cacheItem(a)},b.prototype._setupCacheListeners=function(){this.em.listenTo(this.all,"add",this._cacheItem.bind(this)),this.em.listenTo(this.all,"remove",this._uncacheItem.bind(this)),this.em.listenTo(this.all,"reset",this._onItemsResetCache.bind(this))},b.prototype.__initListen=function(a){void 0===a&&(a={});var b=this.all,c=this.em,d=this.events;b&&c&&b.on("add",function(a,b,e){return c.trigger(d.add,a,e)}).on("remove",function(a,b,e){return c.trigger(d.remove,a,e)}).on("change",function(a,b){return c.trigger(d.update,a,a.changedAttributes(),b)}).on("all",this.__catchAllEvent,this),this.cls=[b].concat(a.collections||[]),(a.propagate||[]).forEach(function(a){var d=a.entity,e=a.event;d.on("all",function(a,d,f,g){var h=C({event:a},g||f);[c,b].map(function(a){return a.trigger(e,d,h)})})})},b.prototype.__remove=function(a,b){var c=this;void 0===b&&(b={});var d=this.em,e=(0,r.isString)(a)?this.get(a):a,f=function(){return e&&c.all.remove(e,b),e};return b.silent||null==d||d.trigger(this.events.removeBefore,e,f,b),!b.abort&&f()},b.prototype.__catchAllEvent=function(a,b,c,d){var e=this.em,f=this.events;e&&f.all&&e.trigger(f.all,{event:a,model:b,options:d||c}),this.__onAllEvent()},b.prototype.__appendTo=function(a){var b=this.config.appendTo;if(b){var c=(0,r.isElement)(b)?b:document.querySelector(b);if(!c)return this.__logWarn('"appendTo" element not found');c.appendChild(this.render(a))}},b.prototype.__onAllEvent=function(){},b.prototype._createId=function(a){void 0===a&&(a=16);var b,c=this.getAll().length+a,d=this.getAllMap();do b=(0,s.createId)(c);while(d[b]);return b},b.prototype.__listenAdd=function(a,b){var c=this;a.on("add",function(a,d,e){return c.em.trigger(b,a,e)})},b.prototype.__listenRemove=function(a,b){var c=this;a.on("remove",function(a,d,e){return c.em.trigger(b,a,e)})},b.prototype.__listenUpdate=function(a,b){var c=this;a.on("change",function(a,d){return c.em.trigger(b,a,a.changedAttributes(),d)})},b.prototype.__destroy=function(){var a;this.cls.forEach(function(a){a.stopListening(),a.reset()}),null==(a=this.view)||a.remove(),this.view=void 0},b}(E),G=p(7058);!function(a){a.add="device:add",a.addBefore="device:add:before",a.remove="device:remove",a.removeBefore="device:remove:before",a.select="device:select",a.selectBefore="device:select:before",a.update="device:update",a.all="device"}(il||(il={}));let H=il;!function(a){a.add="page:add",a.addBefore="page:add:before",a.remove="page:remove",a.removeBefore="page:remove:before",a.select="page:select",a.selectBefore="page:select:before",a.update="page:update",a.all="page"}(im||(im={}));let I=im;var J=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),K=function(a){function b(b,c,d){return a.call(this,c,{module:b,modelConstructor:d})||this}return J(b,a),b.prototype.add=function(b,c){var d,e=this,f=(0,r.isArray)(b)?b:(0,r.isUndefined)(b)?void 0:[b];return f=null!=(d=null==f?void 0:f.map(function(a){return a instanceof e.newModel?a:new e.newModel(e.module,a)}))?d:[void 0],a.prototype.add.call(this,(0,r.isArray)(b)?f:f[0],c)},b.prototype.preinitialize=function(a,b){this.newModel=b.modelConstructor,this.module=b.module},b}(x.pM);!function(a){a.dragEnter="canvas:dragenter",a.dragOver="canvas:dragover",a.dragEnd="canvas:dragend",a.dragData="canvas:dragdata",a.drop="canvas:drop",a.spot="canvas:spot",a.spotAdd="canvas:spot:add",a.spotUpdate="canvas:spot:update",a.spotRemove="canvas:spot:remove",a.coords="canvas:coords",a.zoom="canvas:zoom",a.pointer="canvas:pointer",a.refresh="canvas:refresh",a.frameLoad="canvas:frame:load",a.frameLoadHead="canvas:frame:load:head",a.frameLoadBody="canvas:frame:load:body",a.frameUnload="canvas:frame:unload"}(io||(io={}));let L=io;var M=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),N=function(){return(N=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},O=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},P="__aw",Q="__ah",R=function(a,b){var c,d=a.get(b),e=null==(c=a.view)?void 0:c.el["width"===b?"offsetWidth":"offsetHeight"];return(0,r.isNumber)(d)?d:(0,r.isString)(d)&&d.endsWith("px")?parseFloat(d):e?e:0},S=function(a){function b(b,c){var d=a.call(this,b,c)||this,e=d.em,f=d.attributes,g=f.styles,h=f.component,i=e.Components,j=i.getConfig(),k=e.Css.getAll(),l={};if(!(0,s.isComponent)(h)){var m=(0,s.isObject)(h)?h:{components:h};m.type||(m.type="wrapper");var n=i.getType("wrapper").model;d.set("component",new n(m,{em:e,config:j,frame:d,idMap:l}))}if(g){if(!(0,s.isObject)(g)){var o=g;(0,r.keys)(l).length&&(o=(0,r.isString)(o)?e.Parser.parseCss(o):o,e.Css.checkId(o,{idMap:l})),k.add(o),d.set("styles",k)}}else d.set("styles",k);return c.width||d.set(P,1),c.height||d.set(Q,1),d.id||d.set("id",(0,s.createId)()),d}return M(b,a),b.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(b.prototype,"width",{get:function(){return R(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return R(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"root",{get:function(){var a=this.refFrame;return(null==a?void 0:a.getComponent())||this.getComponent()},enumerable:!1,configurable:!0}),b.prototype.initRefs=function(){var a=this.refFrame;if((0,r.isString)(a)){var b=this.module.framesById[a];b&&this.set({refFrame:b},{silent:!0})}},b.prototype.getBoxRect=function(){var a=this.attributes;return{x:a.x,y:a.y,width:this.width,height:this.height}},b.prototype.onRemove=function(){this.refFrame||this.getComponent().remove({root:1})},b.prototype.changesUp=function(a){void 0===a&&(a={}),a.temporary||a.noCount||a.avoidStore||this.set("changesCount",this.get("changesCount")+1)},b.prototype.getComponent=function(){return this.get("component")},b.prototype.getStyles=function(){return this.get("styles")},b.prototype.disable=function(){this.trigger("disable")},b.prototype.remove=function(){null==(a=this.view)||a.remove(),this.view=void 0;var a,b=this.collection;return b&&b.remove(this)},b.prototype.getHead=function(){return O([],this.head,!0)},b.prototype.setHead=function(a){return this.set("head",O([],a,!0))},b.prototype.addHeadItem=function(a){this.head.push(a)},b.prototype.getHeadByAttr=function(a,b,c){return this.head.filter(function(d){return d.attributes&&d.attributes[a]==b&&(!c||c===d.tag)})[0]},b.prototype.removeHeadByAttr=function(a,b,c){var d=this.getHeadByAttr(a,b,c),e=this.head.indexOf(d);e>=0&&this.head.splice(e,1)},b.prototype.addLink=function(a){var b="link";this.getHeadByAttr("href",a,b)||this.addHeadItem({tag:b,attributes:{href:a,rel:"stylesheet"}})},b.prototype.removeLink=function(a){this.removeHeadByAttr("href",a,"link")},b.prototype.addScript=function(a){var b="script";this.getHeadByAttr("src",a,b)||this.addHeadItem({tag:b,attributes:{src:a}})},b.prototype.removeScript=function(a){this.removeHeadByAttr("src",a,"script")},b.prototype.getPage=function(){var a;return null==(a=this.collection)?void 0:a.page},b.prototype._emitUpdated=function(a){void 0===a&&(a={}),this.em.trigger("frame:updated",N({frame:this},a))},b.prototype._emitUnload=function(){this._emitWithEditor(L.frameUnload,{frame:this})},b.prototype._emitWithEditor=function(a,b){[this.em,this].forEach(function(c){return null==c?void 0:c.trigger(a,b)})},b.prototype.hasAutoHeight=function(){return"auto"===this.attributes.height||!!this.config.infiniteCanvas},b.prototype.toJSON=function(a){void 0===a&&(a={});var b=G.A.prototype.toJSON.call(this,a),c=(0,r.result)(this,"defaults");return a.fromUndo&&delete b.component,delete b.styles,delete b.changesCount,b[P]&&delete b.width,b[Q]&&delete b.height,b.refFrame&&(b.refFrame=b.refFrame.id,delete b.component),(0,r.forEach)(b,function(a,c){0===c.indexOf("_")&&delete b[c]}),(0,r.forEach)(c,function(a,c){b[c]===a&&delete b[c]}),(0,r.forEach)(["attributes","head"],function(a){(0,r.isEmpty)(b[a])&&delete b[a]}),b},b}(G.A),T=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),U=function(a){function b(b,c){void 0===c&&(c=[]);var d=a.call(this,b,c,S)||this;return d.loadedItems=0,d.itemsToLoad=0,(0,r.bindAll)(d,"itemLoaded"),d.on("add",d.onAdd),d.on("reset",d.onReset),d.on("remove",d.onRemove),d.forEach(function(a){return d.onAdd(a)}),d}return T(b,a),b.prototype.onAdd=function(a){this.module.framesById[a.id]=a},b.prototype.onReset=function(a,b){var c=this;((null==b?void 0:b.previousModels)||[]).map(function(a){return c.onRemove(a)})},b.prototype.onRemove=function(a){a.onRemove(),delete this.module.framesById[a.id]},b.prototype.initRefs=function(){this.forEach(function(a){return a.initRefs()})},b.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},b.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},b.prototype.listenToLoadItems=function(a){var b=this;this.forEach(function(c){return c[a?"on":"off"]("loaded",b.itemLoaded)})},b}(K),V=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),W=function(a){function b(b){var c=this,d=b.em,e=b.config,f=e.scripts,g=e.styles;return(c=a.call(this,b,{scripts:f,styles:g})||this).set("frames",new U(b)),c.on("change:zoom",c.onZoomChange),c.on("change:x change:y",c.onCoordsChange),c.on("change:pointer change:pointerScreen",c.onPointerChange),c.listenTo(d,"change:device ".concat(H.update),c.updateDevice),c.listenTo(d,I.select,c._pageUpdated),c}return V(b,a),b.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:x.lK,pointerScreen:x.lK}},Object.defineProperty(b.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),b.prototype.init=function(){var a=this.em.Pages._initPage();this.set("frames",a.getFrames()),this.updateDevice({frame:a.getMainFrame()})},b.prototype._pageUpdated=function(a,b){var c=this.em;c.setSelected(),c.get("readyCanvas")&&c.stopDefault(),null==b||b.getFrames().map(function(a){a.disable(),a._emitUnload()}),this.set("frames",a.getFrames()),this.updateDevice({frame:a.getMainFrame()})},b.prototype.updateDevice=function(a){void 0===a&&(a={});var b=this.em,c=b.getDeviceModel(),d=a.frame||b.getCurrentFrameModel();if(d&&c){var e=c.attributes,f=e.width,g=e.height,h=e.minHeight;d.set({width:f,height:g,minHeight:h},{noUndo:1})}},b.prototype.onZoomChange=function(a,b,c){var d=this.em,e=this.module;1>this.get("zoom")&&this.set("zoom",1),d.trigger(e.events.zoom,{options:c})},b.prototype.onCoordsChange=function(){var a=this.em,b=this.module;a.trigger(b.events.coords)},b.prototype.onPointerChange=function(){var a=this.em,b=this.module;a.trigger(b.events.pointer)},b.prototype.getPointerCoords=function(a){void 0===a&&(a=x.x2.World);var b=this.attributes,c=b.pointer,d=b.pointerScreen;return a===x.x2.World?c:d},b}(G.A),X=p(179),Y=p(2225),Z=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),$=function(a){function b(b,c){void 0===c&&(c=[]);var d=a.call(this,b,c,X.A)||this;d.on("add",d.onAdd),d.on("change",d.onChange),d.on("remove",d.onRemove);var e=d.em;d.refreshDbn=(0,r.debounce)(function(){return d.refresh()},0);var f="".concat(Y.I.resize," styleable:change ").concat(Y.I.input," ").concat(Y.I.update," frame:updated undo redo");return d.listenTo(e,f,function(){return d.refreshDbn()}),d}return Z(b,a),Object.defineProperty(b.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),b.prototype.refresh=function(){var a=this.em,b=this.events;a.trigger(b.spot)},b.prototype.onAdd=function(a){this.__trgEvent(this.events.spotAdd,{spot:a})},b.prototype.onChange=function(a){this.__trgEvent(this.events.spotUpdate,{spot:a})},b.prototype.onRemove=function(a){this.__trgEvent(this.events.spotRemove,{spot:a})},b.prototype.__trgEvent=function(a,b){this.module.em.trigger(a,b),this.refreshDbn()},b}(K),_=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),aa=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return _(b,a),Object.defineProperty(b.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"module",{get:function(){var a,b;return null!=(b=null==(a=this.model)?void 0:a.module)?b:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),b.prototype.preinitialize=function(a){this.className=""},b}(x.Ss),ab=p(6294),ac=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ad=function(a){function b(b,c){void 0===b&&(b={}),void 0===c&&(c=!1);var d=a.call(this,b)||this;return d.itemsView="",d.itemType="type",d.reuseView=!1,d.viewCollection=[],c&&d.listenTo(d.collection,"add",d.addTo),d}return ac(b,a),b.prototype.addTo=function(a){this.add(a)},b.prototype.itemViewNotFound=function(a){},b.prototype.add=function(a,b){var c,d=this.reuseView,e=this.viewCollection,f=b||null,g=a.get(this.itemType);c=a.view&&d?a.view:this.renderView(a,g),e.push(c);var h=c.render().el;f?f.appendChild(h):this.$el.append(h)},b.prototype.render=function(){var a=this,b=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(c){return a.add(c,b)}),this.$el.append(b),this.onRender(),this},b.prototype.onRender=function(){},b.prototype.onRemoveBefore=function(a,b){},b.prototype.onRemove=function(a,b){},b.prototype.remove=function(a){void 0===a&&(a={});var b=this.viewCollection;return this.onRemoveBefore(b,a),this.clearItems(),x.Ss.prototype.remove.apply(this,a),this.onRemove(b,a),this},b.prototype.clearItems=function(){this.viewCollection},b}(aa);!function(a){a.mount="css:mount",a.mountBefore="css:mount:before"}(ip||(ip={}));var ae=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),af=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,b)||this;c.config=b.config||{};var d=c.model;return c.listenTo(d,"change",c.render),c.listenTo(d,"destroy remove",c.remove),c.listenTo(d.get("selectors"),"change",c.render),d.setView(c),c}return ae(b,a),Object.defineProperty(b.prototype,"frameView",{get:function(){return this.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"em",{get:function(){return this.model.em},enumerable:!1,configurable:!0}),b.prototype.remove=function(){return a.prototype.remove.call(this),this.model.removeView(this),this},b.prototype.updateStyles=function(){this.render()},b.prototype.tagName=function(){return"style"},b.prototype.render=function(){var a=this.model,b=this.el,c=this.em,d=a.get("important"),e=a.toCSS({important:d}),f={rule:a,ruleView:this,css:e};return null==c||c.trigger(ip.mountBefore,f),b.innerHTML=f.css,null==c||c.trigger(ip.mount,f),this},b}(x.Ss),ag=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ah=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return ag(b,a),b.prototype._createElement=function(){return document.createTextNode("")},b.prototype.render=function(){var a=this.model,b=a.get("important");return this.el.textContent=a.getDeclaration({important:b}),this},b}(af),ai=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),aj=function(a,b){return"".concat(a).concat(b?"-".concat(parseFloat(b)):"")},ak=function(a){function b(b){var c=a.call(this,b)||this;(0,r.bindAll)(c,"sortRules");var d=b.config||{};c.atRules={},c.config=d,c.em=d.em,c.pfx=d.stylePrefix||"",c.className=c.pfx+"rules";var e=c.collection;return c.listenTo(e,"add",c.addTo),c.listenTo(e,"reset",c.render),c}return ai(b,a),b.prototype.addTo=function(a){this.addToCollection(a)},b.prototype.addToCollection=function(a,b){if(this.renderStarted){var c,d,e={model:a,config:this.config};if("keyframes"===a.get("atRuleType")){var f=a.getAtRule(),g=this.atRules[f];if(!g){var h=document.createElement("style");g=document.createTextNode(""),h.appendChild(document.createTextNode("".concat(f,"{"))),h.appendChild(g),h.appendChild(document.createTextNode("}")),this.atRules[f]=g,c=h}d=new ah(e),g.appendData(d.render().el.textContent)}else c=(d=new af(e)).render().el;var i=this.className,j=a.get("mediaText"),k=aj(i),l=k;if(j&&(l=aj(i,this.getMediaWidth(j))),c){var m=b||this.el,n=void 0;try{n=m.querySelector("#".concat(l))}catch(a){}n||(n=m.querySelector("#".concat(k))),null==n||n.appendChild(c)}return c}},b.prototype.getMediaWidth=function(a){return a&&a.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},b.prototype.sortRules=function(a,b){var c=-1!==(this.em.getConfig().mediaCondition||"").indexOf("min-width");return c?(c?a:b)-(c?b:a):0},b.prototype.render=function(){var a=this;this.renderStarted=!0,this.atRules={};var b=this.em,c=this.$el,d=this.collection,e=this.className,f=document.createDocumentFragment();c.empty();var g=b.Devices.getAll().pluck("priority").sort(this.sortRules);return g.every(function(a){return a})&&g.unshift(0),g.forEach(function(a){return f.appendChild((0,ab.a_)("div",{id:aj(e,a)}))}),d.each(function(b){return a.addToCollection(b,f)}),c.append(f),c.attr("class",e),this},b}(x.Ss);!function(a){a.variable="data-variable",a.condition="data-condition",a.conditionTrue="data-condition-true-content",a.conditionFalse="data-condition-false-content",a.collection="data-collection",a.collectionItem="data-collection-item"}(iq||(iq={})),(ir||(ir={})).rootData="__rootData",function(a){a.string="string",a.number="number",a.boolean="boolean",a.date="date",a.json="json",a.relation="relation"}(is||(is={})),function(a){a.add="data:add",a.addBefore="data:add:before",a.remove="data:remove",a.removeBefore="data:remove:before",a.update="data:update",a.path="data:path",a.pathSource="data:pathSource:",a.providerLoad="data:provider:load",a.providerLoadBefore="data:provider:load:before",a.providerLoadError="data:provider:load:error",a.providerLoadAll="data:provider:loadAll",a.providerLoadAllBefore="data:provider:loadAll:before",a.all="data"}(it||(it={}));var al=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),am=function(){return(am=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},an=iq.variable,ao=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.em=c.em,d.collectionsStateMap=c.collectionsStateMap,d}return al(b,a),b.prototype.defaults=function(){return{type:an,defaultValue:"",path:"",collectionId:void 0,variableType:void 0,asPlainText:void 0}},Object.defineProperty(b.prototype,"path",{get:function(){var a;return null!=(a=this.get("path"))?a:""},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"defaultValue",{get:function(){var a;return null!=(a=this.get("defaultValue"))?a:""},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"collectionId",{get:function(){return this.get("collectionId")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"variableType",{get:function(){return this.get("variableType")},enumerable:!1,configurable:!0}),b.prototype.resolvesFromCollection=function(){return!!this.collectionId},b.prototype.updateCollectionsStateMap=function(a){this.collectionsStateMap=a,this.trigger("change")},b.prototype.getResolverPath=function(){var a;if(this.resolvesFromCollection()){var b=this.resolveCollectionVariable();return!!a1(b)&&(null!=(a=b.path)?a:"")}return this.path},b.prototype.toJSON=function(b){var c=this.defaults(),d=Object.fromEntries(Object.entries(a.prototype.toJSON.call(this,b)).filter(function(a){var b=a[0];return a[1]!==c[b]}));return am(am({},d),{type:an})},b.prototype.getDataValue=function(){var a={em:this.em,collectionsStateMap:this.collectionsStateMap};return b.resolveDataResolver({path:this.path,defaultValue:this.defaultValue,collectionId:this.collectionId,variableType:this.variableType},a)},b.resolveDataSourceVariable=function(a,b){var c,d;return b.em.DataSources.getValue(null!=(c=a.path)?c:"",null!=(d=a.defaultValue)?d:"")},b.resolveDataResolver=function(a,c){var d,e,f,g;if(a.collectionId){var h=b.resolveCollectionVariable(a,c);return a1(h)?b.resolveDataSourceVariable({path:null!=(d=h.path)?d:"",defaultValue:null!=(e=a.defaultValue)?e:""},{em:c.em}):h}return b.resolveDataSourceVariable({path:null!=(f=a.path)?f:"",defaultValue:null!=(g=a.defaultValue)?g:""},{em:c.em})},b.prototype.resolveCollectionVariable=function(){var a=this.em,c=this.collectionsStateMap;return b.resolveCollectionVariable(this.attributes,{em:a,collectionsStateMap:c})},b.resolveCollectionVariable=function(a,c){var d,e,f=a.collectionId,g=void 0===f?"":f,h=a.variableType,i=a.path,j=a.defaultValue,k=void 0===j?"":j,l=c.em,m=c.collectionsStateMap;if(!m)return k;var n=m[g];return n?h?"currentItem"===h?null!=(d=b.resolveCurrentItem(n,i,g,l))?d:k:null!=(e=n[h])?e:k:(l.logError("Missing collection variable type for collection: ".concat(g)),k):k},b.resolveCurrentItem=function(a,b,c,d){var e=a.currentItem;return e?e.type===an?{type:an,path:e.path?"".concat(e.path,".").concat(b):b}:!b||e[b]?b?e[b]:e:void 0:void d.logError("Current item is missing for collection: ".concat(c))},b}(x.Kx),ap=function(){function a(a){var b=this;this.listeners=[],this.model=new x.Kx,this.onChange=function(){var a=b.resolver.getDataValue();b.onUpdate(a)},this.em=a.em,this.resolver=a.resolver,this.onUpdate=a.onUpdate,this.listenToResolver()}return a.prototype.createListener=function(a,b,c){return void 0===c&&(c=this.onChange),{obj:a,event:b,callback:c}},a.prototype.listenToResolver=function(){var a=this.resolver,b=this.model;this.removeListeners();var c=[];switch(a.attributes.type){case an:c=this.listenToDataVariable(a);break;case aD:c=this.listenToConditionalVariable(a)}c.forEach(function(a){return b.listenTo(a.obj,a.event,a.callback)}),this.listeners=c},a.prototype.listenToConditionalVariable=function(a){return[{obj:a,event:aE,callback:this.onChange}]},a.prototype.listenToDataVariable=function(a){var b=this,c=this.em,d=[],e=function(){b.listenToResolver(),b.onChange()};d.push(this.createListener(a,"change",e));var f=a.getResolverPath();if(!f)return d;var g=(0,s.stringToPath)(f||"").join("."),h=c.DataSources.fromPath(f),i=h[0],j=h[1];return i&&d.push(this.createListener(i.records,"add remove reset",e)),j&&d.push(this.createListener(j,"change")),d.push(this.createListener(c.DataSources.all,"add remove reset",e),this.createListener(c,"".concat(it.path,":").concat(g)),this.createListener(c,it.path,function(a){var c=a.path;c!==f&&c.startsWith(f)&&b.onChange()})),d},a.prototype.removeListeners=function(){var a=this;this.listeners.forEach(function(b){return a.model.stopListening(b.obj,b.event,b.callback)}),this.listeners=[]},a.prototype.destroy=function(){this.removeListeners()},a}(),aq=function(){function a(a,b,c){this.operator=a,this.statements=b,this.opts=c}return a.prototype.evaluate=function(){var a=this,b=this.statements.map(function(b){return new aB({condition:b},a.opts).evaluate()});return this.operator.evaluate(b)},a}(),ar=function(){function a(a,b){this.operationString=a,this.em=b.em}return a.prototype.getOperations=function(){var a;return Object.keys(a=this.operationsEnum).filter(function(a){return isNaN(Number(a))}).map(function(b){return a[b]})},a}(),as=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){a.equals="equals",a.isTruthy="isTruthy",a.isFalsy="isFalsy",a.isDefined="isDefined",a.isNull="isNull",a.isUndefined="isUndefined",a.isArray="isArray",a.isObject="isObject",a.isString="isString",a.isNumber="isNumber",a.isBoolean="isBoolean",a.isDefaultValue="isDefaultValue"}(iu||(iu={}));var at=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.operationsEnum=iu,b}return as(b,a),b.prototype.evaluate=function(a,b){var c;switch(this.operationString){case"equals":return a===b;case"isTruthy":return!!a;case"isFalsy":return!a;case"isDefined":return null!=a;case"isNull":return null===a;case"isUndefined":return void 0===a;case"isArray":return Array.isArray(a);case"isObject":return"object"==typeof a&&null!==a;case"isString":return"string"==typeof a;case"isNumber":return"number"==typeof a;case"isBoolean":return"boolean"==typeof a;case"isDefaultValue":return a instanceof ao&&a.get("defaultValue")===b;default:return null==(c=this.em)||c.logWarning("Unsupported generic operation: ".concat(this.operationString)),!1}},b}(ar),au=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){a.and="and",a.or="or",a.xor="xor"}(iv||(iv={}));var av=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.operationsEnum=iv,b}return au(b,a),b.prototype.evaluate=function(a){if(!(null==a?void 0:a.length))return!1;switch(this.operationString){case iv.and:return a.every(Boolean);case iv.or:return a.some(Boolean);case iv.xor:return 1===a.filter(Boolean).length;default:return this.em.logWarning("Unsupported boolean operation: ".concat(this.operationString)),!1}},b}(ar),aw=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){a.greaterThan=">",a.lessThan="<",a.greaterThanOrEqual=">=",a.lessThanOrEqual="<=",a.equals="=",a.notEquals="!="}(iw||(iw={}));var ax=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.operationsEnum=iw,b}return aw(b,a),b.prototype.evaluate=function(a,b){if("number"!=typeof a)return!1;switch(this.operationString){case iw.greaterThan:return a>b;case iw.lessThan:return a<b;case iw.greaterThanOrEqual:return a>=b;case iw.lessThanOrEqual:return a<=b;case iw.equals:return a===b;case iw.notEquals:return a!==b;default:return this.em.logWarning("Unsupported number operation: ".concat(this.operationString)),!1}},b}(ar),ay=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();!function(a){a.contains="contains",a.startsWith="startsWith",a.endsWith="endsWith",a.matchesRegex="matchesRegex",a.equalsIgnoreCase="equalsIgnoreCase",a.trimEquals="trimEquals"}(ix||(ix={}));var az=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.operationsEnum=ix,b}return ay(b,a),b.prototype.evaluate=function(a,b){if("string"!=typeof a)return!1;switch(this.operationString){case ix.contains:return a.includes(b);case ix.startsWith:return a.startsWith(b);case ix.endsWith:return a.endsWith(b);case ix.matchesRegex:return b||this.em.logWarning("Regex pattern must be provided."),new RegExp(null!=b?b:"").test(a);case ix.equalsIgnoreCase:return a.toLowerCase()===b.toLowerCase();case ix.trimEquals:return a.trim()===b.trim();default:return this.em.logWarning("Unsupported string operation: ".concat(this.operationString)),!1}},b}(ar),aA=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),aB=function(a){function b(b,c){var d,e=a.call(this,b)||this;return e.collectionsStateMap={},e.em=c.em,e.collectionsStateMap=null!=(d=c.collectionsStateMap)?d:{},e}return aA(b,a),b.prototype.evaluate=function(){var a=this.get("condition");if(!a||(0,r.isBoolean)(a))return!!a;var b=this.getOperator();return!!b&&b.evaluate(this.getResolvedLeftValue(),this.getResolvedRightValue())},b.prototype.getDependentDataVariables=function(){var a=this.get("condition");return a?this.extractDataVariables(a):[]},b.prototype.getOperations=function(){var a=this.getOperator();return!a||a instanceof aq?[]:a.getOperations()},b.prototype.updateCollectionStateMap=function(a){this.collectionsStateMap=a},b.prototype.getOperator=function(){var a,b={em:this.em,collectionsStateMap:this.collectionsStateMap},c=this.get("condition");if(!(!c||(0,r.isBoolean)(c))){if(this.isLogicGroup(c)){var d=c.logicalOperator,e=c.statements,f=new av(d,b);a=new aq(f,e,b)}if(this.isExpression(c)){var g=c.left,f=c.operator,h=a2(g,b);a=this.resolveOperator(h,f)}return a}},b.prototype.resolveOperator=function(a,b){var c=this.em;return this.isOperatorInEnum(b,iu)?new at(b,{em:c}):"number"==typeof a?new ax(b,{em:c}):"string"==typeof a?new az(b,{em:c}):void 0},b.prototype.extractDataVariables=function(a){var b=this,c=[];return this.isExpression(a)?(a1(a.left)&&c.push(a.left),a1(a.right)&&c.push(a.right)):this.isLogicGroup(a)&&a.statements.forEach(function(a){return c.push.apply(c,b.extractDataVariables(a))}),c},b.prototype.isLogicGroup=function(a){return a&&void 0!==a.logicalOperator&&Array.isArray(a.statements)},b.prototype.isExpression=function(a){return a&&void 0!==a.left&&"string"==typeof a.operator},b.prototype.isOperatorInEnum=function(a,b){return Object.values(b).includes(a)},b.prototype.resolveExpressionSide=function(a){var b=this.get("condition"),c=this.em,d=this.collectionsStateMap;return b&&"boolean"!=typeof b?b&&"object"==typeof b&&a in b?a2(b[a],{em:c,collectionsStateMap:d}):void 0:b},b.prototype.getResolvedLeftValue=function(){return this.resolveExpressionSide("left")},b.prototype.getResolvedRightValue=function(){return this.resolveExpressionSide("right")},b.prototype.toJSON=function(a){var b=this.get("condition");return"object"==typeof b?JSON.parse(JSON.stringify(b)):b},b}(x.Kx),aC=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),aD="data-condition",aE="data-condition-output-changed",aF=function(a){function b(b,c){var d,e=a.call(this,b,c)||this;e.collectionsStateMap={},e.resolverListeners=[],e._previousEvaluationResult=null,e.em=c.em,e.collectionsStateMap=null!=(d=c.collectionsStateMap)?d:{};var f=b.condition,g=new aB({condition:void 0===f?{}:f},{em:e.em});return e._conditionEvaluator=g,e.listenToDataVariables(),e.listenToPropsChange(),e}return aC(b,a),b.prototype.defaults=function(){return{type:aD,condition:{left:"",operator:ix.equalsIgnoreCase,right:""},ifTrue:{},ifFalse:{}}},b.prototype.getCondition=function(){return this._conditionEvaluator.get("condition")},b.prototype.getIfTrue=function(){return this.get("ifTrue")},b.prototype.getIfFalse=function(){return this.get("ifFalse")},b.prototype.getOperations=function(){return this._conditionEvaluator.getOperations()},b.prototype.setCondition=function(a){this.set("condition",a),this._conditionEvaluator.set("condition",a),this.trigger(aE,this.getDataValue())},b.prototype.setIfTrue=function(a){this.set("ifTrue",a)},b.prototype.setIfFalse=function(a){this.set("ifFalse",a)},b.prototype.isTrue=function(){return this._conditionEvaluator.evaluate()},b.prototype.getDataValue=function(a){void 0===a&&(a=!1);var b={em:this.em,collectionsStateMap:this.collectionsStateMap},c=this.getIfTrue(),d=this.getIfFalse(),e=this.isTrue();return a?e?c:d:e?a2(c,b):a2(d,b)},b.prototype.resolvesFromCollection=function(){return!1},b.prototype.updateCollectionsStateMap=function(a){this.collectionsStateMap=a,this._conditionEvaluator.updateCollectionStateMap(a),this.listenToDataVariables(),this.emitConditionEvaluationChange()},b.prototype.listenToPropsChange=function(){var a=this;this.on("change:condition",this.handleConditionChange.bind(this)),this.on("change:condition change:ifTrue change:ifFalse",function(){a.listenToDataVariables()})},b.prototype.handleConditionChange=function(){this.setCondition(this.get("condition"))},b.prototype.listenToDataVariables=function(){this.cleanupListeners(),this.setupConditionDataVariableListeners(),this.setupOutputDataVariableListeners()},b.prototype.setupConditionDataVariableListeners=function(){var a=this;this._conditionEvaluator.getDependentDataVariables().forEach(function(b){a.addListener(b,function(){a.emitConditionEvaluationChange()})})},b.prototype.setupOutputDataVariableListeners=function(){var a=this.isTrue();this.setupOutputVariableListener(this.getIfTrue(),a),this.setupOutputVariableListener(this.getIfFalse(),!a)},b.prototype.setupOutputVariableListener=function(a,b){var c=this;a1(a)&&this.addListener(a,function(){b&&c.trigger(aE,a)})},b.prototype.addListener=function(a,b){var c=new ap({em:this.em,resolver:new ao(a,{em:this.em,collectionsStateMap:this.collectionsStateMap}),onUpdate:b});this.resolverListeners.push(c)},b.prototype.emitConditionEvaluationChange=function(){var a=this.isTrue();this._previousEvaluationResult!==a&&(this._previousEvaluationResult=a,this.trigger("data-condition-evaluation-changed",a),this.emitOutputValueChange())},b.prototype.emitOutputValueChange=function(){var a=this.getDataValue();this.trigger(aE,a)},b.prototype.cleanupListeners=function(){this.resolverListeners.forEach(function(a){return a.destroy()}),this.resolverListeners=[]},b.prototype.toJSON=function(){var a=this.getIfTrue(),b=this.getIfFalse();return{type:aD,condition:this._conditionEvaluator.toJSON(),ifTrue:a,ifFalse:b}},b}(x.Kx),aG="dataResolver",aH=function(){return(aH=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},aI=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},aJ=function(a){return(0,r.isArray)(a.get(bU))},aK=function(a){return!!a.get(bV)},aL=function(a){return!!(aJ(a)||aK(a))},aM=function(a){var b=a.parent();return aL(a)&&(!b||!aL(b))},aN=function(a){a.__symbReady||(a.on("change",a.__upSymbProps),a.__symbReady=!0)},aO=function(a){var b=a.get(bV);if(b&&(0,r.isString)(b)){var c=a.__getAllById()[b];c?(b=c,a.set(bV,c)):b=0}return b||void 0},aP=function(a){var b=null==a?void 0:a.get(bU);return b&&(0,r.isArray)(b)&&(b.forEach(function(c,d){c&&(0,r.isString)(c)&&(b[d]=a.__getAllById()[c])}),b=b.filter(function(a){return a&&!(0,r.isString)(a)})),b||void 0},aQ=function(a,b){void 0===b&&(b="");var c=null==a?void 0:a.get(bW),d=b.split(":")[0],e=b!==d?[b,d]:[b];return!0===c||(0,r.isArray)(c)&&e.some(function(a){return c.indexOf(a)>=0})},aR=function(a,b){void 0===b&&(b={});var c=[],d=b.changed;if(b.fromInstance||b.noPropagate||b.fromUndo||d&&aQ(a,d))return c;var e=aP(a)||[],f=aO(a);return(f?aI([f],aP(f)||[],!0):e).filter(function(b){return b!==a}).filter(function(a){return!(d&&aQ(a,d))})},aS=function(a,b){for(var c=a,d=a.parent(b);d&&aL(d);)c=d,d=d.parent(b);return c},aT=function(a,b){void 0===b&&(b={});var c=aO(a),d=c&&aP(c);!b.skipRefs&&d&&c.set(bU,d.filter(function(b){return b!==a})),a.set(bV,0),a.components().forEach(function(a){return aT(a,b)})},aU=function(a,b,c,d){void 0===d&&(d={});var e=aO(a),f=aP(a);(e||f)&&a.em.log(b,{model:a,toUp:c,context:"symbols",opts:d})},aV=function(a,b){void 0===b&&(b={});var c=a.changedAttributes();if(c){var d=a.dataResolverWatchers.getProps(c);if(aW(d),!(0,s.isEmptyObj)(d)){var e=aR(a,b);d=aX(d,a),aU(a,"props",e,{opts:b,changed:d}),e.forEach(function(c){var e=aX(d,c);c.set(e,aH({fromInstance:a},b))})}}},aW=function(a){var b,c;["status","open",bU,bV,bW].forEach(function(b){return delete a[b]}),null==(b=a.attributes)||delete b.id,(0,s.isEmptyObj)(null!=(c=a.attributes)?c:{})&&delete a.attributes},aX=function(a,b){var c=aH({},a);return(0,r.keys)(a).forEach(function(d){aZ(a,d,b)||delete c[d]}),c},aY=function(a,b){var c,d;switch(b){case"attributes":case"style":return!!(d=a[b])&&Object.values(d).some(function(a){return!!(null==a?void 0:a.collectionId)});default:return!!(null==(c=a[b])?void 0:c.collectionId)}},aZ=function(a,b,c){var d=aY(a,b);return!aQ(c,b)||d},a$=function(a,b){void 0===b&&(b={});var c=aR(a,b);aU(a,"classes",c,{opts:b}),c.forEach(function(b){b.set("classes",a.get("classes"),{fromInstance:a})}),a.__changesUp(b)},a_=function(a,b,c,d){var e=d||c||{},f={fromInstance:e.fromInstance,fromUndo:e.fromUndo},g=b.opt.temporary;if(d)if(d.add){var h=[],i=!!aP(a),j=aR(a,aH(aH({},f),{changed:"components:add"}));if(j.length){var k=aO(b);(h=aI([],h=(k?aP(k):aP(b))||[],!0)).push(k||b)}g||aU(a,"add",j,{opts:d,addedInstances:h.map(function(a){return a.cid}),added:b.cid}),j.forEach(function(c){var e=aS(c),f=h.filter(function(a){var b=aS(a,{prev:1});return e&&b&&b===e})[0]||b.clone({symbol:!0,symbolInv:i});c.append(f,aH({fromInstance:a},d))})}else{var l=aO(b);if(l&&!d.temporary&&l.set(bU,aP(l).filter(function(a){return a!==b})),!aM(b)&&!d.skipRefsUp){var m="components:remove",n=d.index,o=b.parent(),p=aH({fromInstance:b},d),q=aM(b),r=function(a){var b=a.parent();b&&!aQ(b,m)&&a.remove(p)},j=aQ(o,m)?[]:aR(b,f);q&&(j=o&&aR(o,aH(aH({},f),{changed:m})),r=function(a){var b=a.components().at(n);b&&b.remove(aH({fromInstance:o},p))}),g||aU(a,"remove",j,{opts:d,removed:b.cid,isSymbNested:q}),j.forEach(r)}}else{var j=aR(a,aH(aH({},f),{changed:"components:reset"})),s=b.models,t=new Set;aU(a,"reset",j,{components:s}),j.forEach(function(b){var d=b.components(),e=s.map(function(b,c){return a.get(aG)?b.clone({symbol:aL(b)}):!aL(b)||t.has(b)?(t.add(b),b.clone({symbol:!0})):d.at(c)});d.reset(e,aH({fromInstance:a},c))})}a.__changesUp(e)};function a0(a){return"object"==typeof a&&[an,aD].includes(null==a?void 0:a.type)}function a1(a){return(null==a?void 0:a.type)===an}function a2(a,b){return a0(a)?(a1(a)&&ao.resolveDataResolver(a,b),a4(a,b)):a}function a3(a,b){var c,d,e=a.type;switch(e){case an:d=new ao(a,b);break;case aD:d=new aF(a,b);break;default:null==(c=b.em)||c.logWarning("Unsupported resolver type: ".concat(e));return}return d}function a4(a,b){var c=a3(a,b);return null==c?void 0:c.getDataValue()}var a5="text/html";let a6=function(a,b){void 0===b&&(b={});var c,d=new DOMParser,e=b.htmlType||a5,f=e===a5,g=d.parseFromString(f?a:"<div>".concat(a,"</div>"),e);if(f){if(b.asDocument)return g;var h=g.head,i=g.body,j=h.querySelectorAll("script");(0,r.each)(j,function(a){return i.appendChild(a)});var k=[];(0,r.each)(h.children,function(a){return k.push(a)}),(0,r.each)(k,function(a,b){return i.insertBefore(a,i.children[b])}),c=i}else c=g.firstChild;return c};!function(a){a.html="parse:html",a.htmlRoot="parse:html:root",a.htmlBefore="parse:html:before",a.css="parse:css",a.cssBefore="parse:css:before",a.all="parse"}(iy||(iy={}));var a7=function(){return(a7=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};let a8=function(a,b){return void 0===b&&(b={}),{compTypes:[],modelAttrStart:"data-gjs-",getPropAttribute:function(a,b){var c=a.replace(this.modelAttrStart,""),d=(null==b?void 0:b.length)||0,e=null==b?void 0:b.substring(0,1),f=null==b?void 0:b.substring(d-1),g="true"===b||"false"!==b&&b;try{g="{"==e&&"}"==f||"["==e&&"]"==f?JSON.parse(g):g}catch(a){}return{name:c,value:g}},splitPropsFromAttr:function(a){var b=this;void 0===a&&(a={});var c={},d={};return(0,r.each)(a,function(a,e){if(0===e.indexOf(b.modelAttrStart)){var f=b.getPropAttribute(e,a);c[f.name]=f.value}else d[e]=a}),{props:c,attrs:d}},parseStyle:function(a){for(var b={};a.indexOf("/*")>=0;){var c=a.indexOf("/*"),d=a.indexOf("*/"),e=d>-1?d+2:void 0;a=a.replace(a.slice(c,e),"")}for(var f=a.split(";"),g=0,h=f.length;g<h;g++){var i=f[g].trim();if(i){var j=i.split(":"),k=j[0].trim(),l=j.slice(1).join(":").trim();b[k]?((0,r.isArray)(b[k])||(b[k]=[b[k]]),b[k].push(l)):b[k]=l}}return b},parseClass:function(a){for(var b=[],c=a.split(" "),d=0,e=c.length;d<e;d++){var f=c[d].trim();f&&b.push(f)}return b},parseNodeAttr:function(c,d){for(var e,f,g=d||{},h=c.attributes||[],i=h.length,j=!!(null==(e=null==b?void 0:b.optionsHtml)?void 0:e.convertDataGjsAttributesHyphens),k=j&&!!g.type&&(0,r.result)(null==(f=null==a?void 0:a.Components.getType(g.type))?void 0:f.model.prototype,"defaults")||{},l=0;l<i;l++){var m=h[l].nodeName,n=h[l].nodeValue;if("style"==m)g.style=this.parseStyle(n);else if("class"==m)g.classes=this.parseClass(n);else if("contenteditable"==m)continue;else if(0===m.indexOf(this.modelAttrStart)){var o=this.getPropAttribute(m,n),p=o.name;if(j&&!(p in k)){var q=(0,ab._I)(p);p=q in k?q:p}g[p]=o.value}else""===n&&!0===c[m]&&(n=!0),g.attributes||(g.attributes={}),g.attributes[m]=n}return g},detectNode:function(a,b){void 0===b&&(b={});var c,d=this.compTypes,e={};if(d){var f=null==(c=a.getAttribute)?void 0:c.call(a,"".concat(this.modelAttrStart,"type"));if(f)e={type:f};else for(var g=0;g<d.length;g++){var h=d[g],i=h.model.isComponent(a,b);if(i){"object"!=typeof i&&(i={type:h.id}),e=i;break}}}return e},parseNode:function(a,c){void 0===c&&(c={});var d,e=(null==(d=a.content)?void 0:d.childNodes)||a.childNodes,f=e.length,g=this.detectNode(a,c);if(!g.tagName){var h=a.tagName||"",i=a.namespaceURI||"";g.tagName=h&&"http://www.w3.org/1999/xhtml"===i?h.toLowerCase():h}if(g=this.parseNodeAttr(a,g),f||"/>"!=="".concat(a.outerHTML).slice(-2)||(g.void=!0),f&&!g.components&&!c.skipChildren){var j=e[0];1===f&&3===j.nodeType?(g.type||(g.type="text"),g.components={type:"textnode",content:j.nodeValue}):g.components=this.parseNodes(a,a7(a7({},c),{inSvg:c.inSvg||"svg"===g.type}))}var k=g.components;if(!g.type&&(null==k?void 0:k.length)){for(var l=b.textTypes,m=void 0===l?[]:l,n=b.textTags,o=void 0===n?[]:n,p=!0,q=!1,r=0;r<k.length;r++){var s=k[r],t=s.type;if(!m.includes(t)&&!o.includes(s.tagName)){p=!1;break}"textnode"===t&&(q=!0)}p&&q&&(g.type="text")}return g},parseNodes:function(a,b){void 0===b&&(b={});for(var c,d=[],e=(null==(c=a.content)?void 0:c.childNodes)||a.childNodes,f=e.length,g=0;g<f;g++){var h=e[g],i=d[d.length-1],j=this.parseNode(h,b);if("textnode"===j.type){if((null==i?void 0:i.type)==="textnode"){i.content+=j.content;continue}if(!b.keepEmptyTextNodes){var k=h.nodeValue||"",l=0===g||g===f-1,m=k.includes("\n");if(" "!=k&&!k.trim()&&(l||m))continue}}!j.tagName&&(0,r.isUndefined)(j.content)||d.push(j)}return d},parse:function(c,d,e){void 0===e&&(e={});var f,g,h,i=(null==a?void 0:a.get("Config"))||{},j=null==a?void 0:a.Parser,k={html:[]},l=a7(a7(a7({},b.optionsHtml),{htmlType:(null==(f=b.optionsHtml)?void 0:f.htmlType)||b.htmlType}),e),m=a7(a7({},l),{asDocument:this.__checkAsDocument(c,l)}),n=a7(a7({},b),m),o=m.preParser,p=m.asDocument,q={input:(0,r.isFunction)(o)?o(c,{editor:null==a?void 0:a.getEditor()}):c};null==j||j.__emitEvent(iy.htmlBefore,q);var s=q.input,t=(0,r.isFunction)(n.parserHtml)?n.parserHtml(s,m):a6(s,m),u=t;p&&(u=t.documentElement,k.doctype=(0,ab.LJ)(t.doctype));var v=u.querySelectorAll("script"),w=v.length;if(!((0,r.isUndefined)(i.allowScripts)?m.allowScripts:i.allowScripts))for(;w--;)null==(g=v[w].parentNode)||g.removeChild(v[w]);if(m.allowUnsafeAttr&&m.allowUnsafeAttrValue||this.__sanitizeNode(u,m),d){for(var x=u.querySelectorAll("style"),y=x.length,z="";y--;)z=x[y].innerHTML+z,null==(h=x[y].parentNode)||h.removeChild(x[y]);z&&(k.css=d.parse(z))}null==j||j.__emitEvent(iy.htmlRoot,{input:s,root:u});var A=[];if(p)k.head=this.parseNode(t.head,n),k.root=this.parseNodeAttr(u),A=this.parseNode(t.body,n);else{var B=this.parseNodes(u,n);A=1!==B.length||n.returnArray?B:B[0]}return k.html=A,null==j||j.__emitEvent(iy.html,{input:s,output:k,options:m}),k},__sanitizeNode:function(a,b){var c=this,d=a.attributes||[],e=a.childNodes||[],f=[];(0,r.each)(d,function(a){var c=a.nodeName||"",d=a.nodeValue||"";!b.allowUnsafeAttr&&c.startsWith("on")&&f.push(c),!b.allowUnsafeAttrValue&&d.startsWith("javascript:")&&f.push(c)}),f.map(function(b){return a.removeAttribute(b)}),(0,r.each)(e,function(a){return c.__sanitizeNode(a,b)})},__checkAsDocument:function(a,b){return(0,s.isDef)(b.asDocument)?b.asDocument:(0,r.isFunction)(b.detectDocument)?!!b.detectDocument(a):b.detectDocument?a.toLowerCase().trim().startsWith("<!doctype"):void 0}}};var a9=function(){return(a9=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},ba=function(){function a(a,b,c){this.model=a,this.updateFn=b,this.resolverListeners={},this.em=c.em}return a.prototype.bindModel=function(a){this.model=a},a.prototype.setDataValues=function(a,b){return void 0===b&&(b={}),b.skipWatcherUpdates||b.fromDataSource||this.removeListeners(),this.addDataValues(a,b)},a.prototype.addDataValues=function(a,b){if(void 0===b&&(b={}),!a)return{};var c=this.evaluateValues(a);return b.skipWatcherUpdates||b.fromDataSource||this.updateListeners(a),c},a.prototype.onCollectionsStateMapUpdate=function(){var a=this,b=this.getValuesResolvingFromCollections();b.length&&Object.entries(this.addDataValues(this.getValuesOrResolver(Object.fromEntries(b.map(function(a){return[a,""]}))))).forEach(function(b){var c=b[0],d=b[1];return a.updateFn(a.model,c,d)})},Object.defineProperty(a.prototype,"collectionsStateMap",{get:function(){var a,b=this.model;return null!=(a=null==b?void 0:b.collectionsStateMap)?a:{}},enumerable:!1,configurable:!0}),a.prototype.updateListeners=function(a){var b=this,c=this.em,d=this.collectionsStateMap;this.removeListeners(Object.keys(a));for(var e=Object.keys(a),f=this,g=0;g<e.length;g++)!function(g){var h=e[g],i=a[h];if(a0(i)){var j=a3(i,{em:c,collectionsStateMap:d});f.resolverListeners[h]=new ap({em:c,resolver:j,onUpdate:function(a){return b.updateFn(b.model,h,a)}})}}(g)},a.prototype.evaluateValues=function(a){for(var b=this.em,c=this.collectionsStateMap,d=a9({},a),e=Object.keys(a),f=0;f<e.length;f++){var g=e[f],h=a[g];a0(h)&&(d[g]=a4(h,{em:b,collectionsStateMap:c}))}return d},a.prototype.removeListeners=function(a){var b=this,c=a||Object.keys(this.resolverListeners);return c.forEach(function(a){var c,d;b.resolverListeners[a]&&(null==(d=(c=b.resolverListeners[a]).destroy)||d.call(c),delete b.resolverListeners[a])}),c},a.prototype.getValuesOrResolver=function(a){if(!a)return{};for(var b=a9({},a),c=Object.keys(b),d=0;d<c.length;d++){var e=c[d],f=this.resolverListeners[e];f&&(b[e]=f.resolver.toJSON())}return b},a.prototype.getAllDataResolvers=function(){for(var a={},b=Object.keys(this.resolverListeners),c=0;c<b.length;c++){var d=b[c];a[d]=this.resolverListeners[d].resolver.toJSON()}return a},a.prototype.getValuesResolvingFromCollections=function(){var a=this;return Object.keys(this.resolverListeners).filter(function(b){return a.resolverListeners[b].resolver.resolvesFromCollection()})},a.prototype.destroy=function(){this.removeListeners()},a}(),bb=function(){return(bb=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},bc=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},bd={fromDataSource:!0,avoidStore:!0},be="__data_values",bf=function(){function a(a,b){var c=this;this.model=a,this.options=b,this.onPropertyUpdate=function(a,b,c){null==a||a.set(b,c,bd)},this.onAttributeUpdate=function(a,b,d){var e;c.isComponent(a)&&(null==a||a.addAttributes(((e={})[b]=d,e),bd))},this.onStyleUpdate=function(a,b,c){var d;null==a||a.addStyle(((d={})[b]=c,d),bb(bb({},bd),{partial:!0,avoidStore:!0}))},this.propertyWatcher=new ba(a,this.onPropertyUpdate,b),this.attributeWatcher=new ba(a,this.onAttributeUpdate,b),this.styleWatcher=new ba(a,this.onStyleUpdate,b)}return a.prototype.bindModel=function(a){this.model=a,this.watchers.forEach(function(b){return b.bindModel(a)}),this.updateSymbolOverride()},a.prototype.addProps=function(a,b){void 0===b&&(b={});var c,d=null!=(c=a[be])?c:{},e=this.filterProps(a),f=bb(bb({},a),this.propertyWatcher.addDataValues(bb(bb({},e),d.props),b));return this.shouldProcessProp("attributes",a,d)&&(f.attributes=this.processAttributes(a,d,b)),this.shouldProcessProp("style",a,d)&&(f.style=this.processStyles(a,d,b)),b.skipWatcherUpdates||b.fromDataSource||(this.updateSymbolOverride(),f[be]={props:this.propertyWatcher.getAllDataResolvers(),style:this.styleWatcher.getAllDataResolvers(),attributes:this.attributeWatcher.getAllDataResolvers()}),f},a.prototype.getProps=function(a){var b=this.getValueOrResolver("props",a),c=bb({},b);return delete c[be],(0,r.isEmpty)(a.attributes)||(c.attributes=this.getValueOrResolver("attributes",a.attributes)),(0,r.isObject)(a.style)&&!(0,r.isEmpty)(a.style)&&(c.style=this.getValueOrResolver("styles",a.style)),c},a.prototype.getValueOrResolver=function(a,b){var c;switch(a){case"props":c=this.propertyWatcher;break;case"styles":c=this.styleWatcher;break;case"attributes":c=this.attributeWatcher;break;default:var d=this.options.em;return null==d||d.logError("Invalid target '".concat(a,"'. Must be 'props', 'styles', or 'attributes'.")),{}}return b?c.getValuesOrResolver(b):c.getAllDataResolvers()},a.prototype.removeAttributes=function(a){this.attributeWatcher.removeListeners(a),this.updateSymbolOverride()},a.prototype.disableStyles=function(){this.styleWatcher.removeListeners(),this.styleWatcher.destroy()},a.prototype.onCollectionsStateMapUpdate=function(){this.watchers.forEach(function(a){return a.onCollectionsStateMapUpdate()})},a.prototype.destroy=function(){this.watchers.forEach(function(a){return a.destroy()})},Object.defineProperty(a.prototype,"watchers",{get:function(){return[this.propertyWatcher,this.styleWatcher,this.attributeWatcher]},enumerable:!1,configurable:!0}),a.prototype.isComponent=function(a){return a instanceof bZ},a.prototype.shouldProcessProp=function(a,b,c){var d="attributes"===a?this.attributeWatcher:this.styleWatcher,e=c[a],f=!!b[a],g=e&&Object.keys(e).length>0,h=e&&Object.keys(d.getAllDataResolvers()).length>0;return f||g||h},a.prototype.updateSymbolOverride=function(){var a,b=this.model;if(this.isComponent(b)&&aL(b)&&Object.keys(null!=(a=null==b?void 0:b.collectionsStateMap)?a:{}).length){var c=this.propertyWatcher.getValuesResolvingFromCollections(),d=this.attributeWatcher.getValuesResolvingFromCollections(),e=bc(["locked","layerable",be],c,!0);Object.keys(d).length&&e.push("attributes"),aR(b).forEach(function(a){a.setSymbolOverride(e,{fromDataSource:!0})}),b.setSymbolOverride(e,{fromDataSource:!0})}},a.prototype.filterProps=function(a){var b=["components","dataResolver","status","state","open",bW,be];return Object.fromEntries(Object.entries(a).filter(function(a){var c=a[0];return!b.includes(c)}))},a.prototype.processAttributes=function(a,b,c){var d;return void 0===c&&(c={}),this.attributeWatcher.setDataValues(bb(bb({},a.attributes),null!=(d=b.attributes)?d:{}),c)},a.prototype.processStyles=function(a,b,c){var d;return(void 0===c&&(c={}),"string"==typeof a)?(this.styleWatcher.removeListeners(),a):this.styleWatcher.setDataValues(bb(bb({},a.style),null!=(d=b.style)?d:{}),c)},a}(),bg=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),bh=function(){return(bh=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},bi=a8(),bj=function(a){return(0,r.isArray)(a)?a[a.length-1]:a},bk=function(a){function b(b,c){void 0===c&&(c={});var d=this,e=new bf(void 0,{em:c.em});return(d=a.call(this,b,bh(bh({},c),{dataResolverWatchers:e}))||this).views=[],d.collectionsStateMap={},e.bindModel(d),d.dataResolverWatchers=e,d.em=c.em,d.opt=c,d}return bg(b,a),b.prototype.get=function(b,c){return(null==c?void 0:c.skipResolve)?this.dataResolverWatchers.getValueOrResolver("props")[b]:a.prototype.get.call(this,b)},b.prototype.set=function(b,c,d){var e,f,g,h,i={skipWatcherUpdates:!1,fromDataSource:!1};"object"==typeof b?(g=b,h=c||i):"string"==typeof b?((e={})[b]=c,g=e,h=d||i):(g={},h=i),this.dataResolverWatchers=null!=(f=this.dataResolverWatchers)?f:h.dataResolverWatchers;var j=this.dataResolverWatchers.addProps(g,h);return a.prototype.set.call(this,j,h)},b.prototype.parseStyle=function(a){return bi.parseStyle(a)},b.prototype.extendStyle=function(a){return bh(bh({},this.getStyle("",{skipResolve:!0})),a)},b.prototype.getStyle=function(a,b){void 0===b&&(b={});var c=this.get("style"),d=(0,r.isString)(c)?this.parseStyle(c):(0,r.isObject)(c)?bh({},c):{};delete d.__p;var e=!a||""===a||(0,r.isObject)(a);if(!b.skipResolve)return e?d:d[a];var f=this.dataResolverWatchers.getValueOrResolver("styles",d);return e?f:f[a]},b.prototype.setStyle=function(a,b){var c=this;void 0===a&&(a={}),void 0===b&&(b={}),(0,r.isString)(a)&&(a=this.parseStyle(a));var d=this.getStyle("",{skipResolve:!0});b.partial||b.avoidStore?(b.avoidStore=!0,a.__p=!0):delete a.__p;var e=bh({},a),f=bh({},e);(0,r.keys)(f).forEach(function(a){if(""===f[a])return void delete f[a]}),this.set({style:f},b),f=this.attributes.style;var g=Object.keys((0,s.shallowDiff)(d,e)).reduce(function(a,b){var c;return bh(bh({},a),((c={})[b]=f[b],c))},{});return delete g.__p,(0,r.keys)(g).forEach(function(a){var d=c.em;!b.noEvent&&(c.trigger("change:style:".concat(a)),d&&(d.trigger("styleable:change",c,a,b),d.trigger("styleable:change:".concat(a),c,a,b)))}),f},b.prototype.getView=function(a){var b=this.views,c=this.em,d=a||(null==c?void 0:c.getCurrentFrameModel());return d?b.find(function(a){return a.frameView===d.view}):b[0]},b.prototype.setView=function(a){var b=this.views;b.includes(a)||b.push(a)},b.prototype.removeView=function(a){var b=this.views;b.splice(b.indexOf(a),1)},b.prototype.updateView=function(){this.views.forEach(function(a){return a.updateStyles()})},b.prototype.addStyle=function(a,b,c){var d;void 0===b&&(b=""),void 0===c&&(c={}),"string"==typeof a?((d={})[a]=b,a=d):c=b||{},c.addStyle=a,a=this.extendStyle(a),this.setStyle(a,c)},b.prototype.removeStyle=function(a){var b=this.getStyle();delete b[a],this.setStyle(b)},b.prototype.styleToString=function(a){void 0===a&&(a={});var b=[],c=a.style||this.getStyle(a),d=a.important,e=function(a){var e=(0,r.isArray)(d)?d.indexOf(a)>=0:d;if("__"===a.substring(0,2))return"continue";var f=c[a];((0,r.isArray)(f)?f:[f]).forEach(function(c){var d="".concat(c).concat(e?" !important":"");d&&b.push("".concat(a,":").concat(d,";"))})};for(var f in c)e(f);return b.join("")},b.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},b.prototype.getSelectorsString=function(a){return this.selectorsToString?this.selectorsToString(a):this.getSelectors().getFullString()},b.prototype.onCollectionsStateMapUpdate=function(a){this.collectionsStateMap=a,this.dataResolverWatchers.onCollectionsStateMapUpdate()},b.prototype.clone=function(a,b){var c=this.dataResolverWatchers.getProps(this.attributes),d=bh(bh({},c),a),e=bh(bh({},this.opt),b);return new this.constructor(d,e)},b.prototype.toJSON=function(b,c){if(null==b?void 0:b.fromUndo)return bh({},a.prototype.toJSON.call(this,b));var d=bh(bh({},this.attributes),c);return this.dataResolverWatchers.getProps(d)},b}(x.Kx),bl=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),bm=function(a){function b(c,d){void 0===d&&(d={});var e=a.call(this,c,d)||this,f=d.config,g=e.get("name"),h=e.get("label");g?h||e.set("label",g):e.set("name",h);var i=e.get("name"),j=(void 0===f?{}:f).escapeName,k=j?j(i):b.escapeName(i);return e.set("name",k),e.em=d.em,e}return bl(b,a),b.prototype.defaults=function(){return{name:"",label:"",type:1,active:!0,private:!1,protected:!1,_undo:!0}},b.prototype.isId=function(){return 2===this.get("type")},b.prototype.isClass=function(){return 1===this.get("type")},b.prototype.getFullName=function(a){void 0===a&&(a={});var b=a.escape,c=this.get("name"),d="";switch(this.get("type")){case 1:d=".";break;case 2:d="#"}return d+(b?b(c):c)},b.prototype.toString=function(){return this.getFullName()},b.prototype.getName=function(){return this.get("name")||""},b.prototype.getLabel=function(){return this.get("label")||""},b.prototype.setLabel=function(a){return this.set("label",a)},b.prototype.getActive=function(){return!!this.get("active")},b.prototype.setActive=function(a){return this.set("active",a)},b.prototype.toJSON=function(a){void 0===a&&(a={});var b=this.em,c=x.Kx.prototype.toJSON.call(this,[a]),d=(0,r.result)(this,"defaults");if(null==b?void 0:b.getConfig().avoidDefaults){(0,r.forEach)(d,function(a,b){c[b]===a&&delete c[b]}),c.label===c.name&&delete c.label;var e=(0,r.keys)(c).length;1===e&&c.name&&(c=c.name),2===e&&c.name&&c.type&&(c=this.getFullName())}return c},b.escapeName=function(a){return"".concat(a).trim().replace(/\s+/g,"-")},b.TYPE_CLASS=1,b.TYPE_ID=2,b}(x.Kx);bm.prototype.idAttribute="name";var bn=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),bo=function(a,b){return a.reduce(function(c,d,e){return c.concat(bo(a.slice(e+1),"".concat(b).concat(d)))},[b])},bp=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return bn(b,a),b.prototype.modelId=function(a){return"".concat(a.name,"_").concat(a.type||bm.TYPE_CLASS)},b.prototype.getStyleable=function(){return(0,r.filter)(this.models,function(a){return a.getActive()&&!a.get("private")})},b.prototype.getValid=function(a){var b=(void 0===a?{}:a).noDisabled;return(0,r.filter)(this.models,function(a){return!a.get("private")}).filter(function(a){return b?a.get("active"):1})},b.prototype.getFullString=function(a,b){void 0===b&&(b={});var c=[];return(a||this).forEach(function(a){return c.push(a.getFullName(b))}),b.sort&&c.sort(),c.join("").trim()},b.prototype.getFullName=function(a){void 0===a&&(a={});var b=a.combination,c=a.array,d=[],e=this.map(function(b){return b.getFullName(a)}).sort();return b?e.forEach(function(a,b){d=d.concat(bo(e.slice(b+1),a))}):d=e,c?d:b?d.join(","):d.join("")},b}(x.pM);bp.prototype.model=bm;var bq=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),br=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},bs=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return bq(b,a),b.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},b.prototype.getId=function(){return this.get("id")},b.prototype.getLabel=function(){return this.get("label")},b}(x.Kx);function bt(a){var b=new Set,c=new Map,d={items:[]};return a.forEach(function(a){var e=a.category;if(e){b.add(e);var f=c.get(e);f?f.push(a):c.set(e,[a])}else d.items.push(a)}),br(br([],Array.from(b).map(function(a){return{category:a,items:c.get(a)||[]}}),!0),[d],!1)}var bu=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),bv="category",bw=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return bu(b,a),b.prototype.initCategory=function(a){var b=a.get(bv),c=b instanceof bs;if(b&&!c){(0,r.isString)(b)?b={id:b,label:b}:(0,s.isObject)(b)&&!b.id&&(b.id=b.label);var d=this.getCategories().add(b);return a.set(bv,d,{silent:!0}),d}if(c){var d=b;return this.getCategories().add(d),d}},b}(x.pM),bx=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),by=function(a){function b(b,c){void 0===c&&(c={});var d=a.call(this,b,c)||this,e=c.events,f=c.em,g=null==e?void 0:e.update;return f&&g&&d.on("change",function(a,b){return f.trigger(g,{category:a,changes:a.changedAttributes(),options:b})}),d}return bx(b,a),b.prototype.add=function(b,c){return((0,r.isArray)(b)?b:[b]).forEach(function(a){return a&&(a.id=(0,s.normalizeKey)("".concat(a.id)))}),a.prototype.add.call(this,b,c)},b.prototype.get=function(b){return a.prototype.get.call(this,(0,r.isString)(b)?(0,s.normalizeKey)(b):b)},b}(x.pM);by.prototype.model=bs,function(a){a.select="trait:select",a.value="trait:value",a.categoryUpdate="trait:category:update",a.custom="trait:custom",a.all="trait"}(iz||(iz={}));let bz=iz;var bA=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),bB=function(){return(bB=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},bC=function(a){function b(b,c){var d=a.call(this,b)||this,e=d.attributes,f=e.target,g=e.name;return d.get("id")||d.set("id",g),f&&d.setTarget(f),d.em=c,d}return bA(b,a),b.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(b.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"category",{get:function(){var a=this.get("category");return a instanceof bs?a:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),b.prototype.setTarget=function(a){if(a){var b=this.attributes,c=b.name,d=b.changeProp,e=b.value,f=b.getValue;this.target=a,this.unset("target"),this.listenTo(a,d?"change:".concat(c):"change:attributes:".concat(c),this.targetUpdated);var g=e||(f?void 0:this.getValue());(0,r.isUndefined)(g)||this.set({value:g},{silent:!0})}},b.prototype.getId=function(){return this.get("id")},b.prototype.getType=function(){return this.get("type")},b.prototype.getName=function(){return this.get("name")},b.prototype.getLabel=function(a){void 0===a&&(a={});var b,c=a.locale,d=this.getId(),e=this.get("label")||this.getName();return(void 0===c||c)&&(null==(b=this.em)?void 0:b.t("traitManager.traits.labels.".concat(d)))||e},b.prototype.getValue=function(a){return this.getTargetValue(a)},b.prototype.setValue=function(a,b){var c=this;void 0===b&&(b={});var d=this.component,e=this.em,f=b.partial,g={},h=this.attributes.setValue;if(h)return void h({value:a,component:d,editor:null==e?void 0:e.getEditor(),trait:this,partial:!!f,options:b,emitUpdate:function(){return c.targetUpdated()}});f&&(g.avoidStore=!0),this.setTargetValue(a,g)},b.prototype.getDefault=function(){return this.get("default")},b.prototype.getOptions=function(){return this.get("options")||[]},b.prototype.getOption=function(a){var b=this,c=(0,s.isDef)(a)?a:this.getValue();return this.getOptions().filter(function(a){return b.getOptionId(a)===c})[0]},b.prototype.getOptionId=function(a){return a.id||a.value},b.prototype.getOptionLabel=function(a,b){void 0===b&&(b={});var c,d=b.locale,e=(0,r.isString)(a)?this.getOption(a):a,f=this.getOptionId(e),g=e.label||e.name||f,h=this.getName();return(void 0===d||d)&&(null==(c=this.em)?void 0:c.t("traitManager.traits.options.".concat(h,".").concat(f)))||g},b.prototype.getCategoryLabel=function(a){void 0===a&&(a={});var b=this.em,c=this.category,d=a.locale,e=null==c?void 0:c.getId(),f=null==c?void 0:c.getLabel();return(void 0===d||d)&&(null==b?void 0:b.t("traitManager.categories.".concat(e)))||f||""},b.prototype.runCommand=function(){var a=this.em,b=this.attributes.command;if(b&&a)if((0,r.isString)(b))return a.Commands.run(b);else return b(a.Editor,this)},b.prototype.props=function(){return this.attributes},b.prototype.targetUpdated=function(){var a=this.component,b=this.em,c=this.getTargetValue({useType:!0});this.set({value:c},{fromTarget:1});var d={trait:this,component:a,value:c};a.trigger(bz.value,d),null==b||b.trigger(bz.value,d),null==b||b.trigger("trait:update",d)},b.prototype.getTargetValue=function(a){void 0===a&&(a={});var b,c,d=this.component,e=this.em,f=this.getName(),g=this.get("getValue"),h=a.skipResolve;if(g?c=g({editor:null==e?void 0:e.getEditor(),trait:this,component:d}):this.changeProp?(c=d.get(f),h&&(c=d.dataResolverWatchers.getValueOrResolver("props",((b={})[f]=c,b))[f])):c=d.getAttributes({skipResolve:h})[f],a.useType&&"checkbox"===this.getType()){var i=this.attributes,j=i.valueTrue,k=i.valueFalse;(0,r.isUndefined)(j)||j!==c?(0,r.isUndefined)(k)||k!==c||(c=!1):c=!0}return(0,r.isUndefined)(c)?"":c},b.prototype.setTargetValue=function(a,b){void 0===b&&(b={});var c,d=this.component,e=this.attributes,f=this.getName();if(!(0,r.isUndefined)(a)){var g=a;if("false"===a?g=!1:"true"===a&&(g=!0),"checkbox"===this.getType()){var h=e.valueTrue,i=e.valueFalse;g&&!(0,r.isUndefined)(h)&&(g=h),g||(0,r.isUndefined)(i)||(g=i)}var j=((c={})[f]=g,c);j.__p=b.avoidStore?null:void 0,this.changeProp?d.set(j,b):d.addAttributes(j,b)}},b.prototype.setValueFromInput=function(a,b,c){void 0===b&&(b=!0),void 0===c&&(c={});var d={value:a};this.set(d,bB(bB({},c),{avoidStore:1})),b&&(this.set("value","",c),this.set(d,c))},b.prototype.getInitValue=function(){var a,b=this.component,c=this.getName();if(b){var d=b.get("attributes");a=this.changeProp?b.get(c):d[c]}return a||this.get("value")||this.get("default")},b}(x.Kx),bD=function(){function a(a){void 0===a&&(a={}),this.config=a}return a.prototype.build=function(a,b){return(0,r.isString)(a)?this.buildFromString(a,b):new bC(a,b)},a.prototype.buildFromString=function(a,b){var c={name:a,type:"text"};return"target"===a&&(c.type="select",c.default=!1,c.options=this.config.optionsTarget),new bC(c,b)},a}(),bE=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),bF=function(a){function b(b,c){var d=a.call(this,b)||this;d.categories=new by;var e=c.em;d.em=e,d.categories=new by([],{em:e,events:{update:bz.categoryUpdate}}),d.on("add",d.handleAdd),d.on("reset",d.handleReset);var f=d.module;return d.tf=new bD(null==f?void 0:f.getConfig()),d}return bE(b,a),Object.defineProperty(b.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),b.prototype.getCategories=function(){return this.categories},b.prototype.handleReset=function(a,b){var c=(void 0===b?{}:b).previousModels;(void 0===c?[]:c).forEach(function(a){return a.trigger("remove")})},b.prototype.handleAdd=function(a){a.em=this.em;var b=this.target;b&&(a.target=b),this.initCategory(a)},b.prototype.setTarget=function(a){this.target=a,this.models.forEach(function(b){return b.setTarget(a)})},b.prototype.add=function(b,c){if(void 0!=b){var d=this.target,e=this.em;if((0,r.isArray)(b)){for(var f=[],g=0,h=b.length;g<h;g++){var i=b[g];f[g]=i instanceof bC?i:this.tf.build(i,e),f[g].setTarget(d)}return a.prototype.add.call(this,f,c)}var j=b instanceof bC?b:this.tf.build(b,e);return j.setTarget(d),a.prototype.add.call(this,j,c)}},b}(bw),bG=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),bH=function(){return(bH=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},bI=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},bJ=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},bK=function(a,b){return(void 0===b&&(b=[]),a)?(((0,r.isArray)(a)||(0,r.isFunction)(a.map)?a:[a]).map(function(a){b.push(a.getId()),bK(a.components().models,b)}),b):[]},bL=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c={}),c.visitedCmps=c.visitedCmps||{};var d=c.visitedCmps,e=c.updateOptions||{};return((0,r.isArray)(a)?a:[a]).map(function(a){var f=a.attributes,g=void 0===f?{}:f,h=a.components,i=a.tagName,j=a.style,k=g.id,l=(g.draggable,bI(g,["id","draggable"])),m=a;if(k){if(d[k])d[k].push(m),k=bZ.getNewId(b),m.attributes.id=k;else if(d[k]=[],b[k]){m=b[k];var n=e.onAttributes,o=e.onStyle,p=m;i&&p.set({tagName:i},bH(bH({},c),{silent:!0})),n?n({item:a,component:p,attributes:l,options:c}):(0,r.keys)(l).length&&p.addAttributes(l,bH({},c)),o?o({item:a,component:p,style:j,options:c}):(0,r.keys)(j).length&&p.addStyle(j,c)}}var q=(0,r.isFunction)(m.components)?m:null;if(h){var s=bL(h,b,c);q?q.components().reset(s,c):m.components=s}else q&&q.components().reset([],c);return m})},bM=function(a){function b(b,c){var d=a.call(this,b,c)||this;d.opt=c,d.listenTo(d,"add",d.onAdd),d.listenTo(d,"remove",d.removeChildren),d.listenTo(d,"reset",d.resetChildren);var e=c.em;return d.config=c.config,d.em=e,d.domc=c.domc||(null==e?void 0:e.Components),d}return bG(b,a),Object.defineProperty(b.prototype,"events",{get:function(){var a;return null==(a=this.domc)?void 0:a.events},enumerable:!1,configurable:!0}),b.prototype.resetChildren=function(a,b){var c=this;void 0===b&&(b={});var d=this,e=b.previousModels||[],f=e.filter(function(b){return!a.get(b.cid)}),g=bK(a),h=bK(e).filter(function(a){return g.indexOf(a)>=0});b.keepIds=(b.keepIds||[]).concat(h),f.forEach(function(a){return c.removeChildren(a,d,b)}),a.each(function(a){return c.onAdd(a)})},b.prototype.resetFromString=function(a,c){void 0===a&&(a=""),void 0===c&&(c={}),c.keepIds=bK(this);var d,e=this.domc,f=this.em,g=this.parent,h=(null==e?void 0:e.allById())||{},i=this.parseString(a,bH(bH({},c),{cloneRules:!0})),j=bH({skipViewUpdate:!0},c),k=bL(i,h,j);b.cloneCssRules(f,j.visitedCmps),this.reset(k,c),null==f||f.trigger("component:content",g,c,a),null==(d=g.__checkInnerChilds)||d.call(g)},b.prototype.removeChildren=function(a,b,c){var d=this;if(void 0===c&&(c={}),a){var e=this.domc,f=this.em,g=c.temporary||c.fromUndo;if(a.prevColl=this,!g){var h=a.getId(),i=f.Selectors.getAll(),j=f.Css.getAll(),k=0>(c.keepIds||[]).indexOf(h),l=e?e.allById():{};delete l[h];var m=k?j.remove(j.filter(function(a){return a.getSelectors().getFullString()==="#".concat(h)}),c):[];i.remove(m.map(function(a){return a.getSelectors().at(0)})),!a.opt.temporary&&(f.Commands.run("core:component-style-clear",{target:a}),a.views.forEach(function(b){b.scriptContainer&&a.emitWithEditor(Y.I.scriptUnmount,{component:a,view:b,el:b.el})}),a.removed(),a.trigger("removed"),f.trigger(Y.I.remove,a),e&&aK(a)&&aM(a)&&e.symbols.__trgEvent(e.events.symbolInstanceRemove,{component:a},!0));var n=a.components();n.forEach(function(a){a_(a,a,n,bH(bH({},c),{skipRefsUp:!0})),d.removeChildren(a,b,c)})}var o=a.components();if(f.stopListening(o),f.stopListening(a),f.stopListening(a.get("classes")),a.__postRemove(),!a.opt.temporary){var p=function(a){a.emitWithEditor(Y.I.removed,a,{removeOptions:c}),a.components().forEach(function(a){return p(a)})};p(a)}}},b.prototype.model=function(a,b){var c,d=b.collection.opt,e=d.em,f=e.Components.componentTypes;b.em=e,b.config=d.config,b.componentTypes=f,b.domc=d.domc;for(var g=0;g<f.length;g++)if(f[g].id==a.type){c=f[g].model;break}return!c&&(c=f[f.length-1].model,e&&a.type&&e.logWarning("Component type '".concat(a.type,"' not found"),{attrs:a,options:b})),new c(a,b)},b.prototype.parseString=function(a,c){void 0===c&&(c={});var d=this.em,e=this.domc,f=this.parent,g=null==f?void 0:f.is("wrapper"),h=c.asDocument&&g,i=d.Css,j=d.Parser.parseHtml(a,bH({asDocument:h},c.parserOptions)),k=j.html;if(g&&j.doctype){var l=j.html||{},m=l.components,n=bI(l,["components"]),o=j.head||{},p=o.components,q=bI(o,["components"]);k=void 0===m?[]:m,f.set(n,c),f.head.set(q,c),f.head.components(p,c),f.docEl.set(j.root,c),f.set({doctype:j.doctype})}var r=bZ.checkId(k,j.css,e.componentsById,c);if(c.cloneRules&&b.cloneCssRules(d,r.updatedIds),j.css&&i&&!c.temporary){c.at;var s=bI(c,["at"]);i.addCollection(j.css,bH(bH({},s),{extend:1}))}return k},b.prototype.add=function(b,c){var d=this;if(void 0===c&&(c={}),void 0!=b){c.keepIds=bJ(bJ([],c.keepIds||[],!0),bK(c.previousModels),!0),(0,r.isString)(b)?b=this.parseString(b,c):(0,r.isArray)(b)&&(b=bJ([],b,!0)).forEach(function(a,e){if((0,r.isString)(a)){var f=d.parseString(a,c);b[e]=(0,r.isArray)(f)&&!f.length?null:f}});var e=((0,r.isArray)(b)?b:[b]).filter(Boolean).map(function(a){return d.processDef(a)});return b=(0,r.isArray)(b)?(0,r.flatten)(e,1):e[0],a.prototype.add.call(this,b,c)}},b.prototype.processDef=function(a){if(a.cid&&a.ccid)return a;var b=this.em,c=this.config,d=(void 0===c?{}:c).processor,e=a;if(d){var f=d(e=bH({},e));f&&((0,r.each)(e,function(a,b){return delete e[b]}),(0,r.extend)(e,f))}if(e.$$typeof&&"object"==typeof e.props){(e=bH({},e)).props=bH({},e.props);var g=b.Components,h=b.Parser.parserHtml;(0,r.each)(e,function(a,b){(0,r.includes)(["props","type"],b)||delete e[b]});var i=e.props,j=i.children;delete i.children,delete e.props;var k=h.splitPropsFromAttr(i);e.attributes=k.attrs,j&&(e.components=j),e.type?g.getType(e.type)||(e.tagName=e.type,delete e.type):e.type="textnode",(0,r.extend)(e,k.props)}return e},b.prototype.onAdd=function(a,b,c){void 0===c&&(c={});var d=this.domc,e=this.em,f=e.config.avoidInlineStyle;if(d&&d.Component.ensureInList(a),!f&&e.config.forceClass&&!c.temporary){var g=a.getStyle();if(!(0,r.isEmpty)(g)){var h=a.cid;e.Css.setClassRule(h,g),a.setStyle({}),a.addClass(h)}}if(a.__postAdd({recursive:!0}),e&&!c.temporary){var i=function(a){e.trigger(Y.I.add,a,c),a.components().forEach(function(a){return i(a)})};i(a),d&&aK(a)&&aM(a)&&d.symbols.__trgEvent(d.events.symbolInstanceAdd,{component:a},!0)}},b.cloneCssRules=function(a,b){void 0===b&&(b={});var c=a.Css;Object.keys(b).forEach(function(a){var d=b[a];if(d.length){var e=(c.getRules("#".concat(a))||[]).filter(function(a){return!(0,r.isEmpty)(a.attributes.style)});if(e.length){var f=c.getAll();d.forEach(function(a){e.forEach(function(b){var c=b.clone();c.set("selectors",["#".concat(a.attributes.id)]),f.add(c)})})}}})},b}(x.pM),bN=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),bO=function(){return(bO=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},bP=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},bQ=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},bR=function(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},bS=function(a){return!!(null==a?void 0:a.getConfig().avoidInlineStyle)},bT="component:drag",bU="__symbols",bV="__symbol",bW="__symbol_ovrd",bX=Y.I.update,bY=Y.I.updateInside;let bZ=function(a){function b(c,d){void 0===c&&(c={});var e=this,f=d.em;e=a.call(this,c,d)||this,(0,r.bindAll)(e,"__upSymbProps","__upSymbCls","__upSymbComps","syncOnComponentChange");var g=e.parent(),h=null==g?void 0:g.attributes,i=e.get("propagate");if(i&&e.set("propagate",(0,r.isArray)(i)?i:[i]),h&&h.propagate&&!i){var j={},k=h.propagate;k.forEach(function(a){return j[a]=g.get(a)}),j.propagate=k,e.set(bO(bO({},j),c))}d&&d.config&&d.config.voidElements.indexOf(e.get("tagName"))>=0&&e.set("void",!0),d.em=f,e.opt=d,e.em=f,e.config=d.config||{};var l=bO(bO({},(0,r.result)(e,"defaults").attributes||{}),e.get("attributes")||{}),m=e.dataResolverWatchers.getValueOrResolver("attributes",l);if(e.setAttributes(m),e.ccid=b.createId(e,d),e.preInit(),e.initClasses(),e.initComponents(),e.initTraits(),e.initToolbar(),e.initScriptProps(),e.listenTo(e,"change:script",e.scriptUpdated),e.listenTo(e,"change:tagName",e.tagUpdated),e.listenTo(e,"change:attributes",e.attrUpdated),e.listenTo(e,"change:attributes:id",e._idUpdated),e.on("change:toolbar",e.__emitUpdateTlb),e.on("change",e.__onChange),e.on(bY,e.__propToParent),e.set("status",""),e.views=[],["classes","traits","components"].forEach(function(a){var b="add remove reset ".concat("components"!==a?"change":"");e.listenTo(e.get(a),b.trim(),function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return e.emitUpdate.apply(e,bQ([a],b,!1))})}),!d.temporary){var n=f&&f.Css,o=e.attributes,p=o.styles,q=o.type;p&&n&&n.addCollection(p,{avoidUpdateStyle:!0},{group:"cmp:".concat(q)}),e._moveInlineStyleToRule(),e.__postAdd(),e.init(),aL(e)&&aN(e),null==f||f.trigger(Y.I.create,e,d)}return bS(f)&&e.dataResolverWatchers.disableStyles(),e}return bN(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){var a;return(a={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null})[bV]=0,a[bU]=0,a[bW]=0,a._undo=!0,a._undoexc=["status","open"],a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"tagName",{get:function(){return this.get("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"content",{get:function(){var a;return null!=(a=this.get("content"))?a:""},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"frame",{get:function(){return this.opt.frame},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"page",{get:function(){var a;return null==(a=this.frame)?void 0:a.getPage()},enumerable:!1,configurable:!0}),b.prototype.getType=function(){return this.get("type")||"default"},b.prototype.preInit=function(){},b.prototype.init=function(){},b.prototype.updated=function(a,b,c){},b.prototype.removed=function(){},b.prototype.onCollectionsStateMapUpdate=function(b){var c;a.prototype.onCollectionsStateMapUpdate.call(this,b),null==(c=this._getStyleRule())||c.onCollectionsStateMapUpdate(b),this.components().forEach(function(a){return a.onCollectionsStateMapUpdate(b)})},b.prototype.syncComponentsCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.listenTo(this.components(),"add remove reset",this.syncOnComponentChange),this.components().forEach(function(a){return a.syncComponentsCollectionState()})},b.prototype.stopSyncComponentCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.collectionsStateMap={},this.components().forEach(function(a){return a.stopSyncComponentCollectionState()})},b.prototype.syncOnComponentChange=function(a,b,c){var d=this;if(this.collectionsStateMap&&Object.keys(this.collectionsStateMap).length){var e=c||b||{};c?e.add?(a.syncComponentsCollectionState(),a.onCollectionsStateMapUpdate(this.collectionsStateMap)):a.stopSyncComponentCollectionState():((e.previousModels||[]).forEach(function(a){return a.stopSyncComponentCollectionState()}),this.components().forEach(function(a){a.syncComponentsCollectionState(),a.onCollectionsStateMapUpdate(d.collectionsStateMap)}))}},b.prototype.__postAdd=function(a){void 0===a&&(a={});var b=this.em,c=null==b?void 0:b.UndoManager,d=this.components();c&&!this.__hasUm&&(c.add(d),c.add(this.getSelectors()),this.__hasUm=!0),a.recursive&&d.map(function(b){return b.__postAdd(a)})},b.prototype.__postRemove=function(){var a=this.em,b=null==a?void 0:a.UndoManager;b&&(b.remove(this.components()),b.remove(this.getSelectors()),delete this.__hasUm)},b.prototype.__onChange=function(a,b){var c=this,d=this.changedAttributes()||{};(0,r.keys)(d).forEach(function(a){return c.emitUpdate(a)}),["status","open","toolbar","traits"].forEach(function(a){return delete d[a]}),(0,s.isEmptyObj)(d)||(this.__changesUp(b,{changed:d}),this.__propSelfToParent({component:this,changed:d,options:b}))},b.prototype.__onStyleChange=function(a,b){var c=this,d=this.collectionsStateMap;if(this.em&&(null==b?!void 0:!b.noEvent)){var e=(0,r.keys)(a),f={style:a};this.emitWithEditor(Y.I.styleUpdate,this,f),e.forEach(function(a){return c.emitWithEditor("".concat(Y.I.styleUpdateProperty).concat(a),c,f)});var g=Object.keys(d).filter(function(a){return a!==ir.rootData});0!==g.length&&g.every(function(a){var b=d[a];return b.currentIndex===b.startIndex})&&aR(this).forEach(function(b){Object.keys(b.collectionsStateMap).every(function(a){return g.includes(a)})&&b.addStyle(bO({},a),{noEvent:!0})})}},b.prototype.__changesUp=function(a,b){var c=this;void 0===b&&(b={});var d=this.em;[this.frame,d].forEach(function(d){null==d||d.changesUp(a,bO({component:c,options:a},b))})},b.prototype.__propSelfToParent=function(a){this.trigger(bX,a),this.__propToParent(a)},b.prototype.__propToParent=function(a){var b=this.parent();b&&b.trigger(bY,a)},b.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},b.prototype.__getAllById=function(){var a=this.em;return a?a.Components.allById():{}},b.prototype.__upSymbProps=function(a,b){void 0===b&&(b={}),aV(this,b)},b.prototype.__upSymbCls=function(a,b,c){void 0===c&&(c={}),a$(this,c)},b.prototype.__upSymbComps=function(a,b,c){a_(this,a,b,c)},b.prototype.__onDestroy=function(){},b.prototype.is=function(a){return this.get("type")==a},b.prototype.props=function(){return this.attributes},b.prototype.index=function(){var a=this.collection;return a?a.indexOf(this):0},b.prototype.setDragMode=function(a){return this.set("dmode",a)},b.prototype.getDragMode=function(){return this.get("dmode")||""},b.prototype.setSymbolOverride=function(a,b){var c,d;void 0===b&&(b={}),this.set(((c={})[bW]=null!=(d=(0,r.isString)(a)?[a]:a)?d:0,c),b)},b.prototype.getSymbolOverride=function(){return this.get(bW)},b.prototype.find=function(a){var b,c=[],d=null==(b=this.view)?void 0:b.$el.find(a);return null==d||d.each(function(a){var b=d.eq(a).data("model");b&&c.push(b)}),c},b.prototype.findType=function(a){var b=[],c=function(d){return d.forEach(function(d){d.is(a)&&b.push(d),c(d.components())})};return c(this.components()),b},b.prototype.findFirstType=function(a){return this.findType(a).at(0)},b.prototype.closest=function(a){var b,c=null==(b=this.view)?void 0:b.$el.closest(a);return(null==c?void 0:c.length)?c.data("model"):void 0},b.prototype.closestType=function(a){for(var b=this.parent();b&&!b.is(a);)b=b.parent();return b},b.prototype.contains=function(a){var b=!1;if(!a)return b;var c=function(d){b||d.forEach(function(d){d===a&&(b=!0),b||c(d.components())})};return c(this.components()),b},b.prototype.tagUpdated=function(){this.trigger("rerender")},b.prototype.replaceWith=function(a,b){void 0===b&&(b={});var c=this.collection,d=c.indexOf(this);c.remove(this);var e=c.add(a,bO(bO({},b),{at:d}));return(0,r.isArray)(e)?e:[e]},b.prototype.attrUpdated=function(a,b,c){var d=this;void 0===c&&(c={});var e=this.get("attributes"),f=e.class;f&&this.setClass(f),delete e.class;var g=e.style;g&&this.setStyle(g,c),delete e.style;var h=bO({},this.previous("attributes")),i=(0,s.shallowDiff)(h,this.get("attributes"));(0,r.keys)(i).forEach(function(a){var b,e="attributes:".concat(a);d.trigger("change:".concat(e),d,i[a],c),null==(b=d.em)||b.trigger("".concat(bX,":").concat(e),d,i[a],c)})},b.prototype.setAttributes=function(a,b){return void 0===b&&(b={skipWatcherUpdates:!1,fromDataSource:!1}),this.set("attributes",bO({},a),b),this},b.prototype.addAttributes=function(a,b){void 0===b&&(b={});var c=this.dataResolverWatchers.getValueOrResolver("attributes",this.getAttributes({noClass:!0,noStyle:!0}));return this.setAttributes(bO(bO({},c),a),b)},b.prototype.removeAttributes=function(a,b){void 0===a&&(a=[]),void 0===b&&(b={});var c=Array.isArray(a)?a:[a],d=this.getAttributes();return c.map(function(a){return delete d[a]}),this.setAttributes(d,b)},b.prototype.getStyle=function(b,c){var d=this.em,e=(0,r.isString)(b),f=e?b:"",g=e?c:b,h=!!(null==g?void 0:g.skipResolve);if(bS(d)&&!(null==g?void 0:g.inline)){var i=d.get("state"),j=d.Css.getIdRule(this.getId(),bO({state:i},g));return(this.rule=j,j)?j.getStyle(f,{skipResolve:h}):{}}return a.prototype.getStyle.call(this,f,{skipResolve:h})},b.prototype.setStyle=function(b,c){var d=this;void 0===b&&(b={}),void 0===c&&(c={});var e=this.opt,f=this.em;if(!bS(f)||e.temporary||c.inline)b=a.prototype.setStyle.apply(this,arguments);else{var g=this.get("style")||{};b=(0,r.isString)(b)?this.parseStyle(b):b,b=bO(bO({},g),b);var h=f.get("state"),i=f.Css,j=this.getStyle(bO(bO({},c),{skipResolve:!0}));this.rule=i.setIdRule(this.getId(),b,bO({state:h},c));var k=(0,s.shallowDiff)(j,b);this.set("style","",{silent:!0}),(0,r.keys)(k).forEach(function(a){return d.trigger("change:style:".concat(a))})}return e.temporary||this.__onStyleChange(c.addStyle||b,c),b},b.prototype.getAttributes=function(a){void 0===a&&(a={});var b=this.em,c=[],d=bO({},this.get("attributes")),e=(null==a?void 0:a.skipResolve)?this.dataResolverWatchers.getValueOrResolver("attributes",d):d,f=null==b?void 0:b.Selectors,g=this.getId();if(a.noClass?delete e.class:(this.classes.forEach(function(a){return c.push((0,r.isString)(a)?a:a.getName())}),c.length&&(e.class=c.join(" "))),!a.noStyle){var h=this.getStyle({inline:!0});(0,s.isObject)(h)&&!(0,s.isEmptyObj)(h)&&(e.style=this.styleToString({inline:!0}))}if(!(0,r.has)(e,"id")){var i=!1;(bS(b)||!(0,r.isEmpty)(this.getStyle()))&&(i=!!(null==f?void 0:f.get(g,f.Selector.TYPE_ID))),(aL(this)||this.get("script-export")||this.get("script"))&&(i=!0),i&&(e.id=g)}return e},b.prototype.addClass=function(a){var b=this.em.Selectors.addClass(a);return this.classes.add(b)},b.prototype.setClass=function(a){return this.classes.reset(),this.addClass(a)},b.prototype.removeClass=function(a){var b=[];a=(0,r.isArray)(a)?a:[a];var c=this.classes,d=bm.TYPE_CLASS;return a.forEach(function(a){a.split(" ").forEach(function(a){var e=c.where({name:a,type:d})[0];e&&b.push(c.remove(e))})}),b},b.prototype.getClasses=function(){var a=this.getAttributes().class;return a?a.split(" "):[]},b.prototype.initClasses=function(a,b,c){void 0===c&&(c={});var d=this.get("attributes")||{},e=d.class,f=bP(d,["class"]),g=[this,"change:classes",this.initClasses],h=this.get("classes")||e||[],i=(0,r.isString)(h)?h.split(" "):h;this.stopListening.apply(this,g);var j=this.normalizeClasses(i),k=new bp([]);return this.set("classes",k,c),k.add(j),k.on("add remove reset",this.__upSymbCls),e&&j.length&&this.set("attributes",f),this.listenTo.apply(this,g),this},b.prototype.initComponents=function(){var a=[this,"change:components",this.initComponents];this.stopListening.apply(this,a);var b=new bM([],this.opt);b.parent=this;var c=this.get("components"),d=!this.opt.avoidChildren;return this.set("components",b),d&&c&&b.add((0,r.isFunction)(c)?c(this):c,this.opt),b.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,a),this},b.prototype.initTraits=function(a){var b=this,c=this.em,d="change:traits";this.off(d,this.initTraits),this.__loadTraits();var e=bO({},this.get("attributes")),f=this.traits;f.each(function(a){var c=a.getName(),d=a.getInitValue();a.changeProp?(0,r.isUndefined)(b.get(c))&&b.set(c,d):c&&d&&(e[c]=d)});var g=this.dataResolverWatchers.getValueOrResolver("attributes",e);return f.length&&this.setAttributes(g),this.on(d,this.initTraits),a&&c&&c.trigger("component:toggled"),this},b.prototype.initScriptProps=function(){if(!this.opt.temporary){var a="script-props",b=["change:".concat(a),this.initScriptProps];this.off.apply(this,b);var c=this.previous(a)||[],d=this.get(a)||[],e=c.map(function(a){return"change:".concat(a)}).join(" "),f=d.map(function(a){return"change:".concat(a)}).join(" ");e&&this.off(e,this.__scriptPropsChange),f&&this.on(f,this.__scriptPropsChange),this.on.apply(this,b)}},b.prototype.__scriptPropsChange=function(a,b,c){void 0===c&&(c={}),c.avoidStore||this.trigger("rerender")},b.prototype.append=function(a,b){void 0===b&&(b={});var c=((0,r.isArray)(a)?bQ([],a,!0):[a]).map(function(a){return(0,r.isString)(a)||a.collection&&a.collection.remove(a,{temporary:!0}),a});return this.components().add(c,bO({action:Y.t.add},b))},b.prototype.components=function(a,b){void 0===b&&(b={});var c=this.get("components");return(0,r.isUndefined)(a)?c:(c.reset(void 0,b),a?this.append(a,b):[])},b.prototype.getChildAt=function(a){return this.components().at(a||0)||void 0},b.prototype.getLastChild=function(){var a=this.components();return a.at(a.length-1)||null},b.prototype.empty=function(a){return void 0===a&&(a={}),this.components().reset(void 0,a),this},b.prototype.parent=function(a){void 0===a&&(a={});var b=this.collection||a.prev&&this.prevColl;return b?b.parent:void 0},b.prototype.parents=function(){var a=this.parent();return a?[a].concat(a.parents()):[]},b.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},b.prototype.initToolbar=function(){var a=this.em,b=a&&a.getConfig().stylePrefix||"";if(!this.get("toolbar")&&a){var c=[];this.collection&&c.push({label:a.getIcon("arrowUp"),command:function(a){return a.runCommand("core:component-exit",{force:1})}}),this.get("draggable")&&c.push({attributes:{class:"".concat(b,"no-touch-actions"),draggable:!0},label:a.getIcon("move"),command:"tlb-move"}),this.get("copyable")&&c.push({label:a.getIcon("copy"),command:"tlb-clone"}),this.get("removable")&&c.push({label:a.getIcon("delete"),command:"tlb-delete"}),this.set("toolbar",c)}},b.prototype.__loadTraits=function(a,b){void 0===b&&(b={});var c=a||this.traits;if(!(c instanceof bF)){c=(0,r.isFunction)(c)?c(this):c;var d=new bF([],this.opt);d.setTarget(this),c.length&&d.add(c),this.set({traits:d},b)}return this},b.prototype.getTraits=function(){return this.__loadTraits(),bQ([],this.traits.models,!0)},b.prototype.setTraits=function(a){var b=(0,r.isArray)(a)?a:[a];return this.set({traits:b}),this.getTraits()},b.prototype.getTrait=function(a){return this.getTraits().filter(function(b){return b.get("id")===a||b.get("name")===a})[0]||null},b.prototype.updateTrait=function(a,b){var c,d=this.getTrait(a);return d&&d.set(b),null==(c=this.em)||c.trigger("component:toggled"),this},b.prototype.getTraitIndex=function(a){var b=this.getTrait(a);return b?this.traits.indexOf(b):-1},b.prototype.removeTrait=function(a){var b,c=this,d=((0,r.isArray)(a)?a:[a]).map(function(a){return c.getTrait(a)}),e=this.traits,f=d.length?e.remove(d):[];return null==(b=this.em)||b.trigger("component:toggled"),(0,r.isArray)(f)?f:[f]},b.prototype.addTrait=function(a,b){void 0===b&&(b={}),this.__loadTraits();var c,d=this.traits.add(a,b);return null==(c=this.em)||c.trigger("component:toggled"),(0,r.isArray)(d)?d:[d]},b.prototype.normalizeClasses=function(a){var b=[],c=this.em,d=null==c?void 0:c.Selectors;return d?a.models?bQ([],a.models,!0):(a.forEach(function(a){return b.push(d.add(a))}),b):[]},b.prototype.clone=function(a){void 0===a&&(a={});var b,c=this.em,d=this.dataResolverWatchers.getProps(this.attributes),e=bO({},this.opt),f=this.getId(),g=null==c?void 0:c.Css;d.components=[],d.classes=[],d.traits=[],aM(this)&&(a.symbol=!0),this.get("components").each(function(b,c){d.components[c]=b.clone(bO(bO({},a),{_inner:1}))}),this.get("traits").each(function(a,b){d.traits[b]=a.clone()}),this.get("classes").each(function(a,b){d.classes[b]=a.get("name")}),d.status="",e.collection=null,e.forCloning=!0;var h=new this.constructor(d,e),i="#".concat(h.getId());(g?g.getRules("#".concat(f)):[]).forEach(function(a){var b=a.clone();b.set("selectors",[i]),g.getAll().add(b)}),h.set(bU,0);var j=aO(this),k=aP(this);if(!a.symbol&&(j||k))h.set(bV,0),h.set(bU,0);else if(j){var l=null!=(b=aP(j))?b:[];j.set(bU,bQ(bQ([],l,!0),[h],!1)),aN(h)}else a.symbol&&(aJ(this)?(this.set(bU,bQ(bQ([],k,!0),[h],!1)),h.set(bV,this),aN(h)):a.symbolInv?(this.set(bU,[h]),h.set(bV,this),[this,h].map(function(a){return aN(a)})):(h.set(bU,[this]),[this,h].map(function(a){return aN(a)}),this.set(bV,h)));var m="component:clone";return c&&c.trigger(m,h),this.trigger(m,h),h},b.prototype.getName=function(a){void 0===a&&(a={});var b=this.em,c=this.attributes,d=c.type,e=c.tagName,f=c.name,g=d||e,h=d?"":e,i="domComponents.names.",j=f&&(null==b?void 0:b.t("".concat(i).concat(f))),k=h&&(null==b?void 0:b.t("".concat(i).concat(h))),l=b&&(b.t("".concat(i).concat(d))||b.t("".concat(i).concat(e))),m=this.get("custom-name");return(a.noCustom?"":m)||j||f||k||(0,s.capitalize)(h)||l||(0,s.capitalize)(g)},b.prototype.setName=function(a,b){void 0===b&&(b={}),this.set("custom-name",a,b)},b.prototype.getIcon=function(){var a=this.get("icon");return a?a+" ":""},b.prototype.toHTML=function(a){void 0===a&&(a={});var b=a.tag||this.get("tagName");delete a.tag;var c=this.__attrToString(a),d=this.getInnerHTML(a),e=!d&&this.get("void"),f="<".concat(b).concat(c?" ".concat(c):"").concat(e?"/":"",">").concat(d);return e||(f+="</".concat(b,">")),f},b.prototype.getInnerHTML=function(a){return this.__innerHTML(a)},b.prototype.__innerHTML=function(a){void 0===a&&(a={});var b=this.components();return b.length?b.map(function(b){return b.toHTML(a)}).join(""):this.content},b.prototype.__attrToString=function(a){void 0===a&&(a={});var b=[],c=a.attributes,d=this.getAttrToHTML(a);if(c&&((0,r.isFunction)(c)?d=c(this,d)||{}:(0,s.isObject)(c)&&(d=c)),a.withProps){var e=this.toJSON();(0,r.forEach)(e,function(a,b){"_"!==b[0]&&0>["classes","attributes","components"].indexOf(b)&&(d["data-gjs-".concat(b)]=(0,r.isArray)(a)||(0,s.isObject)(a)?JSON.stringify(a):(0,r.isBoolean)(a)?"".concat(a):a)})}for(var f in d){var g=d[f];if(!(0,r.isUndefined)(g)&&null!==g)if((0,r.isBoolean)(g))g&&b.push(f);else{var h="";if(a.altQuoteAttr&&(0,r.isString)(g)&&g.indexOf('"')>=0)h="'".concat((0,s.escapeAltQuoteAttrValue)(g),"'");else{var i=(0,r.isString)(g)?(0,s.escapeAttrValue)(g):g;h='"'.concat(i,'"')}b.push("".concat(f,"=").concat(h))}}return b.join(" ")},b.prototype.getAttrToHTML=function(a){var b=this.getAttributes();return bS(this.em)&&(null==a?void 0:a.keepInlineStyle)!==!0&&delete b.style,b},b.prototype.toJSON=function(b){void 0===b&&(b={});var c=a.prototype.toJSON.call(this,b,{attributes:this.getAttributes()});if(delete c.dataResolverWatchers,delete c.attributes.class,delete c.toolbar,delete c.traits,delete c.status,delete c.open,delete c._undoexc,delete c.delegate,this.collectionsStateMap&&Object.getOwnPropertyNames(this.collectionsStateMap).length>0&&(delete c[bV],delete c[bW],delete c[bU]),!b.fromUndo){var d=c[bV],e=c[bU];e&&(0,r.isArray)(e)&&(c[bU]=e.filter(function(a){return a}).map(function(a){return a.getId?a.getId():a})),d&&!(0,r.isString)(d)&&(c[bV]=d.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(c),c},b.prototype.getChangedProps=function(a){var b=a||u.Model.prototype.toJSON.apply(this),c=(0,r.result)(this,"defaults");return(0,r.forEach)(c,function(a,c){-1===["type"].indexOf(c)&&b[c]===a&&delete b[c]}),(0,r.isEmpty)(b.type)&&delete b.type,(0,r.forEach)(["attributes","style"],function(a){(0,r.isEmpty)(c[a])&&(0,r.isEmpty)(b[a])&&delete b[a]}),(0,r.forEach)(["classes","components"],function(a){(!b[a]||(0,r.isEmpty)(c[a])&&!b[a].length)&&delete b[a]}),b},b.prototype.getId=function(){var a,b,c,d,e=this.get("attributes")||{},f=(a=this,d=(c=function(a){var b=a.collectionsStateMap;if(!b)return!1;var c=Object.keys(b);if(!c.length)return!1;var d=aO(a);return!!d&&d!==a&&Object.keys(d.collectionsStateMap).every(function(a){return c.includes(a)})}(a))?(b=aO(a))?b.getId():"":null,{shouldSync:c,itemId:d}),g=f.shouldSync,h=f.itemId;return g&&(e.id=h),e.id||this.ccid||this.cid},b.prototype.setId=function(a,b){return this.addAttributes({id:a},b),this},b.prototype.getEl=function(a){var b=this.getView(a);return b&&b.el},b.prototype.getView=function(a){var b=this.view,c=this.views,d=this.em,e=a||(null==d?void 0:d.getCurrentFrameModel());return e&&(b=c.filter(function(a){return a.frameView===e.view})[0]),b},b.prototype.getCurrentView=function(){var a=this.em.getCurrentFrame(),b=null==a?void 0:a.model;return this.getView(b)},b.prototype.__getScriptProps=function(){var a=this.props();return(this.get("script-props")||[]).reduce(function(b,c){return b[c]=a[c],b},{})},b.prototype.getScriptString=function(a){var b=this,c=a||this.get("script")||"";if(!c)return c;if(this.get("script-props"))c=c.toString().trim();else{if((0,r.isFunction)(c)){var d=c.toString().trim();c=(d=d.slice(d.indexOf("{")+1,d.lastIndexOf("}"))).trim()}var e=this.em.getConfig(),f=bR(e.tagVarStart||"{[ "),g=bR(e.tagVarEnd||" ]}"),h=RegExp("".concat(f,"([\\w\\d-]*)").concat(g),"g");c=c.replace(h,function(a,c){b.scriptUpdated();var d=b.attributes[c]||"";return(0,r.isArray)(d)||"object"==typeof d?JSON.stringify(d):d})}return c},b.prototype.emitUpdate=function(a){for(var b,c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];var e=this.em,f=bX+(a?":".concat(a):""),g=a&&this.get(a);a&&this.updated.apply(this,bQ([a,g,a&&this.previous(a)],c,!1)),this.trigger.apply(this,bQ([f],c,!1)),e&&e.trigger.apply(e,bQ([f,this],c,!1)),["components","classes"].indexOf(a)>=0&&this.__propSelfToParent({component:this,changed:((b={})[a]=g,b),options:c[2]||c[1]||{}})},b.prototype.emitWithEditor=function(a,b,c){[this.em,this].forEach(function(d){return null==d?void 0:d.trigger(a,b,c)})},b.prototype.onAll=function(a){return(0,r.isFunction)(a)&&(a(this),this.components().forEach(function(b){return b.onAll(a)})),this},b.prototype.forEachChild=function(a){(0,r.isFunction)(a)&&this.components().forEach(function(b){a(b),b.forEachChild(a)})},b.prototype.remove=function(a){var b=this;void 0===a&&(a={});var c=this.em,d=this.collection,e=function(){d&&d.remove(b,bO({action:Y.t.remove},a)),d||(b.components("",a),b.components().removeChildren(b,void 0,a))},f=bO({},a);return[this,c].map(function(a){return a.trigger(Y.I.removeBefore,b,e,f)}),f.abort||e(),this},b.prototype.destroy=function(b){return this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.dataResolverWatchers.destroy(),this.__onDestroy(),a.prototype.destroy.call(this,b)},b.prototype.move=function(a,b){if(void 0===b&&(b={}),a){var c=b.at,d=this.index(),e=a===this.parent();if(!e||d!==c&&d!==c-1){e&&c&&c>d&&(b.at=c-1);var f=Y.t.move;this.remove({action:f,temporary:1}),a.append(this,bO({action:f},b)),this.emitUpdate()}}return this},b.prototype.isInstanceOf=function(a){var b,c,d=null==(c=null==(b=this.em)?void 0:b.Components.getType(a))?void 0:c.model;if(!d)return!1;var e=this.constructor.typeExtends;return this instanceof d||e.has(a)},b.prototype.isChildOf=function(a){for(var b=(0,r.isString)(a),c=this.parent();c;){if(b){if(c.isInstanceOf(a))return!0}else if(c===a)return!0;c=c.parent()}return!1},b.prototype.resetId=function(a){void 0===a&&(a={});var c=this.em,d=this.getId();if(!d)return this;var e=b.createId(this);this.setId(e);var f=null==c?void 0:c.Css.getIdRule(d),g=null==f?void 0:f.get("selectors").at(0);return null==g||g.set("name",e),this},b.prototype._getStyleRule=function(a){var b=(void 0===a?{}:a).id,c=this.em,d=b||this.getId();return null==c?void 0:c.Css.getIdRule(d)},b.prototype._getStyleSelector=function(a){var b=this._getStyleRule(a);return null==b?void 0:b.get("selectors").at(0)},b.prototype._moveInlineStyleToRule=function(){var a=this.get("style"),b=(0,r.isString)(a)&&a.length>0||(0,s.isObject)(a)&&Object.keys(a).length>0;bS(this.em)&&b&&this.addStyle((0,s.isObject)(a)?this.dataResolverWatchers.getValueOrResolver("styles",a):a,{avoidStore:!0,noUndo:!0})},b.prototype._idUpdated=function(a,c,d){if(void 0===d&&(d={}),!d.idUpdate){var e=this.ccid,f=(this.get("attributes")||{}).id,g=(this.previous("attributes")||{}).id||e,h=b.getList(this);if(h[f]||!f&&g)return this.setId(g,{idUpdate:!0});delete h[g],h[f]=this,this.ccid=f;var i=this._getStyleSelector({id:g});i&&i.set({name:f,label:f})}},b.getDefaults=function(){return(0,r.result)(this.prototype,"defaults")},b.isComponent=function(a,b){return{tagName:(0,s.toLowerCase)(a.tagName)}},b.ensureInList=function(a){var c=b.getList(a),d=a.getId(),e=c[d];if(e){if(e!==a){var f=b.getIncrementId(d,c);a.setId(f),c[f]=a}}else c[d]=a;a.components().forEach(function(a){return b.ensureInList(a)})},b.createId=function(a,c){void 0===c&&(c={});var d,e=b.getList(a),f=c.idMap,g=a.get("attributes").id;return g?(d=b.getIncrementId(g,e,c),a.setId(d),g!==d&&((void 0===f?{}:f)[g]=d)):d=b.getNewId(e),e[d]=a,d},b.getNewId=function(a){for(var c=Object.keys(a).length.toString().length+2,d=(Math.random()+1.1).toString(36).slice(-c),e="i".concat(d);a[e];)e=b.getNewId(a);return e},b.getIncrementId=function(a,b,c){void 0===c&&(c={});var d=c.keepIds,e=1,f=a;if(0>(void 0===d?[]:d).indexOf(a))for(;b[f];)e++,f="".concat(a,"-").concat(e);return f},b.getList=function(a){var b,c=a.em,d=null==c?void 0:c.Components;return null!=(b=null==d?void 0:d.componentsById)?b:{}},b.checkId=function(a,c,d,e){void 0===c&&(c=[]),void 0===d&&(d={}),void 0===e&&(e={}),e.updatedIds=e.updatedIds||{};var f=(0,r.isArray)(a)?a:[a],g=e.keepIds,h=void 0===g?[]:g,i=e.idMap,j=void 0===i?{}:i,k=e.updatedIds;return f.forEach(function(a){a.attributes;var f=a.attributes,g=void 0===f?{}:f,i=a.components,l=g.id;if(l&&d[l]&&0>h.indexOf(l)){var m=b.getIncrementId(l,d);k[l]=k[l]?bQ(bQ([],k[l],!0),[a],!1):[a],j[l]=m,g.id=m,(0,r.isArray)(c)&&c.forEach(function(a){var b=a.selectors;b.forEach(function(a,c){a==="#".concat(l)&&(b[c]="#".concat(m))})})}i&&b.checkId(i,c,d,e)}),{updatedIds:e.updatedIds}},b.typeExtends=new Set,b}(bk);var b$=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),b_=function(){return(b_=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},b0="head",b1=["title","style","base","link","meta","script","noscript"],b2=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return b$(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return b_(b_({},a.prototype.defaults),{type:b0,tagName:b0,draggable:!1,highlightable:!1,droppable:function(a){var b=a.tagName;return!b||b1.includes((0,s.toLowerCase)(b))}})},enumerable:!1,configurable:!0}),b.isComponent=function(a){return(0,s.toLowerCase)(a.tagName)===b0},b}(bZ),b3=function(){function a(a,b){var c;void 0===a&&(a=50),this.dragging=!1,this.lastMaxHeight=0,this.zoom=1,this.rectIsInScrollIframe=!1,this.autoscrollLimit=a,this.lastMaxHeight=null!=(c=null==b?void 0:b.lastMaxHeight)?c:0,this.onScroll=null==b?void 0:b.onScroll,this.rectIsInScrollIframe=!!(null==b?void 0:b.rectIsInScrollIframe),(0,r.bindAll)(this,"start","autoscroll","updateClientY","stop")}return a.prototype.start=function(a,b,c){var d=this;this.eventEl=a,this.scrollEl=b,this.lastMaxHeight=(null==c?void 0:c.lastMaxHeight)||1/0,this.zoom=(null==c?void 0:c.zoom)||1,this.ignoredElement=null==c?void 0:c.ignoredElement,setTimeout(function(){d.toggleAutoscrollFx(!0),requestAnimationFrame(d.autoscroll)},0)},a.prototype.autoscroll=function(){var a,b,c=this,d=this.scrollEl;if(this.dragging&&d){if(void 0===this.lastClientY)return void setTimeout(function(){requestAnimationFrame(c.autoscroll)},50);var e=null!=(a=this.lastClientY)?a:0,f=this.autoscrollLimit,g=this.getEventElHeight()-f,h=0;e<f&&(h+=e-f),e>g&&(h+=e-g);var i=this.getElScrollTop(d);0!==(h=Math.max(h=Math.min(h,this.lastMaxHeight-i),-i))&&(d.scrollBy({top:h,behavior:"auto"}),null==(b=this.onScroll)||b.call(this)),requestAnimationFrame(this.autoscroll)}},a.prototype.getEventElHeight=function(){var a=this.eventEl;return a?a.getBoundingClientRect().height:0},a.prototype.updateClientY=function(a){var b=a.target;if(!(this.ignoredElement&&this.ignoredElement.contains(b))){var c=this.scrollEl;a.preventDefault();var d=this.rectIsInScrollIframe?0:this.getElScrollTop(c);this.lastClientY=(0,ab.G2)(a).clientY*this.zoom-d}},a.prototype.getElScrollTop=function(a){return(a instanceof HTMLElement?a.scrollTop:null==a?void 0:a.scrollY)||0},a.prototype.toggleAutoscrollFx=function(a){this.dragging=a;var b=this.eventEl;if(b){var c=a?"on":"off",d={on:ab.on,off:ab.AU};d[c](b,"mousemove dragover",this.updateClientY),d[c](b,"mouseup",this.stop)}},a.prototype.stop=function(){this.toggleAutoscrollFx(!1),this.lastClientY=void 0,this.ignoredElement=void 0},a}(),b4=p(1447),b5=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),b6=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return b5(b,a),b.prototype.canMove=function(a,b){var c=this,d=this.getRealIndex(b),e=a._dragSource,f=e.model,g=e.content,h=e.dragDef,i=!f||!this.isSourceSameSymbol(f),j=((0,r.isFunction)(g)?h:g)||a.model;return Array.isArray(j)?i&&j.every(function(a,b){return c.canMoveSingleContent(a,d+b)}):i&&this.canMoveSingleContent(j,d)},b.prototype.canMoveSingleContent=function(a,b){return this.model.em.Components.canMove(this.model,a,b).result},b.prototype.addChildAt=function(a,b){var c=a._dragSource.content,d=this.isTextNode()&&a.isTextable(),e=(0,r.isFunction)(c)?c():c;return Array.isArray(e)?this.addMultipleChildren(e,b,d):this.addSingleChild(e,b,d)},b.prototype.addSingleChild=function(a,b,c){var d,e,f,g,h;return h=c?null==(g=null==(f=null==(e=null==(d=this.model)?void 0:d.getView)?void 0:e.call(d))?void 0:f.insertComponent)?void 0:g.call(f,a,{action:"add-component"}):this.model.components().add(a,{at:this.getRealIndex(b),action:"add-component"}),new this.constructor(h)},b.prototype.addMultipleChildren=function(a,b,c){var d,e=this;return a.forEach(function(a,f){d=e.addSingleChild(a,b+f,c)}),d},b.prototype.isSourceSameSymbol=function(a){if(aL(this.model)){var b=aS(this.model);if((aJ(b)?b:aO(b))===a)return!0}return!1},Object.defineProperty(b.prototype,"content",{set:function(a){this._dragSource.content=a},enumerable:!1,configurable:!0}),b}(b4.A),b7=p(8433),b8=function(){return(b8=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},b9=function(){function a(a,b){var c=this;this.em=a,this.canvas=a.Canvas;var d=b||this.canvas.getFrames().map(function(a){return a.getComponent().getEl()}),e=Array.isArray(d)?d:[d];this.el=e[0],this.counter=0,(0,r.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave","handleDragEnd"),e.forEach(function(a){return c.toggleEffects(a,!0)})}return a.prototype.toggleEffects=function(a,b){var c={on:ab.on,off:ab.AU},d=b?"on":"off";c[d](a,"dragenter",this.handleDragEnter),c[d](a,"dragover",this.handleDragOver),c[d](a,"drop",this.handleDrop),c[d](a,"dragleave",this.handleDragLeave)},a.prototype.__customTglEff=function(a){var b,c=a?ab.on:ab.AU,d=this.el.ownerDocument,e=null==(b=d.defaultView)?void 0:b.frameElement;this.getSorterOptions=a?function(a){return{legacyOnStartSort:function(){(0,ab.on)(e,"pointermove",a.onMove)},legacyOnEnd:function(){(0,ab.AU)(e,"pointermove",a.onMove)},customTarget:function(a){var b=a.event;return d.elementFromPoint(b.clientX,b.clientY)}}}:void 0,c(e,"pointerenter",this.handleDragEnter),c(e,"pointermove",this.handleDragOver),c(document,"pointerup",this.handleDrop),c(e,"pointerout",this.handleDragLeave)},a.prototype.startCustom=function(){this.__customTglEff(!0)},a.prototype.endCustom=function(a){this.over?this.endDrop(a):this.__customTglEff(!1)},a.prototype.endDrop=function(a,b){var c=this.em,d=this.dragStop;this.counter=0,d&&d(a||!this.over),this.__customTglEff(!1),c.trigger("canvas:dragend",b)},a.prototype.handleDragLeave=function(a){this.updateCounter(-1,a)},a.prototype.updateCounter=function(a,b){this.counter+=a,0===this.counter&&this.endDrop(!0,b)},a.prototype.handleDragEnter=function(a){var b,c,d,e=this,f=this.em,g=this.canvas,h=a.dataTransfer,i=f.get("dragSource");if(((null==i?void 0:i.content)||g.getConfig().allowExternalDrop)&&(this.updateCounter(1,a),!this.over)){this.over=!0;var j=f.Utils,k=(null==i?void 0:i.content)||"<br>";if(f.stopDefault(),f.inAbsoluteMode()){var l=f.Components.getWrapper(),m=l.append({})[0],n=f.Commands.run("core:component-drag",{event:a,guidesInfo:1,center:1,target:m,onEnd:function(a,b,c){var d;if(!c.cancelled&&k){d=l.append(k)[0];var f=g.getOffset(),i=m.getStyle(),j=i.top,n=i.left,o=i.position,p=(0,ab.Xy)(a.target),q=parseInt("".concat(parseFloat(n)+p.x-f.left),10),r=parseInt("".concat(parseFloat(j)+p.y-f.top),10);d.addStyle({left:q+"px",top:r+"px",position:o})}e.handleDragEnd(d,h),m.remove()}});d=function(b){return n.stop(a,{cancel:b})},this.setAbsoluteDragContent=function(a){return k=a}}else{var o=new j.ComponentSorter({em:f,treeClass:b6,containerContext:{container:this.el,containerSel:"*",itemSel:"*",pfx:"gjs-",placeholderElement:g.getPlacerEl(),document:this.el.ownerDocument},dragBehavior:{dragDirection:b7.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnEndMove:this.handleDragEnd}}),p=null==(b=this.getSorterOptions)?void 0:b.call(this,o);p&&(o.eventHandlers.legacyOnStartSort=p.legacyOnStart,o.eventHandlers.legacyOnEnd=p.legacyOnEnd,o.containerContext.customTarget=p.customTarget);var q=f.Components.getShallowWrapper(),r=null==q?void 0:q.append(k,{temporary:!0})[0],s=[{element:null==r?void 0:r.getEl(),dragSource:b8({model:r},i)}];o.startSort(s),this.sorter=o,this.draggedNode=null==(c=o.sourceNodes)?void 0:c[0],d=function(a){a?o.cancelDrag():o.endDrag()}}this.dragStop=d,f.trigger("canvas:dragenter",h,k)}},a.prototype.handleDragEnd=function(a,b){var c=this.em;this.over=!1,a&&(c.set("dragResult",a),c.trigger("canvas:drop",b,a)),c.runDefault({preserveSelected:1})},a.prototype.handleDragOver=function(a){a.preventDefault(),this.em.trigger("canvas:dragover",a)},a.prototype.handleDrop=function(a){a.preventDefault();var b,c=a.dataTransfer,d=this.getContentByData(c).content||"";this.draggedNode&&(this.draggedNode.content=d),null==(b=this.setAbsoluteDragContent)||b.call(this,d),this.endDrop(!d,a)},a.prototype.getContentByData=function(a){var b=this.em,c=(null==a?void 0:a.types)||[],d=(null==a?void 0:a.files)||[],e=b.get("dragSource"),f=(null==a?void 0:a.getData("text"))||"";if(d.length){f=[];for(var g=0;g<d.length;g++){var h=d[g],i=h.type.split("/")[0];"image"==i&&f.push({type:i,file:h,attributes:{alt:h.name}})}}else if(null==e?void 0:e.content)f=e.content;else if((0,r.indexOf)(c,"text/html")>=0)f=a&&a.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,r.indexOf)(c,"text/uri-list")>=0)f={type:"link",attributes:{href:f},content:f};else if((0,r.indexOf)(c,"text/json")>=0){var j=a&&a.getData("text/json");j&&(f=JSON.parse(j))}else 1===c.length&&"text/plain"===c[0]&&(f="<div>".concat(f,"</div>"));var k={content:f,setContent:function(a){k.content=a}};return b.trigger("canvas:dragdata",a,k),k},a}(),ca=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cb=function(){return(cb=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},cc=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},cd=function(a){function b(b,c){var d=a.call(this,{model:b})||this;d.dragging=!1,d.loaded=!1,d.lastMaxHeight=0,d.tools={},(0,r.bindAll)(d,"startAutoscroll","stopAutoscroll","_emitUpdate");var e=d.el;d.module._config=cb(cb({},d.config||{}),{frameView:d}),d.frameWrapView=c,d.showGlobalTools=(0,r.debounce)(d.showGlobalTools.bind(d),50);var f=d.getCanvasModel();return d.listenTo(b,"change:head",d.updateHead),d.listenTo(f,"change:styles",d.renderStyles),b.view=d,(0,s.setViewEl)(e,d),d.autoScroller=new b3(d.config.autoscrollLimit,{rectIsInScrollIframe:!0,onScroll:function(){d.getGlobalToolsEl().style.opacity="0",d.showGlobalTools(),d.em.Canvas.spots.refreshDbn()}}),d}return ca(b,a),Object.defineProperty(b.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),b.prototype.getBoxRect=function(){var a=this.el,b=this.module,c=b.getCanvasView(),d=b.getCoords(),e=a.getBoundingClientRect(),f=c.getCanvasOffset(),g=c.getViewportDelta(),h=b.getZoomMultiplier();return{x:(e.x-f.left-g.x-d.x)*h,y:(e.y-f.top-g.y-d.y)*h,width:e.width*h,height:e.height*h}},b.prototype.updateHead=function(){var a=this.model,b=this.getHead(),c=[],d=[],e=a.head,f=a.previous("head"),g=function(a){return void 0===a&&(a={}),Object.keys(a).sort().map(function(b){return"[".concat(b,'="').concat(a[b],'"]')}).join("")},h=function(a,b,c){a.forEach(function(a){var d=a.tag,e=a.attributes;b.some(function(a){return a.tag===d&&g(a.attributes)===g(e)})||c.push(a)})};h(e,f,d),h(f,e,c),c.forEach(function(a){var c,d=b.querySelector("".concat(a.tag).concat(g(a.attributes)));null==(c=null==d?void 0:d.parentNode)||c.removeChild(d)}),(0,ab.af)(b,d)},b.prototype.getEl=function(){return this.el},b.prototype.getCanvasModel=function(){var a;return null==(a=this===null||void 0===this?void 0:this.em.Canvas)?void 0:a.getModel()},b.prototype.getWindow=function(){return this.getEl().contentWindow},b.prototype.getDoc=function(){return this.getEl().contentDocument},b.prototype.getHead=function(){return this.getDoc().querySelector("head")},b.prototype.getBody=function(){return this.getDoc().querySelector("body")},b.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},b.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,ab.a_)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},b.prototype.getToolsEl=function(){var a;return null==(a=this.frameWrapView)?void 0:a.elTools},b.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},b.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},b.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},b.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},b.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},b.prototype.getOffsetRect=function(){var a=this.el,b=this.getBody(),c=b.scrollTop,d=b.scrollLeft,e=a.offsetHeight,f=a.offsetWidth;return{top:a.offsetTop,left:a.offsetLeft,height:e,width:f,scrollTop:c,scrollLeft:d,scrollBottom:c+e,scrollRight:d+f}},b.prototype._getTool=function(a){var b=this.tools,c=this.getToolsEl();return b[a]||(b[a]=c.querySelector(a)),b[a]},b.prototype.remove=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return this._toggleEffects(!1),this.tools={},null==(a=this.wrapper)||a.remove(),aa.prototype.remove.apply(this,b),this},b.prototype.startAutoscroll=function(){this.autoScroller.start(this.el,this.getWindow(),{lastMaxHeight:this.getWrapper().offsetHeight-this.el.offsetHeight,zoom:this.em.getZoomDecimal(),ignoredElement:this.em.Canvas.getSpotsEl()})},b.prototype.stopAutoscroll=function(){this.autoScroller.stop()},b.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},b.prototype.render=function(){var a=this.$el,b=this.ppfx,c=this.em;return a.attr({class:"".concat(b,"frame")}),this.renderScripts(),c.trigger("frame:render",this),this},b.prototype.renderScripts=function(){var a=this,b=this.el,c=this.model,d=this.em,e="frame:load",f={el:b,model:c,view:this},g=this.getCanvasModel(),h=function(c){var g;if(c.length>0){var i=c.shift(),j=(0,ab.a_)("script",cb({type:"text/javascript"},(0,r.isString)(i)?{src:i}:i));null==(g=b.contentDocument)||g.head.appendChild(j),j.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?h(c):j.onerror=j.onload=h.bind(null,c)}else null==d||d.trigger(L.frameLoadHead,f),a.renderBody(),null==d||d.trigger(L.frameLoadBody,f),null==d||d.trigger(e,f)};b.onload=function(){var b=a.config.frameContent;if(b){var c=a.getDoc();c.open(),c.write(b),c.close()}f.window=a.getWindow(),null==d||d.trigger("".concat(e,":before"),f),null==d||d.trigger(L.frameLoad,f),a.renderHead(),h(cc([],g.get("scripts"),!0))}},b.prototype.renderStyles=function(a){void 0===a&&(a={});var b=this.getHead(),c=this.getCanvasModel(),d=function(a){return void 0===a&&(a=[]),a.map(function(a){return{tag:"link",attributes:cb({rel:"stylesheet"},(0,r.isString)(a)?{href:a}:a)}})},e=d(a.prev||c.previous("styles")),f=d(null==c?void 0:c.get("styles")),g=[],h=[],i=function(a,b,c){a.forEach(function(a){var d=a.attributes.href;b.some(function(a){return a.attributes.href===d})||c.push(a)})};i(f,e,h),i(e,f,g),g.forEach(function(a){var c,d=b.querySelector('link[href="'.concat(a.attributes.href,'"]'));null==(c=null==d?void 0:d.parentNode)||c.removeChild(d)}),(0,ab.af)(b,h)},b.prototype.renderHead=function(){var a,b=this.model,c=this.em,d=b.root,e=null==(a=null==c?void 0:c.Components)?void 0:a.getType(b0).view;e&&(this.headView=new e({el:this.getHead(),model:d.head,config:cb(cb({},d.config),{frameView:this})}).render())},b.prototype.renderBody=function(){var a,b=this,c=this.config,d=this.em,e=this.model,f=this.ppfx,g=this.getBody(),h=this.getWindow(),i=e.hasAutoHeight(),j=d.config;h._isEditor=!0,this.renderStyles({prev:[]}),(0,ab.BC)(g,"<style>\n      ".concat(j.baseCss||c.frameStyle||"","\n\n      ").concat(i?"body { overflow: hidden }":"",'\n\n      [data-gjs-type="wrapper"] {\n        ').concat(!i?"min-height: 100vh;":"","\n        padding-top: 0.001em;\n      }\n\n      .").concat(f,"dashed *[data-gjs-highlightable] {\n        outline: 1px dashed rgba(170,170,170,0.7);\n        outline-offset: -2px;\n      }\n\n      .").concat(f,"selected {\n        outline: 2px solid #3b97e3 !important;\n        outline-offset: -2px;\n      }\n\n      .").concat(f,"selected-parent {\n        outline: 2px solid ").concat("#ffca6f"," !important\n      }\n\n      .").concat(f,"no-select {\n        user-select: none;\n        -webkit-user-select:none;\n        -moz-user-select: none;\n      }\n\n      .").concat(f,"freezed {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n\n      .").concat(f,"no-pointer {\n        pointer-events: none;\n      }\n\n      .").concat(f,"pointer-init {\n        pointer-events: initial;\n      }\n\n      .").concat(f,"plh-image {\n        background: #f5f5f5;\n        border: none;\n        height: 100px;\n        width: 100px;\n        display: block;\n        outline: 3px solid #ffca6f;\n        cursor: pointer;\n        outline-offset: -2px\n      }\n\n      .").concat(f,"grabbing {\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n      }\n\n      .").concat(f,"is__grabbing {\n        overflow-x: hidden;\n      }\n\n      .").concat(f,"is__grabbing,\n      .").concat(f,"is__grabbing * {\n        cursor: grabbing !important;\n      }\n\n      ").concat(j.canvasCss||"","\n      ").concat(j.protectedCss||"","\n    </style>"));var k=e.root,l=((null==(a=null==d?void 0:d.Components)?void 0:a.getType("wrapper"))||{}).view;l&&((0,r.isFunction)(c.customRenderer)?c.customRenderer({editor:d.Editor,frame:e,window:h,frameView:this,onMount:function(a){b.wrapper=a,b._onRootMount(a)}}):(this.wrapper=new l({model:k,config:cb(cb({},k.config),{em:d,frameView:this})}).render(),this._onRootMount(this.wrapper)))},b.prototype._onRootMount=function(a){var b,c=this,d=this.config,e=this.em,f=this.model,g=this.getDoc(),h=g.body;(0,ab.BC)(h,a.el),(0,ab.BC)(h,new ak({collection:f.getStyles(),config:cb(cb({},e.Css.getConfig()),{frameView:this})}).render().el),(0,ab.BC)(h,this.getJsContainer()),(0,ab.on)(h,"click",function(a){var b;return a&&(null==(b=a.target)?void 0:b.tagName)=="A"&&a.preventDefault()}),(0,ab.on)(h,"submit",function(a){return a&&a.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!d.infiniteCanvas}}].forEach(function(a){return a.event.split(" ").forEach(function(b){g.addEventListener(b,function(b){return c.el.dispatchEvent((0,ab.yL)(b,a.class))},a.opts)})}),this._toggleEffects(!0),(0,s.hasDnd)(e)&&(this.droppable=new b9(e,null==(b=this.wrapper)?void 0:b.el)),this.loaded=!0,f.trigger("loaded")},b.prototype._toggleEffects=function(a){var b=a?ab.on:ab.AU,c=this.getWindow();c&&b(c,"".concat(ab.D8," resize"),this._emitUpdate)},b.prototype._emitUpdate=function(){this.model._emitUpdated()},b}(aa),ce=p(9966),cf=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cg=function(){return(cg=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},ch=function(a){function b(b,c){var d=a.call(this,{model:b})||this;return(0,r.bindAll)(d,"onScroll","frameLoaded","updateOffset","remove","startDrag"),cg(cg({},b.config),{frameWrapView:d}),d.cv=c,d.frame=new cd(b,d),d.classAnim="".concat(d.ppfx,"frame-wrapper--anim"),d.updateOffset=(0,r.debounce)(d.updateOffset.bind(d),0),d.updateSize=(0,r.debounce)(d.updateSize.bind(d),0),d.listenTo(b,"loaded",d.frameLoaded),d.listenTo(b,"change:x change:y",d.updatePos),d.listenTo(b,"change:width change:height",d.updateSize),d.listenTo(b,"destroy remove",d.remove),d.updatePos(),d.setupDragger(),d}return cf(b,a),b.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},b.prototype.setupDragger=function(){var a,b,c,d=this,e=this.module,f=this.model,g=function(a){e.toggleFramesEvents(a)};this.dragger=new ce.A({onStart:function(){var e=f.attributes,h=e.x,i=e.y;c=d.em.getZoomMultiplier(),a=h,b=i,g(!1)},onEnd:function(){return g(!0)},setPosition:function(d){f.set({x:a+d.x*c,y:b+d.y*c})}})},b.prototype.startDrag=function(a){var b;a&&(null==(b=this.dragger)||b.start(a))},b.prototype.__clear=function(a){var b=this.frame;b&&b.remove(a),(0,ab.YZ)(this.elTools)},b.prototype.remove=function(a){var b,c=this;return null==(b=this.sizeObserver)||b.disconnect(),this.__clear(a),aa.prototype.remove.apply(this,a),["frame","dragger","cv","elTools"].forEach(function(a){return c[a]=0}),this},b.prototype.updateOffset=function(){var a,b=this.em,c=this.$el,d=this.frame;b&&!b.destroyed&&(b.runDefault({preserveSelected:1}),c.removeClass(this.classAnim),null==(a=null==d?void 0:d.model)||a._emitUpdated())},b.prototype.updatePos=function(a){var b=this.model,c=this.el,d=b.attributes,e=d.x,f=d.y,g=c.style;this.frame.rect=void 0,g.left=isNaN(e)?e:"".concat(e,"px"),g.top=isNaN(f)?f:"".concat(f,"px"),a&&this.updateOffset()},b.prototype.updateSize=function(){this.updateDim()},b.prototype.updateDim=function(){var a=this.em,b=this.el,c=this.$el,d=this.model,e=this.classAnim,f=this.frame;if(f){f.rect=void 0,c.addClass(e);var g=this.__handleSize(),h=g.noChanges,i=g.width,j=g.height;((0,r.isNull)(i)||(0,r.isNull)(j))&&d.set(cg(cg({},i?{}:{width:b.offsetWidth}),j?{}:{height:b.offsetHeight}),{silent:1}),a.stopDefault({preserveSelected:1}),h?this.updateOffset():setTimeout(this.updateOffset,350)}},b.prototype.onScroll=function(){var a=this.frame;this.em.trigger("frame:scroll",{frame:a,body:a.getBody(),target:a.getWindow()})},b.prototype.frameLoaded=function(){var a=this.frame;this.config,a.getWindow().onscroll=this.onScroll,this.updateDim()},b.prototype.__handleSize=function(){var a,b=this.model,c=this.el.style,d=b.attributes,e=d.width,f=d.height,g=c.width||"",h=c.height||"",i=e||"",j=f||"",k=g==i&&h==j,l=(0,r.isNumber)(i)?"".concat(i).concat("px"):i,m=(0,r.isNumber)(j)?"".concat(j).concat("px"):j;if(c.width=l,null==(a=this.sizeObserver)||a.disconnect(),b.hasAutoHeight()){var n=this.frame.el.contentDocument;if(n){var o=new ResizeObserver(function(){requestAnimationFrame(function(){var a=parseFloat(b.get("minHeight"))||0,d=Math.max(n.body.scrollHeight,a);c.height="".concat(d,"px")})});o.observe(n.body),this.sizeObserver=o}}else c.height=m,delete this.sizeObserver;return{noChanges:k,width:e,height:f,newW:i,newH:j}},b.prototype.render=function(){var a=this.frame,b=this.$el,c=this.ppfx,d=this.cv,e=this.model,f=this.el,g=e.attributes.onRender;this.__clear(),this.__handleSize(),a.render(),b.empty().attr({class:"".concat(c,"frame-wrapper")}).append('\n      <div class="'.concat(c,'frame-wrapper__top gjs-two-color" data-frame-top>\n        <div class="').concat(c,'frame-wrapper__name" data-action-move>\n          ').concat(e.get("name")||"",'\n        </div>\n        <div class="').concat(c,'frame-wrapper__top-r">\n          <div class="').concat(c,'frame-wrapper__icon" data-action-remove style="display: none">\n            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>\n          </div>\n        </div>\n      </div>\n      <div class="').concat(c,'frame-wrapper__right" data-frame-right></div>\n      <div class="').concat(c,'frame-wrapper__left" data-frame-left></div>\n      <div class="').concat(c,'frame-wrapper__bottom" data-frame-bottom></div>\n      ')).append(a.el);var h=(0,ab.a_)("div",{class:"".concat(c,"tools"),style:"pointer-events:none; display: none"},'\n      <div class="'.concat(c,'highlighter" data-hl></div>\n      <div class="').concat(c,'badge" data-badge></div>\n      <div class="').concat(c,'placeholder">\n        <div class="').concat(c,'placeholder-int"></div>\n      </div>\n      <div class="').concat(c,'ghost"></div>\n      <div class="').concat(c,'toolbar" style="pointer-events:all"></div>\n      <div class="').concat(c,'resizer"></div>\n      <div class="').concat(c,'offset-v" data-offset>\n        <div class="gjs-marginName" data-offset-m>\n          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>\n          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>\n          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>\n          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>\n        </div>\n        <div class="gjs-paddingName" data-offset-m>\n          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>\n          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>\n          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>\n          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>\n        </div>\n      </div>\n      <div class="').concat(c,'offset-fixed-v"></div>\n    '));this.elTools=h;var i=null==d?void 0:d.toolsWrapper;return i&&i.appendChild(h),g&&g({el:f,elTop:f.querySelector("[data-frame-top]"),elRight:f.querySelector("[data-frame-right]"),elBottom:f.querySelector("[data-frame-bottom]"),elLeft:f.querySelector("[data-frame-left]"),frame:e,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},b}(aa),ci=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cj=function(a){function b(b,c){void 0===b&&(b={});var d=a.call(this,b,!0)||this;return d.listenTo(d.collection,"reset",d.render),d.canvasView=c.canvasView,d._module=c.module,d}return ci(b,a),b.prototype.onRemoveBefore=function(a,b){void 0===b&&(b={}),a.forEach(function(a){return a.remove(b)})},b.prototype.onRender=function(){var a=this.$el,b=this.ppfx;a.attr({class:"".concat(b,"frames")})},b.prototype.clearItems=function(){(this.viewCollection||[]).forEach(function(a){return a.remove()}),this.viewCollection=[]},b.prototype.renderView=function(a,b){return new ch(a,this.canvasView)},b}(ad),ck=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cl=function(){return(cl=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},cm=function(a){function b(b){var c=a.call(this,{model:b})||this;c.ready=!1,(0,r.bindAll)(c,"clearOff","onKeyPress","onWheel","onPointer");var d=c.em,e=c.pfx,f=c.ppfx,g=c.module.events;return c.className="".concat(e,"canvas ").concat(f,"no-touch-actions").concat(d.config.customUI?"":" ".concat(e,"canvas-bg")),c.clsUnscale="".concat(e,"unscale"),c._initFrames(),c.listenTo(d,g.refresh,c.clearOff),c.listenTo(d,"component:selected",c.checkSelected),c.listenTo(d,"".concat(g.coords," ").concat(g.zoom),c.updateFrames),c.listenTo(b,"change:frames",c._onFramesUpdate),c.toggleListeners(!0),c}return ck(b,a),b.prototype.template=function(){var a=this.pfx;return'\n      <div class="'.concat(a,'canvas__frames" data-frames>\n        <div class="').concat(a,'canvas__spots" data-spots></div>\n      </div>\n      <div id="').concat(a,'tools" class="').concat(a,'canvas__tools" data-tools></div>\n      <style data-canvas-style></style>\n    ')},b.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},b.prototype._initFrames=function(){var a=this.frames,b=this.model,c=this.config,d=this.em,e=b.frames;d.set("readyCanvas",0),e.once("loaded:all",function(){return d.set("readyCanvas",1)}),null==a||a.remove(),this.frames=new cj({collection:e},cl(cl({},c),{canvasView:this}))},b.prototype.checkSelected=function(a,b){void 0===b&&(b={});var c,d=b.scroll,e=this.em.getCurrentFrame();d&&(null==(c=a.views)||c.forEach(function(a){a.frameView===e&&a.scrollIntoView(d)}))},b.prototype.remove=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return clearTimeout(this.timerZoom),null==(a=this.frames)||a.remove(),this.frames=void 0,aa.prototype.remove.apply(this,b),this.toggleListeners(!1),this},b.prototype.preventDefault=function(a){var b;a&&(a.preventDefault(),null==(b=a._parentEvent)||b.preventDefault())},b.prototype.toggleListeners=function(a){var b=this.el,c=this.config,d=a?ab.on:ab.AU;d(document,"keypress",this.onKeyPress),d(window,"scroll resize",this.clearOff),d(b,"wheel",this.onWheel,{passive:!c.infiniteCanvas}),d(b,"pointermove",this.onPointer)},b.prototype.screenToWorld=function(a,b){var c=this.module,d=c.getCoords(),e=c.getZoomMultiplier(),f=this.getViewportDelta();return{x:(a-d.x-f.x)*e,y:(b-d.y-f.y)*e}},b.prototype.onPointer=function(a){if(this.config.infiniteCanvas){var b=this.getCanvasOffset(),c=(0,ab.Xy)(),d={x:a.clientX-b.left+c.x,y:a.clientY-b.top+c.y};if(a._parentEvent){var e=a.target.getBoundingClientRect(),f=this.module.getZoomDecimal();d.x=e.left-b.left+c.x+a.clientX*f,d.y=e.top-b.top+c.y+a.clientY*f}this.model.set({pointerScreen:d,pointer:this.screenToWorld(d.x,d.y)})}},b.prototype.onKeyPress=function(a){var b=this.em;" "!==(0,ab.Ch)(a)||1===b.getZoomDecimal()||b.Canvas.isInputFocused()||(this.preventDefault(a),b.Editor.runCommand("core:canvas-move"))},b.prototype.onWheel=function(a){var b=this.module;if(this.config.infiniteCanvas){this.preventDefault(a);var c=a.deltaX,d=a.deltaY,e=b.getZoomDecimal(),f=(0,ab.rp)(a),g=b.getCoords();if(f){var h=e-d*e*.01;b.setZoom(100*h);var i=this.model.getPointerCoords(x.x2.Screen),j=this.getCanvasOffset(),k=i.x-j.width/2,l=i.y-j.height/2,m=h/e,n=k-(k-g.x)*m,o=l-(l-g.y)*m;b.setCoords(n,o)}else this.onPointer(a),b.setCoords(g.x-c,g.y-d)}},b.prototype.updateFrames=function(a){var b=this.em,c=this.toolsWrapper,d={preserveSelected:1};this.updateFramesArea(),this.clearOff(),c.style.display="none",b.trigger("canvas:update",a),clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){b.stopDefault(d),b.runDefault(d),c.style.display=""},300)},b.prototype.updateFramesArea=function(){var a=this.framesArea,b=this.model,c=this.module,d=this.cvStyle,e=this.clsUnscale,f=c.getZoomMultiplier();if(a){var g=b.attributes,h=g.x,i=g.y,j=c.getZoomDecimal();a.style.transform="scale(".concat(j,") translate(").concat(h*f,"px, ").concat(i*f,"px)")}d&&(d.innerHTML="\n        .".concat(e," { scale: ").concat(f," }\n      "))},b.prototype.fitViewport=function(a){void 0===a&&(a={});var b,c,d,e=this.em,f=this.module,g=this.model;this.clearOff();var h=this.getCanvasOffset(),i=a.el,j=i&&(null==(b=(0,s.getComponentView)(i))?void 0:b.frameView),k=j?j.model:a.frame||e.getCurrentFrameModel()||g.frames.at(0),l=k.attributes,m=l.x,n=l.y,o={x:null!=m?m:0,y:null!=n?n:0,width:k.width,height:k.height};if(i){var p=this.getElBoxRect(i);o.x=o.x+p.x,o.y=o.y+p.y,o.width=p.width,o.height=p.height}var q=a.ignoreHeight,t=null!=(c=a.gap)?c:0,u=(0,r.isNumber)(t),v=u?t:t.x,w=u?t:t.y,x=o.width+2*v,y=o.height+2*w,z=h.width,A=h.height,B=z/x,C=100*(q?B:Math.min(B,A/y)),D=null!=(d=(0,r.isFunction)(a.zoom)?a.zoom(C):a.zoom)?d:C;f.setZoom(D,{from:"fitViewport"});var E=-o.x+(k.width>=z?z/2-x/2:-v),F=-o.y+A/2-y/2,G=f.getZoomDecimal(),H={x:(E+v)*G,y:(F+w)*G};if(q){var I=f.getZoomMultiplier();H.y=(-o.y+w)*G-(A*I-A)/2/I}f.setCoords(H.x,H.y)},b.prototype.isElInViewport=function(a){var b=(0,s.getElement)(a),c=(0,ab.C8)(b),d=this.getFrameOffset(b),e=c.top,f=c.left;return e>=0&&f>=0&&e<=d.height&&f<=d.width},b.prototype.offset=function(a,b){void 0===b&&(b={});var c=b.noScroll,d=(0,ab.C8)(a),e=c?{x:0,y:0}:(0,ab.Xy)(a);return{top:d.top+e.y,left:d.left+e.x,width:d.width,height:d.height}},b.prototype.getRectToScreen=function(a){var b,c,d,e,f=this.getCanvasScroll(),g=this.module.getZoomDecimal(),h=this.module.getCoords(),i=this.getViewportDelta();return{x:(null!=(b=a.x)?b:0)*g-f.scrollLeft+h.x+i.x||0,y:(null!=(c=a.y)?c:0)*g-f.scrollTop+h.y+i.y||0,width:(null!=(d=a.width)?d:0)*g,height:(null!=(e=a.height)?e:0)*g}},b.prototype.getElBoxRect=function(a,b){void 0===b&&(b={});var c,d,e,f=this.module,g=(0,ab.C8)(a),h=g.width,i=g.height,j=g.left,k=g.top,l=null==(c=(0,s.getComponentView)(a))?void 0:c.frameView,m=null==l?void 0:l.getBoxRect(),n=f.getZoomMultiplier(),o=null!=(d=null==m?void 0:m.x)?d:0,p=null!=(e=null==m?void 0:m.y)?e:0,q=this.el,r=(0,ab.Xy)(),t={x:j+o+(q.scrollLeft+r.x)*n,y:k+p+(q.scrollTop+r.y)*n,width:h,height:i};return b.local&&(t.x=j,t.y=k),b.toScreen?this.getRectToScreen(t):t},b.prototype.getViewportRect=function(a){void 0===a&&(a={});var b=this.getCanvasOffset(),c=b.top,d=b.left,e=b.width,f=b.height,g=this.module;if(!a.toWorld)return{x:d,y:c,width:e,height:f};var h=g.getZoomMultiplier(),i=g.getCoords(),j=this.getViewportDelta();return{x:(-i.x-j.x||0)*h,y:(-i.y-j.y||0)*h,width:e*h,height:f*h}},b.prototype.getViewportDelta=function(a){void 0===a&&(a={});var b=this.module.getZoomMultiplier(),c=this.getCanvasOffset(),d=c.width,e=c.height;return{x:(d*b-d)/2/b,y:(e*b-e)/2/b}},b.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},b.prototype.getFrameOffset=function(a){var b;if(!this.frmOff||a){var c=null==(b=this.frame)?void 0:b.el,d=null==a?void 0:a.ownerDocument.defaultView,e=d?d.frameElement:c;this.frmOff=this.offset(e||c)}return this.frmOff},b.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},b.prototype.getElementPos=function(a,b){void 0===b&&(b={});var c=this.module.getZoomDecimal(),d=this.getFrameOffset(a),e=this.el,f=this.getCanvasOffset(),g=this.offset(a,b),h=b.avoidFrameOffset?0:d.top,i=b.avoidFrameOffset?0:d.left,j=b.avoidFrameZoom?g.top:g.top*c,k=b.avoidFrameZoom?g.left:g.left*c;return{top:b.avoidFrameOffset?j:j+h-f.top+e.scrollTop,left:b.avoidFrameOffset?k:k+i-f.left+e.scrollLeft,height:b.avoidFrameZoom?g.height:g.height*c,width:b.avoidFrameZoom?g.width:g.width*c,zoom:c,rect:g}},b.prototype.getElementOffsets=function(a){if(!a||(0,ab.ir)(a))return{};var b={},c=window.getComputedStyle(a),d=this.module.getZoomDecimal();return["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"].forEach(function(a){b[a]=parseFloat(c[a])*d}),b},b.prototype.getPosition=function(a){void 0===a&&(a={});var b,c=null==(b=this.frame)?void 0:b.el.contentDocument;if(!c)return{top:0,left:0,width:0,height:0};var d=c.body,e=this.module.getZoomDecimal(),f=this.getFrameOffset(),g=this.getCanvasOffset(),h=a.noScroll;return{top:f.top+(h?0:d.scrollTop)*e-g.top,left:f.left+(h?0:d.scrollLeft)*e-g.left,width:g.width,height:g.height}},b.prototype.getCanvasScroll=function(){return this.config.scrollableCanvas?{scrollTop:this.el.scrollTop,scrollLeft:this.el.scrollLeft}:{scrollTop:0,scrollLeft:0}},b.prototype.updateScript=function(a){var b=a.model,c=b.getId(),d={component:b,view:a,el:a.el};if(!a.scriptContainer){a.scriptContainer=(0,ab.a_)("div",{"data-id":c});var e=this.getJsContainer();null==e||e.appendChild(a.scriptContainer)}a.el.id=c,a.scriptContainer.innerHTML="";var f=document.createElement("script"),g=b.getScriptString(),h=b.get("script-props")?g:"function(){\n".concat(g,"\n;}"),i=JSON.stringify(b.__getScriptProps());f.innerHTML="\n      setTimeout(function() {\n        var item = document.getElementById('".concat(c,"');\n        if (!item) return;\n        var script = (").concat(h,").bind(item);\n        script(").concat(i,", { el: item });\n      }, 1);"),setTimeout(function(){b.emitWithEditor(Y.I.scriptMountBefore,d);var c=a.scriptContainer;null==c||c.appendChild(f),b.emitWithEditor(Y.I.scriptMount,d)},0)},b.prototype.getJsContainer=function(a){var b=this.getFrameView(a);return null==b?void 0:b.getJsContainer()},b.prototype.getFrameView=function(a){return(null==a?void 0:a.frameView)||this.em.getCurrentFrame()},b.prototype._renderFrames=function(){if(this.ready){var a=this.model,b=this.frames,c=this.em,d=this.framesArea,e=a.frames;e.listenToLoad(),b.render();var f=e.at(0),g=null==f?void 0:f.view;c.setCurrentFrame(g),null==d||d.appendChild(b.el),this.frame=g,this.updateFramesArea()}},b.prototype.renderFrames=function(){this._renderFrames()},b.prototype.render=function(){var a=this.el,b=this.$el,c=this.ppfx,d=this.config,e=this.em;b.html(this.template());var f=b.find("[data-frames]");this.framesArea=f.get(0);var g=b.find("[data-tools]");return this.toolsWrapper=g.get(0),g.append('\n      <div class="'.concat(c,"tools ").concat(c,'tools-gl" style="pointer-events:none">\n        <div class="').concat(c,'placeholder">\n          <div class="').concat(c,'placeholder-int"></div>\n        </div>\n      </div>\n      <div id="').concat(c,'tools" style="pointer-events:none">\n        ').concat(d.extHl?'<div class="'.concat(c,'highlighter-sel"></div>'):"",'\n        <div class="').concat(c,'badge"></div>\n        <div class="').concat(c,'ghost"></div>\n        <div class="').concat(c,'toolbar" style="pointer-events:all"></div>\n        <div class="').concat(c,'resizer"></div>\n        <div class="').concat(c,'offset-v"></div>\n        <div class="').concat(c,'offset-fixed-v"></div>\n      </div>\n    ')),this.toolsEl=a.querySelector("#".concat(c,"tools")),this.hlEl=a.querySelector(".".concat(c,"highlighter")),this.badgeEl=a.querySelector(".".concat(c,"badge")),this.placerEl=a.querySelector(".".concat(c,"placeholder")),this.ghostEl=a.querySelector(".".concat(c,"ghost")),this.toolbarEl=a.querySelector(".".concat(c,"toolbar")),this.resizerEl=a.querySelector(".".concat(c,"resizer")),this.offsetEl=a.querySelector(".".concat(c,"offset-v")),this.fixedOffsetEl=a.querySelector(".".concat(c,"offset-fixed-v")),this.toolsGlobEl=a.querySelector(".".concat(c,"tools-gl")),this.spotsEl=a.querySelector("[data-spots]"),this.cvStyle=a.querySelector("[data-canvas-style]"),a.className=(0,s.getUiClass)(e,this.className),!0===d.scrollableCanvas&&(a.style.overflow="auto"),this.ready=!0,this._renderFrames(),this},b}(aa),cn=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),co=function(){return(co=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},cp=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},cq=function(a){function b(b){var c=a.call(this,b,"Canvas",{stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:"\n    body { background-color: #fff }\n    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }\n    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }\n    * ::-webkit-scrollbar { width: 10px }\n  ",notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0})||this;return c.events=io,c.framesById={},c.canvas=new W(c),c.spots=new $(c),c.model=c.canvas,c.startAutoscroll=c.startAutoscroll.bind(c),c.stopAutoscroll=c.stopAutoscroll.bind(c),c.autoScroller=new b3,c}return cn(b,a),b.prototype.getCanvasView=function(){return this.canvasView},b.prototype.postLoad=function(){this.model.init()},b.prototype.getModel=function(){return this.canvas},b.prototype.getElement=function(){return this.getCanvasView().el},b.prototype.getFrame=function(a){return this.getFrames()[a||0]},b.prototype.getFrameEl=function(){var a=(this.canvasView||{}).frame;return null==a?void 0:a.el},b.prototype.getFramesEl=function(){var a;return null==(a=this.canvasView)?void 0:a.framesArea},b.prototype.getWindow=function(){var a=(this.canvasView||{}).frame;return null==a?void 0:a.getWindow()},b.prototype.getDocument=function(){var a=this.getFrameEl();return null==a?void 0:a.contentDocument},b.prototype.getBody=function(){var a=this.getDocument();return null==a?void 0:a.body},b.prototype._getLocalEl=function(a,b,c){var d=a,e=null==b?void 0:b.frameView;return e?e[c]():d},b.prototype.getGlobalToolsEl=function(){var a;return null==(a=this.canvasView)?void 0:a.toolsGlobEl},b.prototype.getToolsEl=function(a){return this._getLocalEl(this.getCanvasView().toolsEl,a,"getToolsEl")},b.prototype.getHighlighter=function(a){return this._getLocalEl(this.getCanvasView().hlEl,a,"getHighlighter")},b.prototype.getBadgeEl=function(a){return this._getLocalEl(this.getCanvasView().badgeEl,a,"getBadgeEl")},b.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},b.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},b.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},b.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},b.prototype.getOffsetViewerEl=function(a){return this._getLocalEl(this.getCanvasView().offsetEl,a,"getOffsetViewerEl")},b.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},b.prototype.getSpotsEl=function(){var a;return null==(a=this.canvasView)?void 0:a.spotsEl},b.prototype.render=function(){var a;return null==(a=this.canvasView)||a.remove(),this.canvasView=new cm(this.canvas),this.canvasView.render().el},b.prototype.getOffset=function(){var a=this.offset(this.getFrameEl()),b=this.offset(this.getElement());return{top:a.top-b.top,left:a.left-b.left}},b.prototype.offset=function(a){return this.getCanvasView().offset(a)},b.prototype.setCustomBadgeLabel=function(a){this.config.customBadgeLabel=a},b.prototype.getElementPos=function(a,b){return this.getCanvasView().getElementPos(a,b)},b.prototype.getElementOffsets=function(a){return this.getCanvasView().getElementOffsets(a)},b.prototype.getRect=function(){var a,b=null!=(a=this.getCanvasView().getPosition())?a:{},c=b.top,d=b.left;return co(co({},this.getCanvasView().getCanvasOffset()),{topScroll:void 0===c?0:c,leftScroll:void 0===d?0:d})},b.prototype.getTargetToElementDim=function(a,b,c){void 0===c&&(c={});var d=c||{},e=this.getCanvasView().getPosition();if(e){var f=d.elPos||this.getCanvasView().getElementPos(b),g=c.toRight||0,h=d.targetHeight||a.offsetHeight,i=d.targetWidth||a.offsetWidth,j=d.event||null,k=f.top-h,l=f.left;l+=g?f.width:0;var m=(l=g?l-i:l)<e.left?e.left:l,n=k<e.top?e.top:k,o={top:n=n>f.top+f.height?f.top+f.height:n,left:m,elementTop:f.top,elementLeft:f.left,elementWidth:f.width,elementHeight:f.height,targetWidth:a.offsetWidth,targetHeight:a.offsetHeight,canvasTop:e.top,canvasLeft:e.left,canvasWidth:e.width,canvasHeight:e.height};return j&&this.em&&this.em.trigger(j,o),o}},b.prototype.canvasRectOffset=function(a,b,c){var d=this;void 0===c&&(c={});var e=function(a){var b=a.defaultView;return null==b?void 0:b.frameElement},f=function(a,b,f){void 0===b&&(b=1);var g=d.em.getZoomDecimal(),h=b?"top":"left",i=a.ownerDocument,j=c.offset?e(i):{},k=j.offsetTop,l=j.offsetLeft,m=i.body||{},n=m.scrollTop,o=m.scrollLeft,p=b?void 0===n?0:n:void 0===o?0:o,q=b?void 0===k?0:k:void 0===l?0:l;return f[h]-(p-q)*g};return{top:f(a,1,b),left:f(a,0,b)}},b.prototype.getTargetToElementFixed=function(a,b,c){void 0===c&&(c={});var d=c.pos||this.getElementPos(a,{noScroll:!0}),e=c.canvasOff||this.canvasRectOffset(a,d),f=b.offsetHeight||0,g=b.offsetWidth||0,h=this.getCanvasView(),i=h.getCanvasScroll(),j=i.scrollTop,k=i.scrollLeft,l=h.getPosition(),m=c.event,n=d.width-g,o=-f,p=(0,r.isUndefined)(c.left)?n:c.left;p=Math.min(p=Math.min(p=Math.max(p,Math.max(-d.left+k,0)),d.width-g),l.width+k-g-d.left);var q=e.top<f+j,s=o;if(q){var t=d.height+f;if(t<l.height)s+=t;else{var u=-e.top+j;s=u<d.height?u:d.height}}var v={top:s,left:p,canvasOffsetTop:e.top,canvasOffsetLeft:e.left,elRect:d,canvasOffset:e,canvasRect:l,targetWidth:g,targetHeight:f};return m&&this.em.trigger(m,v),v},b.prototype.getMouseRelativePos=function(a,b){void 0===b&&(b={});var c=b.subWinOffset,d=a.target,e=d.nodeType===Node.DOCUMENT_NODE?d:d.ownerDocument,f=e.defaultView||e.parentWindow,g=f.frameElement,h=c?f.pageYOffset:0,i=c?f.pageXOffset:0,j=this.getZoomMultiplier(),k=0,l=0;if(g){var m=g.getBoundingClientRect();k=m.top||0,l=m.left||0}return{y:(a.clientY+k-h)*j,x:(a.clientX+l-i)*j}},b.prototype.getMouseRelativeCanvas=function(a,b){var c,d=this.getZoomDecimal(),e=this.getCanvasView(),f=null!=(c=e.getPosition(b))?c:{top:0,left:0},g=e.getCanvasScroll(),h={top:f.top+g.scrollTop,left:f.left+g.scrollLeft},i=h.top,j=h.left;return{y:a.clientY*d+i,x:a.clientX*d+j}},b.prototype.startDrag=function(a){this.em.set("dragSource",a)},b.prototype.endDrag=function(){this.em.set({dragResult:null,dragSource:void 0})},b.prototype.hasFocus=function(){return this.getDocument().hasFocus()},b.prototype.isInputFocused=function(){var a=this.getDocument(),b=this.getFrameEl(),c=cp(["body"],this.config.notTextable,!0),d=b&&document.activeElement===b?a&&a.activeElement:document.activeElement;return d&&!c.some(function(a){return d.matches(a)})},b.prototype.scrollTo=function(a,b){void 0===b&&(b={});var c=(0,s.getElement)(a),d=c&&(0,s.getViewEl)(c);d&&d.scrollIntoView(b)},b.prototype.startAutoscroll=function(a){var b=a&&a.view||this.em.getCurrentFrame();if(b&&b.startAutoscroll(),this.config.scrollableCanvas){var c=this.getCanvasView().el;this.autoScroller.start(c,c,{zoom:this.em.getZoomDecimal(),ignoredElement:this.getSpotsEl()})}},b.prototype.stopAutoscroll=function(a){var b=a&&a.view||this.em.getCurrentFrame();b&&b.stopAutoscroll(),this.config.scrollableCanvas&&this.autoScroller.stop()},b.prototype.setZoom=function(a,b){return void 0===b&&(b={}),this.canvas.set("zoom","string"==typeof a?parseFloat(a):a,b),this},b.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},b.prototype.setCoords=function(a,b,c){void 0===c&&(c={});var d,e=a||0===a,f=b||0===b,g={x:this.canvas.get("x"),y:this.canvas.get("y")};if(e&&(g.x=parseFloat("".concat(a))),f&&(g.y=parseFloat("".concat(b))),c.toWorld){var h=null==(d=this.canvasView)?void 0:d.getViewportDelta();h&&(e&&(g.x=g.x-h.x),f&&(g.y=g.y-h.y))}return this.canvas.set(g),this},b.prototype.getCoords=function(){var a=this.canvas.attributes;return{x:a.x,y:a.y}},b.prototype.getPointer=function(a){var b=this.canvas.attributes,c=b.pointer,d=b.pointerScreen;return a?d:c},b.prototype.getZoomDecimal=function(){return this.getZoom()/100},b.prototype.getZoomMultiplier=function(){var a=this.getZoomDecimal();return a?1/a:1},b.prototype.fitViewport=function(a){var b;null==(b=this.canvasView)||b.fitViewport(a)},b.prototype.toggleFramesEvents=function(a){this.getFramesEl().style.pointerEvents=a?"":"none"},b.prototype.getFrames=function(){return this.canvas.frames.map(function(a){return a})},b.prototype.addFrame=function(a,b){return void 0===a&&(a={}),void 0===b&&(b={}),this.canvas.frames.add(new S(this,co({},a)),b)},b.prototype.getLastDragResult=function(){return this.em.get("dragResult")},b.prototype.addSpot=function(a,b){void 0===b&&(b={});var c,d=this.getSpots(a);if(d.length){var e=d[0];return e.set(a),e}var f=a.componentView||(null==(c=a.component)?void 0:c.view),g=new X.A(this,co(co({},a),{id:a.id||"cs_".concat(a.type,"_").concat(null==f?void 0:f.cid),type:a.type||""}));return this.spots.add(g,b),g},b.prototype.getSpots=function(a){return void 0===a&&(a={}),this.spots.where(a.id?{id:a.id}:a)},b.prototype.removeSpots=function(a){void 0===a&&(a={});var b=(0,r.isArray)(a)?a:this.getSpots(a);return this.spots.remove(b)},b.prototype.hasCustomSpot=function(a){var b=this.config.customSpots;return!0===b||!!b&&!!a&&!!b[a]},b.prototype.getWorldRectToScreen=function(a){var b;return null==(b=this.canvasView)?void 0:b.getRectToScreen(a)},b.prototype.refresh=function(a){void 0===a&&(a={});var b=this.em,c=this.events,d=this.canvasView;null==d||d.clearOff(),(a.spots||a.all)&&(this.refreshSpots(),b.trigger("canvas:updateTools")),b.set("canvasOffset",this.getOffset()),b.trigger(c.refresh,a)},b.prototype.refreshSpots=function(){this.spots.refresh()},b.prototype.destroy=function(){var a,b=this;this.canvas.stopListening(),null==(a=this.canvasView)||a.remove(),["model","droppable"].forEach(function(a){return b[a]={}})},b}(E),cr=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cs=function(){return(cs=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},ct=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.dataResolver=d.initializeDataResolver(b,c),d.listenToPropsChange(),d}return cr(b,a),b.prototype.initializeDataResolver=function(a,b){var c,d=null!=(c=a.dataResolver)?c:{type:a.type};return this.createResolverInstance(d,cs(cs({},b),{collectionsStateMap:this.collectionsStateMap}))},b.prototype.getDataResolver=function(){return this.get("dataResolver")},b.prototype.setDataResolver=function(a){return this.set("dataResolver",a)},b.prototype.onCollectionsStateMapUpdate=function(b){this.dataResolver.updateCollectionsStateMap(b),a.prototype.onCollectionsStateMapUpdate.call(this,b)},b.prototype.listenToPropsChange=function(){var a=this;this.on("change:dataResolver",function(){a.dataResolver.set(a.get("dataResolver"))})},b.prototype.removePropsListeners=function(){this.stopListening(this.dataResolver),this.off("change:dataResolver"),this.off("change:".concat(this.collectionsStateMap))},b.prototype.destroy=function(b){return this.removePropsListeners(),a.prototype.destroy.call(this,b)},b.prototype.toJSON=function(b){var c=a.prototype.toJSON.call(this,b),d=this.dataResolver.toJSON();return delete d.type,cs(cs({},c),{dataResolver:d})},b}(bZ),cu=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cv=function(){return(cv=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},cw=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return cu(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return cv(cv({},a.prototype.defaults),{type:an,dataResolver:{},droppable:!1})},enumerable:!1,configurable:!0}),b.prototype.getPath=function(){return this.dataResolver.get("path")},b.prototype.getCollectionId=function(){return this.dataResolver.get("collectionId")},b.prototype.getVariableType=function(){return this.dataResolver.get("variableType")},b.prototype.getDefaultValue=function(){return this.dataResolver.get("defaultValue")},b.prototype.getDataValue=function(){return this.dataResolver.getDataValue()},b.prototype.resolvesFromCollection=function(){return this.dataResolver.resolvesFromCollection()},b.prototype.getInnerHTML=function(){return this.getDataValue()},b.prototype.setPath=function(a){this.dataResolver.set("path",a)},b.prototype.setDefaultValue=function(a){this.dataResolver.set("defaultValue",a)},b.prototype.resetDataSourcePath=function(a){this.set("dataResolver",{path:a,collectionId:void 0,variableType:void 0})},b.prototype.createResolverInstance=function(a,b){return new ao(a,b)},b.isComponent=function(a){return(0,s.toLowerCase)(a.tagName)===an},b}(ct),cx=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cy=function(){return(cy=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},cz=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return cx(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return cy(cy({},a.prototype.defaults),{droppable:!1,type:iq.condition,dataResolver:{condition:{left:"",operator:ix.equalsIgnoreCase,right:""}},components:[{type:iq.conditionTrue},{type:iq.conditionFalse}]})},enumerable:!1,configurable:!0}),b.prototype.isTrue=function(){return this.dataResolver.isTrue()},b.prototype.getCondition=function(){return this.dataResolver.getCondition()},b.prototype.getIfTrueContent=function(){return this.components().at(0)},b.prototype.getIfFalseContent=function(){return this.components().at(1)},b.prototype.getOutputContent=function(){return this.isTrue()?this.getIfTrueContent():this.getIfFalseContent()},b.prototype.setCondition=function(a){this.dataResolver.setCondition(a)},b.prototype.setIfTrueComponents=function(a){this.setComponentsAtIndex(0,a)},b.prototype.setIfFalseComponents=function(a){this.setComponentsAtIndex(1,a)},b.prototype.getInnerHTML=function(a){var b,c;return null!=(c=null==(b=this.getOutputContent())?void 0:b.getInnerHTML(a))?c:""},b.prototype.createResolverInstance=function(a,b){return new aF(a,b)},b.prototype.setComponentsAtIndex=function(a,b){var c=this.components().at(a);null==c||c.components(b)},b.isComponent=function(a){return(0,s.toLowerCase)(a.tagName)===aD},b}(ct),cA=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cB=function(){return(cB=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},cC=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return cA(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return cB(cB({},a.prototype.defaults),{removable:!1,draggable:!1})},enumerable:!1,configurable:!0}),b.isComponent=function(a){var b;return!!(b=(0,s.toLowerCase)(a.tagName))&&[iq.collectionItem,iq.conditionTrue,iq.conditionFalse].includes(b)},b}(bZ),cD=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cE=function(){return(cE=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},cF=function(a){function b(b,c){void 0===c&&(c={});var d,e=a.call(this,b,c)||this;return e.mutable=null==(d=b.mutable)||d,e.on("change",e.handleChange),e}return cD(b,a),Object.defineProperty(b.prototype,"cl",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"dataSource",{get:function(){return this.cl.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"em",{get:function(){return this.dataSource.em},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"index",{get:function(){return this.cl.indexOf(this)},enumerable:!1,configurable:!0}),b.prototype.handleChange=function(a,b){var c=this,d=this.changedAttributes();(0,r.keys)(d).forEach(function(a){return c.triggerChange(a,b)})},b.prototype.getPath=function(a,b){void 0===b&&(b={});var c=this.dataSource,d=this.id,e=this.index,f=c.id;return"".concat(f,".").concat(b.useIndex?e:d).concat(a?".".concat(a):"")},b.prototype.getPaths=function(a){return[this.getPath(a),this.getPath(a,{useIndex:!0})]},b.prototype.triggerChange=function(a,b){void 0===b&&(b={});var c=this.dataSource,d=this.em,e=this.getPaths(a),f={dataSource:c,dataRecord:this,path:e[0],options:b};d.trigger(it.path,f),d.trigger("".concat(it.pathSource,":").concat(c.id),f),e.forEach(function(a){return d.trigger("".concat(it.path,":").concat(a),cE(cE({},f),{path:a}))})},b.prototype.set=function(b,c,d){var e,f,g=this;if(!this.isNew()&&!1===this.attributes.mutable)throw Error("Cannot modify immutable record");var h=null==(f=null==(e=this.dataSource)?void 0:e.transformers)?void 0:f.onRecordSetValue,i=function(b,c,d){void 0===d&&(d={});var e=(null==d?void 0:d.avoidTransformers)||!h?c:h({id:g.id,key:b,value:c});a.prototype.set.call(g,b,e,d),a.prototype.set.call(g,{__p:!!d.partial||void 0},d)};if("object"==typeof b&&null!==b)for(var j=0,k=Object.entries(b);j<k.length;j++){var l=k[j];i(l[0],l[1],c)}else i(b,c,d);return this},b}(x.Kx),cG=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cH=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.dataSource=c.dataSource,d}return cG(b,a),b}(x.pM);cH.prototype.model=cF;var cI=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cJ=function(){return(cJ=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},cK=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},cL=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},cM=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},cN=function(a){function b(b,c){var d=a.call(this,cJ(cJ({schema:{}},b),{records:[]}),c)||this,e=b.records;return d.transformers=b.transformers||{},e instanceof cH||d.set({records:new cH(e,{dataSource:d})}),d.listenTo(d.records,"add",d.onAdd),d.listenTo(d.records,x.e2,d.handleChanges),d}return cI(b,a),b.prototype.defaults=function(){return{records:[],transformers:{}}},Object.defineProperty(b.prototype,"records",{get:function(){return this.attributes.records},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"schema",{get:function(){return this.attributes.schema},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"em",{get:function(){return this.collection.em},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"hasProvider",{get:function(){return!!this.attributes.provider},enumerable:!1,configurable:!0}),b.prototype.onAdd=function(a){a.triggerChange()},b.prototype.addRecord=function(a,b){return this.records.add(a,b)},b.prototype.getRecord=function(a){return this.records.get(a)},b.prototype.getRecords=function(){var a=this;return cM([],this.records.models,!0).map(function(b){return a.getRecord(b.id)})},b.prototype.getResolvedRecords=function(){var a=this,b=Object.entries(this.schema);return this.getRecords().map(function(c){var d=cJ({},c.attributes);return 0===b.length||b.forEach(function(b){var c=b[0],e=b[1];if((null==e?void 0:e.type)===is.relation&&e.target){var f=d[c];if(f){var g=a.em.DataSources.get(e.target);if(g){var h=g.records,i=e.targetField||"id";if(e.isMany){var j=Array.isArray(f)?f:[f],k=h.filter(function(a){return j.includes(a.attributes[i])});d[c]=k.map(function(a){return cJ({},a.attributes)})}else{var l=g.records.find(function(a){return a.attributes[i]===f});l&&(d[c]=cJ({},l.attributes))}}}}}),d})},b.prototype.loadProvider=function(){return cK(this,void 0,void 0,function(){var a,b,c,d,e,f,g,h,i,j=this;return cL(this,function(k){switch(k.label){case 0:if(a=this,b=a.attributes,c=a.em,!(d=b.provider)||(0,r.isString)(d))return[2];return f=(e=(0,r.isString)(d.get)?{url:d.get}:d.get).url,g=e.method,h=e.headers,i=e.body,[4,cK(j,void 0,void 0,function(){var a,b,d,e,j;return cL(this,function(k){switch(k.label){case 0:a=this,k.label=1;case 1:return k.trys.push([1,6,,7]),c.trigger(c.DataSources.events.providerLoadBefore,{dataSource:a}),[4,fetch(f,{method:g,headers:h,body:i})];case 2:if((b=k.sent()).ok)return[3,4];return d=Error.bind,[4,b.text()];case 3:throw new(d.apply(Error,[void 0,k.sent()]));case 4:return[4,b.json()];case 5:return(null==(e=k.sent())?void 0:e.records)&&this.setRecords(e.records),(null==e?void 0:e.schema)&&this.upSchema(e.schema),c.trigger(c.DataSources.events.providerLoad,{result:e,dataSource:a}),[3,7];case 6:return j=k.sent(),c.logError(j.message),c.trigger(c.DataSources.events.providerLoadError,{dataSource:a,error:j}),[3,7];case 7:return[2]}})})];case 1:return k.sent(),[2]}})})},b.prototype.removeRecord=function(a,b){var c=this.getRecord(a);if((null==c?void 0:c.mutable)===!1&&!(null==b?void 0:b.dangerously))throw Error("Cannot remove immutable record");return this.records.remove(a,b)},b.prototype.setRecords=function(a){var b=this;this.records.reset([],{silent:!0}),a.forEach(function(a){b.records.add(a)})},b.prototype.upSchema=function(a,b){this.set("schema",cJ(cJ({},this.schema),a),b)},b.prototype.getSchemaField=function(a){return this.schema[a]},b.prototype.handleChanges=function(a,b,c){var d=c||b;this.em.changesUp(d,{dataRecord:a,options:d})},b}(x.Kx),cO=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cP=function(){return(cP=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},cQ=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.collectionsStateMap={},d.listenToPropsChange(),d}return cO(b,a),b.prototype.onCollectionsStateMapUpdate=function(a){var b,c;this.collectionsStateMap=a,null==(c=null==(b=this.dataResolverWatchers)?void 0:b.onCollectionsStateMapUpdate)||c.call(b),this.components().forEach(function(b){var c;null==(c=b.onCollectionsStateMapUpdate)||c.call(b,a)})},b.prototype.syncOnComponentChange=function(b,c,d){var e=this.collectionsStateMap;this.collectionsStateMap={},a.prototype.syncOnComponentChange.call(this,b,c,d),this.collectionsStateMap=e,this.onCollectionsStateMapUpdate(e)},b.prototype.setDataResolver=function(a){return this.set("dataResolver",a)},b.prototype.getDataResolver=function(){return this.dataResolverProps},Object.defineProperty(b.prototype,"dataResolverProps",{get:function(){return this.get("dataResolver")},enumerable:!1,configurable:!0}),b.prototype.listenToDataSource=function(){var a,b=this,c=this.dataResolverPath;if(c){var d=this.em,e=this.collectionsStateMap;null==(a=this.dataSourceWatcher)||a.destroy(),this.dataSourceWatcher=new ap({em:d,resolver:new ao({type:an,path:c},{em:d,collectionsStateMap:e}),onUpdate:function(){return b.onDataSourceChange()}})}},b.prototype.listenToPropsChange=function(){var a=this;this.on("change:dataResolver",function(){a.listenToDataSource()}),this.listenToDataSource()},Object.defineProperty(b.prototype,"dataSourceProps",{get:function(){return this.get("dataResolver")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"dataResolverPath",{get:function(){var a;return null==(a=this.dataSourceProps)?void 0:a.path},enumerable:!1,configurable:!0}),b.prototype.onDataSourceChange=function(){this.onCollectionsStateMapUpdate(this.collectionsStateMap)},b.prototype.getDataSourceItems=function(){var a=this.dataSourceProps;if(!a)return[];var b=this.listDataSourceItems(a);return b&&(0,r.isArray)(b)?b:cP({},b)},b.prototype.listDataSourceItems=function(a){var b=a instanceof cN?a.get("id"):a.path;if(!b)return[];var c=this.em.DataSources.getValue(b,[]);return 1===b.split(".").length&&(c=Object.entries(c).map(function(a){return a[0],a[1]})),c},b.prototype.getItemKey=function(a,b){return(0,r.isArray)(a)?b:Object.keys(a)[b]},b.prototype.removePropsListeners=function(){var a;this.off("change:dataResolver"),null==(a=this.dataSourceWatcher)||a.destroy(),this.dataSourceWatcher=void 0},b.prototype.destroy=function(b){return this.removePropsListeners(),a.prototype.destroy.call(this,b)},b}(bZ),cR=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cS=function(){return(cS=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},cT={avoidStore:!0,partial:!0},cU=function(a){function b(b,c){var d=this;if(c.forCloning)return a.call(this,b,c)||this;var e=cS(cS({},b),{droppable:!1}),f=d=a.call(this,e,c)||this;return d.rebuildChildrenFromCollection=d.rebuildChildrenFromCollection.bind(d),d.listenToPropsChange(),d.rebuildChildrenFromCollection(),f}return cR(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return cS(cS({},a.prototype.defaults),{droppable:!1,dataResolver:{},type:iq.collection,components:[{type:iq.collectionItem}]})},enumerable:!1,configurable:!0}),b.prototype.getItemsCount=function(){var a,b,c,d=(a=this.getDataSourceItems(),(0,r.isArray)(a)?a.length:Object.keys(a).length),e=Math.max(0,null!=(b=this.getConfigStartIndex())?b:0);return Math.max(0,Math.min(d-1,null!=(c=this.getConfigEndIndex())?c:Number.MAX_VALUE)-e+1)},b.prototype.getConfigStartIndex=function(){return this.dataResolver.startIndex},b.prototype.getConfigEndIndex=function(){return this.dataResolver.endIndex},b.prototype.getDataSource=function(){var a;return null==(a=this.dataResolver)?void 0:a.dataSource},b.prototype.getCollectionId=function(){var a;return null==(a=this.dataResolver)?void 0:a.collectionId},b.prototype.getCollectionItemComponents=function(){return this.firstChild.components()},b.prototype.setCollectionId=function(a){this.updateCollectionConfig({collectionId:a})},b.prototype.setStartIndex=function(a){if(a<0)return void this.em.logError("Start index should be greater than or equal to 0");this.updateCollectionConfig({startIndex:a})},b.prototype.setEndIndex=function(a){this.updateCollectionConfig({endIndex:a})},b.prototype.setDataSource=function(a){this.set(aG,cS(cS({},this.dataResolver),{dataSource:a}))},b.prototype.setCollectionItemComponents=function(a){this.firstChild.components(a)},b.prototype.onCollectionsStateMapUpdate=function(b){var c=this;a.prototype.onCollectionsStateMapUpdate.call(this,b);var d=this.getDataSourceItems(),e=this.resolveCollectionConfig(d).startIndex;this.components().forEach(function(a,b){var f=c.getItemKey(d,e+b),g=c.getCollectionsStateMapForItem(d,f);a.onCollectionsStateMapUpdate(g)})},b.prototype.stopSyncComponentCollectionState=function(){this.stopListening(this.components(),"add remove reset",this.syncOnComponentChange),this.onCollectionsStateMapUpdate({})},b.prototype.setCollectionStateMapAndPropagate=function(a,b){a.setSymbolOverride(["locked","layerable",be]),a.syncComponentsCollectionState(),a.onCollectionsStateMapUpdate(b)},b.prototype.onDataSourceChange=function(){this.rebuildChildrenFromCollection()},b.prototype.listenToPropsChange=function(){var a=this;this.on("change:".concat(aG),function(){a.rebuildChildrenFromCollection(),a.listenToDataSource()}),this.listenToDataSource()},Object.defineProperty(b.prototype,"dataSourceProps",{get:function(){return this.dataResolver.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"dataResolver",{get:function(){return this.get(aG)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"firstChild",{get:function(){return this.components().at(0)},enumerable:!1,configurable:!0}),b.prototype.updateCollectionConfig=function(a){this.set(aG,cS(cS({},this.dataResolver),a))},b.prototype.rebuildChildrenFromCollection=function(){var a=this.getDataSourceItems();if(this.resolveCollectionConfig(a).totalItems===this.components().length)return void this.onCollectionsStateMapUpdate(this.collectionsStateMap);var b=this.getCollectionItems(a);this.components().reset(b,bd)},b.prototype.getCollectionItems=function(a){var b,c=this.ensureFirstChild(),d=c.getStyle().display,e=d&&"none"!==d?d:"";c.addStyle({display:"none"},cT);var f=[c];if(!function(a,b){for(var c=[{property:null==a?void 0:a.collectionId,propertyPath:"dataResolver.collectionId"},{property:null==a?void 0:a.dataSource,propertyPath:"dataResolver.dataSource"}],d=0;d<c.length;d++){var e=c[d].propertyPath;if(!a&&(b.logError('The "'.concat(e,'" property is required in the collection definition.')),1))return[]}var f=null==a?void 0:a.startIndex;return void 0!==f&&(f<0||!Number.isInteger(f))&&b.logError("Invalid startIndex: ".concat(f,". It must be a non-negative integer.")),!0}(this.dataResolver,this.em))return f;var g=this.collectionId,h=null!=a?a:this.getDataSourceItems(),i=this.resolveCollectionConfig(h),j=i.startIndex,k=i.endIndex;if(this.hasDuplicateCollectionId())return this.em.logError('The collection ID "'.concat(g,'" already exists in the parent collection state. Overriding it is not allowed.')),f;for(var l=j;l<=k;l++){var m=l===j,n=this.getItemKey(h,l),o=this.getCollectionsStateMapForItem(h,n);if(m){null==(b=aP(c))||b.forEach(function(a){return aT(a)}),this.setCollectionStateMapAndPropagate(c,o),c.addStyle({display:e},cT);continue}var p=c.clone({symbol:!0,symbolInv:!0});p.set({locked:!0,layerable:!1},cT),this.setCollectionStateMapAndPropagate(p,o),f.push(p)}return f},b.prototype.getCollectionsStateMapForItem=function(a,b){var c,d=this.resolveCollectionConfig(a),e=d.startIndex,f=d.endIndex,g=d.totalItems,h=this.collectionId,i=a[b],j=this.collectionsStateMap,k="string"==typeof b?Object.keys(a).indexOf(b):b;return cS(cS({},j),((c={})[h]={collectionId:h,currentIndex:k,currentItem:i,currentKey:b,startIndex:e,endIndex:f,totalItems:g,remainingItems:g-(1+(k-e))},c))},b.prototype.hasDuplicateCollectionId=function(){var a=this.collectionId;return!!this.collectionsStateMap[a]},b.prototype.resolveCollectionConfig=function(a){var b,c,d=Array.isArray(a),e=d?a.length:Object.keys(a).length,f=null!=(b=this.getConfigStartIndex())?b:0,g=Math.min(e-1,null!=(c=this.getConfigEndIndex())?c:Number.MAX_VALUE),h=0;return e>0&&(h=Math.max(0,g-f+1)),{startIndex:f,endIndex:g,totalItems:h,isArray:d}},b.prototype.ensureFirstChild=function(){var a=this.em.Components.getType(iq.collectionItem).model;return this.firstChild||new a({type:iq.collectionItem},this.opt)},Object.defineProperty(b.prototype,"collectionId",{get:function(){var a,b;return null!=(b=null==(a=this.dataResolverProps)?void 0:a.collectionId)?b:""},enumerable:!1,configurable:!0}),b.isComponent=function(a){return(0,s.toLowerCase)(a.tagName)===iq.collection},b.prototype.toJSON=function(b){var c=a.prototype.toJSON.call(this,b);delete c.droppable,delete c[bV];var d=this.firstChild;return cS(cS({},c),{components:[d]})},b}(cQ),cV=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cW=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.compView=cZ,b}return cV(b,a),b.prototype.initialize=function(a){this.opts=a||{},this.config=a.config||{},this.em=this.config.em;var b=this.collection;this.listenTo(b,"add",this.addTo),this.listenTo(b,"reset",this.resetChildren),this.listenTo(b,"remove",this.removeChildren)},b.prototype.removeChildren=function(a,b,c){var d=this;void 0===c&&(c={}),a.views.forEach(function(a){if(a){var b=a.childrenView,c=a.scriptContainer;b&&b.stopListening(),(0,ab.YZ)(c),a.remove.apply(a)}}),a.components().forEach(function(a){return d.removeChildren(a,b,c)})},b.prototype.addTo=function(a){this.addToCollection(a,null,this.collection.indexOf(a))},b.prototype.addToCollection=function(a,b,c){for(var d,e=this.config,f=this.opts,g=this.em,h=e.frameView,i=(null==h?void 0:h.model)&&a.getView(h.model),j=f.componentTypes||(null==g?void 0:g.Components.getTypes()),k=a.get("type")||"default",l=this.compView,m=0;m<j.length;m++)if(j[m].id==k){l=j[m].view;break}var n=i||new l({model:a,config:e,componentTypes:j});try{d=n.render().el}catch(a){d=document.createTextNode(""),g.logError(a)}if(b)b.appendChild(d);else{var o=this.parentEl,p=o.childNodes;if((0,r.isUndefined)(c))o.appendChild(d);else{var q=p.length==c;q&&c--,q||!p.length?o.appendChild(d):o.insertBefore(d,p[c])}}return a.opt.temporary||null==g||g.trigger(Y.I.mount,a),d},b.prototype.resetChildren=function(a,b){var c=this;if(void 0===b&&(b={}),!b.skipViewUpdate){var d=b.previousModels;b.skipDomReset||(this.parentEl.innerHTML=""),null==d||d.forEach(function(a){return c.removeChildren(a,c.collection)}),a.each(function(a){return c.addToCollection(a)})}},b.prototype.render=function(a){var b=this,c=this.el,d=document.createDocumentFragment();return this.parentEl=a||this.el,this.collection.each(function(a){return b.addToCollection(a,d)}),c.innerHTML="",c.appendChild(d),this},b}(x.Ss),cX=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),cY=function(){return(cY=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};let cZ=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.rendered=!1,b}return cX(b,a),b.prototype.className=function(){return this.getClasses()},b.prototype.tagName=function(){return this.model.get("tagName")},b.prototype.preinitialize=function(a){void 0===a&&(a={}),this.opts=a},b.prototype.initialize=function(a){void 0===a&&(a={});var b=this.model,c=a.config||{},d=c.em,e=b.opt||{},f=this.$el,g=this.el;this.opts=a,this.modelOpt=e,this.config=c,this.em=d,this.pfx=c.stylePrefix||"",this.ppfx=c.pStylePrefix||"",this.attr=b.get("attributes"),this.classe=this.attr.class||[],this.listenTo(b,"change:style",this.updateStyle),this.listenTo(b,"change:attributes",this.renderAttributes),this.listenTo(b,"change:highlightable",this.updateHighlight),this.listenTo(b,"change:status change:locked",this.updateStatus),this.listenTo(b,"change:script rerender",this.reset),this.listenTo(b,"change:content",this.updateContent),this.listenTo(b,"change",this.handleChange),this.listenTo(b,"active",this.onActive),this.listenTo(b,"disable",this.onDisable),f.data("model",b),(0,s.setViewEl)(g,this),b.view=this,this.frameView&&b.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=cY(cY({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),e.temporary||this.init(this._clbObj())},Object.defineProperty(b.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"createDoc",{get:function(){var a,b,c=(null==(a=this.frameView)?void 0:a.getDoc())||document;return(null==(b=this.opts.config)?void 0:b.useFrameDoc)?c:document},enumerable:!1,configurable:!0}),b.prototype.__isDraggable=function(){var a=this.model,b=this.config,c=a.attributes.draggable;return b.draggableComponents&&c},b.prototype._clbObj=function(){var a=this.em,b=this.model,c=this.el;return{editor:null==a?void 0:a.getEditor(),model:b,el:c}},b.prototype.init=function(a){},b.prototype.removed=function(a){},b.prototype.onRender=function(a){},b.prototype.onActive=function(a){},b.prototype.onDisable=function(a){},b.prototype.remove=function(){a.prototype.remove.call(this);var b,c=this.model,d=this.$el,e=c.views,f=this.frameView||{};return c.components().forEach(function(a){var b=a.getView(f.model);null==b||b.remove()}),null==(b=this.childrenView)||b.remove(),e.splice(e.indexOf(this),1),this.removed(this._clbObj()),d.data({model:"",collection:"",view:""}),this},b.prototype.handleDragStart=function(a){if(!this.__isDraggable())return!1;a.stopPropagation(),a.preventDefault();var b=this.em.getSelectedAll(),c=b.includes(this.model)?b:[this.model];this.em.Commands.run("tlb-move",{target:c,event:a})},b.prototype.initClasses=function(){var a=this.model,b=a.classes,c="change:classes";b instanceof bp&&(this.stopListening(a,c,this.initClasses),this.listenTo(a,c,this.initClasses),this.listenTo(b,"add remove change reset",this.updateClasses),b.length&&this.importClasses())},b.prototype.initComponents=function(a){void 0===a&&(a={});var b=this.model,c=this.$el,d=this.childrenView,e=b.get("components"),f=[b,"change:components",this.initComponents];e instanceof bM&&(c.data("collection",e),d&&d.remove(),this.stopListening.apply(this,f),a.avoidRender||this.renderChildren(),this.listenTo.apply(this,f))},b.prototype.handleChange=function(){var a=this.model,b=(0,r.keys)(a.changed);if(1!==b.length||"status"!==b[0])for(var c in a.emitUpdate(),a.changed)a.emitUpdate(c)},b.prototype.importClasses=function(){var a=this.em,b=this.model,c=a.Selectors;c&&b.classes.forEach(function(a){return c.add(a.getName())})},b.prototype.updateStatus=function(a){void 0===a&&(a={});var b=this.em,c=this.el,d=this.ppfx,e=this.model,f=null==b?void 0:b.Canvas,g=null==f?void 0:f.config.extHl,h=e.get("status"),i="".concat(d,"selected"),j="".concat(i,"-parent"),k="".concat(d,"freezed"),l="".concat(d,"hovered"),m="".concat(d,"no-pointer"),n="".concat(d,"pointer-init"),o=[i,j,k,l,m,n],p=g&&!a.noExtHl?"":i;this.$el.removeClass(o.join(" "));var q=[c.getAttribute("class")||""],s=!(null==f?void 0:f.hasCustomSpot(X.F.Select)),t=!(null==f?void 0:f.hasCustomSpot(X.F.Target));switch(h){case"selected":s&&q.push(p);break;case"selected-parent":t&&q.push(j);break;case"freezed":q.push(k);break;case"freezed-selected":q.push(k),s&&q.push(p);break;case"hovered":a.avoidHover||q.push(l)}(0,r.isBoolean)(e.locked)&&q.push(e.locked?m:n);var u=q.filter(Boolean).join(" ");u&&c.setAttribute("class",u)},b.prototype.updateHighlight=function(){var a=this.model,b=a.get("textable"),c=a.get("highlightable")&&(b||!a.isChildOf("text"));this.setAttribute("data-gjs-highlightable",!!c||"")},b.prototype.updateStyle=function(a,b,c){void 0===c&&(c={});var d=this.model;if(bS(this.em)&&!c.inline){var e=this.__cmpStyleOpts,f=d.getStyle(cY({inline:!0},e));(0,r.isEmpty)(f)||d.setStyle(f,e)}else this.setAttribute("style",d.styleToString(c))},b.prototype.updateStyles=function(){this.updateStyle()},b.prototype.updateClasses=function(){var a,b,c=(null==(b=(a=this.model.classes).pluck)?void 0:b.call(a,"name").join(" "))||"";this.setAttribute("class",c),this.updateStatus(),this.onAttrUpdate()},b.prototype.setAttribute=function(a,b){var c=this.$el;b?c.attr(a,b):c.removeAttr(a)},b.prototype.getClasses=function(){return this.model.getClasses().join(" ")},b.prototype.updateAttributes=function(){var a=this.model,b=this.$el;this.el;var c=a.attributes,d=c.textable,e=c.type,f=cY(cY({id:a.getId(),"data-gjs-type":e||"default"},this.__isDraggable()&&{draggable:!0}),d&&{contenteditable:"false"});this.__clearAttributes(),this.updateStyle(),this.updateHighlight();var g=cY(cY({},f),a.getAttributes());(0,r.keys)(g).forEach(function(a){return!1===g[a]&&delete g[a]}),b.attr(g)},b.prototype.__clearAttributes=function(){var a=this.el,b=this.$el,c=[];(0,r.each)(a.attributes,function(a){return c.push(a.nodeName)}),c.forEach(function(a){return b.removeAttr(a)})},b.prototype.updateContent=function(){var a=this.model.content,b=this.model.components().length;this.getChildrenContainer().innerHTML=b?"":a},b.prototype.prevDef=function(a){a.preventDefault()},b.prototype.updateScript=function(){var a=this.model,b=this.em;a.get("script")&&(null==b||b.Canvas.getCanvasView().updateScript(this))},b.prototype.getChildrenContainer=function(){var a=this.el;return"function"==typeof this.getChildrenSelector?a=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,a},b.prototype.getOffsetRect=function(){var a={top:0,left:0,bottom:0,right:0},b=this.el,c=0,d=0,e=function(f){var g=f.offsetParent;g?(c+=g.offsetTop,d+=g.offsetLeft,e(g)):(a.top=b.offsetTop+c,a.left=b.offsetLeft+d,a.bottom=a.top+b.offsetHeight,a.right=a.left+b.offsetWidth)};return e(b),a},b.prototype.isInViewport=function(){var a=this.el,b=this.em,c=this.frameView,d=b.Canvas.getCanvasView().getElBoxRect(a,{local:!0}),e=c.el,f=e.clientHeight,g=e.clientWidth,h=d.y,i=d.x,j=h+d.height,k=i+d.width;return(h>=0&&h<f||j>0&&j<f)&&(k>=0&&k<g||i>0&&i<=g)},b.prototype.scrollIntoView=function(a){var b;if(void 0===a&&(a={}),!this.isInViewport()||a.force){var c=this.el;if("smooth"!==a.behavior){var d=this.getOffsetRect();null==(b=c.ownerDocument.defaultView)||b.scrollTo(0,d.top)}else c.scrollIntoView(cY({behavior:"smooth",block:"nearest"},a))}},b.prototype.reset=function(){var a=this.el,b=this.model;this.scriptContainer&&b.emitWithEditor(Y.I.scriptUnmount,{component:b,view:this,el:a}),this.el="",this._ensureElement(),this._setData(),(0,ab.bG)(a,this.el),this.render()},b.prototype._setData=function(){var a=this.model,b=this.el,c=a.components();this.$el.data({model:a,collection:c,view:this}),(0,s.setViewEl)(b,this)},b.prototype._createElement=function(a){return this.createDoc.createElement(a)},b.prototype.renderChildren=function(){this.updateContent();var a=this.getChildrenContainer(),b=this.childrenView||new cW({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});b.render(a),this.childrenView=b;for(var c=Array.prototype.slice.call(b.el.childNodes),d=0,e=c.length;d<e;d++)a.appendChild(c.shift())},b.prototype.renderAttributes=function(a,b,c){void 0===c&&(c={}),c.skipViewUpdate||(this.updateAttributes(),this.updateClasses())},b.prototype.onAttrUpdate=function(){},b.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),(0,s.setViewEl)(this.el,this),this.postRender()),this},b.prototype.postRender=function(){if(!this.modelOpt.temporary){var a=this.model,b=this.el;this.onRender(this._clbObj()),a.emitWithEditor(Y.I.render,{component:a,view:this,el:b}),this.rendered=!0}},b.getEvents=function(){return(0,r.result)(this.prototype,"events")},b}(x.Ss);var c$=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),c_=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return c$(b,a),b}(cZ),c0=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),c1=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return c0(b,a),b.prototype.initialize=function(b){void 0===b&&(b={}),a.prototype.initialize.call(this,b),this.postRender=this.postRender.bind(this),this.listenTo(this.model.components(),"reset",this.postRender),this.dataResolverListener=new ap({em:this.em,resolver:this.model.dataResolver,onUpdate:this.postRender})},b.prototype.renderDataResolver=function(){var a=this.model.getIfTrueContent(),b=this.model.getIfFalseContent(),c=null==a?void 0:a.getEl(),d=null==b?void 0:b.getEl(),e=this.model.isTrue();c&&(c.style.display=e?"":"none"),d&&(d.style.display=e?"none":"")},b.prototype.postRender=function(){this.renderDataResolver(),a.prototype.postRender.call(this)},b.prototype.remove=function(){return this.stopListening(this.model.components(),"reset",this.postRender),this.dataResolverListener.destroy(),a.prototype.remove.call(this)},b}(cZ),c2=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),c3=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return c2(b,a),b.prototype.initialize=function(b){var c=this;void 0===b&&(b={}),a.prototype.initialize.call(this,b),this.dataResolverListener=new ap({em:this.em,resolver:this.model.dataResolver,onUpdate:function(){return c.postRender()}})},b.prototype.remove=function(){return this.dataResolverListener.destroy(),a.prototype.remove.call(this)},b.prototype.postRender=function(){var b=this.model;b.getDataResolver().asPlainText?this.el.textContent=b.getDataValue():this.el.innerHTML=b.getDataValue(),a.prototype.postRender.call(this)},b}(cZ),c4=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),c5=function(){return(c5=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},c6=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return c4(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return c5(c5({},a.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),b.prototype.toHTML=function(){var a=this.content,b=this.parent();return(null==b?void 0:b.is("script"))?a:this.__escapeContent(a)},b.prototype.__escapeContent=function(a){return(0,s.escapeNodeContent)(a)},b.isComponent=function(a){var b;if(3===a.nodeType)return{type:"textnode",content:null!=(b=a.textContent)?b:""}},b}(bZ),c7=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),c8=function(){return(c8=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},c9=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return c7(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return c8({},a.prototype.defaults)},enumerable:!1,configurable:!0}),b.prototype.toHTML=function(){return"\x3c!--".concat(this.content,"--\x3e")},b.isComponent=function(a){var b;if(8==a.nodeType)return{type:"comment",content:null!=(b=a.textContent)?b:""}},b}(c6),da=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),db=function(){return(db=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},dc="iframe",dd=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return da(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return db(db({},a.prototype.defaults),{type:dc,tagName:dc,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),b.isComponent=function(a){return(0,s.toLowerCase)(a.tagName)===dc},b}(bZ),de=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),df=function(){return(df=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},dg='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',dh=function(a){function b(b,c){void 0===b&&(b={});var d=a.call(this,b,c)||this,e=d.get("attributes").src;return e&&(0,s.buildBase64UrlFromSvg)((0,r.result)(d,"defaults").src)!==e&&d.set("src",e,{silent:!0}),d}return de(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return df(df({},a.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(dg,'>\n        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>\n      </svg>'),fallback:"<svg ".concat(dg,'>\n        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>\n      </svg>'),file:""})},enumerable:!1,configurable:!0}),b.prototype.initToolbar=function(){a.prototype.initToolbar.call(this);var b=this.em;if(b){var c=b.Commands,d="image-editor";if(c.has(d)){for(var e=!1,f=this.get("toolbar"),g=0;g<f.length;g++)if("image-editor"===f[g].command){e=!0;break}e||(f.push({attributes:{class:"fa fa-pencil"},command:d}),this.set("toolbar",f))}}},b.prototype.getAttrToHTML=function(){var b=a.prototype.getAttrToHTML.call(this),c=this.getSrcResult();return c&&(b.src=c),b},b.prototype.getSrcResult=function(a){void 0===a&&(a={});var b=this.get(a.fallback?"fallback":"src")||"",c=b;return b&&"<svg"===b.substr(0,4)&&(c=(0,s.buildBase64UrlFromSvg)(b)),c},b.prototype.isDefaultSrc=function(){var a=this.get("src"),b=(0,r.result)(this,"defaults").src;return a===b||a===(0,s.buildBase64UrlFromSvg)(b)},b.prototype.toJSON=function(b){var c=a.prototype.toJSON.call(this,b),d=c.attributes;return d&&c.src===d.src&&delete c.src,c},b.prototype.parseUri=function(a){var b={};if((0,s.hasWin)())(b=document.createElement("a")).href=a;else if("undefined"!=typeof URL)try{b=new URL(a)}catch(a){}return{hostname:b.hostname||"",pathname:b.pathname||"",protocol:b.protocol||"",search:b.search||"",hash:b.hash||"",port:b.port||"",query:function(a){void 0===a&&(a="");for(var b={},c=a.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("="),f=decodeURIComponent(e[0]);f&&(b[f]=decodeURIComponent(e[1]||""))}return b}(b.search)}},b.isComponent=function(a){return"img"===(0,s.toLowerCase)(a.tagName)},b}(bZ),di=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dj=function(){return(dj=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},dk=function(a){function b(b,c){void 0===b&&(b={});var d=a.call(this,b,c)||this;return d.__checkInnerChilds(),d}return di(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return dj(dj({},a.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),b.prototype.__checkInnerChilds=function(){var a=this.em.Components.config.disableTextInnerChilds;if(a){var b=function(a){a.isInstanceOf("textnode")||a.set({locked:!0,layerable:!1})};(0,r.isFunction)(a)?this.forEachChild(function(c){a(c)&&b(c)}):this.forEachChild(b)}},b}(bZ),dl=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dm=function(){return(dm=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},dn="label",dp=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return dl(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return dm(dm({},a.prototype.defaults),{type:dn,tagName:dn,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),b.isComponent=function(a){return(0,s.toLowerCase)(a.tagName)===dn},b}(dk),dq=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dr=function(){return(dr=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},ds="link",dt=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return dq(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return dr(dr({},a.prototype.defaults),{type:ds,tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),b.isComponent=function(a,b){if(void 0===b&&(b={}),"a"===(0,s.toLowerCase)(a.tagName)){var c,d=b.textTags||[];c={type:ds,editable:!1};var e=a.childNodes;e.length||delete c.editable,(0,r.forEach)(e,function(a){var b=a.tagName;(3==a.nodeType&&""!==a.textContent.trim()||b&&d.indexOf((0,s.toLowerCase)(b))>=0)&&delete c.editable})}return c},b}(dk),du=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dv=function(){return(dv=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},dw=function(a){function b(b,c){void 0===b&&(b={});var d=a.call(this,b,c)||this;return d.get("src")?d.parseFromSrc():d.updateSrc(),d.listenTo(d,"change:address change:zoom change:mapType",d.updateSrc),d}return du(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){var b=a.prototype.defaults;return dv(dv({},b),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:b.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),b.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},b.prototype.getMapUrl=function(){var a=this.get("address"),b=this.get("zoom"),c=this.get("mapType");a=a?"&q="+a:"",b=b?"&z="+b:"",c=c?"&t="+c:"";var d=this.get("mapUrl")+"?"+a+b+c;return d+"&output=embed"},b.prototype.parseFromSrc=function(){var a=this.parseUri(this.get("src")).query;a.q&&this.set("address",a.q),a.z&&this.set("zoom",a.z),a.t&&this.set("mapType",a.t)},b.isComponent=function(a){if("iframe"==(0,s.toLowerCase)(a.tagName)&&/maps\.google\.com/.test(a.src))return{type:"map",src:a.src}},b}(dh),dx=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dy=function(){return(dy=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},dz="script",dA=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return dx(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return dy(dy({},a.prototype.defaults),{type:dz,tagName:dz,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),b.isComponent=function(a){return(0,s.toLowerCase)(a.tagName)===dz},b}(bZ),dB=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dC=function(){return(dC=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},dD=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return dB(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return dC(dC({},a.prototype.defaults),{type:"svg",tagName:"svg",highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),b.prototype.getName=function(){var a=this.get("tagName"),b=this.get("custom-name");return a=a.charAt(0).toUpperCase()+a.slice(1),b||a},b.isComponent=function(a){return"svg"===(0,s.toLowerCase)(a.tagName)},b}(bZ),dE=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dF=function(){return(dF=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},dG=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return dE(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return dF(dF({},a.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),b.isComponent=function(a,b){return void 0===b&&(b={}),!!b.inSvg},b}(dD),dH=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dI=function(){return(dI=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},dJ="table",dK=function(a){function b(b,c){void 0===b&&(b={});var d=a.call(this,b,c)||this,e=d.get("components");return e.length||e.add({type:"tbody"}),d}return dH(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return dI(dI({},a.prototype.defaults),{type:dJ,tagName:dJ,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),b.isComponent=function(a){return(0,s.toLowerCase)(a.tagName)===dJ},b}(bZ),dL=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dM=function(){return(dM=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},dN="tbody",dO=function(a){function b(b,c){void 0===b&&(b={});var d=a.call(this,b,c)||this,e=d.get("components"),f=d.get("columns"),g=d.get("rows");if(!e.length){for(var h=[];g--;){for(var i=[],j=f;j--;)i.push({type:"cell",classes:["cell"]});h.push({type:"row",classes:["row"],components:i})}e.add(h)}return d}return dL(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return dM(dM({},a.prototype.defaults),{type:dN,tagName:dN,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),b.isComponent=function(a){return(0,s.toLowerCase)(a.tagName)===dN},b}(bZ),dP=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dQ=function(){return(dQ=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},dR=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return dP(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return dQ(dQ({},a.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),b.isComponent=function(a){return["td","th"].indexOf((0,s.toLowerCase)(a.tagName))>=0},b}(bZ),dS=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dT=function(){return(dT=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},dU="tfoot",dV=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return dS(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return dT(dT({},a.prototype.defaults),{type:dU,tagName:dU})},enumerable:!1,configurable:!0}),b.isComponent=function(a){return(0,s.toLowerCase)(a.tagName)===dU},b}(dO),dW=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dX=function(){return(dX=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},dY="thead",dZ=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return dW(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return dX(dX({},a.prototype.defaults),{type:dY,tagName:dY})},enumerable:!1,configurable:!0}),b.isComponent=function(a){return(0,s.toLowerCase)(a.tagName)===dY},b}(dO),d$=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),d_=function(){return(d_=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},d0=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return d$(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return d_(d_({},a.prototype.defaults),{tagName:"tr",draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),b.isComponent=function(a){return"tr"===(0,s.toLowerCase)(a.tagName)},b}(bZ),d1=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),d2=function(){return(d2=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},d3="video",d4="ytnc",d5=function(a){return a&&"0"!==a},d6=function(a){function b(b,c){void 0===b&&(b={});var d=a.call(this,b,c)||this;return d.get("src")&&d.parseFromSrc(),d.updatePropsFromAttr(),d.updateTraits(),d.on("change:provider",d.updateTraits),d.on("change:videoId change:provider",d.updateSrc),d}return d1(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return d2(d2({},a.prototype.defaults),{type:d3,tagName:d3,videoId:"",void:!1,provider:"so",ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:!1,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),b.prototype.updatePropsFromAttr=function(){if("so"===this.get("provider")){var a=this.get("attributes"),b=a.controls,c=a.autoplay,d=a.loop,e=a.muted,f={};(0,s.isDef)(b)&&(f.controls=!!b),(0,s.isDef)(c)&&(f.autoplay=!!c),(0,s.isDef)(d)&&(f.loop=!!d),(0,s.isDef)(e)&&(f.muted=!!e),(0,s.isEmptyObj)(f)||this.set(f)}},b.prototype.updateTraits=function(){var a,b=this.em,c=this.get("provider"),d="iframe";switch(c){case"yt":case d4:a=this.getYoutubeTraits();break;case"vi":a=this.getVimeoTraits();break;default:d="video",a=this.getSourceTraits()}this.set({tagName:d},{silent:!0}),this.set({traits:a}),b.get("ready")&&b.trigger("component:toggled")},b.prototype.parseFromSrc=function(){var a=this.get("provider"),b=this.parseUri(this.get("src")),c=b.query;switch(a){case"yt":case d4:case"vi":this.set("videoId",b.pathname.split("/").pop()),c.list&&this.set("list",c.list),d5(c.autoplay)&&this.set("autoplay",!0),d5(c.loop)&&this.set("loop",!0),0===parseInt(c.controls)&&this.set("controls",!1),d5(c.color)&&this.set("color",c.color),"0"===c.rel&&this.set("rel",0),"1"===c.modestbranding&&this.set("modestbranding",1),"1"===c.muted&&this.set("muted",!0)}},b.prototype.updateSrc=function(){var a=this.get("provider"),b="";switch(a){case"yt":b=this.getYoutubeSrc();break;case d4:b=this.getYoutubeNoCookieSrc();break;case"vi":b=this.getVimeoSrc()}this.set({src:b})},b.prototype.getAttrToHTML=function(){var b=a.prototype.getAttrToHTML.call(this);switch(this.get("provider")){case"yt":case d4:case"vi":break;default:b.loop=!!this.get("loop"),b.autoplay=!!this.get("autoplay"),b.controls=!!this.get("controls"),b.muted=!!this.get("muted")}return b},b.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:"yt",name:"Youtube"},{value:d4,name:"Youtube (no cookie)"},{value:"vi",name:"Vimeo"}]}},b.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),this.getMutedTrait()]},b.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0},this.getMutedTrait()]},b.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getMutedTrait()]},b.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},b.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},b.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},b.prototype.getMutedTrait=function(){return{type:"checkbox",label:"Muted",name:"muted",changeProp:!0}},b.prototype.getYoutubeSrc=function(){var a=this.get("videoId"),b=this.get("ytUrl"),c=this.get("list");return b+=a+(0>a.indexOf("?")?"?":""),b+=c?"&list=".concat(c):"",b+=this.get("autoplay")?"&autoplay=1":"",b+=this.get("muted")?"&mute=1":"",b+=this.get("controls")?"":"&controls=0&showinfo=0",b+=this.get("loop")?"&loop=1&playlist=".concat(a):"",b+=this.get("rel")?"":"&rel=0",b+=this.get("modestbranding")?"&modestbranding=1":""},b.prototype.getYoutubeNoCookieSrc=function(){var a=this.getYoutubeSrc();return a.replace(this.get("ytUrl"),this.get("ytncUrl"))},b.prototype.getVimeoSrc=function(){var a=this.get("viUrl");return a+=this.get("videoId")+"?",a+=this.get("autoplay")?"&autoplay=1":"",a+=this.get("muted")?"&muted=1":"",a+=this.get("loop")?"&loop=1":"",a+=this.get("controls")?"":"&title=0&portrait=0&badge=0",a+=this.get("color")?"&color="+this.get("color"):""},b.isComponent=function(a){var b=a.tagName,c=a.src,d=/youtube\.com\/embed/.test(c),e=/youtube-nocookie\.com\/embed/.test(c),f=/player\.vimeo\.com\/video/.test(c),g=d||e||f;if((0,s.toLowerCase)(b)==d3||"iframe"==(0,s.toLowerCase)(b)&&g){var h={type:"video"};return c&&(h.src=c),g&&(d?h.provider="yt":e?h.provider=d4:f&&(h.provider="vi")),h}},b}(dh),d7=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),d8=function(){return(d8=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},d9=function(a){function b(b,c){void 0===b&&(b={});var d=a.call(this,b,c)||this;return d._resolverCurrentItem=0,d._isWatchingCollectionStateMap=!1,d.dataResolverProps&&(d.onDataSourceChange(),d.syncComponentsCollectionState()),d}return d7(b,a),Object.defineProperty(b.prototype,"defaults",{get:function(){return d8(d8({},a.prototype.defaults),{dataResolver:null,tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],doctype:"",head:null,docEl:null,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),b.prototype.preInit=function(){var a,b,c=this.opt,d=this.attributes,e=null==(a=this.em)?void 0:a.Components,f=null==(b=null==e?void 0:e.getType(b0))?void 0:b.model,g=null==e?void 0:e.getType("default").model;if(f){var h=d.head,i=d.docEl;this.set({head:h&&h instanceof bZ?h:new f(d8({},h),c),docEl:i&&i instanceof bZ?i:new g(d8({tagName:"html"},i),c)},{silent:!0})}},Object.defineProperty(b.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"docEl",{get:function(){return this.get("docEl")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"doctype",{get:function(){return this.attributes.doctype||""},enumerable:!1,configurable:!0}),b.prototype.clone=function(b){var c=a.prototype.clone.call(this,b);return c.set("head",this.get("head").clone(b)),c.set("docEl",this.get("docEl").clone(b)),c},b.prototype.toHTML=function(b){void 0===b&&(b={});var c=this.doctype,d=(0,r.isUndefined)(b.asDocument)?!!c:b.asDocument,e=this.head,f=this.docEl,g=a.prototype.toHTML.call(this,b),h=d&&(null==e?void 0:e.toHTML(b))||"",i=d&&(0,ab.kk)(null==f?void 0:f.getAttrToHTML())||"";return d?"".concat(c,"<html").concat(i?" ".concat(i):"",">").concat(h).concat(g,"</html>"):g},b.prototype.onCollectionsStateMapUpdate=function(b){var c=this.head;a.prototype.onCollectionsStateMapUpdate.call(this,b),c.onCollectionsStateMapUpdate(b)},b.prototype.syncComponentsCollectionState=function(){a.prototype.syncComponentsCollectionState.call(this),this.head.syncComponentsCollectionState()},b.prototype.syncOnComponentChange=function(b,c,d){var e=this.getCollectionsStateMap();this.collectionsStateMap=e,a.prototype.syncOnComponentChange.call(this,b,c,d),this.onCollectionsStateMapUpdate(e)},Object.defineProperty(b.prototype,"resolverCurrentItem",{get:function(){return this._resolverCurrentItem},set:function(a){this._resolverCurrentItem=a,this.onCollectionsStateMapUpdate(this.getCollectionsStateMap())},enumerable:!1,configurable:!0}),b.prototype.setResolverCurrentItem=function(a){this.resolverCurrentItem=a},b.prototype.onDataSourceChange=function(){this.onCollectionsStateMapUpdate(this.getCollectionsStateMap())},b.prototype.listenToPropsChange=function(){var a=this;this.on("change:dataResolver",function(b,c){var d=!(0,r.isUndefined)(c);d&&!a._isWatchingCollectionStateMap?(a._isWatchingCollectionStateMap=!0,a.syncComponentsCollectionState(),a.onCollectionsStateMapUpdate(a.getCollectionsStateMap()),a.listenToDataSource()):!d&&a._isWatchingCollectionStateMap&&(a._isWatchingCollectionStateMap=!1,a.stopSyncComponentCollectionState())}),this.listenToDataSource()},b.prototype.getCollectionsStateMap=function(){var a,b=this.dataResolverPath,c=this.resolverCurrentItem,d=this.em.DataSources;if(!b)return{};var e=ir.rootData,f=this.getDataSourceItems(),g=(0,r.isNumber)(c)?f[c]:(0,r.isString)(c)?d.getValue("".concat(b,".").concat(c)):f;return(a={})[e]={collectionId:e,currentItem:g},a},b.prototype.__postAdd=function(){var b,c=null==(b=this.em)?void 0:b.UndoManager;return this.__hasUm||null==c||c.add(this),a.prototype.__postAdd.call(this)},b.prototype.__postRemove=function(){var b,c=null==(b=this.em)?void 0:b.UndoManager;return null==c||c.remove(this),a.prototype.__postRemove.call(this)},b.isComponent=function(){return!1},b}(cQ),ea=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),eb=function(){return(eb=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},ec=function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=a.apply(this,b)||this;d.refreshDbn=(0,r.debounce)(function(){return d.refresh()},0);var e=d.events;return d.on(e.update,d.onUpdate),d.on(e.updateInside,d.onUpdateDeep),d}return ea(b,a),b.prototype.removeChildren=function(b,c,d){var e;void 0===d&&(d={}),a.prototype.removeChildren.call(this,b,c,d),null==(e=aP(b))||e.forEach(function(a){return aT(a,{skipRefs:!0})}),this.__trgEvent(this.events.symbolMainRemove,{component:b})},b.prototype.onAdd=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];a.prototype.onAdd.apply(this,b);var d=b[0];this.__trgEvent(this.events.symbolMainAdd,{component:d})},b.prototype.onUpdate=function(a){this.__trgEvent(this.events.symbolMainUpdate,a)},b.prototype.onUpdateDeep=function(a){this.__trgEvent(this.events.symbolMainUpdateDeep,a)},b.prototype.refresh=function(){var a=this.em,b=this.events;a.trigger(b.symbol)},b.prototype.__trgEvent=function(a,b,c){void 0===c&&(c=!1);var d=this.em,e=this.events,f=c?e.symbolInstance:e.symbolMain;d.trigger(a,b),d.trigger(f,eb(eb({},b),{event:a})),this.refreshDbn()},b}(bM),ed=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ee=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return ed(b,a),b.prototype._setAttributes=function(){},b.prototype.renderAttributes=function(){},b.prototype.updateStatus=function(){},b.prototype.updateClasses=function(){},b.prototype.setAttribute=function(){},b.prototype.updateAttributes=function(){},b.prototype.initClasses=function(){},b.prototype.initComponents=function(){},b.prototype.delegateEvents=function(){return this},b.prototype._createElement=function(){return document.createTextNode("")},b.prototype.render=function(){var a=this.model,b=this.el;return a.opt.temporary||(b.textContent=a.content),this},b}(cZ),ef=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),eg=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return ef(b,a),b.prototype._createElement=function(){return document.createComment(this.model.content)},b}(ee),eh=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ei=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return eh(b,a),b.prototype.tagName=function(){return"div"},b.prototype.initialize=function(b){a.prototype.initialize.call(this,b),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},b.prototype.updateSrc=function(){var a=(0,ab.I6)(this.el,"iframe")[0];a&&(0,ab.X6)(a,{src:this.__getSrc()})},b.prototype.render=function(){a.prototype.render.call(this);var b=(0,ab.a_)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(b),this},b.prototype.__getSrc=function(){return this.model.getAttributes().src||""},b}(cZ),ej=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ek=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return ej(b,a),b.prototype.tagName=function(){return"img"},b.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},b.prototype.initialize=function(b){a.prototype.initialize.call(this,b),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},b.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var a=this.model,b=this.em,c=a.get("file");if(c&&b){var d=b.Assets.FileUploader();null==d||d.uploadFile({dataTransfer:{files:[c]}},function(b){var c=b&&b.data&&b.data[0],d=c&&((0,r.isString)(c)?c:c.src);d&&a.set({src:d})},{componentView:this,file:c}),a.set("file","")}}},b.prototype.updateSrc=function(){var a=this.model;a.addAttributes({src:a.getSrcResult()}),this.updateClasses()},b.prototype.updateClasses=function(){a.prototype.updateClasses.call(this);var b=this.el,c=this.classEmpty,d=this.model,e=d.getSrcResult()&&!d.isDefaultSrc();b.classList[e?"remove":"add"](c)},b.prototype.onActive=function(a){null==a||a.stopPropagation();var b=this.em,c=this.model,d=null==b?void 0:b.Assets;d&&c.get("editable")&&d.open({select:function(a,b){c.set({src:a.getSrc()}),b&&d.close()},target:c,types:["image"],accept:"image/*"})},b.prototype.onError=function(){var a=this.model,b=this.el,c=a.getSrcResult({fallback:!0});c&&(b.srcset&&(b.srcset=""),b.src=c)},b.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},b.prototype.noDrag=function(a){return a.preventDefault(),!1},b.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var a=this.$el,b=this.model,c=a.attr("class")||"";return b.get("src")||a.attr("class","".concat(c," ").concat(this.classEmpty).trim()),this.postRender(),this},b}(cZ),el=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),em=function(){return(em=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},en=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},eo=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},ep=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return el(b,a),b.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},b.prototype.initialize=function(b){a.prototype.initialize.call(this,b),(0,r.bindAll)(this,"disableEditing","onDisable");var c=this.model,d=this.em;this.listenTo(c,"focus",this.onActive),this.listenTo(c,"change:content",this.updateContentText),this.listenTo(c,"sync:content",this.syncContent),this.rte=null==d?void 0:d.RichTextEditor},b.prototype.updateContentText=function(a,b,c){void 0===c&&(c={}),c.fromDisable||this.disableEditing()},b.prototype.canActivate=function(){var a,b=this.model,c=this.rteEnabled,d=this.em,e=(null==d?void 0:d.getEditing())===b,f=!0,g=!1;if((c||!b.get("editable")||e||(g=b.isChildOf("text")))&&(f=!1,g&&!b.get("textable"))){for(var h=b.parent();h&&!h.isInstanceOf("text");)h=h.parent();h&&h.get("editable")?a=h:f=!0}return{result:f,delegate:a}},b.prototype.onActive=function(a){return en(this,void 0,void 0,function(){var b,c,d,e,f,g,h,i,j,k,l,m;return eo(this,function(n){switch(n.label){case 0:if(b=this,c=b.rte,d=b.em,f=(e=this.canActivate()).result,g=e.delegate,!f)return g&&(null==(l=null==a?void 0:a.stopPropagation)||l.call(a),d.setSelected(g),g.trigger("active",a)),[2];return null==(m=null==a?void 0:a.stopPropagation)||m.call(a),h=this,[4,this.getContent()];case 1:if(h.lastContent=n.sent(),!c)return[3,5];n.label=2;case 2:return n.trys.push([2,4,,5]),i=this,j=this,[4,c.enable(i,this.activeRte,{event:a,view:i})];case 3:return j.activeRte=n.sent(),[3,5];case 4:return k=n.sent(),d.logError(k),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},b.prototype.onDisable=function(a){this.disableEditing(a)},b.prototype.disableEditing=function(){return en(this,arguments,void 0,function(a){var b,c,d,e,f,g,h,i,j;return void 0===a&&(a={}),eo(this,function(k){switch(k.label){case 0:if(b=this,c=b.model,d=b.rte,e=b.activeRte,f=b.em,g=c&&c.get("editable"),!d)return[3,7];return h={},[4,this.getContent()];case 1:i=k.sent(),k.label=2;case 2:return k.trys.push([2,4,,5]),[4,d.disable(this,e,a)];case 3:return h=k.sent(),[3,5];case 4:return j=k.sent(),f.logError(j),[3,5];case 5:if(!(g&&(i!==this.lastContent||h.forceSync)))return[3,7];return[4,this.syncContent(em(em({},a),{content:i}))];case 6:k.sent(),this.lastContent="",k.label=7;case 7:return this.toggleEvents(),[2]}})})},b.prototype.getContent=function(){return en(this,void 0,void 0,function(){var a,b,c,d;return eo(this,function(e){switch(e.label){case 0:if(a=this,b=a.rte,c=a.activeRte,d="",!b)return[3,2];return[4,b.getContent(this,c)];case 1:d=e.sent(),e.label=2;case 2:return[2,d]}})})},b.prototype.syncContent=function(){return en(this,arguments,void 0,function(a){var b,c,d,e,f,g,h,i;return void 0===a&&(a={}),eo(this,function(j){switch(j.label){case 0:if(b=this,c=b.model,d=b.rte,!b.rteEnabled&&!a.force)return[2];if(null==(i=a.content))return[3,1];return f=i,[3,3];case 1:return[4,this.getContent()];case 2:f=j.sent(),j.label=3;case 3:return e=f,g=c.components(),h=em({fromDisable:1},a),c.set("content","",h),(null==d?void 0:d.customRte)&&!d.customRte.parseContent?(g.length&&g.reset(void 0,em(em({},a),{keepIds:bK(g)})),c.set("content",e,h)):g.resetFromString(e,a),[2]}})})},b.prototype.insertComponent=function(a,b){void 0===b&&(b={});var c,d=this.model,e=this.el.ownerDocument.getSelection();if(null==e?void 0:e.rangeCount){var f=e.getRangeAt(0),g=f.startContainer,h=f.startOffset,i=(0,s.getComponentModel)(g),j=[];if(i&&(null==(c=i.is)?void 0:c.call(i,"textnode"))){var k=i.collection;k.forEach(function(c){if(c===i){var d="textnode",e=b.useDomContent?g.textContent||"":c.content;j.push({type:d,content:e.slice(0,h)}),j.push(a),j.push({type:d,content:e.slice(h)})}else j.push(c)});var l=j.filter(Boolean),m=l.indexOf(a);return k.reset(l,b),k.at(m)}}return d.append(a,b)},b.prototype.onInput=function(){var a=this.model;[Y.I.update,Y.I.input].forEach(function(b){return a.emitWithEditor(b,a)})},b.prototype.disablePropagation=function(a){a.stopPropagation()},b.prototype.toggleEvents=function(a){var b=this.em,c=this.model,d=this.$el,e={on:ab.on,off:ab.AU},f=a?"on":"off";b.setEditing(!!a&&this),this.rteEnabled=!!a;var g=[this.el.ownerDocument,document];if(e.off(g,"mousedown",this.onDisable),e[f](g,"mousedown",this.onDisable),b[f]("toolbar:run:before",this.onDisable),c){var h=b.RichTextEditor.events;c[f]("removed",this.onDisable),c.trigger(a?h.enable:h.disable)}if(null==d||d.off("mousedown",this.disablePropagation),d&&d[f]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var i=this.el;i;)i.draggable=!a,(i=i.parentNode)&&"BODY"==i.tagName&&(i=0)},b}(cZ),eq=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),er=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return eq(b,a),b.prototype.render=function(){return a.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},b}(ep),es=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),et=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return es(b,a),b}(er),eu=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ev=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return eu(b,a),b.prototype.tagName=function(){return"div"},b.prototype.events=function(){return{}},b.prototype.initialize=function(b){a.prototype.initialize.call(this,b),this.classEmpty=this.ppfx+"plh-map"},b.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},b.prototype.getIframe=function(){if(!this.iframe){var a=document.createElement("iframe");a.src=this.model.get("src"),a.frameBorder="0",a.style.height="100%",a.style.width="100%",a.className=this.ppfx+"no-pointer",this.iframe=a}return this.iframe},b.prototype.render=function(){return a.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},b}(ek),ew=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ex=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return ew(b,a),b.prototype.tagName=function(){return"script"},b.prototype.events=function(){return{}},b}(cZ),ey=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ez=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return ey(b,a),b.prototype._createElement=function(a){return document.createElementNS("http://www.w3.org/2000/svg",a)},b}(cZ),eA=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),eB=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return eA(b,a),b}(cZ),eC=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),eD=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return eC(b,a),b}(cZ),eE=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),eF=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return eE(b,a),b}(cZ),eG=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),eH=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return eG(b,a),b}(cZ),eI=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),eJ=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return eI(b,a),b}(cZ),eK=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),eL=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return eK(b,a),b.prototype.events=function(){return{}},b}(cZ),eM=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),eN=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return eM(b,a),b.prototype.tagName=function(){return"div"},b.prototype.events=function(){return{}},b.prototype.initialize=function(){cZ.prototype.initialize.apply(this,arguments);var a=this.model,b=["loop","autoplay","controls","color","rel","modestbranding","poster","muted"].map(function(a){return"change:".concat(a)}).join(" ");this.listenTo(a,"change:provider",this.updateProvider),this.listenTo(a,"change:src",this.updateSrc),this.listenTo(a,b,this.updateVideo)},b.prototype.updateProvider=function(){var a=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(a))},b.prototype.updateSrc=function(){var a=this.model,b=this.videoEl;if(b){var c=a.get("provider"),d=a.get("src");switch(c){case"yt":d=a.getYoutubeSrc();break;case"ytnc":d=a.getYoutubeNoCookieSrc();break;case"vi":d=a.getVimeoSrc()}b.src=d}},b.prototype.updateVideo=function(){var a=this.model,b=this.videoEl;switch(a.get("provider")){case"yt":case"ytnc":case"vi":a.trigger("change:videoId");break;default:b&&(b.loop=a.get("loop"),b.autoplay=a.get("autoplay"),b.controls=a.get("controls"),b.poster=a.get("poster"),b.muted=a.get("muted"))}},b.prototype.renderByProvider=function(a){var b;switch(a){case"yt":b=this.renderYoutube();break;case"ytnc":b=this.renderYoutubeNoCookie();break;case"vi":b=this.renderVimeo();break;default:b=this.renderSource()}return this.videoEl=b,b},b.prototype.renderSource=function(){var a=document.createElement("video");return a.src=this.model.get("src"),this.initVideoEl(a),a},b.prototype.renderYoutube=function(){var a=document.createElement("iframe");return a.src=this.model.getYoutubeSrc(),a.frameBorder="0",a.setAttribute("allowfullscreen","true"),this.initVideoEl(a),a},b.prototype.renderYoutubeNoCookie=function(){var a=document.createElement("iframe");return a.src=this.model.getYoutubeNoCookieSrc(),a.frameBorder="0",a.setAttribute("allowfullscreen","true"),this.initVideoEl(a),a},b.prototype.renderVimeo=function(){var a=document.createElement("iframe");return a.src=this.model.getVimeoSrc(),a.frameBorder="0",a.setAttribute("allowfullscreen","true"),this.initVideoEl(a),a},b.prototype.initVideoEl=function(a){a.className=this.ppfx+"no-pointer",a.style.height="100%",a.style.width="100%"},b.prototype.render=function(){cZ.prototype.render.apply(this),this.updateClasses();var a=this.model.get("provider");return this.el.appendChild(this.renderByProvider(a)),this.updateVideo(),this},b}(ek),eO=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),eP=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return eO(b,a),b.prototype.tagName=function(){return"div"},b}(cZ),eQ=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),eR=function(){return(eR=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},eS=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},eT=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))};!function(a){a[a.InvalidSource=0]="InvalidSource",a[a.SourceReject=1]="SourceReject",a[a.TargetReject=2]="TargetReject"}(iA||(iA={}));var eU=function(a){function b(b){var c=a.call(this,b,"DomComponents",new bM(void 0,{em:b}),Y.I,{stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]})||this;c.componentTypes=[{id:iq.collectionItem,model:cC,view:cZ},{id:iq.conditionTrue,model:cC,view:cZ},{id:iq.conditionFalse,model:cC,view:cZ},{id:iq.collection,model:cU,view:c_},{id:iq.condition,model:cz,view:c1},{id:iq.variable,model:cw,view:c3},{id:"cell",model:dR,view:eD},{id:"row",model:d0,view:eJ},{id:"table",model:dK,view:eL},{id:"thead",model:dZ,view:eH},{id:"tbody",model:dO,view:eB},{id:"tfoot",model:dV,view:eF},{id:"map",model:dw,view:ev},{id:"link",model:dt,view:er},{id:"label",model:dp,view:et},{id:"video",model:d6,view:eN},{id:"image",model:dh,view:ek},{id:"script",model:dA,view:ex},{id:"svg-in",model:dG,view:ez},{id:"svg",model:dD,view:ez},{id:"iframe",model:dd,view:ei},{id:"comment",model:c9,view:eg},{id:"textnode",model:c6,view:ee},{id:b0,model:b2,view:cZ},{id:"wrapper",model:d9,view:eP},{id:"text",model:dk,view:ep},{id:"default",model:bZ,view:cZ}],c.componentsById={},c.Component=bZ,c.Components=bM,c.ComponentView=cZ,c.ComponentsView=cW,c.storageKey="components",c.keySymbols="symbols",c.events=Y.I;var d=c.config;c.symbols=new ec([],{em:b,config:d,domc:c}),b&&(c.config.components=b.config.components||c.config.components);var e=c.config.pStylePrefix;if(e&&(c.config.stylePrefix=e+c.config.stylePrefix),b){b.get("Parser").compTypes=c.componentTypes,b.on("change:componentHovered",c.componentHovered,c);var f=b.get("selected");b.listenTo(f,"add",function(a,b,d){return c.selectAdd(f.getComponent(a),d)}),b.listenTo(f,"remove",function(a,b,d){return c.selectRemove(f.getComponent(a),d)})}return c}return eQ(b,a),b.prototype.postLoad=function(){var a=this.em,b=this.symbols;a.UndoManager.add(b)},b.prototype.load=function(a){var b=this,c=this.loadProjectData(a,{onResult:function(a){var c=b.getWrapper();if(c||(b.em.Pages.add({},{select:!0}),c=b.getWrapper()),(0,r.isArray)(a))a.length&&c.components(a);else{var d=a.components,e=eS(a,["components"]);c.set(e),c.components(void 0===d?[]:d)}}});return this.symbols.reset(a[this.keySymbols]||[]),c},b.prototype.store=function(){var a;return(a={})[this.keySymbols]=this.symbols,a},b.prototype.getComponent=function(){var a=this.em.Pages.getSelected(),b=null==a?void 0:a.getMainFrame();return null==b?void 0:b.getComponent()},b.prototype.getWrapper=function(){return this.getComponent()},b.prototype.getComponents=function(){var a=this.getWrapper();return null==a?void 0:a.components()},b.prototype.addComponent=function(a,b){return void 0===b&&(b={}),this.getComponents().add(a,b)},b.prototype.render=function(){var a;return null==(a=this.componentView)?void 0:a.render().el},b.prototype.clear=function(a){void 0===a&&(a={});var b=this.getComponents();return null==b||b.filter(Boolean).forEach(function(b){return b.remove(a)}),this},b.prototype.setComponents=function(a,b){void 0===b&&(b={}),this.clear(b).addComponent(a,b)},b.prototype.addType=function(a,b){var c=this.em,d=b.model,e=void 0===d?{}:d,f=b.view,g=void 0===f?{}:f,h=b.isComponent,i=b.extend,j=b.extendView,k=b.extendFn,l=b.extendFnView,m=b.block,n=this.getType(a),o=this.getType(i),p=this.getType(j),q=o||n||this.getType("default"),s=q.model,t=p?p.view:q.view,u=function(a,b,c){return a.reduce(function(a,d){var e=b[d],f=c.prototype[d];return e&&f&&(a[d]=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];f.bind(this).apply(void 0,a),e.bind(this).apply(void 0,a)}),a},{})};if("object"==typeof e){var v={defaults:e.defaults};delete e.defaults;var w=new Set(s.typeExtends);w.add(s.getDefaults().type),b.model=s.extend(eR(eR({},e),u(void 0===k?[]:k,e,s)),{typeExtends:w,isComponent:!n||o||h?h||function(){return 0}:s.isComponent}),Object.defineProperty(b.model.prototype,"defaults",{get:function(){return eR(eR({},(0,r.result)(s.prototype,"defaults")||{}),(0,r.result)(v,"defaults")||{})}})}if("object"==typeof g&&(b.view=t.extend(eR(eR({},g),u(void 0===l?[]:l,g,t)))),n?(n.model=b.model,n.view=b.view):(b.id=a,this.componentTypes.unshift(b)),m){var x={id:a,label:a,content:{type:a}},y=!0===m?x:eR(eR({},x),m);c.Blocks.add(y.id||a,y)}var z="component:type:".concat(n?"update":"add");return null==c||c.trigger(z,n||b),this},b.prototype.getType=function(a){for(var b=this.componentTypes,c=0;c<b.length;c++)if(b[c].id==a)return b[c]},b.prototype.removeType=function(a){var b=this.componentTypes,c=this.getType(a);if(c){var d=b.indexOf(c);return b.splice(d,1),c}},b.prototype.getTypes=function(){return this.componentTypes},b.prototype.selectAdd=function(a,b){var c=this;void 0===b&&(b={}),a&&(a.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(d){return c.em.trigger(d,a,b)}))},b.prototype.selectRemove=function(a,b){var c=this;void 0===b&&(b={}),a&&(this.em,a.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(d){return c.em.trigger(d,a,b)}))},b.prototype.componentHovered=function(){var a=this.em,b=a.get("componentHovered"),c=a.previous("componentHovered"),d="hovered";c&&c.get("status")==d&&c.set({status:"",state:""}),b&&(0,r.isEmpty)(b.get("status"))&&b.set("status",d)},b.prototype.getShallowWrapper=function(){var a=this.shallow,b=this.em;if(!a&&b){var c=b.shallow;if(!c)return;var d=c.Components;if(d.componentTypes=this.componentTypes,a=d.getWrapper()){var e=[bX,bY].join(" ");a.on(e,(0,r.debounce)(function(){return null==a?void 0:a.components("")},100))}this.shallow=a}return a},b.prototype.isComponent=function(a){return(0,s.isComponent)(a)},b.prototype.addSymbol=function(a){if(!(0,r.isSymbol)(a)||aM(a)){var b=a.clone({symbol:!0});return aJ(b)&&this.symbols.add(b),this.em.trigger("component:toggled"),b}},b.prototype.getSymbols=function(){return eT([],this.symbols.models,!0)},b.prototype.detachSymbol=function(a){aK(a)&&aT(a)},b.prototype.getSymbolInfo=function(a,b){void 0===b&&(b={});var c=aJ(a),d=aO(a),e=!!d,f=(c?aP(a):aP(d))||[],g=d||(c?a:void 0),h=aR(a,{changed:b.withChanges}),i=c||e,j=i&&aM(a);return{isSymbol:i,isMain:c,isInstance:e,isRoot:j,main:g,instances:f,relatives:h||[]}},b.prototype.canMove=function(a,b,c){var d={result:!1,reason:iA.InvalidSource,target:a,source:null};if(!b||!a)return d;if(aL(a)&&b instanceof bZ&&aL(b)){var e=aS(a),f=aJ(e)?e:aO(e),g=aS(b),h=aJ(g)?g:aO(g),i=e!==g;if(f===h&&i)return eR(eR({},d),{reason:iA.TargetReject})}var j=(0,s.isComponent)(b)?b:null;if(!j){var k=this.getShallowWrapper();j=(null==k?void 0:k.append(b,{temporary:!0})[0])||null}if(d.source=j,!j)return d;var l=j.get("draggable");if((0,r.isFunction)(l))l=!!l(j,a,c);else{var m=a.getEl();l=(0,r.isArray)(l)?l.join(","):l,l=(0,r.isString)(l)?null==m?void 0:m.matches(l):l}if(!l)return eR(eR({},d),{reason:iA.SourceReject});var n=a.get("droppable");if((0,r.isFunction)(n))n=!!n(j,a,c);else if(!1===n&&a.isInstanceOf("text")&&j.get("textable"))n=!0;else{var m=j.getEl();n=(0,r.isArray)(n)?n.join(","):n,n=(0,r.isString)(n)?null==m?void 0:m.matches(n):n}var o=[a].concat(a.parents()).indexOf(j)>-1;return!n||o?eR(eR({},d),{reason:iA.TargetReject}):eR(eR({},d),{result:!0})},b.prototype.allById=function(){return this.componentsById},b.prototype.getById=function(a){return this.componentsById[a]||null},b.prototype.destroy=function(){var a,b=this.allById();Object.keys(b).forEach(function(a){return b[a]&&b[a].remove()}),null==(a=this.componentView)||a.remove(),[this.em,this.componentsById,this.componentView].forEach(function(a){return{}})},b}(F),eV=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),eW=Number.MAX_VALUE,eX=function(a){var b=/(-?\d*\.?\d+)\w{0,}/.exec(a);return b?b[0]:""},eY=function(a){function b(){var b=a.call(this)||this;return(0,r.bindAll)(b,"sortRules"),b.compCls=[],b.ids=[],b}return eV(b,a),b.prototype.buildFromModel=function(a,b){var c=this;void 0===b&&(b={});var d="",e=this.em,f=e&&e.getConfig().avoidInlineStyle,g=a.styleToString(),h=a.classes;return this.ids.push("#".concat(a.getId())),h.forEach(function(a){return c.compCls.push(a.getFullName())}),!f&&g&&(d="#".concat(a.getId(),"{").concat(g,"}")),a.components().forEach(function(a){return d+=c.buildFromModel(a,b)}),d},b.prototype.build=function(a,b){var c=this;void 0===b&&(b={});var d=b.json,e=b.em,f=b.cssc||(null==e?void 0:e.Css);this.em=e,this.compCls=[],this.ids=[],this.model=a;var g=[],h=a?this.buildFromModel(a,b):"",i=(0,r.isUndefined)(b.clearStyles)&&e?e.getConfig().clearStyles:b.clearStyles;if(f){var j=b.rules||f.getAll(),k={},l=[];b.onlyMatched&&a&&(0,s.hasWin)()&&(j=this.matchedRules(a,j)),j.forEach(function(a){var e=a.getAtRule();if(e){var f=k[e];f?f.push(a):k[e]=[a];return}var i=c.buildFromRule(a,l,b);d?g.push(i):h+=i}),this.sortMediaObject(k).forEach(function(a){var e="",f=a.key;a.value.forEach(function(a){var i=c.buildFromRule(a,l,b);a.get("singleAtRule")?h+="".concat(f,"{").concat(i,"}"):e+=i,d&&g.push(i)}),e&&(h+="".concat(f,"{").concat(e,"}"))}),e&&i&&j.remove&&j.remove(l)}return d?g.filter(function(a){return a}):h},b.prototype.buildFromRule=function(a,b,c){var d,e,f=this;void 0===c&&(c={});var g="",h=this.model,i=a.selectorsToString({skipAdd:1}),j=a.get("selectorsAdd"),k=a.get("singleAtRule");if(null==(d=a.get("selectors"))||d.forEach(function(a){var b=a.getFullName();(f.compCls.indexOf(b)>=0||f.ids.indexOf(b)>=0||c.keepUnusedStyles)&&(e=1)}),i&&e||j||k||!h){var l=a.getDeclaration();l&&(c.json?g=a:g+=l)}else b.push(a);return g},b.prototype.matchedRules=function(a,b){var c=this,d=a.getEl(),e=[];return b.forEach(function(a){try{a.selectorsToString().split(",").some(function(a){return null==d?void 0:d.matches(c.__cleanSelector(a))})&&e.push(a)}catch(a){}}),a.components().forEach(function(a){e=e.concat(c.matchedRules(a,b))}),e=e.filter(function(a,b){return e.indexOf(a)===b})},b.prototype.getQueryLength=function(a){var b=/(-?\d*\.?\d+)\w{0,}/.exec(a);return b?parseFloat(b[1]):eW},b.prototype.sortMediaObject=function(a){var b=this;void 0===a&&(a={});var c=[];return(0,r.each)(a,function(a,b){return c.push({key:b,value:a})}),c.sort(function(a,c){var d=[a.key,c.key].every(function(a){return -1!==a.indexOf("min-width")}),e=d?a.key:c.key,f=d?c.key:a.key;return b.getQueryLength(e)-b.getQueryLength(f)})},b.prototype.sortRules=function(a,b){var c=function(a){return a.get("mediaText")||""},d=[c(a),c(b)].every(function(a){return -1!==a.indexOf("min-width")}),e=c(d?a:b),f=c(d?b:a);return this.getQueryLength(e)-this.getQueryLength(f)},b.prototype.__cleanSelector=function(a){return a.split(" ").map(function(a){return a.split(":")[0]}).join(" ")},b}(x.Kx),eZ=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e$=function(){return(e$=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},e_=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},e0=((0,s.hasWin)()?window:{}).CSS,e1=function(a){function b(b,c){void 0===c&&(c={});var d=a.call(this,b,{em:c.em})||this;return d.views=[],d.config=b||{},d.opt=c,d.em=c.em,d.ensureSelectors(null,null,{}),d.setStyle(d.get("style"),{skipWatcherUpdates:!0}),d.on("change",d.__onChange),d}return eZ(b,a),b.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},b.prototype.__onChange=function(a,b){var c=this.em,d=this.changedAttributes();d&&!(0,s.isEmptyObj)(d)&&(null==c||c.changesUp(b,{rule:a,changed:d,options:b}))},b.prototype.clone=function(){var b=this.get("selectors").map(function(a){return a.clone()});return a.prototype.clone.call(this,{selectors:b})},b.prototype.ensureSelectors=function(a,b,c){var d=this.em,e=null==d?void 0:d.Selectors,f=[this,"change:selectors",this.ensureSelectors],g=this.getSelectors();this.stopListening.apply(this,f),g.models&&(g=e_([],g.models,!0)),Array.isArray(g=(0,r.isString)(g)?[g]:g)&&(g=new bp(g.filter(function(a){return a}).map(function(a){return e?e.add(a):a}))),this.set("selectors",g,c),this.listenTo.apply(this,f)},b.prototype.getAtRule=function(){return b.getAtRuleFromProps(this.attributes)},b.getAtRuleFromProps=function(a){var b=a.atRuleType,c=a.mediaText,d=b?"@".concat(b):c?"@media":"";return d+(c&&d?" ".concat(c):"")},b.prototype.selectorsToString=function(a){void 0===a&&(a={});var b=[],c=this.get("state"),d=this.get("selectorsAdd"),e=this.getSelectors().getFullString(0,{escape:function(a){return e0&&e0.escape?e0.escape(a):a}}),f=c&&!a.skipState?":".concat(c):"";return e&&b.push("".concat(e).concat(f)),d&&!a.skipAdd&&b.push(d),b.join(", ")},b.prototype.getDeclaration=function(a){void 0===a&&(a={});var b="",c=this.attributes.important,d=this.selectorsToString(a),e=this.styleToString(e$({important:c},a)),f=this.get("singleAtRule");return(d||f)&&(e||a.allowEmpty)&&(b=f?e:"".concat(d,"{").concat(e,"}")),b},b.prototype.getDevice=function(){var a=this.em,b=this.attributes,c=b.atRuleType,d=b.mediaText,e=(null==a?void 0:a.Devices.getDevices())||[],f=e.filter(function(a){return""===a.getWidthMedia()})[0];return"media"===c&&d?e.filter(function(a){return a.getWidthMedia()===eX(d)})[0]||null:f||null},b.prototype.getState=function(){var a=this.em,b=this.get("state");return((null==a?void 0:a.Selectors.getStates())||[]).filter(function(a){return a.getName()===b})[0]||null},b.prototype.getComponent=function(){var a,b=this.getSelectors(),c=1==b.length&&b.at(0),d=c&&c.isId()&&c.get("name");return d&&(null==(a=this.em)?void 0:a.Components.getById(d))||null},b.prototype.toCSS=function(a){void 0===a&&(a={});var b="",c=this.getAtRule(),d=this.getDeclaration(a);return(d||a.allowEmpty)&&(b=d),c&&b&&(b="".concat(c,"{").concat(b,"}")),b},b.prototype.toJSON=function(b){var c,d=a.prototype.toJSON.call(this,b);if(null==(c=this.em)?void 0:c.getConfig().avoidDefaults){var e=this.defaults();(0,r.forEach)(e,function(a,b){d[b]===a&&delete d[b]}),delete d.style.__p,(0,r.isEmpty)(d.selectors)&&delete d.selectors,(0,r.isEmpty)(d.style)&&delete d.style}return d},b.prototype.compare=function(a,b,c,d){void 0===d&&(d={});var e,f=c||"",g=d.selectorsAdd||"",h=d.atRuleType||"",i=(0,r.isArray)(a)||a.models?a.models||a:[a];f&&!h&&(h="media");var j=i.map(function(a){return a.getFullName()}),k=null==(e=this.get("selectors"))?void 0:e.map(function(a){return a.getFullName()}),l=j.slice().sort(),m=k.slice().sort();return j.length===k.length&&!!l.every(function(a,b){return a===m[b]})&&this.get("state")===(b||"")&&this.get("mediaText")===f&&this.get("selectorsAdd")===g&&this.get("atRuleType")===h},b}(bk),e2=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e3=function(a){function b(b,c){var d=a.call(this,b)||this;return d.editor=null==c?void 0:c.em,setTimeout(function(){d.on("remove",d.onRemove),d.on("add",d.onAdd)}),d}return e2(b,a),b.prototype.toJSON=function(a){return x.pM.prototype.toJSON.call(this,a).filter(function(a){return a.style&&!a.shallow})},b.prototype.onAdd=function(a,b,c){a.ensureSelectors(a,b,c)},b.prototype.onRemove=function(a){var b=this.editor;b.stopListening(a),b.UndoManager.remove(a)},b.prototype.add=function(a,b){return void 0===b&&(b={}),"string"==typeof a&&(a=this.editor.get("Parser").parseCss(a)),b.em=this.editor,x.pM.prototype.add.apply(this,[a,b])},b}(x.pM);e3.prototype.model=e1;var e4=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e5=function(){return(e5=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},e6=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},e7=function(a){function b(b){var c=a.call(this,b,"CssComposer",null,ip,{stylePrefix:"css-",rules:[]})||this;c.classes={CssRule:e1,CssRules:e3,CssRuleView:af,CssRulesView:ak},c.events=ip,c.Selectors=bp,c.storageKey="styles",c._itemCache=new Map;var d=c.config,e=d.pStylePrefix;return e&&(d.stylePrefix=e+d.stylePrefix),d.rules=c.em.config.style||d.rules||"",c.rules=new e3([],d),c._setupCacheListeners(),c}return e4(b,a),b.prototype._setupCacheListeners=function(){a.prototype._setupCacheListeners.call(this),this.em.listenTo(this.rules,"change:selectors change:state change:mediaText",this._onItemKeyChange.bind(this))},b.prototype._makeCacheKey=function(a){var b=a.getAtRule(),c=a.selectorsToString();return"".concat(b,"__").concat(c)},b.prototype._makeCacheKeyFromProps=function(a){var b=a.atRuleType,c=void 0===b?"":b,d=a.mediaText,e=void 0===d?"":d,f=a.state,g=void 0===f?"":f,h=a.selectorsAdd,i=void 0===h?"":h,j=a.selectors,k=(void 0===j?[]:j).map(function(a){return(0,r.isString)(a)?a:a.toString()}).join(""),l=[];k&&l.push("".concat(k).concat(g?":".concat(g):"")),i&&l.push(i);var m=l.join(", "),n=c?"@".concat(c):e?"@media":"";return"".concat(n+(e&&n?" ".concat(e):""),"__").concat(m)},b.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0}),this._onItemsResetCache(this.rules)},b.prototype.postLoad=function(){this.em.UndoManager.add(this.getAll())},b.prototype.store=function(){return this.getProjectData()},b.prototype.load=function(a){return this.loadProjectData(a,{all:this.rules})},b.prototype._findRule=function(a,b,c,d){var e=a;if((0,r.isString)(a)){var f=this.em.Selectors,g=a.split(",")[0].trim(),h=this.em.Parser.parserCss.checkNode({selectors:g})[0];e=f.get(h.selectors)}return this.rules.find(function(a){return a.compare(e,b,c,d)})||null},b.prototype.add=function(a,b,c,d,e){void 0===d&&(d={}),void 0===e&&(e={});var f=b||"",g=c||"",h=e5({},d),i=this._makeCacheKeyFromProps(e5(e5({state:f,mediaText:g},h),{selectors:Array.isArray(a)?a:[a]})),j=this._itemCache.get(i);if(j&&j.config&&!j.config.singleAtRule)return j;var k=this._findRule(a,f,g,h);return k&&k.config&&!k.config.singleAtRule||(h.state=f,h.mediaText=g,h.selectors=[],g&&!h.atRuleType&&(h.atRuleType="media"),(k=new e1(h,this.config)).get("selectors").add(a,e),this.rules.add(k,e)),this._cacheItem(k),k},b.prototype.get=function(a,b,c,d){var e=this._makeCacheKeyFromProps(e5(e5({},d),{selectors:Array.isArray(a)?a:[a],state:b,width:c,mediaText:c})),f=this._itemCache.get(e);if(f)return f;var g=this._findRule(a,b,c,d);return g&&this._cacheItem(g),g},b.prototype.getAll=function(){return this.rules},b.prototype.addCollection=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c={});var d=this.em,e=[];(0,r.isString)(a)&&(a=d.Parser.parseCss(a));for(var f=a instanceof Array?a:[a],g=0,h=f.length;g<h;g++){var i=f[g]||{};if(i.selectors){var j=null==d?void 0:d.Selectors;j||console.warn("Selector Manager not found");for(var k=i.selectors,l=k instanceof Array?k:[k],m=[],n=0,o=l.length;n<o;n++){var p=j.add(l[n]);m.push(p)}var q=this.get(m,i.state,i.mediaText,i),t=this.add(m,i.state,i.mediaText,i,b),u=!q||!b.avoidUpdateStyle,v=i.style||{};if((0,s.isObject)(c)&&t.set(c,b),u){var w=b.extend?e5(e5({},t.getStyle("",{skipResolve:!0})),v):v;t.setStyle(w,b)}e.push(t)}}return e},b.prototype.addRules=function(a){return this.addCollection(a)},b.prototype.setRule=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c={});var d=c.atRuleType,e=c.atRuleParams,f=this.em.Parser.parserCss.checkNode({selectors:a,style:b})[0],g=f.state,h=f.selectorsAdd,i=this.em.Selectors.add(f.selectors),j=this.add(i,g,e,{selectorsAdd:h,atRule:d});return c.addStyles?j.addStyle(b,c):j.setStyle(b,c),j},b.prototype.getRule=function(a,b){void 0===b&&(b={});var c=this.em,d=c.Selectors,e=c.Parser.parserCss.checkNode({selectors:a})[0],f=d.get(e.selectors),g=e.state,h=e.selectorsAdd,i=b.atRuleType,j=b.atRuleParams;return f?this.get(f,g,j,{selectorsAdd:h,atRuleType:i}):void 0},b.prototype.getRules=function(a){var b=this.getAll();if(!a)return e6([],b.models,!0);var c={sort:!0},d=(0,r.isString)(a)?a.split(",").map(function(a){return a.trim()}):a;return b.filter(function(a){return d.indexOf(a.getSelectors().getFullString(null,c))>=0})},b.prototype.setIdRule=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c={});var d=c.addOpts,e=void 0===d?{}:d,f=c.mediaText,g=c.state||"",h=(0,r.isUndefined)(f)?this.em.getCurrentMedia():f,i=this.em.Selectors.add({name:a,type:bm.TYPE_ID},e),j=this.add(i,g,h,{},e);return j.setStyle(b,e5(e5({},c),e)),j},b.prototype.getIdRule=function(a,b){void 0===b&&(b={});var c=b.mediaText,d=b.state||"",e=(0,r.isUndefined)(c)?this.em.getCurrentMedia():c,f=this.em.Selectors.get(a,bm.TYPE_ID);return f&&this.get(f,d,e)},b.prototype.setClassRule=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c={});var d=c.state||"",e=c.mediaText||this.em.getCurrentMedia(),f=this.em.Selectors.add({name:a,type:bm.TYPE_CLASS}),g=this.add(f,d,e);return g.setStyle(b,c),g},b.prototype.getClassRule=function(a,b){void 0===b&&(b={});var c=b.state||"",d=b.mediaText||this.em.getCurrentMedia(),e=this.em.Selectors.get(a,bm.TYPE_CLASS);return e&&this.get(e,c,d)},b.prototype.remove=function(a,b){var c=(0,r.isString)(a)?this.getRules(a):a,d=Array.isArray(c)?c:[c],e=this.getAll().remove(d,b);return Array.isArray(e)?e:[e]},b.prototype.clear=function(a){return void 0===a&&(a={}),this._clearItemCache(),this.getAll().reset([],a),this},b.prototype.getComponentRules=function(a,b){void 0===b&&(b={});var c=b.state,d=b.mediaText;b.current&&(c=this.em.get("state")||"",d=this.em.getCurrentMedia());var e=a.getId();return this.getAll().filter(function(a){return(!!(0,r.isUndefined)(c)||a.get("state")===c)&&(!!(0,r.isUndefined)(d)||a.get("mediaText")===d)&&a.getSelectorsString()==="#".concat(e)})},b.prototype.render=function(){var a;return null==(a=this.rulesView)||a.remove(),this.rulesView=new ak({collection:this.rules,config:this.config}),this.rulesView.render().el},b.prototype.checkId=function(a,b){void 0===b&&(b={});var c=b.idMap,d=void 0===c?{}:c,e=[];return Object.keys(d).length&&(Array.isArray(a)?a:[a]).forEach(function(a){var b=a.selectors;if(b&&1==b.length){var c=b[0];if((0,r.isString)(c)){if("#"===c[0]){var f=c.substring(1),g=d[f];f&&g&&(b[0]="#".concat(g),e.push(a))}}else if(c.name&&c.type===bm.TYPE_ID){var g=d[c.name];g&&(c.name=g,e.push(a))}}}),e},b.prototype.destroy=function(){var a;this.rules.reset(),this.rules.stopListening(),null==(a=this.rulesView)||a.remove()},b}(F),e8=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),e9=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return e8(b,a),b.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{},dragDef:{}}},Object.defineProperty(b.prototype,"category",{get:function(){var a=this.get("category");return a instanceof bs?a:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),b.prototype.getId=function(){return this.id},b.prototype.getLabel=function(){return this.get("label")},b.prototype.getMedia=function(){return this.get("media")},b.prototype.getContent=function(){return this.get("content")},b.prototype.getDragDef=function(){return this.get("dragDef")},b.prototype.getCategoryLabel=function(){var a=this.get("category");return(0,r.isFunction)(null==a?void 0:a.get)?a.get("label"):(null==a?void 0:a.label)?null==a?void 0:a.label:a},b}(x.Kx),fa=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),fb=function(a){function b(b,c){var d=a.call(this,b)||this;return d.em=c.em,d.on("add",d.handleAdd),d}return fa(b,a),b.prototype.getCategories=function(){return this.em.Blocks.getCategories()},b.prototype.handleAdd=function(a){this.initCategory(a)},b}(bw);fb.prototype.model=e9,function(a){a.add="block:add",a.remove="block:remove",a.removeBefore="block:remove:before",a.update="block:update",a.dragStart="block:drag:start",a.drag="block:drag",a.dragEnd="block:drag:stop",a.categoryUpdate="block:category:update",a.custom="block:custom",a.all="block"}(iB||(iB={}));var fc=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),fd=function(){return(fd=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},fe=function(a){function b(b,c){void 0===c&&(c={});var d=a.call(this,b)||this,e=d.model;return d.em=c.em,d.config=c,d.endDrag=d.endDrag.bind(d),d.ppfx=c.pStylePrefix||"",d.listenTo(e,"destroy remove",d.remove),d.listenTo(e,"change",d.render),d}return fc(b,a),b.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},b.prototype.__getModule=function(){return this.em.Blocks},b.prototype.handleClick=function(a){var b=this.config,c=this.model,d=this.em,e=c.get("onClick")||b.appendOnClick;if(d.trigger("block:click",c,a),e){if((0,r.isFunction)(e))return e(c,null==d?void 0:d.getEditor(),{event:a});var f=null==(g=b.getSorter)?void 0:g.call(b);if(f){var g,h,i,j,k=c.get("content"),l=null==(h=this.getTempDropModel(k).view)?void 0:h.el,m=l?[{element:l,dragSource:{content:k}}]:[],n=d.getSelected();if(n)if(f.validTarget(n.getEl(),m,0))i=n;else{var o=n.parent();o&&f.validTarget(o.getEl(),m,0)&&(i=o,j=o.components().indexOf(n)+1)}if(!i){var p=d.getWrapper();f.validTarget(p.getEl(),m,0)&&(i=p)}var q=i&&i.append(k,{at:j})[0];q&&d.setSelected(q,{scroll:!0})}}},b.prototype.startDrag=function(a){var b,c=this.config,d=this.em,e=this.model,f=e.get("disable");if(0===a.button&&c.getSorter&&!this.el.draggable&&!f){d.refreshCanvas();var g=c.getSorter();g.__currentBlock=e;var h=this.model.get("content"),i=null==(b=this.getTempDropModel(h).view)?void 0:b.el,j=i?[{element:i,dragSource:{content:h}}]:[];g.startSort(j),(0,ab.on)(document,"mouseup",this.endDrag)}},b.prototype.handleDragStart=function(a){this.__getModule().__startDrag(this.model,a)},b.prototype.handleDrag=function(a){this.__getModule().__drag(a)},b.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},b.prototype.endDrag=function(){(0,ab.AU)(document,"mouseup",this.endDrag);var a,b,c=null==(b=(a=this.config).getSorter)?void 0:b.call(a);c&&c.endDrag()},b.prototype.getTempDropModel=function(a){var b,c=this.em.Components.getComponents(),d={avoidChildren:1,avoidStore:1,avoidUpdateStyle:1},e=c.add(a,fd(fd({},d),{temporary:!0})),f=c.remove(e,fd(fd({},d),{temporary:!0}));return null==(b=(f=f instanceof Array?f[0]:f).view)||b.$el.data("model",f),f},b.prototype.render=function(){var a,b=this.em,c=this.el,d=this.$el,e=this.ppfx,f=this.model,g=f.get("disable"),h=f.get("attributes")||{},i=h.class||"",j="".concat(e,"block"),k=b&&b.t("blockManager.labels.".concat(f.id))||f.get("label"),l=f.get("render"),m=f.get("media"),n=g?"".concat(j,"--disable"):"".concat(e,"four-color-h");d.attr(h),c.className="".concat(i," ").concat(j," ").concat(e,"one-bg ").concat(n).trim(),c.innerHTML="\n      ".concat(m?'<div class="'.concat(j,'__media">').concat(m,"</div>"):"",'\n      <div class="').concat(j,'-label">').concat(k,"</div>\n    "),c.title=h.title||(null==(a=c.textContent)?void 0:a.trim()),c.setAttribute("draggable","".concat(!!(0,s.hasDnd)(b)&&!g));var o=l&&l({el:c,model:f,className:j,prefix:e});return o&&(c.innerHTML=o),this},b}(x.Ss),ff=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),fg=function(a){function b(b,c,d){var e=a.call(this,b)||this;e.config=c;var f=c.pStylePrefix||"";return e.em=c.em,e.catName=d,e.pfx=f,e.caretR="fa fa-caret-right",e.caretD="fa fa-caret-down",e.iconClass="".concat(f,"caret-icon"),e.activeClass="".concat(f,"open"),e.className="".concat(f).concat(d,"-category"),e.listenTo(e.model,"change:open",e.updateVisibility),e.model.view=e,e}return ff(b,a),b.prototype.events=function(){return{"click [data-title]":"toggle"}},b.prototype.template=function(a){var b,c,d=a.pfx,e=a.label,f=a.catName;return t(iC||(b=['\n      <div class="','title" data-title>\n        <i class="','caret-icon"></i>\n        ','\n      </div>\n      <div class="',"",'s-c"></div>\n    '],c=['\n      <div class="','title" data-title>\n        <i class="','caret-icon"></i>\n        ','\n      </div>\n      <div class="',"",'s-c"></div>\n    '],Object.defineProperty?Object.defineProperty(b,"raw",{value:c}):b.raw=c,iC=b),d,d,e,d,f)},b.prototype.attributes=function(){return this.model.get("attributes")||{}},b.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},b.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},b.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},b.prototype.toggle=function(){var a=this.model;a.set("open",!a.get("open"))},b.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},b.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},b.prototype.append=function(a){this.getTypeEl().appendChild(a)},b.prototype.render=function(){var a=this.em,b=this.el,c=this.$el,d=this.model,e=this.pfx,f=this.catName,g=a.t("".concat(f,"Manager.categories.").concat(d.id))||d.get("label");return b.innerHTML=this.template({pfx:e,label:g,catName:f}),c.addClass(this.className),c.css({order:d.get("order")}),this.updateVisibility(),this},b}(x.Ss),fh=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),fi=function(){return(fi=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},fj=function(a){function b(b,c){var d=a.call(this,b)||this;d.renderedCategories=new Map,(0,r.bindAll)(d,"getSorter","onDrag","onDrop","onMove"),d.config=c||{},d.categories=b.categories||"";var e=d.config.pStylePrefix||"";d.ppfx=e,d.noCatClass="".concat(e,"blocks-no-cat"),d.blockContClass="".concat(e,"blocks-c"),d.catsClass="".concat(e,"block-categories");var f=d.collection;return d.listenTo(f,"add",d.addTo),d.listenTo(f,"reset",d.render),d.em=d.config.em,d.em&&(d.config.getSorter=d.getSorter),d}return fh(b,a),b.prototype.__getModule=function(){return this.em.Blocks},b.prototype.updateConfig=function(a){void 0===a&&(a={}),this.config=fi(fi({},this.config),a)},b.prototype.getSorter=function(){var a=this.em;if(a){if(!this.sorter){var b=a.Utils,c=a.Canvas;this.sorter=new b.ComponentSorter({em:a,treeClass:b6,containerContext:{container:c.getBody(),containerSel:"*",itemSel:"*",pfx:this.ppfx,placeholderElement:c.getPlacerEl(),document:c.getBody().ownerDocument},dragBehavior:{dragDirection:b7.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnStartSort:this.onDrag,legacyOnEndMove:this.onDrop,legacyOnMoveClb:this.onMove}})}return this.sorter}},b.prototype.onDrag=function(a){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,a)},b.prototype.onMove=function(a){this.__getModule().__drag(a)},b.prototype.onDrop=function(a){this.em.runDefault(),this.__getModule().__endDrag({component:a}),delete this.sorter.__currentBlock},b.prototype.addTo=function(a){this.add(a)},b.prototype.add=function(a,b){var c=this.config,d=this.renderedCategories,e=a.get("attributes"),f=new fe({model:a,attributes:e},c).render().el,g=a.parent.initCategory(a);if(g&&this.categories&&!c.ignoreCategories){var h=g.getId(),i=this.getCategoriesEl(),j=d.get(h);!j&&i&&(j=new fg({model:g},c,"block").render(),d.set(h,j),i.appendChild(j.el)),null==j||j.append(f);return}b?b.appendChild(f):this.append(f)},b.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},b.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},b.prototype.append=function(a){var b=this.getBlocksEl();b&&b.appendChild(a)},b.prototype.render=function(){var a=this,b=this.ppfx,c=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML='\n      <div class="'.concat(this.catsClass,'"></div>\n      <div class="').concat(this.noCatClass,'">\n        <div class="').concat(this.blockContClass,'"></div>\n      </div>\n    '),this.collection.each(function(b){return a.add(b,c)}),this.append(c);var d="".concat(this.blockContClass,"s ").concat(b,"one-bg ").concat(b,"two-color");return this.$el.addClass(d),this.rendered=!0,this},b}(x.Ss),fk=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),fl=function(){return(fl=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},fm=function(a){function b(b){var c=a.call(this,b,"BlockManager",new fb([],{em:b}),iB,{appendTo:"",blocks:[],appendOnClick:!1,custom:!1})||this;return c.events=iB,c.Block=e9,c.Blocks=fb,c.Category=bs,c.Categories=by,c.storageKey="",c.blocks=c.all,c.blocksVisible=new fb(c.blocks.models,{em:b}),c.categories=new by([],{em:b,events:{update:iB.categoryUpdate}}),c.__onAllEvent=(0,r.debounce)(function(){return c.__trgCustom()},0),c}return fk(b,a),b.prototype.onInit=function(){var a=this.config,b=this.blocks,c=this.blocksVisible;b.on("add",function(a){return c.add(a)}),b.on("remove",function(a){return c.remove(a)}),b.on("reset",function(a){return c.reset(a.models)}),b.add(a.blocks||[])},b.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},b.prototype.__customData=function(){var a=this,b=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:b.container,dragStart:function(b,c){return a.startDrag(b,c)},drag:function(b){return a.__drag(b)},dragStop:function(b){return a.endDrag(b)}}},b.prototype.__startDrag=function(a,b){var c=this.em,d=this.events,e=this.blocks,f=a.getContent?a.getContent():a;this._dragBlock=a,c.set({dragResult:null,dragSource:{content:f,dragDef:a.getDragDef()}}),[c,e].map(function(c){return c.trigger(d.dragStart,a,b)})},b.prototype.__drag=function(a){var b=this.em,c=this.events,d=this.blocks,e=this._dragBlock;[b,d].map(function(b){return b.trigger(c.drag,e,a)})},b.prototype.__endDrag=function(a){void 0===a&&(a={});var b=this.em,c=this.events,d=this.blocks,e=this._dragBlock,f=a.component||b.get("dragResult");if(delete this._dragBlock,f&&e){var g="activeOnRender",h=f.get&&f.get(g),i=e.get("activate")||h,j=e.get("select"),k=(0,r.isArray)(f)?f[0]:f;j||i&&!1!==j?b.setSelected(k,{activate:i}):i&&k.trigger("active"),i&&h&&k.unset(g),e.get("resetId")&&k.onAll(function(a){return a.resetId()})}b.set({dragResult:null,dragSource:void 0}),e&&[b,d].map(function(a){return a.trigger(c.dragEnd,f,e)})},b.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(a){return a.view}).filter(Boolean)},b.prototype.__behaviour=function(a){return void 0===a&&(a={}),this._bhv=fl(fl({},this._bhv||{}),a)},b.prototype.__getBehaviour=function(){return this._bhv||{}},b.prototype.startDrag=function(a,b){this.__startDrag(a,b),this.__getFrameViews().forEach(function(a){var b;return null==(b=a.droppable)?void 0:b.startCustom()})},b.prototype.endDrag=function(a){this.__getFrameViews().forEach(function(b){var c;return null==(c=b.droppable)?void 0:c.endCustom(a)}),this.__endDrag()},b.prototype.postRender=function(){var a=this.categories,b=this.config,c=this.em,d=this.blocksVisible;this.blocksView=new fj({collection:d,categories:a},fl(fl({},b),{em:c})),this.__appendTo(d.models),this.__trgCustom()},b.prototype.add=function(a,b,c){void 0===c&&(c={});var d=b||{};return d.id=a,this.blocks.add(d,c)},b.prototype.get=function(a){return this.blocks.get(a)},b.prototype.getAll=function(){return this.blocks},b.prototype.getAllVisible=function(){return this.blocksVisible},b.prototype.remove=function(a,b){return void 0===b&&(b={}),this.__remove(a,b)},b.prototype.getCategories=function(){return this.categories},b.prototype.getContainer=function(){var a;return null==(a=this.blocksView)?void 0:a.el},b.prototype.getDragBlock=function(){return this._dragBlock},b.prototype.getBlocksByCategory=function(a){return bt(a||this.getAll().models)},b.prototype.render=function(a,b){void 0===b&&(b={});var c=this.categories,d=this.config,e=this.em,f=a||this.getAll().models;return b.external?new fj({collection:new fb(f,{em:e}),categories:c},fl(fl({em:e},d),b)).render().el:(this.blocksView&&(this.blocksView.updateConfig(b),this.blocksView.collection.reset(f),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer())},b.prototype.destroy=function(){var a,b=[this.blocks,this.blocksVisible,this.categories];b.map(function(a){return a.stopListening()}),b.map(function(a){return a.reset()}),null==(a=this.blocksView)||a.remove()},b}(F),fn=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),fo=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return fn(b,a),b.prototype.defaults=function(){return{name:"",label:""}},b.prototype.getName=function(){return this.get("name")},b.prototype.getLabel=function(){return this.get("label")||this.getName()},b}(x.Kx);fo.prototype.idAttribute="name",function(a){a.add="selector:add",a.remove="selector:remove",a.removeBefore="selector:remove:before",a.update="selector:update",a.state="selector:state",a.custom="selector:custom",a.all="selector"}(iD||(iD={}));var fp=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),fq="contentEditable",fr=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,b)||this,d=b.config||{};return c.config=d,c.module=b.module,c.coll=b.coll||null,c.pfx=d.stylePrefix||"",c.ppfx=d.pStylePrefix||"",c.em=d.em,c.listenTo(c.model,"change:active",c.updateStatus),c}return fp(b,a),b.prototype.template=function(){var a,b,c=this.pfx,d=this.model,e=this.config,f=d.get("label")||"";return t(iE||(a=['\n      <span id="','checkbox" class="','tag-status" data-tag-status></span>\n      <span id="','tag-label" data-tag-name>','</span>\n      <span id="','close" class="','tag-close" data-tag-remove> $'," </span>\n    "],b=['\n      <span id="','checkbox" class="','tag-status" data-tag-status></span>\n      <span id="','tag-label" data-tag-name>','</span>\n      <span id="','close" class="','tag-close" data-tag-remove> $'," </span>\n    "],Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,iE=a),c,c,c,f,c,c,e.iconTagRemove)},b.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},b.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},b.prototype.startEditTag=function(){var a=this.em,b=this.getInputEl();b[fq]="true",b.focus(),null==a||a.setEditing(!0)},b.prototype.endEditTag=function(){var a=this.model,b=this.em,c=this.getInputEl(),d=c.textContent||"",e=null==b?void 0:b.Selectors;c[fq]="false",null==b||b.setEditing(!1),e&&e.rename(a,d)!==a&&(c.innerText=a.getLabel())},b.prototype.changeStatus=function(){var a=this.model;a.set("active",!a.getActive())},b.prototype.removeTag=function(){this.module.removeSelected(this.model)},b.prototype.updateStatus=function(){var a=this.model,b=this.$el,c=this.config,d=c.iconTagOn,e=c.iconTagOff,f=b.find("[data-tag-status]");a.get("active")?(f.html(d),b.removeClass("opac50")):(f.html(e),b.addClass("opac50"))},b.prototype.render=function(){var a=this.pfx,b=this.ppfx,c=this.$el,d=this.model,e="".concat(a,"tag"),f=["".concat(e," ").concat(b,"three-bg")];return d.get("protected")&&f.push("".concat(e,"-protected")),c.html(this.template()),c.attr("class",f.join(" ")),this.updateStatus(),this},b}(x.Ss),fs=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ft=function(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a},fu=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,b)||this;c.config=b.config||{},c.pfx=c.config.stylePrefix||"",c.ppfx=c.config.pStylePrefix||"",c.className=c.pfx+"tags",c.stateInputId=c.pfx+"states",c.stateInputC=c.pfx+"input-c",c.states=c.config.states||[];var d=c.config.em,e=c.collection;c.target=d;var f=d.Selectors;c.module=f,c.em=d,c.componentChanged=(0,r.debounce)(c.componentChanged.bind(c),0),c.checkSync=(0,r.debounce)(c.checkSync.bind(c),0);var g=Y.I.update,h="".concat(g,":classes"),i="".concat(h," ").concat(g,":attributes:id change:state");return c.listenTo(d,"component:toggled ".concat(h),c.componentChanged),c.listenTo(d,"styleManager:update",c.componentChanged),c.listenTo(d,i,c.__handleStateChange),c.listenTo(d,"styleable:change change:device",c.checkSync),c.listenTo(e,"add",c.addNew),c.listenTo(e,"reset",c.renderClasses),c.listenTo(e,"remove",c.tagRemoved),c.listenTo(f.getAll(),f.events.state,(0,r.debounce)(function(){return c.renderStates()},0)),c.delegateEvents(),c}return fs(b,a),b.prototype.template=function(a){var b=a.labelInfo,c=a.labelHead,d=a.iconSync,e=a.iconAdd,f=a.pfx,g=a.ppfx;return t(iF||(iF=ft([' <div id="','up" class="','header">\n        <div id="','label" class="','header-label">','</div>\n        <div id="','status-c" class="','header-status">\n          <span id="','input-c" data-states-c>\n            <div class="',"field ",'select">\n              <span id="','input-holder">\n                <select id="','states" data-states></select>\n              </span>\n              <div class="','sel-arrow">\n                <div class="','d-s-arrow"></div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div id="','tags-field" class="','field">\n        <div id="','tags-c" data-selectors></div>\n        <input id="','new" data-input />\n        <span id="','add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',' </span>\n        <span class="',"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',' </span>\n      </div>\n      <div class="','sels-info">\n        <div class="','label-sel">',':</div>\n        <div class="','sels" data-selected></div>\n      </div>'],[' <div id="','up" class="','header">\n        <div id="','label" class="','header-label">','</div>\n        <div id="','status-c" class="','header-status">\n          <span id="','input-c" data-states-c>\n            <div class="',"field ",'select">\n              <span id="','input-holder">\n                <select id="','states" data-states></select>\n              </span>\n              <div class="','sel-arrow">\n                <div class="','d-s-arrow"></div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div id="','tags-field" class="','field">\n        <div id="','tags-c" data-selectors></div>\n        <input id="','new" data-input />\n        <span id="','add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',' </span>\n        <span class="',"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',' </span>\n      </div>\n      <div class="','sels-info">\n        <div class="','label-sel">',':</div>\n        <div class="','sels" data-selected></div>\n      </div>'])),f,f,f,f,c,f,f,f,g,g,g,f,g,g,f,g,f,f,f,f,f,e,f,f,d,f,f,b,f)},b.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},b.prototype.syncStyle=function(){var a,b=this.em,c=this.getTarget(),d=b.Css,e=this.getCommonSelectors({opts:{noDisabled:1}}),f=b.get("state"),g=b.getCurrentMedia(),h=[],i=d.get(e,f,g)||d.add(e,f,g);this.getTargets().forEach(function(b){var c=d.getIdRule(b.getId(),{state:f,mediaText:g});a=c.getStyle(),c.setStyle({}),h.push(c)}),a&&i.addStyle(a),b.trigger("component:toggled"),b.trigger("component:sync-style",{component:c,selectors:e,mediaText:g,rule:i,ruleComponents:h,state:f})},b.prototype.tagRemoved=function(a){this.updateStateVis()},b.prototype.addNew=function(a){this.addToClasses(a)},b.prototype.startNewTag=function(){var a,b;null==(a=this.$addBtn)||a.css({display:"none"}),null==(b=this.$input)||b.show().focus()},b.prototype.endNewTag=function(){var a,b;null==(a=this.$addBtn)||a.css({display:""}),null==(b=this.$input)||b.hide().val("")},b.prototype.onInputKeyUp=function(a){var b;13===a.keyCode?(a.preventDefault(),this.addNewTag(null==(b=this.$input)?void 0:b.val())):27===a.keyCode&&this.endNewTag()},b.prototype.checkStates=function(){var a=this.em.getState(),b=this.getStates();b&&b.val(a)},b.prototype.componentChanged=function(a){var b=(void 0===a?{}:a).targets;this.updateSelection(b)},b.prototype.updateSelection=function(a){var b=a||this.getTargets();b=(0,r.isArray)(b)?b:[b];var c=[];return b&&b.length&&(c=this.getCommonSelectors({targets:b}),this.checkSync({validSelectors:c})),this.collection.reset(c),this.updateStateVis(b),this.module.__trgCustom(),c},b.prototype.getCommonSelectors=function(a){var b=void 0===a?{}:a,c=b.targets,d=b.opts,e=c||this.getTargets();return this.module.__getCommonSelectors(e,void 0===d?{}:d)},b.prototype._commonSelectors=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(a=this.module).__common.apply(a,b)},b.prototype.checkSync=function(){var a,b=this.$btnSyncEl,c=this.config,d=this.collection,e=this.getTarget();if(e&&c.componentFirst&&d.length){var f=e.getStyle();a=!(0,r.isEmpty)(f)}b&&b[a?"show":"hide"]()},b.prototype.getTarget=function(){return this.target.getSelected()},b.prototype.getTargets=function(){return this.target.getSelectedAll()},b.prototype.updateStateVis=function(a){var b=this.em,c=b&&b.getConfig().avoidInlineStyle,d=this.collection.length||c?"":"none";this.getStatesC().css("display",d),this.updateSelector(a)},b.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},b.prototype.updateSelector=function(a){var b=this,c=this.el.querySelector("[data-selected]"),d=[],e=a||this.getTargets();(e=(0,r.isArray)(e)?e:[e]).forEach(function(a){return d.push(b.__getName(a))}),c&&(c.innerHTML=d.join(", ")),this.checkStates()},b.prototype.__getName=function(a){var b,c=this.pfx,d=this.config,e=this.em,f=d.selectedName,g=d.componentFirst;if((0,r.isString)(a))b=t(iG||(iG=ft(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),c,a);else{var h=null==a?void 0:a.getSelectors();if(!h)return"";var i=h.getStyleable(),j=e.get("state"),k=a.getId?t(iH||(iH=ft(['<span class="','sel-cmp">','</span>\n            <span class="','sel-id">#',"</span>"],['<span class="','sel-cmp">','</span>\n            <span class="','sel-id">#',"</span>"])),c,a.getName(),c,a.getId()):"";b=(b=this.collection.getFullString(i))?t(iI||(iI=ft(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),c,b):a.get("selectorsAdd")||k,b=(g&&k?k:b)+(j?t(iJ||(iJ=ft(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),c,j):""),b=f?f({result:b,state:j,target:a}):b}return b&&'<span class="'.concat(c,'sel">').concat(b,"</span>")},b.prototype.stateChanged=function(a){var b=this.em,c=a.target.value;b.set("state",c)},b.prototype.addNewTag=function(a){var b=a.trim();b&&(this.module.addSelected({label:b}),this.endNewTag())},b.prototype.addToClasses=function(a,b){var c=this.getClasses(),d=new fr({model:a,config:this.config,coll:this.collection,module:this.module}).render().el;return b?b.appendChild(d):c.append(d),d},b.prototype.renderClasses=function(){var a=this,b=document.createDocumentFragment(),c=this.getClasses();c.empty(),this.collection.each(function(c){return a.addToClasses(c,b)}),c.append(b)},b.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},b.prototype.getStates=function(){if(!this.$states){var a=this.$el.find("[data-states]");this.$states=a[0]&&a}return this.$states},b.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},b.prototype.renderStates=function(){var a=this.module,b=this.em,c=b.t("selectorManager.emptyState"),d=a.getStates().map(function(a){var c=b.t("selectorManager.states.".concat(a.id))||a.getLabel()||a.id;return'<option value="'.concat(a.id,'">').concat(c,"</option>")}).join(""),e=this.getStates();e&&e.html('<option value="">'.concat(c,"</option>").concat(d)),this.checkStates()},b.prototype.render=function(){var a=this.em,b=this.pfx,c=this.ppfx,d=this.config,e=this.$el,f=this.el,g=d.render,h={iconSync:d.iconSync,iconAdd:d.iconAdd,labelHead:a.t("selectorManager.label"),labelInfo:a.t("selectorManager.selected"),ppfx:c,pfx:b,el:f};e.html(this.template(h));var i=g&&g(h);return i&&i!==f&&e.empty().append(i),this.$input=e.find("[data-input]"),this.$addBtn=e.find("[data-add]"),this.$classes=e.find("#"+b+"tags-c"),this.$btnSyncEl=e.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),e.attr("class","".concat(this.className," ").concat(c,"one-bg ").concat(c,"two-color")),this},b}(x.Ss),fv=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),fw=function(){return(fw=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},fx=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},fy=function(a){return(0,r.isString)(a)&&"#"==a[0]},fz=function(a){return(0,r.isString)(a)&&"."==a[0]},fA=function(a){function b(b){var c=a.call(this,b,"SelectorManager",new bp([]),iD,{stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1},{skipListen:!0})||this;c.Selector=bm,c.Selectors=bp,c.events=iD,c.storageKey="",(0,r.bindAll)(c,"__updateSelectedByComponents");var d=c.config,e=c.events,f=d.pStylePrefix;f&&(d.stylePrefix=f+d.stylePrefix),c.all=new bp(d.selectors),c.selected=new bp([],{em:b,config:d}),c.states=new x.pM(d.states.map(function(a){return new fo(a)}),{model:fo}),c.model=new x.Kx({cFirst:d.componentFirst,_undo:!0}),c.__update=(0,r.debounce)(function(){return c.__trgCustom()},0),c.__initListen({collections:[c.states,c.selected],propagate:[{entity:c.states,event:e.state}]}),b.on("change:state",function(a,c){return b.trigger(e.state,c)}),c.model.on("change:cFirst",function(a,c){return b.trigger("selector:type",c)});var g="".concat(Y.I.update,":classes");return b.on("component:toggled ".concat(g),c.__updateSelectedByComponents),c.model.listenTo(b,"component:toggled ".concat(g," change:device styleManager:update selector:state selector:type style:target"),function(){return c.__update()}),c}return fv(b,a),b.prototype.__trgCustom=function(a){this.em.trigger(this.events.custom,this.__customData(a))},b.prototype.getAll=function(a){return void 0===a&&(a={}),this.all?a.array?fx([],this.all.models,!0):this.all:[]},b.prototype.__customData=function(a){return void 0===a&&(a={}),this.__ctn=this.__ctn||a.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},b.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},b.prototype.select=function(a,b){void 0===b&&(b={});var c=Array.isArray(a)?a:[a],d=this.em.Styles.select(c,b);this.selected.reset(this.__getCommonSelectors(d));var e=this.selectorTags,f=d.filter(function(a){return a}).map(function(a){return(0,s.isComponent)(a)||(0,s.isRule)(a)&&!a.get("selectorsAdd")?a:a.getSelectorsString()});return e&&e.componentChanged({targets:f}),this},b.prototype.addSelector=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c={});var d=fw({},b);(0,r.isObject)(a)?d=a:d.name=a,fy(d.name)?(d.name=d.name.substr(1),d.type=bm.TYPE_ID):fz(d.name)&&(d.name=d.name.substr(1)),d.label&&!d.name&&(d.name=this.escapeName(d.label));var e=this.all,f=this.em,g=this.config,h=e.get(d);if(!h){var i=d instanceof bm?d:new bm(d,fw(fw({},c),{config:g,em:f}));return e.add(i,c)}return h},b.prototype.getSelector=function(a,b){return void 0===b&&(b=bm.TYPE_CLASS),fy(a)?(a=a.substr(1),b=bm.TYPE_ID):fz(a)&&(a=a.substr(1)),this.all.get({name:a,type:b})},b.prototype.add=function(a,b){var c=this;void 0===b&&(b={});var d=(0,r.isString)(a)?{}:b;return(0,r.isArray)(a)?a.map(function(a){return c.addSelector(a,b,d)}):this.addSelector(a,b,d)},b.prototype.addClass=function(a){var b=this,c=[];return(0,r.isString)(a)&&(a=a.trim().split(" ").filter(Boolean)),a.forEach(function(a){return c.push(b.addSelector(a))}),c},b.prototype.get=function(a,b){var c=this;if(!(0,r.isArray)(a))return this.getSelector(a,b);var d=[];return a.map(function(a){return c.getSelector(a)}).filter(Boolean).forEach(function(a){return 0>d.indexOf(a)&&d.push(a)}),d},b.prototype.remove=function(a,b){return this.__remove(a,b)},b.prototype.rename=function(a,b,c){var d=this.escapeName(b);return this.get(d)||a.set({name:d,label:b},c)},b.prototype.setState=function(a){return this.em.setState(a),this},b.prototype.getState=function(){return this.em.getState()},b.prototype.getStates=function(){return fx([],this.states.models,!0)},b.prototype.setStates=function(a,b){return this.states.reset(a.map(function(a){return new fo(a)}),b)},b.prototype.getSelected=function(){return this.__getCommon()},b.prototype.getSelectedAll=function(){return fx([],this.selected.models,!0)},b.prototype.addSelected=function(a){var b=this.add(a);this.em.getSelectedAll().forEach(function(a){a.getSelectors().add(b)})},b.prototype.removeSelected=function(a){this.em.getSelectedAll().forEach(function(b){!a.get("protected")&&b&&b.getSelectors().remove(a)})},b.prototype.duplicateSelected=function(a,b){var c=this;void 0===b&&(b={});var d=this.em,e=this.getSelected();if(!(0>e.indexOf(a))){var f=this.getState(),g=d.getCurrentMedia(),h=d.Css.get(e,f,g),i=null==h?void 0:h.getStyle();d.getSelectedAll().forEach(function(d){var e=d.getSelectors();if(e.includes(a)){var f=b.suffix||" copy",g=a.getLabel(),h=c.addSelector("".concat(g).concat(f)),i=e.indexOf(a);e.remove(a),e.add(h,{at:i})}}),i&&d.Css.add(this.getSelected(),f,g).setStyle(i)}},b.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},b.prototype.setComponentFirst=function(a){this.getConfig().componentFirst=a,this.model.set({cFirst:a})},b.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},b.prototype.escapeName=function(a){var b=this.getConfig().escapeName;return b?b(a):bm.escapeName(a)},b.prototype.render=function(a){var b=this.selectorTags,c=this.getConfig(),d=null==b?void 0:b.el;return this.selected.reset(a),this.selectorTags=new fu({el:d,collection:this.selected,module:this,config:c}),this.selectorTags.render().el},b.prototype.destroy=function(){var a=this.selectorTags;this.model.stopListening(),this.__update.cancel(),this.__destroy(),null==a||a.remove(),this.selectorTags=void 0},b.prototype.load=function(){},b.prototype.store=function(){},b.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},b.prototype.__getCommonSelectors=function(a,b){void 0===b&&(b={});var c=a.map(function(a){return a.getSelectors&&a.getSelectors().getValid(b)}).filter(Boolean);return this.__common.apply(this,c)},b.prototype.__common=function(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return b.length?1===b.length?b[0]:2===b.length?b[0].filter(function(a){return b[1].indexOf(a)>=0}):b.slice(1).reduce(function(b,c){return a.__common(b,c)},b[0]):[]},b.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},b}(F),fB={MEDIA_RULE:4,FONT_FACE_RULE:5,PAGE_RULE:6,KEYFRAMES_RULE:7,COUNTER_STYLE_RULE:11,SUPPORTS_RULE:12,DOCUMENT_RULE:13,FONT_FEATURE_VALUES_RULE:14,VIEWPORT_RULE:15},fC=((iK={})[fB.MEDIA_RULE]="media",iK[fB.FONT_FACE_RULE]="font-face",iK[fB.PAGE_RULE]="page",iK[fB.KEYFRAMES_RULE]="keyframes",iK[fB.COUNTER_STYLE_RULE]="counter-style",iK[fB.SUPPORTS_RULE]="supports",iK[fB.DOCUMENT_RULE]="document",iK[fB.FONT_FEATURE_VALUES_RULE]="font-feature-values",iK[fB.VIEWPORT_RULE]="viewport",iK),fD=(0,r.keys)(fC),fE=[fB.FONT_FACE_RULE,fB.PAGE_RULE,fB.COUNTER_STYLE_RULE,fB.VIEWPORT_RULE],fF=fD.filter(function(a){return 0>fE.indexOf(Number(a))}).map(function(a){return fC[a]}).concat(["container","layer"]),fG=fE.map(function(a){return fC[a]}),fH=function(a){void 0===a&&(a="");for(var b=[],c=[],d=a.split(","),e=0,f=d.length;e<f;e++){var g=d[e].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(g)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(g)){var h=g.split(".").filter(Boolean);c.push(h)}else b.push(g)}return{result:c,add:b}},fI=function(a){for(var b=a.style,c={},d=0,e=b.length;d<e;d++){var f=b[d],g=b.getPropertyValue(f),h=b.getPropertyPriority(f);c[f]="".concat(g).concat(h?" !".concat(h):"")}return c},fJ=function(a){return(a.conditionText||a.media&&a.media.mediaText||a.name||a.selectorText||"").trim()},fK=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c={});var d={},e=a.length,f=a[e-1],g=f?f.split(/:(.+)/):[],h=g[1],i=c.atRule,j=c.selectorsAdd,k=c.mediaText;return fG.indexOf(i)>=0&&(d.singleAtRule=!0),i&&(d.atRuleType=i),j&&(d.selectorsAdd=j),k&&(d.mediaText=k),h&&(a[e-1]=g[0],d.state=h,g.splice(g.length-1,1)),d.selectors=a,d.style=b,d},fL=function(a){var b=a.cssText,c=void 0===b?"":b;return fF.find(function(a){return 0===c.indexOf("@".concat(a))})},fM=function(a){for(var b=[],c=a.cssRules||[],d=0,e=c.length;d<e;d++){var f=c[d],g=f.type,h=!1,i="",j="",k=f.selectorText||f.keyText||"",l=fE.indexOf(g)>=0;if(l)h=!0,i=fC[g],j=fJ(f);else if(fD.indexOf("".concat(g))>=0||!g&&fL(f)){var m=fM(f),n=fC[g]||fL(f);j=fJ(f);for(var o=0,p=m.length;o<p;o++){var q=m[o];j&&(q.mediaText=j),q.atRuleType=n}b=b.concat(m)}if(k||l){for(var r=fI(f),s=fH(k),t=s.add,u=s.result,v=void 0,w=0,x=u.length;w<x;w++){var y=fK(u[w],r,{atRule:fC[g]});b.push(y),v=y}if(t.length){var z=t.join(", ");if(v)v.selectorsAdd=z;else{var y={selectors:[],selectorsAdd:z,style:r};h&&(y.singleAtRule=h),i&&(y.atRuleType=i),j&&(y.mediaText=j),b.push(y)}}}}return b};let fN=function(a){var b=document.createElement("style");b.innerHTML=a,document.head.appendChild(b);var c=b.sheet;return document.head.removeChild(b),c?fM(c):[]};var fO=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),fP=function(){return(fP=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},fQ=function(a){function b(b){var c,d=a.call(this,b,"Parser",{textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1,convertDataGjsAttributesHyphens:!1}})||this;d.events=iy;var e=d.config;return void 0===(c=e)&&(c={}),d.parserCss={parse:function(a,d){var e,f=this;void 0===d&&(d={});var g=[],h=c.parserCss,i=null==b?void 0:b.Editor,j=[],k=null==b?void 0:b.Parser,l={input:a};null==k||k.__emitEvent(iy.cssBefore,l);var m=l.input;try{j=h?h(m,i):fN(m)}catch(a){if(e=a,d.throwOnError)throw a}return j.forEach(function(a){return g=g.concat(f.checkNode(a))}),null==k||k.__emitEvent(iy.css,{input:m,output:g,nodes:j,error:e}),g},checkNode:function(a){var b=a.selectors,c=a.style,d=[a];if((0,r.isString)(b)){var e=[],f=fH(b),g=f.result,h=f.add.join(", "),i={atRule:a.atRule,mediaText:a.params};g.length?g.forEach(function(a){e.push(fK(a,c,i))}):e.push(fK([],c,i)),h&&(e[e.length-1].selectorsAdd=h),d=e}return d}},d.parserHtml=a8(b,e),d}return fO(b,a),b.prototype.parseHtml=function(a,b){void 0===b&&(b={});var c=this.em,d=this.parserHtml;return d.compTypes=c.Components.getTypes()||[],d.parse(a,this.parserCss,b)},b.prototype.parseCss=function(a){return this.parserCss.parse(a)},b.prototype.__emitEvent=function(a,b){var c=this.em,d=this.events;c.trigger(a,b),c.trigger(d.all,fP({event:a},b))},b.prototype.destroy=function(){},b}(E),fR=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},fS=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},fT=function(){function a(){}return a.prototype.store=function(a){return fR(this,arguments,void 0,function(a,b){return void 0===b&&(b={}),fS(this,function(c){return this.hasLocal(b,!0)&&localStorage.setItem(b.key,JSON.stringify(a)),[2,a]})})},a.prototype.load=function(){return fR(this,arguments,void 0,function(a){var b;return void 0===a&&(a={}),fS(this,function(c){return b={},this.hasLocal(a,!0)&&(b=JSON.parse(localStorage.getItem(a.key)||"{}")),[2,b]})})},a.prototype.hasLocal=function(a,b){if(void 0===a&&(a={}),a.checkLocal&&(!(0,s.hasWin)()||!localStorage)){if(b)throw Error("localStorage not available");return!1}return!0},a}();function fU(a){return(fU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function fV(a,b){this.name="AggregateError",this.errors=a,this.message=b||""}fV.prototype=Error.prototype;var fW=setTimeout;function fX(a){return!!(a&&void 0!==a.length)}function fY(){}function fZ(a){if(!(this instanceof fZ))throw TypeError("Promises must be constructed via new");if("function"!=typeof a)throw TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f3(a,this)}function f$(a,b){for(;3===a._state;)a=a._value;if(0===a._state)return void a._deferreds.push(b);a._handled=!0,fZ._immediateFn(function(){var c,d=1===a._state?b.onFulfilled:b.onRejected;if(null===d)return void(1===a._state?f_:f0)(b.promise,a._value);try{c=d(a._value)}catch(a){f0(b.promise,a);return}f_(b.promise,c)})}function f_(a,b){try{if(b===a)throw TypeError("A promise cannot be resolved with itself.");if(b&&("object"===fU(b)||"function"==typeof b)){var c=b.then;if(b instanceof fZ){a._state=3,a._value=b,f1(a);return}if("function"==typeof c)return void f3(function(){c.apply(b,arguments)},a)}a._state=1,a._value=b,f1(a)}catch(b){f0(a,b)}}function f0(a,b){a._state=2,a._value=b,f1(a)}function f1(a){2===a._state&&0===a._deferreds.length&&fZ._immediateFn(function(){a._handled||fZ._unhandledRejectionFn(a._value)});for(var b=0,c=a._deferreds.length;b<c;b++)f$(a,a._deferreds[b]);a._deferreds=null}function f2(a,b,c){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.promise=c}function f3(a,b){var c=!1;try{a(function(a){c||(c=!0,f_(b,a))},function(a){c||(c=!0,f0(b,a))})}catch(a){if(c)return;c=!0,f0(b,a)}}fZ.prototype.catch=function(a){return this.then(null,a)},fZ.prototype.then=function(a,b){var c=new this.constructor(fY);return f$(this,new f2(a,b,c)),c},fZ.prototype.finally=function(a){var b=this.constructor;return this.then(function(c){return b.resolve(a()).then(function(){return c})},function(c){return b.resolve(a()).then(function(){return b.reject(c)})})},fZ.all=function(a){return new fZ(function(b,c){if(!fX(a))return c(TypeError("Promise.all accepts an array"));var d=Array.prototype.slice.call(a);if(0===d.length)return b([]);for(var e=d.length,f=0;f<d.length;f++)!function a(f,g){try{if(g&&("object"===fU(g)||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(b){a(f,b)},c)}d[f]=g,0==--e&&b(d)}catch(a){c(a)}}(f,d[f])})},fZ.any=function(a){var b=this;return new b(function(c,d){if(!(a&&void 0!==a.length))return d(TypeError("Promise.any accepts an array"));var e=Array.prototype.slice.call(a);if(0===e.length)return d();for(var f=[],g=0;g<e.length;g++)try{b.resolve(e[g]).then(c).catch(function(a){f.push(a),f.length===e.length&&d(new fV(f,"All promises were rejected"))})}catch(a){d(a)}})},fZ.allSettled=function(a){return new this(function(b,c){if(!(a&&void 0!==a.length))return c(TypeError(fU(a)+" "+a+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var d=Array.prototype.slice.call(a);if(0===d.length)return b([]);for(var e=d.length,f=0;f<d.length;f++)!function a(c,f){if(f&&("object"===fU(f)||"function"==typeof f)){var g=f.then;if("function"==typeof g)return void g.call(f,function(b){a(c,b)},function(a){d[c]={status:"rejected",reason:a},0==--e&&b(d)})}d[c]={status:"fulfilled",value:f},0==--e&&b(d)}(f,d[f])})},fZ.resolve=function(a){return a&&"object"===fU(a)&&a.constructor===fZ?a:new fZ(function(b){b(a)})},fZ.reject=function(a){return new fZ(function(b,c){c(a)})},fZ.race=function(a){return new fZ(function(b,c){if(!fX(a))return c(TypeError("Promise.race accepts an array"));for(var d=0,e=a.length;d<e;d++)fZ.resolve(a[d]).then(b,c)})},fZ._immediateFn="function"==typeof setImmediate&&function(a){setImmediate(a)}||function(a){fW(a,0)},fZ._unhandledRejectionFn=function(a){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)},(0,s.hasWin)()&&(window.Promise=window.Promise||fZ);let f4="function"==typeof fetch?fetch.bind():function(a,b){return new fZ(function(c,d){var e=new XMLHttpRequest;for(var f in e.open(b.method||"get",a),e.withCredentials="include"==b.credentials,b.headers||{})e.setRequestHeader(f,b.headers[f]);e.onload=function(a){return c({status:e.status,statusText:e.statusText,text:function(){return fZ.resolve(e.responseText)}})},e.onerror=d,e.upload&&b.onProgress&&(e.upload.onprogress=b.onProgress),b.body?e.send(b.body):e.send()})};var f5=function(){return(f5=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},f6=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},f7=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},f8=function(){function a(){}return a.prototype.store=function(a){return f6(this,arguments,void 0,function(a,b){return void 0===b&&(b={}),f7(this,function(c){switch(c.label){case 0:return[4,this.request(b.urlStore,this.__props(b,a),b)];case 1:return[2,c.sent()]}})})},a.prototype.load=function(){return f6(this,arguments,void 0,function(a){return void 0===a&&(a={}),f7(this,function(b){switch(b.label){case 0:return[4,this.request(a.urlLoad,this.__props(a),a)];case 1:return[2,b.sent()]}})})},a.prototype.request=function(a,b,c){return void 0===b&&(b={}),void 0===c&&(c={}),f4(a,b).then(function(a){var b=a.text();return(a.status/200|0)==1?b:b.then(Promise.reject)}).then(function(a){var b=a&&(0,r.isString)(a);return c.contentTypeJson&&b?JSON.parse(a):a})},a.prototype.__props=function(a,b){void 0===a&&(a={});var c,d=a.contentTypeJson,e=a.headers||{},f=a.fetchOptions||{},g="X-Requested-With",h="Content-Type";if((0,r.isUndefined)(e[g])&&(e[g]="XMLHttpRequest"),(0,r.isUndefined)(e[h])&&d&&(e[h]="application/json; charset=utf-8"),b)if(d)c=JSON.stringify(b);else for(var i in c=new FormData,b)c.append(i,b[i]);var j={method:c?"POST":"GET",credentials:a.credentials,headers:e,body:c};return f5(f5({},j),(0,r.isFunction)(f)?f(j):f)},a}();!function(a){a.start="storage:start",a.startStore="storage:start:store",a.startLoad="storage:start:load",a.load="storage:load",a.store="storage:store",a.after="storage:after",a.afterStore="storage:after:store",a.afterLoad="storage:after:load",a.end="storage:end",a.endStore="storage:end:store",a.endLoad="storage:end:load",a.error="storage:error",a.errorStore="storage:error:store",a.errorLoad="storage:error:load"}(iL||(iL={}));let f9=iL;var ga=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gb=function(){return(gb=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},gc=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},gd=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},ge="local",gf="remote",gg=function(a){function b(b){var c=a.call(this,b,"StorageManager",{id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(a){return a},onLoad:function(a){return a},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(a){return a},onLoad:function(a){return a}}}})||this;c.storages={},c.events=f9;var d=c.config;return d._disable&&(d.type=void 0),c.storages={},c.add(ge,new fT),c.add(gf,new f8),c.setCurrent(d.type),c}return ga(b,a),b.prototype.isAutosave=function(){return!!this.config.autosave},b.prototype.setAutosave=function(a){return this.config.autosave=!!a,this},b.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},b.prototype.setStepsBeforeSave=function(a){return this.config.stepsBeforeSave=a,this},b.prototype.add=function(a,b){return this.storages[a]=b,this},b.prototype.get=function(a){return this.storages[a]},b.prototype.getStorages=function(){return this.storages},b.prototype.getCurrent=function(){return this.config.currentStorage},b.prototype.setCurrent=function(a){return this.getConfig().currentStorage=a,this},b.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},b.prototype.getStorageOptions=function(a){return this.getCurrentOptions(a)},b.prototype.store=function(a){return gc(this,arguments,void 0,function(a,b){var c,d,e,f,g;return void 0===b&&(b={}),gd(this,function(h){switch(h.label){case 0:c=this.getCurrentStorage(),d=gb(gb({},this.getCurrentOptions()),b),e=this.getRecoveryStorage(),f=this.getCurrentOptions(ge),h.label=1;case 1:return h.trys.push([1,5,,9]),[4,this.__exec(c,d,a)];case 2:if(h.sent(),!e)return[3,4];return[4,this.__exec(e,f,{})];case 3:h.sent(),h.label=4;case 4:case 8:return[3,9];case 5:if(g=h.sent(),!e)return[3,7];return[4,this.__exec(e,f,a)];case 6:return h.sent(),[3,8];case 7:throw g;case 9:return[2,a]}})})},b.prototype.load=function(){return gc(this,arguments,void 0,function(a){var b,c,d,e,f;return void 0===a&&(a={}),gd(this,function(g){switch(g.label){case 0:if(b=this.getCurrentStorage(),c=gb(gb({},this.getCurrentOptions()),a),!(d=this.getRecoveryStorage()))return[3,5];return[4,this.__exec(d,this.getCurrentOptions(ge))];case 1:if(f=g.sent(),(0,r.isEmpty)(f))return[3,5];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return g.sent(),e=f,[3,5];case 4:return g.sent(),[3,5];case 5:if(e)return[3,7];return[4,this.__exec(b,c)];case 6:e=g.sent(),g.label=7;case 7:return[2,e||{}]}})})},b.prototype.__askRecovery=function(){var a=this.em,b=this.getRecovery();return new Promise(function(c,d){(0,r.isFunction)(b)?b(c,d,null==a?void 0:a.getEditor()):confirm(null==a?void 0:a.t("storageManager.recover"))?c(null):d()})},b.prototype.getRecovery=function(){return this.config.recovery},b.prototype.getRecoveryStorage=function(){return this.getRecovery()&&this.getCurrent()===gf&&this.get(ge)},b.prototype.__exec=function(a,b,c){return gc(this,void 0,void 0,function(){var d,e,f,g,h,i,j,k,l,m,n,o,p,q;return gd(this,function(r){switch(r.label){case 0:if(d=c?"store":"load",f=(e=this.getConfig()).onStore,g=e.onLoad,!a)return[2,c||{}];this.onStart(d,c),r.label=1;case 1:if(r.trys.push([1,14,,15]),i=null==(q=this.em)?void 0:q.getEditor(),j=void 0,!c)return[3,7];if(!(l=f))return[3,3];return[4,f(c,i)];case 2:l=r.sent(),r.label=3;case 3:if(k=l||c,!(m=b.onStore))return[3,5];return[4,b.onStore(k,i)];case 4:m=r.sent(),r.label=5;case 5:return k=m||k,[4,a.store(k,b)];case 6:return j=r.sent(),h=c,[3,13];case 7:return[4,a.load(b)];case 8:if(j=r.sent(),h=this.__clearKeys(j),!(n=b.onLoad))return[3,10];return[4,b.onLoad(h,i)];case 9:n=r.sent(),r.label=10;case 10:if(h=n||h,!(o=g))return[3,12];return[4,g(h,i)];case 11:o=r.sent(),r.label=12;case 12:h=o||h,r.label=13;case 13:return this.onAfter(d,h,j),this.onEnd(d,h,j),[3,15];case 14:throw p=r.sent(),this.onError(d,p),p;case 15:return[2,h]}})})},b.prototype.__clearKeys=function(a){void 0===a&&(a={});var b=this.getConfig(),c=new RegExp("^".concat(b.id)),d={};for(var e in a)d[e.replace(c,"")]=a[e];return d},b.prototype.getCurrentOptions=function(a){var b=this.getConfig(),c=a||this.getCurrent();return b.options[c]||{}},b.prototype.onStart=function(a,b){var c=this.em;if(c){var d="load"===a?f9.startLoad:f9.startStore;c.trigger(f9.start,a,b),c.trigger(d,b)}},b.prototype.onAfter=function(a,b,c){var d=this.em;if(d){var e="load"===a?f9.afterLoad:f9.afterStore;d.trigger(f9.after),d.trigger(e,b,c);var f="load"===a?f9.load:f9.store;d.trigger(f,b,c)}},b.prototype.onEnd=function(a,b,c){var d=this.em;if(d){var e="load"===a?f9.endLoad:f9.endStore;d.trigger(f9.end,a,b,c),d.trigger(e,b,c)}},b.prototype.onError=function(a,b){var c=this.em;if(c){var d="load"===a?f9.errorLoad:f9.errorStore;c.trigger(f9.error,b,a),c.trigger(d,b),this.onEnd(a,b)}},b.prototype.canAutoload=function(){return!!this.getCurrentStorage()&&!!this.config.autoload},b.prototype.destroy=function(){this.storages={}},b}(E),gh=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gi=function(){return(gi=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},gj=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,b)||this;c.events={},c.appendInput=!0;var d=b.config,e=void 0===d?{}:d,f=c.model,g=c.eventCapture,h=f.target,i=f.attributes.type;return c.config=e,c.em=e.em,c.pfx=e.stylePrefix||"",c.ppfx=e.pStylePrefix||"",c.target=h,c.className=c.pfx+"trait",c.clsField="".concat(c.ppfx,"field ").concat(c.ppfx,"field-").concat(i),[["change:value",c.onValueChange],["remove",c.removeView]].forEach(function(a){var b=a[0],d=a[1];f.off(b,d),c.listenTo(f,b,d)}),f.view=c,c.listenTo(f,"change:label",c.render),c.listenTo(f,"change:placeholder",c.rerender),c.events={},g.forEach(function(a){return c.events[a]="onChange"}),c.delegateEvents(),c.init(),c}return gh(b,a),b.prototype.attributes=function(){return this.model.get("attributes")||{}},b.prototype.templateLabel=function(a){var b=this.ppfx,c=this.getLabel();return'<div class="'.concat(b,'label" title="').concat(c,'">').concat(c,"</div>")},b.prototype.templateInput=function(a){var b=this.clsField;return'<div class="'.concat(b,'" data-input></div>')},b.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},b.prototype.removeView=function(){this.remove(),this.removed()},b.prototype.init=function(){},b.prototype.removed=function(){},b.prototype.onRender=function(a){},b.prototype.onUpdate=function(a){},b.prototype.onEvent=function(a){},b.prototype.onChange=function(a){var b=this.getInputElem();b&&!(0,r.isUndefined)(b.value)&&this.model.set("value",b.value),this.onEvent(gi(gi({},this.getClbOpts()),{event:a}))},b.prototype.getValueForTarget=function(){return this.model.get("value")},b.prototype.setInputValue=function(a){var b=this.getInputElem();b&&(b.value=a)},b.prototype.onValueChange=function(a,b,c){void 0===c&&(c={});var d=this.model,e=this.getValueForTarget();c.fromTarget?(this.setInputValue(e),this.postUpdate()):d.setValue(e,c)},b.prototype.renderLabel=function(){var a=this.$el,b=this.target,c=this.getLabel(),d=this.templateLabel(b);this.createLabel&&(d=this.createLabel({label:c,component:b,trait:this})||""),a.find("[data-label]").append(d)},b.prototype.getLabel=function(){var a=this.em,b=this.model.attributes,c=b.label,d=b.name;return a.t("traitManager.traits.labels.".concat(d))||(0,s.capitalize)(c||d).replace(/-/g," ")},b.prototype.getComponent=function(){return this.target},b.prototype.getInputEl=function(){if(!this.$input){var a=this.em,b=this.model,c=b.attributes.name,d=b.get("placeholder")||b.get("default")||"",e=b.get("type")||"text",f=b.get("min"),g=b.get("max"),h=this.getModelValue(),i=(0,w.default)('<input type="'.concat(e,'">')),j=a.t("traitManager.traits.attributes.".concat(c))||{};i.attr(gi({placeholder:d},j)),(0,r.isUndefined)(h)||(b.set({value:h},{silent:!0}),i.prop("value",h)),f&&i.prop("min",f),g&&i.prop("max",g),this.$input=i}return this.$input.get(0)},b.prototype.getInputElem=function(){var a=this.input,b=this.$input;return a||b&&b.get&&b.get(0)||this.getElInput()},b.prototype.getModelValue=function(){return this.model.getValue()},b.prototype.getElInput=function(){return this.elInput},b.prototype.renderField=function(){var a=this.$el,b=this.appendInput,c=this.model,d=a.find("[data-input]"),e=d[d.length-1],f=c.el;f||(f=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,r.isString)(f)?(e.innerHTML=f,this.elInput=e.firstChild):(b?e.appendChild(f):e.insertBefore(f,e.firstChild),this.elInput=f),c.el=this.elInput},b.prototype.hasLabel=function(){var a=this.model.attributes.label;return!this.noLabel&&!1!==a},b.prototype.rerender=function(){delete this.model.el,this.render()},b.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},b.prototype.render=function(){var a=this.$el,b=this.pfx,c=this.ppfx,d=this.model.attributes,e=d.type,f=d.id,g=this.hasLabel&&this.hasLabel(),h="".concat(b,"trait");delete this.$input;var i='<div class="'.concat(h," ").concat(h,"--").concat(e,'">\n      ').concat(g?'<div class="'.concat(c,'label-wrp" data-label></div>'):"",'\n      <div class="').concat(c,"field-wrp ").concat(c,"field-wrp--").concat(e,'" data-input>\n        ').concat(this.templateInput?(0,r.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"","\n      </div>\n    </div>");return a.empty().append(i),g&&this.renderLabel(),this.renderField(),this.el.className="".concat(h,"__wrp ").concat(h,"__wrp-").concat(f),this.postUpdate(),this.onRender(this.getClbOpts()),this},b}(x.Ss);gj.prototype.eventCapture=["change"];var gk=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gl=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return gk(b,a),b.prototype.templateInput=function(){return""},b.prototype.onChange=function(){this.handleClick()},b.prototype.handleClick=function(){this.model.runCommand()},b.prototype.renderLabel=function(){this.model.get("label")&&gj.prototype.renderLabel.apply(this)},b.prototype.getInputEl=function(){var a=this.model,b=this.ppfx,c=a.props(),d=c.labelButton,e=c.text,f=c.full,g="".concat(b,"btn");return'<button type="button" class="'.concat(g,"-prim").concat(f?" ".concat(g,"--full"):"",'">').concat(d||e,"</button>")},b}(gj);gl.prototype.eventCapture=["click button"];var gm=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gn=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.appendInput=!1,b}return gm(b,a),b.prototype.templateInput=function(){var a=this.ppfx,b=this.clsField;return'<label class="'.concat(b,'" data-input>\n    <i class="').concat(a,'chk-icon"></i>\n  </label>')},b.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},b.prototype.setInputValue=function(a){var b=this.getInputElem();b&&(b.checked=!!a)},b.prototype.getInputEl=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=!this.$input,d=gj.prototype.getInputEl.apply(this,a);if(c){var e=void 0,f=void 0,g=this.model,h=this.target,i=g.attributes.valueFalse,j=g.getName();g.changeProp?f=e=h.get(j):e=!!(f=h.get("attributes")[j])||""===f,(0,r.isUndefined)(i)||f!==i||(e=!1),d.checked=e}return d},b}(gj),go=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gp=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,b)||this,d=b.ppfx||"";return c.opts=b,c.ppfx=d,c.em=b.target||{},b.onChange||c.listenTo(c.model,"change:value",c.handleModelChange),c}return go(b,a),b.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},b.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},b.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},b.prototype.elementUpdated=function(){this.model.trigger("el:change")},b.prototype.setValue=function(a,b){var c=this.model,d=a||c.get("defaults"),e=this.getInputEl();e&&(e.value=d)},b.prototype.handleModelChange=function(a,b,c){this.setValue(b,c)},b.prototype.handleChange=function(a){a.stopPropagation();var b=this.getInputEl().value;this.__onInputChange(b),this.elementUpdated()},b.prototype.__onInputChange=function(a){this.model.set({value:a},{fromInput:1})},b.prototype.getInputEl=function(){if(!this.inputEl){var a=this.model,b=this.opts.type||"text",c=a.get("placeholder")||a.get("defaults")||a.get("default")||"";this.inputEl=(0,w.default)('<input type="'.concat(b,'" placeholder="').concat(c,'">'))}return this.inputEl.get(0)},b.prototype.render=function(){this.inputEl=null;var a=this.$el;return a.addClass(this.inputClass()),a.html(this.template()),a.find(".".concat(this.holderClass())).append(this.getInputEl()),this},b}(x.Ss);gp.prototype.events={change:"handleChange"};var gq=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gr=function(){return(gr=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};w.default&&function(a,b){if((0,s.hasWin)()){var c,d,e,f={beforeShow:z,move:z,change:z,show:z,hide:z,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},g=[],h=!!/msie/i.exec(window.navigator.userAgent),i=function(){function a(a,b){return!!~(""+a).indexOf(b)}var b=document.createElement("div").style;return b.cssText="background-color:rgba(0,0,0,.5)",a(b.backgroundColor,"rgba")||a(b.backgroundColor,"hsla")}(),j=function(){var a="";if(h)for(var b=1;b<=6;b++)a+="<div class='sp-"+b+"'></div>";return"<div class='sp-container sp-hidden'><div class='sp-palette-container'><div class='sp-palette sp-thumb sp-cf'></div><div class='sp-palette-button-container sp-cf'><button type='button' class='sp-palette-toggle'></button></div></div><div class='sp-picker-container'><div class='sp-top sp-cf'><div class='sp-fill'></div><div class='sp-top-inner'><div class='sp-color'><div class='sp-sat'><div class='sp-val'><div class='sp-dragger'></div></div></div></div><div class='sp-clear sp-clear-display'></div><div class='sp-hue'><div class='sp-slider'></div>"+a+"</div></div><div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div></div><div class='sp-input-container sp-cf'><input class='sp-input' type='text' spellcheck='false'  /></div><div class='sp-initial sp-thumb sp-cf'></div><div class='sp-button-container sp-cf'><a class='sp-cancel' href='#'></a><button type='button' class='sp-choose'></button></div></div></div>"}(),k="spectrum.id";a.fn.spectrum=function(c,d){if("string"==typeof c){var e=this,l=Array.prototype.slice.call(arguments,1);return this.each(function(){var b=g[a(this).data(k)];if(b){var d=b[c];if(!d)throw Error("Spectrum: no such method: '"+c+"'");"get"==c?e=b.get():"container"==c?e=b.container:"option"==c?e=b.option.apply(b,l):"destroy"==c?(b.destroy(),a(this).removeData(k)):d.apply(b,l)}}),e}return this.spectrum("destroy").each(function(){var d=function(c,d){var e,k,l,m,n=((m=a.extend({},f,d)).callbacks={move:B(m.move,c),change:B(m.change,c),show:B(m.show,c),hide:B(m.hide,c),beforeShow:B(m.beforeShow,c)},m),o=n.flat,p=n.showSelectionPalette,q=n.localStorageKey,r=n.theme,s=n.callbacks,t=(e=aR,function(){var a=this,b=arguments;k&&clearTimeout(l),(k||!l)&&(l=setTimeout(function(){l=null,e.apply(a,b)},10))}),v=!1,w=!1,x=!0,z=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=1,O=[],P=[],Q={},R=n.selectionPalette.slice(0),S=n.maxSelectionSize,T="sp-dragging",U=null,V=c.ownerDocument,W=(V.body,a(c)),X=!1,Y=a(j,V).addClass(r),Z=Y.find(".sp-picker-container"),$=Y.find(".sp-color"),_=Y.find(".sp-dragger"),aa=Y.find(".sp-hue"),ab=Y.find(".sp-slider"),ac=Y.find(".sp-alpha-inner"),ad=Y.find(".sp-alpha"),ae=Y.find(".sp-alpha-handle"),af=Y.find(".sp-input"),ag=Y.find(".sp-palette"),ah=Y.find(".sp-initial"),ai=Y.find(".sp-cancel"),aj=Y.find(".sp-clear"),ak=Y.find(".sp-choose"),al=Y.find(".sp-palette-toggle"),am=W.is("input"),an=am&&"color"===W.attr("type")&&D(),ao=am&&!o,ap=ao?a("<div class='sp-replacer'><div class='sp-preview'><div class='sp-preview-inner'></div></div><div class='sp-dd'>&#9660;</div></div>").addClass(r).addClass(n.className).addClass(n.replacerClassName):a([]),aq=ao?ap:W,ar=ap.find(".sp-preview-inner"),as=n.color||am&&W.val(),at=!1,au=n.preferredFormat,av=!n.showButtons||n.clickoutFiresChange,aw=!as,ax=n.allowEmpty&&!an;function ay(){if(n.showPaletteOnly&&(n.showPalette=!0),al.text(n.showPaletteOnly?n.togglePaletteMoreText:n.togglePaletteLessText),n.palette){O=n.palette.slice(0),P=a.isArray(O[0])?O:[O],Q={};for(var b=0;b<P.length;b++)for(var c=0;c<P[b].length;c++)Q[u(P[b][c]).toRgbString()]=!0}Y.toggleClass("sp-flat",o),Y.toggleClass("sp-input-disabled",!n.showInput),Y.toggleClass("sp-alpha-enabled",n.showAlpha),Y.toggleClass("sp-clear-enabled",ax),Y.toggleClass("sp-buttons-disabled",!n.showButtons),Y.toggleClass("sp-palette-buttons-disabled",!n.togglePaletteOnly),Y.toggleClass("sp-palette-disabled",!n.showPalette),Y.toggleClass("sp-palette-only",n.showPaletteOnly),Y.toggleClass("sp-initial-disabled",!n.showInitial),Y.addClass(n.className).addClass(n.containerClassName),aR()}function az(){if(q&&window.localStorage){try{var b=window.localStorage[q].split(",#");b.length>1&&(delete window.localStorage[q],a.each(b,function(a,b){aA(b)}))}catch(a){}try{R=window.localStorage[q].split(";")}catch(a){}}}function aA(b){if(p){var c=u(b).toRgbString();if(!Q[c]&&-1===a.inArray(c,R))for(R.push(c);R.length>S;)R.shift();if(q&&window.localStorage)try{window.localStorage[q]=R.join(";")}catch(a){}}}function aB(){var b=aM(),c=a.map(P,function(a,c){return y(a,b,"sp-palette-row sp-palette-row-"+c,n)});az(),R&&c.push(y(function(){var a=[];if(n.showPalette)for(var b=0;b<R.length;b++)Q[u(R[b]).toRgbString()]||a.push(R[b]);return a.reverse().slice(0,n.maxSelectionSize)}(),b,"sp-palette-row sp-palette-row-selection",n)),ag.html(c.join(""))}function aC(){if(n.showInitial){var a=at,b=aM();ah.html(y([a,b],b,"sp-palette-row-initial",n))}}function aD(){(E<=0||z<=0||G<=0)&&aR(),w=!0,Y.addClass(T),U=null,W.trigger("dragstart.spectrum",[aM()])}function aE(){w=!1,Y.removeClass(T),W.trigger("dragstop.spectrum",[aM()])}function aF(){var a=af.val();if((null===a||""===a)&&ax)aL(null),aQ(!0);else{var b=u(a);b.isValid()?(aL(b),aQ(!0)):af.addClass("sp-validation-error")}}function aG(){v?aK():aH()}function aH(){var b=a.Event("beforeShow.spectrum");if(v)return void aR();if(W.trigger("beforeShow.spectrum",[aM()]),!(!1===s.beforeShow(aM())||b.isDefaultPrevented())){for(var c=0;c<g.length;c++)g[c]&&g[c].hide();v=!0;var d=a(V);d.bind("keydown.spectrum",aI),d.bind("click.spectrum",aJ),a(window).bind("resize.spectrum",t),ap.addClass("sp-active"),Y.removeClass("sp-hidden"),aR(),aO(),at=aM(),aC(),s.show(at),W.trigger("show.spectrum",[at])}}function aI(a){27===a.keyCode&&aK()}function aJ(a){2!=a.button&&(w||(av?aQ(!0):aL(at,!0),aK()))}function aK(){v&&!o&&(v=!1,a(V).unbind("keydown.spectrum",aI),a(V).unbind("click.spectrum",aJ),a(window).unbind("resize.spectrum",t),ap.removeClass("sp-active"),Y.addClass("sp-hidden"),s.hide(aM()),W.trigger("hide.spectrum",[aM()]))}function aL(a,b){var c,d;if(u.equals(a,aM()))return void aO();!a&&ax?aw=!0:(aw=!1,x=!a,K=(d=(c=u(a)).toHsv()).h%360/360,L=d.s,M=d.v,N=d.a),aO(),c&&c.isValid()&&!b&&(au=n.preferredFormat||c.getFormat())}function aM(a){return(a=a||{},ax&&aw)?null:u.fromRatio({h:K,s:L,v:M,a:Math.round(100*N)/100},{format:a.format||au})}function aN(){aO(),s.move(aM()),W.trigger("move.spectrum",[aM()])}function aO(){af.removeClass("sp-validation-error"),aP();var a=u.fromRatio({h:K,s:1,v:1});$.css("background-color",a.toHexString());var b=au;N<1&&(0!==N||"name"!==b)&&("hex"===b||"hex3"===b||"hex6"===b||"name"===b)&&(b="rgb");var c=aM({format:b}),d="";if(ar.removeClass("sp-clear-display"),ar.css("background-color","transparent"),!c&&ax)ar.addClass("sp-clear-display");else{var e=c.toHexString(),f=c.toRgbString();if(i||1===c.alpha?ar.css("background-color",f):(ar.css("background-color","transparent"),ar.css("filter",c.toFilter())),n.showAlpha){var g=c.toRgb();g.a=0;var j=u(g).toRgbString(),k="linear-gradient(left, "+j+", "+e+")";h?ac.css("filter",u(j).toFilter({gradientType:1},e)):(ac.css("background","-webkit-"+k),ac.css("background","-moz-"+k),ac.css("background","-ms-"+k),ac.css("background","linear-gradient(to right, "+j+", "+e+")"))}d=c.toString(b)}n.showInput&&af.val(d),n.showPalette&&aB(),aC()}function aP(){var a=L,b=M;if(ax&&aw)ae.hide(),ab.hide(),_.hide();else{ae.show(),ab.show(),_.show();var c=a*z,d=E-b*E;c=Math.max(-F,Math.min(z-F,c-F)),d=Math.max(-F,Math.min(E-F,d-F)),_.css({top:d+"px",left:c+"px"});var e=N*H;ae.css({left:e-I/2+"px"});var f=K*G;ab.css({top:f-J+"px"})}}function aQ(a){var b=aM(),c="",d=!!x||!u.equals(b,at);b&&(c=b.toString(au),v||aA(b)),am&&W.val(c),a&&d&&(s.change(b),W.trigger("change",[b]))}function aR(){v&&(z=$.width(),E=$.height(),F=_.height(),aa.width(),G=aa.height(),J=ab.height(),H=ad.width(),I=ae.width(),o||(Y.css("position","absolute"),n.offset?Y.offset(n.offset):Y.offset(function(a,b){for(var c=b[0],d=a[0],e=d.parentElement,f=c.getBoundingClientRect(),g=d.offsetWidth,h=d.offsetHeight,i={top:0,left:0,width:c.offsetWidth,height:c.offsetHeight};c&&(i.top+=c.offsetTop-c.scrollTop,i.left+=c.offsetLeft-c.scrollLeft,c!==e&&e.contains(c.offsetParent));)c=c.offsetParent;return f.right+g>window.innerWidth-window.scrollX&&f.right-g>0&&(i.left-=g-i.width),f.bottom+h<window.innerHeight-window.scrollY?i.top+=i.height:i.top-=h,i}(Y,aq))),aP(),n.showPalette&&aB(),W.trigger("reflow.spectrum"))}function aS(){aK(),X=!0,W.attr("disabled",!0),aq.addClass("sp-disabled")}if(h&&Y.find("*:not(input)").attr("unselectable","on"),ay(),ao&&W.after(ap).hide(),ax||aj.hide(),o)W.after(Y).hide();else{var aT="parent"===n.appendTo?W.parent():a(n.appendTo);1!==aT.length&&(aT=a("body")),aT.append(Y)}function aU(b){return b.data&&b.data.ignore?(aL(a(b.target).closest(".sp-thumb-el").data("color")),aN()):(aL(a(b.target).closest(".sp-thumb-el").data("color")),aN(),n.hideAfterPaletteSelect&&(aQ(!0),aK())),!1}az(),aq.bind("click.spectrum touchstart.spectrum",function(b){X||aG(),b.stopPropagation(),a(b.target).is("input")||b.preventDefault()}),(W.is(":disabled")||!0===n.disabled)&&aS(),Y.click(A),af.change(aF),af.bind("paste",function(){setTimeout(aF,1)}),af.keydown(function(a){13==a.keyCode&&aF()}),ai.text(n.cancelText),ai.bind("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),aL(at,!0),aK()}),aj.attr("title",n.clearText),aj.bind("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),aw=!0,aN(),o&&aQ(!0)}),ak.text(n.chooseText),ak.bind("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),h&&af.is(":focus")&&af.trigger("change"),af.hasClass("sp-validation-error")||(aQ(!0),aK())}),al.text(n.showPaletteOnly?n.togglePaletteMoreText:n.togglePaletteLessText),al.bind("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),n.showPaletteOnly=!n.showPaletteOnly,n.showPaletteOnly||o||Y.css("left","-="+(Z.outerWidth(!0)+5)),ay()}),C(ad,function(a,b,c){N=a/H,aw=!1,c.shiftKey&&(N=Math.round(10*N)/10),aN()},aD,aE),C(aa,function(a,b){K=parseFloat(b/G),aw=!1,n.showAlpha||(N=1),aN()},aD,aE),C($,function(a,b,c){c.shiftKey?U||(U=Math.abs(a-L*z)>Math.abs(b-(E-M*E))?"x":"y"):U=null;var d=!U||"x"===U,e=!U||"y"===U;d&&(L=parseFloat(a/z)),e&&(M=parseFloat((E-b)/E)),aw=!1,n.showAlpha||(N=1),aN()},aD,aE),as?(aL(as),aO(),au=n.preferredFormat||u(as).getFormat(),aA(as)):aO(),o&&aH();var aV=h?"mousedown.spectrum":"click.spectrum touchstart.spectrum";ag.delegate(".sp-thumb-el",aV,aU),ah.delegate(".sp-thumb-el:nth-child(1)",aV,{ignore:!0},aU);var aW={show:aH,hide:aK,toggle:aG,reflow:aR,option:function(c,d){return b===c?a.extend({},n):b===d?n[c]:void(n[c]=d,"preferredFormat"===c&&(au=n.preferredFormat),ay())},enable:function(){X=!1,W.attr("disabled",!1),aq.removeClass("sp-disabled")},disable:aS,offset:function(a){n.offset=a,aR()},set:function(a){aL(a),aQ()},get:aM,destroy:function(){W.show(),aq.unbind("click.spectrum touchstart.spectrum"),Y.remove(),ap.remove(),g[aW.id]=null},container:Y};return aW.id=g.push(aW)-1,aW}(this,a.extend({},c,a(this).data()));a(this).data(k,d.id)})},a.fn.spectrum.load=!0,a.fn.spectrum.loadOpts={},a.fn.spectrum.draggable=C,a.fn.spectrum.defaults=f,a.fn.spectrum.inputTypeColorSupport=function b(){if(void 0===b._cachedResult){var c=a("<input type='color'/>")[0];b._cachedResult="color"===c.type&&""!==c.value}return b._cachedResult},a.spectrum={},a.spectrum.localization={},a.spectrum.palettes={},a.fn.spectrum.processNativeColorInputs=function(){var b=a("input[type=color]");b.length&&!D()&&b.spectrum({preferredFormat:"hex6"})};var l=/^[\s,#]+/,m=/\s+$/,n=0,o=Math,p=o.round,q=o.min,r=o.max,t=o.random,u=function(a,b){if(b=b||{},(a=a||"")instanceof u)return a;if(!(this instanceof u))return new u(a,b);var c,d,e,f,g,h,i,j,k,s,t,w,y,z,A,B,C,D=(d={r:0,g:0,b:0},e=1,f=!1,g=!1,"string"==typeof(c=a)&&(c=function(a){a=a.replace(l,"").replace(m,"").toLowerCase();var b,c=!1;if(v[a])a=v[a],c=!0;else if("transparent"==a)return{r:0,g:0,b:0,a:0,format:"name"};return(b=x.rgb.exec(a))?{r:b[1],g:b[2],b:b[3]}:(b=x.rgba.exec(a))?{r:b[1],g:b[2],b:b[3],a:b[4]}:(b=x.hsl.exec(a))?{h:b[1],s:b[2],l:b[3]}:(b=x.hsla.exec(a))?{h:b[1],s:b[2],l:b[3],a:b[4]}:(b=x.hsv.exec(a))?{h:b[1],s:b[2],v:b[3]}:(b=x.hsva.exec(a))?{h:b[1],s:b[2],v:b[3],a:b[4]}:(b=x.hex8.exec(a))?{a:Y(b[1])/255,r:Y(b[2]),g:Y(b[3]),b:Y(b[4]),format:c?"name":"hex8"}:(b=x.hex6.exec(a))?{r:Y(b[1]),g:Y(b[2]),b:Y(b[3]),format:c?"name":"hex"}:!!(b=x.hex3.exec(a))&&{r:Y(b[1]+""+b[1]),g:Y(b[2]+""+b[2]),b:Y(b[3]+""+b[3]),format:c?"name":"hex"}}(c)),"object"==typeof c&&(c.hasOwnProperty("r")&&c.hasOwnProperty("g")&&c.hasOwnProperty("b")?(h=c.r,i=c.g,j=c.b,d={r:255*W(h,255),g:255*W(i,255),b:255*W(j,255)},f=!0,g="%"===String(c.r).substr(-1)?"prgb":"rgb"):c.hasOwnProperty("h")&&c.hasOwnProperty("s")&&c.hasOwnProperty("v")?(c.s=$(c.s),c.v=$(c.v),k=c.h,s=c.s,t=c.v,k=6*W(k,360),s=W(s,100),t=W(t,100),w=o.floor(k),y=k-w,z=t*(1-s),A=t*(1-y*s),B=t*(1-(1-y)*s),d={r:255*[t,A,z,z,B,t][C=w%6],g:255*[B,t,t,A,z,z][C],b:255*[z,z,B,t,t,A][C]},f=!0,g="hsv"):c.hasOwnProperty("h")&&c.hasOwnProperty("s")&&c.hasOwnProperty("l")&&(c.s=$(c.s),c.l=$(c.l),d=function(a,b,c){var d,e,f;function g(a,b,c){return(c<0&&(c+=1),c>1&&(c-=1),c<1/6)?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}if(a=W(a,360),b=W(b,100),c=W(c,100),0===b)d=e=f=c;else{var h=c<.5?c*(1+b):c+b-c*b,i=2*c-h;d=g(i,h,a+1/3),e=g(i,h,a),f=g(i,h,a-1/3)}return{r:255*d,g:255*e,b:255*f}}(c.h,c.s,c.l),f=!0,g="hsl"),c.hasOwnProperty("a")&&(e=c.a)),e=V(e),{ok:f,format:c.format||g,r:q(255,r(d.r,0)),g:q(255,r(d.g,0)),b:q(255,r(d.b,0)),a:e});this._originalInput=a,this._r=D.r,this._g=D.g,this._b=D.b,this._a=D.a,this._roundA=p(100*this._a)/100,this._format=b.format||D.format,this._gradientType=b.gradientType,this._r<1&&(this._r=p(this._r)),this._g<1&&(this._g=p(this._g)),this._b<1&&(this._b=p(this._b)),this._ok=D.ok,this._tc_id=n++};u.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1e3},setAlpha:function(a){return this._a=V(a),this._roundA=p(100*this._a)/100,this},toHsv:function(){var a=F(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=F(this._r,this._g,this._b),b=p(360*a.h),c=p(100*a.s),d=p(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHsl:function(){var a=E(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=E(this._r,this._g,this._b),b=p(360*a.h),c=p(100*a.s),d=p(100*a.l);return 1==this._a?"hsl("+b+", "+c+"%, "+d+"%)":"hsla("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHex:function(a){return G(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(){return H(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:p(this._r),g:p(this._g),b:p(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+p(this._r)+", "+p(this._g)+", "+p(this._b)+")":"rgba("+p(this._r)+", "+p(this._g)+", "+p(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:p(100*W(this._r,255))+"%",g:p(100*W(this._g,255))+"%",b:p(100*W(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+p(100*W(this._r,255))+"%, "+p(100*W(this._g,255))+"%, "+p(100*W(this._b,255))+"%)":"rgba("+p(100*W(this._r,255))+"%, "+p(100*W(this._g,255))+"%, "+p(100*W(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(w[G(this._r,this._g,this._b,!0)]||!1)},toFilter:function(a){var b="#"+H(this._r,this._g,this._b,this._a),c=b,d=this._gradientType?"GradientType = 1, ":"";return a&&(c=u(a).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+d+"startColorstr="+b+",endColorstr="+c+")"},toString:function(a){var b=!!a;a=a||this._format;var c=!1,d=this._a<1&&this._a>=0;return!b&&d&&("hex"===a||"hex6"===a||"hex3"===a||"name"===a)?"name"===a&&0===this._a?this.toName():this.toRgbString():("rgb"===a&&(c=this.toRgbString()),"prgb"===a&&(c=this.toPercentageRgbString()),("hex"===a||"hex6"===a)&&(c=this.toHexString()),"hex3"===a&&(c=this.toHexString(!0)),"hex8"===a&&(c=this.toHex8String()),"name"===a&&(c=this.toName()),"hsl"===a&&(c=this.toHslString()),"hsv"===a&&(c=this.toHsvString()),c||this.toHexString())},_applyModification:function(a,b){var c=a.apply(null,[this].concat([].slice.call(b)));return this._r=c._r,this._g=c._g,this._b=c._b,this.setAlpha(c._a),this},lighten:function(){return this._applyModification(L,arguments)},brighten:function(){return this._applyModification(M,arguments)},darken:function(){return this._applyModification(N,arguments)},desaturate:function(){return this._applyModification(I,arguments)},saturate:function(){return this._applyModification(J,arguments)},greyscale:function(){return this._applyModification(K,arguments)},spin:function(){return this._applyModification(O,arguments)},_applyCombination:function(a,b){return a.apply(null,[this].concat([].slice.call(b)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(P,arguments)},monochromatic:function(){return this._applyCombination(U,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(Q,arguments)},tetrad:function(){return this._applyCombination(R,arguments)}},u.fromRatio=function(a,b){if("object"==typeof a){var c={};for(var d in a)a.hasOwnProperty(d)&&("a"===d?c[d]=a[d]:c[d]=$(a[d]));a=c}return u(a,b)},u.equals=function(a,b){return!!a&&!!b&&u(a).toRgbString()==u(b).toRgbString()},u.random=function(){return u.fromRatio({r:t(),g:t(),b:t()})},u.mix=function(a,b,c){c=0===c?0:c||50;var d,e=u(a).toRgb(),f=u(b).toRgb(),g=c/100,h=2*g-1,i=f.a-e.a,j=1-(d=((d=h*i==-1?h:(h+i)/(1+h*i))+1)/2),k={r:f.r*d+e.r*j,g:f.g*d+e.g*j,b:f.b*d+e.b*j,a:f.a*g+e.a*(1-g)};return u(k)},u.readability=function(a,b){var c=u(a),d=u(b),e=c.toRgb(),f=d.toRgb();return{brightness:Math.abs(c.getBrightness()-d.getBrightness()),color:Math.max(e.r,f.r)-Math.min(e.r,f.r)+Math.max(e.g,f.g)-Math.min(e.g,f.g)+Math.max(e.b,f.b)-Math.min(e.b,f.b)}},u.isReadable=function(a,b){var c=u.readability(a,b);return c.brightness>125&&c.color>500},u.mostReadable=function(a,b){for(var c=null,d=0,e=!1,f=0;f<b.length;f++){var g=u.readability(a,b[f]),h=g.brightness>125&&g.color>500,i=3*(g.brightness/125)+g.color/500;(h&&!e||h&&e&&i>d||!h&&!e&&i>d)&&(e=h,d=i,c=u(b[f]))}return c};var v=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},w=u.hexNames=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}(v),x=(d="[\\s|\\(]+("+(c="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",{rgb:RegExp("rgb"+d),rgba:RegExp("rgba"+e),hsl:RegExp("hsl"+d),hsla:RegExp("hsla"+e),hsv:RegExp("hsv"+d),hsva:RegExp("hsva"+e),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=u,a(function(){a.fn.spectrum.load&&a.fn.spectrum.processNativeColorInputs()})}function y(b,c,d,e){for(var f=[],g=0;g<b.length;g++){var h=b[g];if(h){var j=u(h),k=j.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";k+=u.equals(c,h)?" sp-thumb-active":"";var l=j.toString(e.preferredFormat||"rgb"),m=i?"background-color:"+j.toRgbString():"filter:"+j.toFilter();f.push('<span title="'+l+'" data-color="'+j.toRgbString()+'" class="'+k+'"><span class="sp-thumb-inner" style="'+m+';"></span></span>')}else f.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",e.noColorSelectedText)).html())}return"<div class='sp-cf "+d+"'>"+f.join("")+"</div>"}function z(){}function A(a){a.stopPropagation()}function B(a,b){var c=Array.prototype.slice,d=c.call(arguments,2);return function(){return a.apply(b,d.concat(c.call(arguments)))}}function C(b,c,d,e){c=c||function(){},d=d||function(){},e=e||function(){};var f=document,g=!1,i={},j=0,k=0,l="ontouchstart"in window,m={};function n(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.returnValue=!1}function o(a){if(g){if(h&&f.documentMode<9&&!a.button)return p();var d=a&&a.touches&&a.touches[0],e=d&&d.pageX||a.pageX,m=d&&d.pageY||a.pageY,o=Math.max(0,Math.min(e-i.left,k)),q=Math.max(0,Math.min(m-i.top,j));l&&n(a),c.apply(b,[o,q,a])}}function p(){g&&(a(f).unbind(m),a(f.body).removeClass("sp-dragging"),setTimeout(function(){e.apply(b,arguments)},0)),g=!1}m.selectstart=n,m.dragstart=n,m["touchmove mousemove"]=o,m["touchend mouseup"]=p,a(b).bind("touchstart mousedown",function(c){(c.which?3==c.which:2==c.button)||g||!1===d.apply(b,arguments)||(g=!0,j=a(b).height(),k=a(b).width(),i=a(b).offset(),a(f).bind(m),a(f.body).addClass("sp-dragging"),o(c),n(c))})}function D(){return a.fn.spectrum.inputTypeColorSupport()}function E(a,b,c){a=W(a,255),b=W(b,255),c=W(c,255);var d,e,f=r(a,b,c),g=q(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+6*(b<c);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:h}}function F(a,b,c){a=W(a,255),b=W(b,255),c=W(c,255);var d,e=r(a,b,c),f=q(a,b,c),g=e-f;if(e==f)d=0;else{switch(e){case a:d=(b-c)/g+6*(b<c);break;case b:d=(c-a)/g+2;break;case c:d=(a-b)/g+4}d/=6}return{h:d,s:0===e?0:g/e,v:e}}function G(a,b,c,d){var e=[Z(p(a).toString(16)),Z(p(b).toString(16)),Z(p(c).toString(16))];return d&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function H(a,b,c,d){return[Z(Math.round(255*parseFloat(d)).toString(16)),Z(p(a).toString(16)),Z(p(b).toString(16)),Z(p(c).toString(16))].join("")}function I(a,b){b=0===b?0:b||10;var c=u(a).toHsl();return c.s-=b/100,c.s=X(c.s),u(c)}function J(a,b){b=0===b?0:b||10;var c=u(a).toHsl();return c.s+=b/100,c.s=X(c.s),u(c)}function K(a){return u(a).desaturate(100)}function L(a,b){b=0===b?0:b||10;var c=u(a).toHsl();return c.l+=b/100,c.l=X(c.l),u(c)}function M(a,b){b=0===b?0:b||10;var c=u(a).toRgb();return c.r=r(0,q(255,c.r-p(-(b/100*255)))),c.g=r(0,q(255,c.g-p(-(b/100*255)))),c.b=r(0,q(255,c.b-p(-(b/100*255)))),u(c)}function N(a,b){b=0===b?0:b||10;var c=u(a).toHsl();return c.l-=b/100,c.l=X(c.l),u(c)}function O(a,b){var c=u(a).toHsl(),d=(p(c.h)+b)%360;return c.h=d<0?360+d:d,u(c)}function P(a){var b=u(a).toHsl();return b.h=(b.h+180)%360,u(b)}function Q(a){var b=u(a).toHsl(),c=b.h;return[u(a),u({h:(c+120)%360,s:b.s,l:b.l}),u({h:(c+240)%360,s:b.s,l:b.l})]}function R(a){var b=u(a).toHsl(),c=b.h;return[u(a),u({h:(c+90)%360,s:b.s,l:b.l}),u({h:(c+180)%360,s:b.s,l:b.l}),u({h:(c+270)%360,s:b.s,l:b.l})]}function S(a){var b=u(a).toHsl(),c=b.h;return[u(a),u({h:(c+72)%360,s:b.s,l:b.l}),u({h:(c+216)%360,s:b.s,l:b.l})]}function T(a,b,c){b=b||6,c=c||30;var d=u(a).toHsl(),e=360/c,f=[u(a)];for(d.h=(d.h-(e*b>>1)+720)%360;--b;)d.h=(d.h+e)%360,f.push(u(d));return f}function U(a,b){b=b||6;for(var c=u(a).toHsv(),d=c.h,e=c.s,f=c.v,g=[],h=1/b;b--;)g.push(u({h:d,s:e,v:f})),f=(f+h)%1;return g}function V(a){return(isNaN(a=parseFloat(a))||a<0||a>1)&&(a=1),a}function W(a,b){"string"==typeof(c=a)&&-1!=c.indexOf(".")&&1===parseFloat(c)&&(a="100%");var c,d,e="string"==typeof(d=a)&&-1!=d.indexOf("%");return(a=q(b,r(0,parseFloat(a))),e&&(a=parseInt(a*b,10)/100),1e-6>o.abs(a-b))?1:a%b/parseFloat(b)}function X(a){return q(1,r(0,a))}function Y(a){return parseInt(a,16)}function Z(a){return 1==a.length?"0"+a:""+a}function $(a){return a<=1&&(a=100*a+"%"),a}}(w.default);var gs=function(a){var b="name"===a.getFormat()&&a.toName(),c=1==a.getAlpha()?a.toHexString():a.toRgbString();return b||c.replace(/ /g,"")},gt=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return gq(b,a),b.prototype.template=function(){var a=this.ppfx;return'\n      <div class="'.concat(this.holderClass(),'"></div>\n      <div class="').concat(a,'field-colorp">\n        <div class="').concat(a,'field-colorp-c" data-colorp-c>\n          <div class="').concat(a,'checker-bg"></div>\n        </div>\n      </div>\n    ')},b.prototype.inputClass=function(){var a=this.ppfx;return"".concat(a,"field ").concat(a,"field-color")},b.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},b.prototype.remove=function(){return a.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},b.prototype.handleChange=function(a){a.stopPropagation();var b=a.target.value;(0,r.isUndefined)(b)||this.__onInputChange(b)},b.prototype.__onInputChange=function(a){var b=this.model,c=this.opts.onChange,d=a,e=this.getColorEl();if(e){e.spectrum("set",d);var f=e.spectrum("get"),g=d&&gs(f);g&&(d=g)}c?c(d):b.set({value:d},{fromInput:1})},b.prototype.setValue=function(a,b){void 0===b&&(b={});var c=this.model,d=(0,r.isUndefined)(b.def)?c.get("defaults"):b.def,e=(0,r.isUndefined)(a)?(0,r.isUndefined)(d)?"":d:a,f=this.getInputEl(),g=this.getColorEl(),h="none"!=e?e:"";f.value=e,g.get(0).style.backgroundColor=h,(b.fromTarget||b.fromInput&&!b.avoidStore)&&(g.spectrum("set",h),this.noneColor="none"==e,this.movedColor=h)},b.prototype.getColorEl=function(){var a=this;if(!this.colorEl){var b,c=this.em,d=this.model,e=this.opts,f=this.ppfx,g=e.onChange,h=(0,w.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),i=h.get(0).style,j=c&&c.getConfig&&c.getConfig().colorPicker||{};this.movedColor="";var k=!1;this.$el.find("[data-colorp-c]").append(h);var l=function(a,b){void 0===b&&(b=!0),g?g(a,!b):(b&&d.setValueFromInput(0,!1),d.setValueFromInput(a,b))};h.spectrum(gr(gr(gr({color:d.getValue()||!1,containerClassName:"".concat(f,"one-bg ").concat(f,"two-color ").concat(f,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"",palette:[]},j),d.get("colorPicker")||{}),{move:function(b){var c=gs(b);a.movedColor=c,i.backgroundColor=c,l(c,!1)},change:function(b){k=!0;var c=gs(b);i.backgroundColor=c,l(c),a.noneColor=!1},show:function(c){k=!1,a.movedColor="",b=g?d.getValue({noDefault:!0}):gs(c)},hide:function(){!k&&(b||g)&&(a.noneColor&&(b=""),i.backgroundColor=b,h.spectrum("set",b),l(b,!1))}})),c&&c.on&&this.listenTo(c,"component:selected",function(){a.movedColor&&l(a.movedColor),k=!0,a.movedColor="",h.spectrum("hide")}),this.colorEl=h}return this.colorEl},b.prototype.render=function(){return gp.prototype.render.call(this),this.getColorEl(),this},b}(gp),gu=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gv=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return gu(b,a),b.prototype.templateInput=function(){return""},b.prototype.getInputEl=function(){if(!this.input){var a=this.model,b=this.getModelValue(),c=new gt({model:a,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}).render();c.setValue(b,{fromTarget:1}),this.input=c.el}return this.input},b}(gj),gw=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gx=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,b)||this;return(0,r.bindAll)(c,"moveIncrement","upIncrement"),c.doc=document,c.listenTo(c.model,"change:unit",c.handleModelChange),c}return gw(b,a),b.prototype.template=function(){var a=this.ppfx;return'\n      <span class="'.concat(a,'input-holder"></span>\n      <span class="').concat(a,'field-units"></span>\n      <div class="').concat(a,'field-arrows" data-arrows>\n        <div class="').concat(a,'field-arrow-u" data-arrow-up></div>\n        <div class="').concat(a,'field-arrow-d" data-arrow-down></div>\n      </div>\n    ')},b.prototype.inputClass=function(){var a=this.ppfx;return this.opts.contClass||"".concat(a,"field ").concat(a,"field-integer")},b.prototype.setValue=function(a,b){var c=b||{},d=this.validateInputValue(a,{deepCheck:1}),e={value:d.value,unit:""};(d.unit||d.force)&&(e.unit=d.unit),this.model.set(e,c),c.silent&&this.handleModelChange()},b.prototype.handleChange=function(a){a.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},b.prototype.handleUnitChange=function(a){a.stopPropagation();var b=this.getUnitEl().value;this.model.set("unit",b),this.elementUpdated()},b.prototype.handleKeyDown=function(a){"ArrowUp"===a.key&&(a.preventDefault(),this.upArrowClick()),"ArrowDown"===a.key&&(a.preventDefault(),this.downArrowClick())},b.prototype.elementUpdated=function(){this.model.trigger("el:change")},b.prototype.handleModelChange=function(){var a=this.model;this.getInputEl().value=a.get("value");var b=this.getUnitEl();b&&(b.value=a.get("unit")||"")},b.prototype.getUnitEl=function(){if(!this.unitEl){var a=this.model,b=a.get("units")||[];if(b.length){var c=['<option value="" disabled hidden>-</option>'];b.forEach(function(b){var d=b==a.get("unit")?"selected":"";c.push("<option ".concat(d,">").concat(b,"</option>"))});var d=document.createElement("div");d.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(c.join(""),"</select>"),this.unitEl=d.firstChild}}return this.unitEl},b.prototype.upArrowClick=function(){var a=this.model.get("step"),b=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(b+a)),this.elementUpdated()},b.prototype.downArrowClick=function(){var a=this.model.get("step"),b=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(b-a)),this.elementUpdated()},b.prototype.downIncrement=function(a){a.preventDefault(),this.moved=!1;var b=this.model.get("value")||0;b=this.normalizeValue(b),this.current={y:a.pageY,val:b},(0,ab.on)(this.doc,"mousemove",this.moveIncrement),(0,ab.on)(this.doc,"mouseup",this.upIncrement)},b.prototype.moveIncrement=function(a){this.moved=!0;var b=this.model,c=b.get("step"),d=this.current,e=this.normalizeValue(d.val+(d.y-a.pageY)*c),f=this.validateInputValue(e),g=f.value,h=f.unit;return this.prValue=g,b.set({value:g,unit:h},{avoidStore:1}),!1},b.prototype.upIncrement=function(){var a=this.model,b=a.get("step");if((0,ab.AU)(this.doc,"mouseup",this.upIncrement),(0,ab.AU)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var c=this.prValue-b;a.set("value",c,{avoidStore:1}).set("value",c+b),this.elementUpdated()}},b.prototype.normalizeValue=function(a,b){void 0===b&&(b=0);var c=this.model.get("step"),d=0;if(isNaN(a))return b;if(Math.floor(a=parseFloat(a))!==a){var e=c.toString().split(".")[1];d=e?e.length:0}return d?parseFloat(a.toFixed(d)):a},b.prototype.validateInputValue=function(a,b){void 0===b&&(b={});var c=0,d=b||{},e=this.model,f=(0,r.isUndefined)(a)?"":a,g=b.units||e.get("units")||[],h=e.get("unit")||g.length&&g[0]||"",i=(0,r.isUndefined)(b.max)?e.get("max"):b.max,j=(0,r.isUndefined)(b.min)?e.get("min"):b.min,k=!!e.get("limitlessMax"),l=!!e.get("limitlessMin");if(d.deepCheck){var m=e.get("fixedValues")||[];if(""===f&&(h=""),f){var n=RegExp("^"+m.join("|"),"g");if(m.length&&n.test(f))f=f.match(n)[0],h="",c=1;else{var o=f+"";f+="",f=isNaN(f=parseFloat(f.replace(",",".")))?"":f;var p=o.replace(f,"");(0,r.indexOf)(g,p)>=0&&(h=p)}}}return!isNaN(f)&&""!==f&&(k||(0,r.isUndefined)(i)||""===i||(f=f>i?i:f),l||(0,r.isUndefined)(j)||""===j||(f=f<j?j:f)),{force:c,value:f,unit:h}},b.prototype.render=function(){gp.prototype.render.call(this),this.unitEl=null;var a=this.getUnitEl();return a&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(a),this},b}(gp);gx.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var gy=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gz=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return gy(b,a),b.prototype.getValueForTarget=function(){var a=this.model,b=a.attributes,c=b.value,d=b.unit;return(0,r.isUndefined)(c)||""===c?a.get("default"):c+d},b.prototype.getInputEl=function(){if(!this.input){var a=this.ppfx,b=this.model,c=this.getModelValue(),d=new gx({contClass:"".concat(a,"field-int"),type:"number",model:b,ppfx:a});d.render(),this.$input=d.inputEl,this.$unit=d.unitEl,b.set("value",c,{fromTarget:!0}),this.$input.val(c),this.input=d.el}return this.input},b}(gj),gA=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gB=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,b)||this;return c.listenTo(c.model,"change:options",c.rerender),c}return gA(b,a),b.prototype.templateInput=function(){var a=this.ppfx,b=this.clsField;return'<div class="'.concat(b,'">\n      <div data-input></div>\n      <div class="').concat(a,'sel-arrow">\n        <div class="').concat(a,'d-s-arrow"></div>\n      </div>\n    </div>')},b.prototype.getInputEl=function(){if(!this.$input){var a=this.model,b=this.em,c=a.get("name"),d=a.get("options")||[],e=[],f="<select>";d.forEach(function(a){var d,g,h,i="";(0,r.isString)(a)?(d=a,g=a):(d=a.name||a.label||a.value,g="".concat((0,r.isUndefined)(a.value)?a.id:a.value).replace(/"/g,"&quot;"),i+=(h=a.style?a.style.replace(/"/g,"&quot;"):"")?' style="'.concat(h,'"'):"");var j=b.t("traitManager.traits.options.".concat(c,".").concat(g))||d;f+='<option value="'.concat(g,'"').concat(i,">").concat(j,"</option>"),e.push(g)}),f+="</select>",this.$input=(0,w.default)(f);var g=a.getTargetValue(),h=e.indexOf(g)>=0?g:a.get("default");(0,r.isUndefined)(h)||this.$input.val(h)}return this.$input.get(0)},b}(gj),gC=p(8242),gD=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gE="data-categories",gF="data-no-categories",gG=function(a){function b(b,c){var d=a.call(this,b)||this;d.reuseView=!0,d.renderedCategories=new Map,d.itemsView=c;var e=b.config||{};d.config=e;var f=b.editor;d.em=f;var g=e.pStylePrefix||"";return d.ppfx=g,d.pfx=g+e.stylePrefix||"",d.className="".concat(d.pfx,"traits"),d.traitContClass="".concat(g,"traits-c"),d.classNoCat="".concat(g,"traits-empty-c"),d.catsClass="".concat(g,"trait-categories"),d.collection=new bF([],{em:f}),d.listenTo(f,"component:toggled",d.updatedCollection),d.updatedCollection(),d}return gD(b,a),b.prototype.updatedCollection=function(){var a=this.ppfx,b=this.em,c=b.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(a,"one-bg ").concat(a,"two-color"),this.collection=(null==c?void 0:c.traits)||new bF([],{em:b}),this.render()},b.prototype.add=function(a,b){var c=this.config,d=this.renderedCategories,e=this.itemView,f=a.get(this.itemType);this.itemsView&&this.itemsView[f]&&(e=this.itemsView[f]);var g=new e({config:c,model:a,attributes:a.get("attributes")}).render().el,h=a.parent.initCategory(a);if(h){var i=h.getId(),j=this.getCategoriesEl(),k=d.get(i);!k&&j&&(k=new fg({model:h},c,"trait").render(),d.set(i,k),j.appendChild(k.el)),null==k||k.append(g);return}b?b.appendChild(g):this.append(g)},b.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(gE,"]"))),this.catsEl},b.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(gF,"]"))),this.traitsEl},b.prototype.append=function(a){var b=this.getTraitsEl();null==b||b.appendChild(a)},b.prototype.render=function(){var a=this,b=this.el,c=this.ppfx,d=this.catsClass,e=this.traitContClass,f=this.classNoCat,g=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,b.innerHTML='\n      <div class="'.concat(d,'" ').concat(gE,'></div>\n      <div class="').concat(f," ").concat(e,'" ').concat(gF,"></div>\n    "),this.collection.forEach(function(b){return a.add(b,g)}),this.append(g);var h="".concat(e,"s ").concat(c,"one-bg ").concat(c,"two-color");return this.$el.addClass(h),this.rendered=!0,this},b}(gC.A);gG.prototype.itemView=gj;var gH=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gI=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},gJ=function(a){function b(b){var c=a.call(this,b,"TraitManager",{stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1})||this;c.TraitsView=gG,c.events=iz,c.state=new x.Kx({traits:[]}),c.types={text:gj,number:gz,select:gB,checkbox:gn,color:gv,button:gl};var d=c.state,e=c.config,f=c.events,g=e.pStylePrefix;g&&(e.stylePrefix="".concat(g).concat(e.stylePrefix)),(0,r.bindAll)(c,"__onSelect");var h=(0,r.debounce)(function(){return c.__upSel()},0),i=(0,r.debounce)(function(){return c.__onUp()},0);return d.listenTo(b,"component:toggled",h),d.listenTo(b,f.value,i),d.on("change:traits",c.__onSelect),c.debounced=[h,i],c}return gH(b,a),b.prototype.select=function(a){var b=(null==a?void 0:a.getTraits())||[];this.state.set({component:a,traits:b}),this.__trgCustom()},b.prototype.getCategories=function(){var a,b=this.getComponent();return gI([],(null==(a=null==b?void 0:b.traits.categories)?void 0:a.models)||[],!0)},b.prototype.getTraits=function(){return this.getCurrent()},b.prototype.getTraitsByCategory=function(a){return bt(a||this.getTraits())},b.prototype.getComponent=function(){return this.state.attributes.component},b.prototype.addType=function(a,b){var c=this.getType("text");this.types[a]=c.extend(b)},b.prototype.getType=function(a){return this.getTypes()[a]},b.prototype.getTypes=function(){return this.types},b.prototype.getTraitsViewer=function(){return this.view},b.prototype.getCurrent=function(){return this.state.get("traits")||[]},b.prototype.render=function(){var a=this.view,b=this.em;return a=new gG({el:null==a?void 0:a.el,collection:[],editor:b,config:this.getConfig()},this.getTypes()),this.view=a,a.el},b.prototype.postRender=function(){this.__appendTo()},b.prototype.__onSelect=function(){var a=this.em,b=this.events,c=this.state.attributes,d=c.component,e=c.traits;a.trigger(b.select,{component:d,traits:e})},b.prototype.__trgCustom=function(a){void 0===a&&(a={});var b=this.em,c=this.events,d=this.__ctn;this.__ctn=d||a.container,b.trigger(c.custom,this.__customData())},b.prototype.__customData=function(){return{container:this.__ctn}},b.prototype.__upSel=function(){this.select(this.em.getSelected())},b.prototype.__onUp=function(){this.select(this.getComponent())},b}(E);!function(a){a.root="layer:root",a.component="layer:component",a.custom="layer:custom"}(iM||(iM={}));var gK=p(6756),gL=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gM=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b._dropAreaConfig={ratio:.4,minUndroppableDimension:3,maxUndroppableDimension:20},b}return gL(b,a),Object.defineProperty(b.prototype,"view",{get:function(){return this.model.viewLayer},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"element",{get:function(){var a;return null==(a=this.model.viewLayer)?void 0:a.el},enumerable:!1,configurable:!0}),b}(gK.h),gN=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gO=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,b)||this;c.items=[],c.opt=b;var d=b.config||{};c.config=d,c.module=b.module,c.parentView=b.parentView;var e=d.stylePrefix||"";d.pStylePrefix;var f=c.collection;c.listenTo(f,"add",c.addTo),c.listenTo(f,"reset resetNavigator",c.render),c.listenTo(f,"remove",c.removeChildren),c.className="".concat(e,"layers");var g=d.em;if(d.sortable&&!c.opt.sorter){var h=g.Utils,i=d.sortContainer||c.el,j=c.createPlaceholder(e);c.opt.sorter=new h.ComponentSorter({em:g,treeClass:gM,containerContext:{container:i,containerSel:".".concat(c.className),itemSel:".".concat(e,"layer"),pfx:d.pStylePrefix,document:document,placeholderElement:j},dragBehavior:{dragDirection:b7.A.Vertical,nested:!0}})}return c.$el.data("collection",f),b.parent&&c.$el.data("model",b.parent),c}return gN(b,a),b.prototype.createPlaceholder=function(a){var b=document.createElement("div"),c=document.createElement("div");return this.el.parentNode,b.className=a+"placeholder",b.style.display="none",b.style.pointerEvents="none",c.className=a+"placeholder-int",b.appendChild(c),b},b.prototype.removeChildren=function(a){var b=a.viewLayer;b&&(b.remove(),delete a.viewLayer)},b.prototype.addTo=function(a){this.addToCollection(a,null,this.collection.indexOf(a))},b.prototype.addToCollection=function(a,b,c){var d=this.parentView,e=this.opt,f=this.config,g=this.el,h=e.ItemView,i=e.opened,j=e.module,k=e.level,l=e.sorter,m=a.viewLayer||new h({ItemView:h,level:k,model:a,parentView:d,config:f,sorter:l,opened:i,module:j}),n=m.render().el;if(b)b.appendChild(n);else{var o=g.childNodes;if((0,r.isUndefined)(c))g.appendChild(n);else{var p=o.length==c;p&&c--,p||!o.length?g.appendChild(n):g.insertBefore(n,o[c])}}return this.items.push(m),n},b.prototype.remove=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return x.Ss.prototype.remove.apply(this,a),this.items.map(function(a){return a.remove()}),this},b.prototype.render=function(){var a=this,b=this.el,c=this.module,d=document.createDocumentFragment();return b.innerHTML="",this.collection.map(function(a){return c.__getLayerFromComponent(a)}).forEach(function(b){return a.addToCollection(b,d)}),b.appendChild(d),b.className=this.className,this},b}(x.Ss),gP=p(9946),gQ=p(1738),gR=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),gS=function(){return(gS=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},gT=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},gU=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],gV={preserveSelected:1},gW=function(a){return function(b){return a.trigger("".concat(bT,":start"),b)}},gX=function(a){return function(b){return a.trigger(bT,b)}},gY=function(a,b,c){return void 0===c&&(c={}),function(d,e,f){setTimeout(function(){b.forEach(function(a){return a.set("status",a.get("selectable")?"selected":"")}),a.setSelected(b),b[0].emitUpdate()}),a.trigger("".concat(bT,":end"),f),setTimeout(function(){return a.runDefault(gV)}),(c.altMode||f.cancelled)&&a.set("_cmpDrag",1)}},gZ=function(a){function b(b){var c=a.call(this,b,"Commands",{stylePrefix:"com-",defaults:{},strict:!0,defaultOptions:{}})||this;c.CommandAbstract=gP.default,c.defaultCommands={},c.commands={},c.active={},c.events=gQ.A;var d=c.config,e=d.pStylePrefix,f=c.defaultCommands;for(var g in e&&(d.stylePrefix=e+d.stylePrefix),Object.keys(d.defaults).forEach(function(a){var b=d.defaults[a];b.id&&c.add(b.id,b)}),f["tlb-delete"]={run:function(a){return a.runCommand("core:component-delete")}},f["tlb-clone"]={run:function(a){a.runCommand("core:copy"),a.runCommand("core:paste",{action:"clone-component"})}},f["tlb-move"]={run:function(a,b,c){void 0===c&&(c={});var d,e,f=a.getModel(),g=c.event,h=c.target,i=(Array.isArray(h)?h:h?[h]:gT([],a.getSelectedAll(),!0)).map(function(a){var b,c;return(null==(c=null==(b=a.delegate)?void 0:b.move)?void 0:c.call(b,a))||a}).filter(Boolean),j=i[i.length-1],k=(null==g?void 0:g.type)==="dragstart";if(!(null==j?void 0:j.get("draggable")))return f.logWarning("The element is not draggable");var l=c.mode||j.get("dmode")||f.get("dmode"),m=function(){return f.stopDefault(gV)},n=(0,r.includes)(["absolute","translate"],l);i.forEach(function(a){return a.trigger("disable",{fromMove:!0})}),k?setTimeout(m,0):m();var o=gW(f),p=gX(f),q=gY(f,i,{altMode:n});if(n)a.runCommand("core:component-drag",{guidesInfo:1,mode:l,target:j,onStart:o,onDrag:p,onEnd:q,event:g});else{k&&(null==(d=null==g?void 0:g.dataTransfer)||d.setDragImage(null==(e=j.view)?void 0:e.el,0,0));var s=a.Commands.get("move-comp");s.onStart=o,s.onDrag=p,s.onEndMoveFromModel=q,s.initSorterFromModels(i)}i.filter(function(a){return a.get("selectable")}).forEach(function(a){return a.set("status","freezed-selected")})}},f["core:undo"]=function(a){return a.UndoManager.undo()},f["core:redo"]=function(a){return a.UndoManager.redo()},gU.forEach(function(a){var c=a[2],d=p(585)("./".concat(a[1])).default,e="core:".concat(a[0]);f[e]=d,c&&(f[c]=d,["run","stop"].forEach(function(a){b.on("".concat(a,":").concat(c),function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return b.trigger.apply(b,gT(["".concat(a,":").concat(e)],c,!1))})}))}),d.model=b.Canvas,f)c.add(g,f[g]);return c}return gR(b,a),b.prototype.add=function(a,b){var c=(0,r.isFunction)(b)?{run:b}:b;return c.stop||(c.noStop=!0),delete c.initialize,c.id=a,this.commands[a]=gP.default.extend(c),this},b.prototype.get=function(a){var b=this.commands[a];return(0,r.isFunction)(b)?(b=new b(this.config),this.commands[a]=b):b||this.em.logWarning("'".concat(a,"' command not found")),b},b.prototype.extend=function(a,b){void 0===b&&(b={});var c=this.get(a);if(c){var d=gS(gS({},c.constructor.prototype),b);this.add(a,d);var e=gU.filter(function(b){return"core:".concat(b[0])===a&&b[2]})[0];e&&this.add(e[2],d)}return this},b.prototype.has=function(a){return!!this.commands[a]},b.prototype.getAll=function(){return this.commands},b.prototype.run=function(a,b){return void 0===b&&(b={}),this.runCommand(this.get(a),b)},b.prototype.stop=function(a,b){return void 0===b&&(b={}),this.stopCommand(this.get(a),b)},b.prototype.isActive=function(a){return this.getActive().hasOwnProperty(a)},b.prototype.getActive=function(){return this.active},b.prototype.runCommand=function(a,b){if(void 0===b&&(b={}),null==a?void 0:a.run){var c,d,e,f=this.em,g=this.config,h=a.id,i=f.Editor;if(!this.isActive(h)||b.force||!g.strict){var j=null==(d=null==(c=g.defaultOptions)?void 0:c[h])?void 0:d.run;(0,r.isFunction)(j)&&(b=j(b)),e=i&&a.callRun(i,b)}}return e},b.prototype.stopCommand=function(a,b){if(void 0===b&&(b={}),null==a?void 0:a.run){var c,d,e,f=this.em,g=this.config,h=a.id,i=f.Editor;if(this.isActive(h)||b.force||!g.strict){var j=null==(d=null==(c=g.defaultOptions)?void 0:c[h])?void 0:d.stop;(0,r.isFunction)(j)&&(b=j(b)),e=a.callStop(i,b)}}return e},b.prototype.create=function(a){return a.stop||(a.noStop=!0),new(gP.default.extend(a))(this.config)},b.prototype.__onRun=function(a,b){var c=this.em,d=this.events;c.on("".concat(d.runCommand).concat(a),b)},b.prototype.__onStop=function(a,b){var c=this.em,d=this.events;c.on("".concat(d.stopCommand).concat(a),b)},b.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},b}(E),g$=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),g_=function(){return(g_=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},g0="contentEditable",g1="data-toggle-move",g2=function(a){function b(b){var c=a.call(this,b)||this;(0,r.bindAll)(c,"__render"),c.opt=b,c.module=b.module,c.config=b.config||{},c.sorter=b.sorter||"",c.parentView=b.parentView;var d=c.model,e=c.pfx,f=c.ppfx,g=d.get("type")||"default";return c.className="".concat(e,"layer ").concat(e,"layer__t-").concat(g," no-select ").concat(f,"two-color"),c.inputNameCls="".concat(f,"layer-name"),c.clsTitleC="".concat(e,"layer-title-c"),c.clsTitle="".concat(e,"layer-title"),c.clsCaret="".concat(e,"layer-caret"),c.clsCount="".concat(e,"layer-count"),c.clsMove="".concat(e,"layer-move"),c.clsChildren="".concat(e,"layer-children"),c.clsNoChild="".concat(e,"layer-no-chld"),c.clsEdit="".concat(c.inputNameCls,"--edit"),c.clsNoEdit="".concat(c.inputNameCls,"--no-edit"),c.initComponent(),c}return g$(b,a),b.prototype.events=function(){var a;return(a={})["mousedown [".concat(g1,"]")]="startSort",a["touchstart [".concat(g1,"]")]="startSort",a["click [data-toggle-visible]"]="toggleVisibility",a["click [data-toggle-open]"]="toggleOpening",a["click [data-toggle-select]"]="handleSelect",a["mouseover [data-toggle-select]"]="handleHover",a["mouseout [data-toggle-select]"]="handleHoverOut",a["dblclick [data-name]"]="handleEdit",a["keydown [data-name]"]="handleEditKey",a["focusout [data-name]"]="handleEditEnd",a},b.prototype.template=function(a){var b=this.pfx,c=this.ppfx,d=this.config,e=this.clsNoEdit,f=this.module,g=this.opt,h=this.em,i=d.hidable,j=f.getComponents(a).length,k=j?"":this.clsNoChild,l="".concat(this.clsTitle," ").concat(k),m="".concat(this.clsTitleC),n="".concat(this.inputNameCls," ").concat(e," ").concat(c,"no-app"),o=g.level||0,p=a.getName(),q=a.getIcon(),r="".concat(b,"layer"),s=(null==h?void 0:h.getConfig()).icons,t=s.move,u=s.eye,v=s.eyeOff,w=s.chevron;return'\n      <div class="'.concat(b,"layer-item ").concat(c,'one-bg" data-toggle-select>\n        <div class="').concat(b,'layer-item-left">\n          ').concat(i?'<i class="'.concat(b,'layer-vis" data-toggle-visible>\n                <i class="').concat(b,'layer-vis-on">').concat(u,'</i>\n                <i class="').concat(b,'layer-vis-off">').concat(v,"</i>\n              </i>"):"",'\n          <div class="').concat(m,'">\n            <div class="').concat(l,'" style="padding-left: ').concat("".concat(10*o,"px"),'">\n              <div class="').concat(b,'layer-title-inn" title="').concat(p,'">\n                <i class="').concat(this.clsCaret,'" data-toggle-open>').concat(w,"</i>\n                  ").concat(q?'<span class="'.concat(r,'__icon">').concat(q,"</span>"):"",'\n                <span class="').concat(n,'" data-name>').concat(p,'</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="').concat(b,'layer-item-right">\n          <div class="').concat(this.clsCount,'" data-count>').concat(j||"",'</div>\n          <div class="').concat(this.clsMove,'" ').concat(g1,">").concat(t||"",'</div>\n        </div>\n      </div>\n      <div class="').concat(this.clsChildren,'"></div>\n    ')},Object.defineProperty(b.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),b.prototype.initComponent=function(){var a=this,b=this.model,c=this.config.onInit,d=b.components();this.listenTo(d,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["change:draggable",this.updateMove],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(c){return a.listenTo(b,c[0],c[1])}),this.$el.data("model",b),this.$el.data("collection",d),b.viewLayer=this,c.bind(this)({component:b,render:this.__render,listenTo:this.listenTo})},b.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},b.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},b.prototype.updateVisibility=function(){var a=this.pfx,b=this.model,c=this.module.isVisible(b)?"removeClass":"addClass";this.$el[c]("".concat(a,"layer-hidden")),this.getVisibilityEl()[c]("".concat(a,"layer-off"))},b.prototype.updateMove=function(){var a=this.model,b=this.config,c=this.getItemContainer().find("[".concat(g1,"]"))[0];if(c){var d=a.get("draggable")&&b.sortable;c.style.display=d?"":"none"}},b.prototype.toggleVisibility=function(a){null==a||a.stopImmediatePropagation();var b=this.module,c=this.model;b.setVisible(c,!b.isVisible(c))},b.prototype.handleEdit=function(a){null==a||a.stopPropagation();var b=this.em,c=this.$el,d=this.clsNoEdit,e=this.clsEdit,f=this.getInputName();f[g0]="true",f.focus(),document.execCommand("selectAll",!1),b.setEditing(!0),c.find(".".concat(this.inputNameCls)).removeClass(d).addClass(e)},b.prototype.handleEditKey=function(a){a.stopPropagation(),((0,ab.v$)(a)||(0,ab.Ci)(a))&&this.handleEditEnd(a)},b.prototype.handleEditEnd=function(a){null==a||a.stopPropagation();var b=this.em,c=this.$el,d=this.clsNoEdit,e=this.clsEdit,f=this.model,g=this.getInputName(),h=g.textContent;g.scrollLeft=0,g[g0]="false",f.setName(h),b.setEditing(!1),c.find(".".concat(this.inputNameCls)).addClass(d).removeClass(e),this.updateName()},b.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},b.prototype.updateOpening=function(){var a=this.$el,b=this.model,c=this.pfx,d="open",e="".concat(c,"layer-open"),f=this.getCaret();this.module.isOpen(b)?(a.addClass(d),f.addClass(e)):(a.removeClass(d),f.removeClass(e))},b.prototype.toggleOpening=function(a){var b=this.model,c=this.module;null==a||a.stopImmediatePropagation(),b.get("components").length&&c.setOpen(b,!c.isOpen(b))},b.prototype.handleSelect=function(a){null==a||a.stopPropagation();var b=this.module,c=this.model;b.setLayerData(c,{selected:!0},{event:a})},b.prototype.handleHover=function(a){null==a||a.stopPropagation();var b=this.module,c=this.model;b.setLayerData(c,{hovered:!0})},b.prototype.handleHoverOut=function(a){null==a||a.stopPropagation();var b=this.module,c=this.model;b.setLayerData(c,{hovered:!1})},b.prototype.startSort=function(a){a.stopPropagation();var b,c,d,e=this.em,f=this.sorter,g=this.model;if((!a.button||0===a.button)&&f){var h=(null==(c=null==(b=g.delegate)?void 0:b.move)?void 0:c.call(b,g))||g;f.eventHandlers=g_({legacyOnStartSort:gW(e),legacyOnMoveClb:gX(e),legacyOnEndMove:gY(e,[h])},f.eventHandlers);var i=(null==(d=h.viewLayer)?void 0:d.el)||a.target;f.startSort([{element:i}])}},b.prototype.updateStatus=function(){cZ.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},b.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},b.prototype.checkChildren=function(){var a=this.model,b=this.clsNoChild,c=this.module,d=c.getComponents(a).length,e=this.getItemContainer(),f=e.find(".".concat(this.clsTitle)),g=e.find("[data-count]");f[d?"removeClass":"addClass"](b),g.html("".concat(d||"")),d||c.setOpen(a,!1)},b.prototype.getCaret=function(){return this.caret&&this.caret.length||(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},b.prototype.setRoot=function(a){var b,c=(0,r.isString)(a)?null==(b=this.em.getWrapper())?void 0:b.find(a)[0]:a;c&&(this.stopListening(),this.model=c,this.initComponent(),this._rendered&&this.render())},b.prototype.updateLayerable=function(){(this.parentView||this).render()},b.prototype.__clearItems=function(){var a;null==(a=this.items)||a.remove()},b.prototype.remove=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return x.Ss.prototype.remove.apply(this,a),delete this.model.viewLayer,this.__clearItems(),this},b.prototype.render=function(){var a=this.model,b=this.config,c=this.pfx,d=this.ppfx,e=this.opt,f=this.sorter;this.__clearItems();var g=e.opened,h=e.module,i=e.ItemView,j=!h.__isLayerable(a),k=this.$el.empty(),l=e.level+1;delete this.inputName,this.items=new gO({ItemView:i,collection:a.get("components"),config:b,sorter:f,opened:g,parentView:this,parent:a,level:l,module:h});var m=this.items.render().$el;return b.showWrapper||1!==l?(k.html(this.template(a)),k.find(".".concat(this.clsChildren)).append(m)):k.append(m),h.isVisible(a)||(this.className+=" ".concat(c,"hide")),j&&(this.className+=" ".concat(d,"hidden")),k.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.updateMove(),this.__render(),this._rendered=!0,this},b.prototype.__render=function(){var a=this.model,b=this.config,c=this.el,d=b.onRender,e={component:a,el:c};d.bind(this)(e),this.em.trigger("layer:render",e)},b}(x.Ss),g3=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),g4=function(){return(g4=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},g5={mediaText:""},g6=["open","status","locked","custom-name","components","classes"].map(function(a){return"".concat(Y.I.update,":").concat(a)}).join(" "),g7=function(a){function b(b){var c=a.call(this,b,"LayerManager",{stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}})||this;return c.events=iM,(0,r.bindAll)(c,"componentChanged","__onRootChange","__onComponent"),c.model=new G.A(c,{opened:{}}),c.config.stylePrefix=c.config.pStylePrefix,c}return g3(b,a),b.prototype.onLoad=function(){var a=this,b=this.em,c=this.config,d=this.model;d.listenTo(b,"component:selected",this.componentChanged),d.on("change:root",this.__onRootChange),d.listenTo(b,g6,this.__onComponent),this.componentChanged(),d.listenToOnce(b,"load",function(){a.setRoot(c.root),a.__appendTo()})},b.prototype.setRoot=function(a){var b=this.em.getWrapper(),c=(0,s.isComponent)(a)?a:b;a&&(0,r.isString)(a)&&(0,s.hasWin)()&&(c=b.find(a)[0]||b);var d=this.__getLayerFromComponent(c);return this.model.set("root",d),d},b.prototype.getRoot=function(){return this.model.get("root")},b.prototype.getComponents=function(a){var b=this;return a.components().map(function(a){return b.__getLayerFromComponent(a)}).filter(function(a){return b.__isLayerable(a)})},b.prototype.setOpen=function(a,b){a.set("open",b)},b.prototype.isOpen=function(a){return!!a.get("open")},b.prototype.setVisible=function(a,b){var c="__prev-display",d=a.getStyle(g5),e=d.display;if(b){var f=a.get(c);delete d.display,f&&(d.display=f,a.unset(c))}else e&&a.set(c,e),d.display="none";a.setStyle(d,g5),this.updateLayer(a),this.em.trigger("component:toggled")},b.prototype.isVisible=function(a){var b;return void 0===(b=a.getStyle(g5))&&(b={}),0!==(b.display||"").trim().indexOf("none")},b.prototype.setLocked=function(a,b){a.set("locked",b)},b.prototype.isLocked=function(a){return!!a.get("locked")},b.prototype.setName=function(a,b){a.set("custom-name",b)},b.prototype.getName=function(a){return a.getName()},b.prototype.getLayerData=function(a){var b=a.get("status");return{name:a.getName(),open:this.isOpen(a),selected:"selected"===b,hovered:"hovered"===b,visible:this.isVisible(a),locked:this.isLocked(a),components:this.getComponents(a)}},b.prototype.setLayerData=function(a,b,c){void 0===c&&(c={});var d,e=this.em,f=this.config,g=b.open,h=b.selected,i=b.hovered,j=b.visible,k=b.locked,l=b.name,m=g4({fromLayers:!0},c);if((0,s.isDef)(g)&&this.setOpen(a,g),(0,s.isDef)(h))if(h){e.setSelected(a,m);var n=f.scrollCanvas;n&&(null==(d=a.views)||d.forEach(function(a){return a.scrollIntoView(n)}))}else e.removeSelected(a,m);(0,s.isDef)(i)&&f.showHover&&(i?e.setHovered(a,m):e.setHovered(null,m)),(0,s.isDef)(j)&&j!==this.isVisible(a)&&this.setVisible(a,j),(0,s.isDef)(k)&&this.setLocked(a,k),(0,s.isDef)(l)&&this.setName(a,l)},b.prototype.componentChanged=function(a,b){if(void 0===b&&(b={}),!b.fromLayers){var c,d=this.em,e=this.config.scrollLayers,f=this.model.get("opened"),g=d.getSelected(),h=null==g?void 0:g.parent();for(var i in f)f[i].set("open",!1),delete f[i];for(;h;)h.set("open",!0),f[h.cid]=h,h=h.parent();if(g&&e){var j=null==(c=g.viewLayer)?void 0:c.el;null==j||j.scrollIntoView(e)}}},b.prototype.getAll=function(){return this.view},b.prototype.render=function(){var a,b,c=this.config,d=this.model,e=g2.extend(c.extend);return this.view=new e({el:null==(a=this.view)?void 0:a.el,ItemView:e,level:0,config:c,opened:d.get("opened"),model:this.getRoot(),module:this}),null==(b=this.view)?void 0:b.render().el},b.prototype.destroy=function(){var a;null==(a=this.view)||a.remove()},b.prototype.__onRootChange=function(){var a,b=this.em,c=this.events,d=this.getRoot();null==(a=this.view)||a.setRoot(d),b.trigger(c.root,d),this.__trgCustom()},b.prototype.__getLayerFromComponent=function(a){var b,c;return(null==(c=null==(b=a.delegate)?void 0:b.layer)?void 0:c.call(b,a))||a},b.prototype.__onComponent=function(a){this.updateLayer(a)},b.prototype.__isLayerable=function(a){var b=a.tagName;return(!this.config.hideTextnode||!a.isInstanceOf("textnode")&&"br"!==b)&&a.get("layerable")},b.prototype.__trgCustom=function(a){var b=this.__ctn,c=this.em,d=this.events;this.__ctn=b||(null==a?void 0:a.container),c.trigger(d.custom,{container:this.__ctn,root:this.getRoot()})},b.prototype.updateLayer=function(a,b){var c=this.em,d=this.events;c.trigger(d.component,a,b)},b}(E),g8=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),g9=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return g8(b,a),b.getDefaults=function(){return(0,r.result)(this.prototype,"defaults")},b.prototype.defaults=function(){return{type:"",src:""}},b.prototype.getType=function(){return this.get("type")},b.prototype.getSrc=function(){return this.get("src")||""},b.prototype.getFilename=function(){return this.getSrc().split("/").pop().split("?").shift()},b.prototype.getExtension=function(){return this.getFilename().split(".").pop()},b}(x.Kx);g9.prototype.idAttribute="src";var ha=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),hb=function(){return(hb=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},hc=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return ha(b,a),b.prototype.defaults=function(){return hb(hb({},g9.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},b}(g9),hd=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),he=function(a){function b(b){var c=a.call(this,b)||this;c.options=b,c.collection=b.collection;var d=b.config||{};c.config=d,c.pfx=d.stylePrefix||"",c.ppfx=d.pStylePrefix||"",c.em=d.em,c.className=c.pfx+"asset",c.listenTo(c.model,"destroy remove",c.remove),c.model.view=c;var e=c.init&&c.init.bind(c);return e&&e(b),c}return hd(b,a),b.prototype.__getBhv=function(){var a=this.em,b=null==a?void 0:a.Assets;return(null==b?void 0:b.__getBehaviour())||{}},b.prototype.template=function(a,b){var c=this.pfx;return'\n      <div class="'.concat(c,'preview-cont">\n        ').concat(this.getPreview(),'\n      </div>\n      <div class="').concat(c,'meta">\n        ').concat(this.getInfo(),'\n      </div>\n      <div class="').concat(c,'close" data-toggle="asset-remove">\n        &Cross;\n      </div>\n    ')},b.prototype.updateTarget=function(a){a&&a.set&&(a.set("attributes",(0,r.clone)(a.get("attributes"))),a.set("src",this.model.get("src")))},b.prototype.getPreview=function(){return""},b.prototype.getInfo=function(){return""},b.prototype.render=function(){var a=this.el;return a.innerHTML=this.template(this,this.model),a.className=this.className,this},b}(x.Ss),hf=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),hg=function(a,b){return Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b,a},hh=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return hf(b,a),b.prototype.getPreview=function(){var a=this.pfx,b=this.ppfx,c=this.model.get("src");return t(iN||(iN=hg(['\n      <div class="','preview" style="background-image: url(\'','\');"></div>\n      <div class="',"preview-bg ",'checker-bg"></div>\n    '],['\n      <div class="','preview" style="background-image: url(\'','\');"></div>\n      <div class="',"preview-bg ",'checker-bg"></div>\n    '])),a,c,a,b)},b.prototype.getInfo=function(){var a=this.pfx,b=this.model,c=b.get("name"),d=b.get("width"),e=b.get("height"),f=b.get("unitDim"),g=d&&e?"".concat(d,"x").concat(e).concat(f):"";return c=c||b.getFilename(),t(iO||(iO=hg(['\n      <div class="','name">','</div>\n      <div class="','dimensions">',"</div>\n    "],['\n      <div class="','name">','</div>\n      <div class="','dimensions">',"</div>\n    "])),a,c,a,g)},b.prototype.init=function(a){var b=this.pfx;this.className+=" ".concat(b,"asset-image")},b.prototype.onClick=function(){var a=this.model,b=this.pfx,c=this.__getBhv().select,d=this.config.onClick,e=this.collection;e.trigger("deselectAll"),this.$el.addClass(b+"highlight"),(0,r.isFunction)(c)?c(a,!1):(0,r.isFunction)(d)?d(a):this.updateTarget(e.target)},b.prototype.onDblClick=function(){var a=this.em,b=this.model,c=this.__getBhv().select,d=this.config.onDblClick,e=this.collection,f=e.target,g=e.onSelect;(0,r.isFunction)(c)?c(b,!0):(0,r.isFunction)(d)?d(b):(this.updateTarget(f),null==a||a.Modal.close()),(0,r.isFunction)(g)&&g(b)},b.prototype.onRemove=function(a){a.stopImmediatePropagation(),this.model.collection.remove(this.model)},b}(he);hh.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var hi=function(){return(hi=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};let hj={types:[],initialize:function(a,b){var c=this;void 0===b&&(b={});var d=b.em;this.em=d,this.opts=b,this.model=function(a,b){if(void 0===a&&(a={}),void 0===b&&(b={}),a&&a.type){var e,f,g,h=c.getBaseType();e=(g=c.getType(a.type))?g.model:h.model,f=g?g.view:h.view}else{var i=c.recognizeType(a);e=(g=i.type).model,f=g.view,a=i.attributes}var j=new e(a,hi(hi({},b),{em:d}));return j.typeView=f,c.model.prototype=e.prototype,j};var e=this.init&&this.init.bind(this);e&&e()},recognizeType:function(a){for(var b=this.getTypes(),c=0;c<b.length;c++){var d=b[c],e=d.isType(a);if(e="boolean"==typeof e&&e?{type:d.id}:e)return{type:d,attributes:e}}return{type:this.getBaseType(),attributes:a}},getBaseType:function(){var a=this.getTypes();return a[a.length-1]},getTypes:function(){return this.types},getType:function(a){for(var b=this.getTypes(),c=0;c<b.length;c++){var d=b[c];if(d.id===a)return d}},addType:function(a,b){var c=this.getType(a),d=this.getBaseType(),e=c?c.model:d.model,f=c?c.view:d.view,g=b.model,h=b.view,i=b.isType;g=g instanceof x.Kx||(0,r.isFunction)(g)?g:e.extend(g||{}),h=h instanceof x.Ss||(0,r.isFunction)(h)?h:f.extend(h||{}),!this.extendViewApi||b.model||b.view||(h=h.extend(b)),c?(c.model=g,c.view=h,c.isType=i||c.isType):(b.id=a,b.model=g,b.view=h,b.isType=i||function(b){if(b&&b.type==a)return!0},this.getTypes().unshift(b))}};var hk=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),hl=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return hk(b,a),b}(x.pM.extend(hj));hl.prototype.types=[{id:"image",model:hc,view:hh,isType:function(a){return"string"==typeof a?{type:"image",src:a}:a}}],function(a){a.add="asset:add",a.remove="asset:remove",a.removeBefore="asset:remove:before",a.update="asset:update",a.open="asset:open",a.close="asset:close",a.uploadStart="asset:upload:start",a.uploadEnd="asset:upload:end",a.uploadError="asset:upload:error",a.uploadResponse="asset:upload:response",a.custom="asset:custom",a.all="asset"}(iP||(iP={}));let hm=iP;var hn=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ho=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,b)||this;c.options=b,c.config=b.config,c.pfx=c.config.stylePrefix||"",c.ppfx=c.config.pStylePrefix||"",c.em=c.config.em;var d=c.collection;return c.listenTo(d,"reset",c.renderAssets),c.listenTo(d,"add",c.addToAsset),c.listenTo(d,"remove",c.removedAsset),c.listenTo(d,"deselectAll",c.deselectAll),c}return hn(b,a),b.prototype.template=function(a){var b=a.pfx,c=a.ppfx,d=a.em,e="";return this.config.showUrlInput&&(e='\n          <form class="'.concat(b,'add-asset">\n            <div class="').concat(c,"field ").concat(b,'add-field">\n              <input placeholder="').concat(null==d?void 0:d.t("assetManager.inputPlh"),'"/>\n            </div>\n            <button class="').concat(c,'btn-prim">').concat(null==d?void 0:d.t("assetManager.addButton"),'</button>\n            <div style="clear:both"></div>\n          </form>\n      ')),'\n    <div class="'.concat(b,'assets-cont">\n      <div class="').concat(b,'assets-header">\n        ').concat(e,'\n      </div>\n      <div class="').concat(b,'assets" data-el="assets"></div>\n      <div style="clear:both"></div>\n    </div>\n    ')},b.prototype.handleSubmit=function(a){a.preventDefault();var b=this.getAddInput(),c=b&&b.value.trim(),d=this.config.handleAdd;if(c){b.value="";var e=this.getAssetsEl();e&&(e.scrollTop=0),d?d.bind(this)(c):this.options.globalCollection.add(c,{at:0})}},b.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},b.prototype.getAddInput=function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},b.prototype.removedAsset=function(a){this.collection.length||this.toggleNoAssets()},b.prototype.addToAsset=function(a){1==this.collection.length&&this.toggleNoAssets(!0),this.addAsset(a)},b.prototype.addAsset=function(a,b){void 0===b&&(b=null);var c=b,d=this.collection,e=this.config,f=new a.typeView({model:a,collection:d,config:e}).render().el;if(c)c.appendChild(f);else{var g=this.getAssetsEl();g&&g.insertBefore(f,g.firstChild)}return f},b.prototype.toggleNoAssets=function(a){void 0===a&&(a=!1);var b=this.$el.find(".".concat(this.pfx,"assets"));if(a)b.empty();else{var c=this.config.noAssets;c&&b.append(c)}},b.prototype.deselectAll=function(){var a=this.pfx;this.$el.find(".".concat(a,"highlight")).removeClass("".concat(a,"highlight"))},b.prototype.renderAssets=function(){var a=this,b=document.createDocumentFragment(),c=this.$el.find(".".concat(this.pfx,"assets"));c.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(c){return a.addAsset(c,b)}),c.append(b)},b.prototype.render=function(){var a=this.options.fu.render().el;return this.$el.empty(),this.$el.append(a).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},b}(x.Ss);ho.prototype.events={submit:"handleSubmit"};var hp=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),hq=function(a){function b(c){void 0===c&&(c={});var d=a.call(this,c)||this;d.options=c;var e=c.config||{};d.module=c.module,d.config=e,d.em=d.config.em,d.pfx=e.stylePrefix||"",d.ppfx=e.pStylePrefix||"",d.target=d.options.globalCollection||{},d.uploadId=d.pfx+"uploadFile",d.disabled=void 0!==e.disableUpload?e.disableUpload:!e.upload&&!e.embedAsBase64,d.multiUpload=void 0===e.multiUpload||e.multiUpload;var f=e.uploadFile;return f?d.uploadFile=f.bind(d):!e.upload&&e.embedAsBase64&&(d.uploadFile=b.embedAsBase64),d.delegateEvents(),d}return hp(b,a),b.prototype.template=function(a){var b,c,d=a.pfx,e=a.title,f=a.uploadId,g=a.disabled,h=a.multiUpload;return t(iQ||(b=['\n      <form>\n        <div id="','title">','</div>\n        <input\n          data-input\n          type="file"\n          id="','"\n          name="file"\n          accept="*/*"\n          ',"\n          ",'\n        />\n        <div style="clear:both;"></div>\n      </form>\n    '],c=['\n      <form>\n        <div id="','title">','</div>\n        <input\n          data-input\n          type="file"\n          id="','"\n          name="file"\n          accept="*/*"\n          ',"\n          ",'\n        />\n        <div style="clear:both;"></div>\n      </form>\n    '],Object.defineProperty?Object.defineProperty(b,"raw",{value:c}):b.raw=c,iQ=b),d,e,f,g?"disabled":"",h?"multiple":"")},b.prototype.events=function(){return{"change [data-input]":"uploadFile"}},b.prototype.onUploadStart=function(){var a=this.module;null==a||a.__propEv(a.events.uploadStart)},b.prototype.onUploadEnd=function(a){var b=this.$el,c=this.module;null==c||c.__propEv(c.events.uploadEnd,a);var d=b.find("input");d&&d.val("")},b.prototype.onUploadError=function(a){var b=this.module;console.error(a),this.onUploadEnd(a),null==b||b.__propEv(b.events.uploadError,a)},b.prototype.onUploadResponse=function(a,b){var c,d=this.module,e=this.config,f=this.target;try{c="string"==typeof a?JSON.parse(a):a}catch(b){c=a}null==d||d.__propEv(d.events.uploadResponse,c),e.autoAdd&&f&&f.add(c.data,{at:0}),this.onUploadEnd(a),null==b||b(c)},b.prototype.uploadFile=function(a,b,c){var d,e=this,f=a.dataTransfer?a.dataTransfer.files:null==(d=a.target)?void 0:d.files,g=this.config,h=g.beforeUpload;if(!1!==(h&&h(f))){var i=new FormData,j=g.params,k=g.customFetch,l=g.fetchOptions;for(var m in j)i.append(m,j[m]);if(this.multiUpload)for(var n=0;n<f.length;n++)i.append("".concat(g.uploadName).concat(g.multiUploadSuffix),f[n]);else f.length&&i.append(g.uploadName,f[0]);var o=g.upload,p=g.headers,q="X-Requested-With";if(void 0===p[q]&&(p[q]="XMLHttpRequest"),o){this.onUploadStart();var r={method:"post",credentials:g.credentials||"include",headers:p,body:i},s=(null==l?void 0:l(r))||r;return(k?k(o,s):f4(o,s).then(function(a){return(a.status/200|0)==1?a.text():a.text().then(function(a){return Promise.reject(a)})})).then(function(a){return e.onUploadResponse(a,b)}).catch(function(a){return e.onUploadError(a)})}}},b.prototype.initDrop=function(){var a=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var b=this.uploadForm;"draggable"in b&&(this.uploadForm.ondragover=function(){return b.className=a.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return b.className="",!1},this.uploadForm.ondrop=function(c){b.className="",c.preventDefault(),a.uploadFile(c)})}},b.prototype.initDropzone=function(a){var b=this,c=0,d=this.config,e=a.model,f=a.el,g=e.Editor,h=e.Canvas.getBody(),i=this.ppfx,j="".concat(i,"dropzone-active"),k=function(){f.className=f.className.replace(j,"").trim(),c=0},l=function(){return c||(f.className+=" ".concat(j),c=1),!1},m=function(){return k(),!1},n=function(a){if(k(),a.preventDefault(),a.stopPropagation(),b.uploadFile(a),d.openAssetsOnDrop&&g){var c=g.getSelected();g.runCommand("open-assets",{target:c,onSelect:function(){g.Modal.close(),g.AssetManager.setTarget(null)}})}return!1};a.$el.append('<div class="'.concat("".concat(i,"dropzone"),'">').concat(d.dropzoneContent,"</div>")),k(),"draggable"in f&&[f,h].forEach(function(a){a.ondragover=l,a.ondragleave=m,a.ondrop=n})},b.prototype.render=function(){var a=this.$el,b=this.pfx,c=this.em;return a.html(this.template({title:c&&c.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:b})),this.initDrop(),a.attr("class",b+"file-uploader"),this},b.embedAsBase64=function(a,b){var c=this,d=a.dataTransfer?a.dataTransfer.files:a.target.files,e={data:[]};if(!FileReader)return void this.onUploadError(Error("Unsupported platform, FileReader is not defined"));for(var f=[],g=/^(.+)\/(.+)$/,h=function(a){var b=new Promise(function(b,c){var d=new FileReader;d.addEventListener("load",function(e){var f,h=a.name,i=g.exec(a.type);if("image"===(f=i?i[1]:a.type)){var j={src:d.result,name:h,type:f,height:0,width:0},k=new Image;k.addEventListener("error",function(a){c(a)}),k.addEventListener("load",function(){j.height=k.height,j.width=k.width,b(j)}),k.src=j.src}else f?b({src:d.result,name:h,type:f}):b(d.result)}),d.addEventListener("error",function(a){c(a)}),d.addEventListener("abort",function(a){c("Aborted")}),d.readAsDataURL(a)});f.push(b)},i=0;i<d.length;i++)h(d[i]);return Promise.all(f).then(function(a){e.data=a,c.onUploadResponse(e,b)},function(a){c.onUploadError(a)})},b}(x.Ss),hr=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),hs=function(){return(hs=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},ht=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},hu="open-assets",hv=function(a){function b(b){var c=a.call(this,b,"AssetManager",new hl([],b),hm,{assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""})||this;c.storageKey="assets",c.Asset=g9,c.Assets=hl,c.events=hm;var d=c.all,e=c.config;c.assetsVis=new hl([]);var f=e.pStylePrefix;return f&&(e.stylePrefix="".concat(f).concat(e.stylePrefix)),d.on("add",function(a){return c.getAllVisible().add(a)}),d.on("remove",function(a){return c.getAllVisible().remove(a)}),c.__onAllEvent=(0,r.debounce)(function(){return c.__trgCustom()},0),c}return hr(b,a),b.prototype.open=function(a){void 0===a&&(a={}),this.em.Commands.run(hu,hs({types:["image"],select:function(){}},a))},b.prototype.close=function(){this.em.Commands.stop(hu)},b.prototype.isOpen=function(){var a=this.em.Commands;return!!(null==a?void 0:a.isActive(hu))},b.prototype.add=function(a,b){return void 0===b&&(b={}),void 0===b.at&&(b.at=0),this.all.add(a,b)},b.prototype.get=function(a){return this.all.where({src:a})[0]||null},b.prototype.getAll=function(){return this.all},b.prototype.getAllVisible=function(){return this.assetsVis},b.prototype.remove=function(a,b){return this.__remove(a,b)},b.prototype.store=function(){return this.getProjectData()},b.prototype.load=function(a){return this.loadProjectData(a)},b.prototype.getContainer=function(){var a;return this.__getBehaviour().container||(null==(a=this.am)?void 0:a.el)},b.prototype.getAssetsEl=function(){var a;return null==(a=this.am)?void 0:a.el.querySelector("[data-el=assets]")},b.prototype.render=function(a){if(!this.getConfig().custom){var b=a||this.getAll().models;if(!this.am){var c=this.__viewParams();c.fu=this.FileUploader(),this.am=new ho(hs({},c)),this.am.render()}return this.assetsVis.reset(b),this.getContainer()}},b.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},b.prototype.addType=function(a,b){this.getAll().addType(a,b)},b.prototype.getType=function(a){return this.getAll().getType(a)},b.prototype.getTypes=function(){return this.getAll().getTypes()},b.prototype.AssetsView=function(){return this.am},b.prototype.FileUploader=function(){return this.fu||(this.fu=new hq(this.__viewParams())),this.fu},b.prototype.onLoad=function(){var a=this;this.getAll().reset(this.config.assets);var b=this.em,c=this.events;b.Commands.__onRun(hu,function(){return a.__propEv(c.open)}),b.Commands.__onStop(hu,function(){return a.__propEv(c.close)})},b.prototype.postRender=function(a){var b;this.config.dropzone&&(null==(b=this.fu)||b.initDropzone(a))},b.prototype.setTarget=function(a){this.assetsVis.target=a},b.prototype.onSelect=function(a){this.assetsVis.onSelect=a},b.prototype.onClick=function(a){this.config.onClick=a},b.prototype.onDblClick=function(a){this.config.onDblClick=a},b.prototype.__propEv=function(a){for(var b,c,d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];(b=this.em).trigger.apply(b,ht([a],d,!1)),(c=this.getAll()).trigger.apply(c,ht([a],d,!1))},b.prototype.__trgCustom=function(){var a=this.__getBehaviour(),b=this.getConfig().custom;(a.container||b.open)&&this.em.trigger(this.events.custom,this.__customData())},b.prototype.__customData=function(){var a=this,b=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:b.types||[],container:b.container,close:function(){return a.close()},remove:function(b,c){return a.remove(b,c)},select:function(c,d){var e=a.add(c);(0,r.isFunction)(b.select)&&b.select(e,d)},options:b.options||{}}},b.prototype.__behaviour=function(a){return void 0===a&&(a={}),this._bhv=hs(hs({},this._bhv||{}),a)},b.prototype.__getBehaviour=function(a){return void 0===a&&(a={}),this._bhv||{}},b.prototype.destroy=function(){var a,b;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),null==(a=this.fu)||a.remove(),null==(b=this.am)||b.remove(),this._bhv={}},b}(F),hw=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),hx=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return hw(b,a),b.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},b.prototype.initialize=function(){var a=this;null===this.get("widthMedia")&&this.set("widthMedia",this.get("width")),null===this.get("width")&&this.set("width",this.get("widthMedia")),this.get("priority")||this.set("priority",parseFloat(this.get("widthMedia"))||0),["width","height","widthMedia"].forEach(function(b){return a.checkUnit(b)})},b.prototype.checkUnit=function(a){var b=this.get(a)||"";(parseFloat(b)||0).toString()===b.toString()&&this.set(a,"".concat(b,"px"))},b.prototype.getName=function(){return this.get("name")||this.get("id")},b.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},b}(x.Kx),hy=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),hz=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return hy(b,a),b}(x.pM);hz.prototype.model=hx;var hA=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),hB=function(a){function b(b){var c=a.call(this,b)||this;return c.config=b.config||{},c.em=c.config.em,c.ppfx=c.config.pStylePrefix||"",c.listenTo(c.em,"change:device",c.updateSelect),c}return hA(b,a),b.prototype.template=function(a){var b,c,d=a.ppfx,e=a.label;return t(iR||(b=['\n      <div class="','device-label">','</div>\n      <div class="',"field ",'select">\n        <span id="','input-holder">\n          <select class="','devices"></select>\n        </span>\n        <div class="','sel-arrow">\n          <div class="','d-s-arrow"></div>\n        </div>\n      </div>\n      <button style="display:none" class="','add-trasp" data-add-trasp>+</button>\n    '],c=['\n      <div class="','device-label">','</div>\n      <div class="',"field ",'select">\n        <span id="','input-holder">\n          <select class="','devices"></select>\n        </span>\n        <div class="','sel-arrow">\n          <div class="','d-s-arrow"></div>\n        </div>\n      </div>\n      <button style="display:none" class="','add-trasp" data-add-trasp>+</button>\n    '],Object.defineProperty?Object.defineProperty(b,"raw",{value:c}):b.raw=c,iR=b),d,e,d,d,d,d,d,d,d)},b.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},b.prototype.startAdd=function(){},b.prototype.updateDevice=function(){var a=this.em;if(a){var b=this.devicesEl;a.set("device",b?b.val():"")}},b.prototype.updateSelect=function(){var a=this.em,b=this.devicesEl;if(a&&a.getDeviceModel&&b){var c=a.getDeviceModel();b.val(c?c.get("id"):"")}},b.prototype.getOptions=function(){var a=this.collection,b=this.em,c="";return a.forEach(function(a){var d=a.attributes,e=d.name,f=d.id,g=b&&b.t&&b.t("deviceManager.devices.".concat(f))||e;c+='<option value="'.concat(f||e,'">').concat(g,"</option>")}),c},b.prototype.render=function(){var a=this.em,b=this.ppfx,c=this.$el,d=this.el,e=a&&a.t&&a.t("deviceManager.device");return c.html(this.template({ppfx:b,label:e})),this.devicesEl=c.find(".".concat(b,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(a.get("device")),d.className="".concat(b,"devices-c"),this},b}(x.Ss),hC=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),hD=function(){return(hD=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},hE=function(a){function b(b){var c,d=a.call(this,b,"DeviceManager",new hz,H,{default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]})||this;return d.Device=hx,d.Devices=hz,d.storageKey="",d.devices=d.all,null==(c=d.config.devices)||c.forEach(function(a){return d.add(a,{silent:!0})}),d.select(d.config.default||d.devices.at(0)),b.on("change:device",d._onSelect,d),d}return hC(b,a),b.prototype._onSelect=function(a,b,c){var d=this.em,e=this.events,f=a.previous("device"),g=this.get(b),h=e.select;d.trigger(h,g,this.get(f)),this.__catchAllEvent(h,g,c)},b.prototype.add=function(a,b){void 0===b&&(b={});var c,d=b;if((0,r.isString)(a)){var e=b;d=arguments[2]||{},c=hD(hD({},d),{id:a,name:d.name||a,width:e})}else c=a;return c.id||(c.id=c.name||this._createId()),this.devices.add(c,d)},b.prototype.get=function(a){return this.getAll().filter(function(b){return b.get("name")===a})[0]||this.devices.get(a)||null},b.prototype.remove=function(a,b){return void 0===b&&(b={}),this.__remove(a,b)},b.prototype.getDevices=function(){return this.devices.models},b.prototype.select=function(a,b){void 0===b&&(b={});var c=(0,r.isString)(a)?this.get(a):a;return c&&this.em.set("device",c.get("id"),b),this},b.prototype.getSelected=function(){return this.get(this.em.get("device"))},b.prototype.getAll=function(){return this.devices},b.prototype.render=function(){var a,b=this.em;return null==(a=this.view)||a.remove(),this.view=new hB({collection:this.devices,config:hD({em:b},this.config)}),this.view.render().el},b.prototype.destroy=function(){this.__destroy()},b}(F),hF=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),hG=function(a){function b(b,c){void 0===c&&(c={});var d=a.call(this,b,c)||this,e=c.em,f={};d.em=e,b.frames||(f.component=b.component,f.styles=b.styles,["component","styles"].map(function(a){return d.unset(a)}));var g=b.frames||[f],h=new U(e.Canvas,g);return h.page=d,d.set("frames",h),d.getId()||d.set("id",null==e?void 0:e.Pages._createId()),null==e||e.UndoManager.add(h),d}return hF(b,a),b.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},b.prototype.onRemove=function(){this.getFrames().reset()},b.prototype.getFrames=function(){return this.get("frames")},b.prototype.getId=function(){return this.id},b.prototype.getName=function(){return this.get("name")},b.prototype.setName=function(a){return this.set({name:a})},b.prototype.getAllFrames=function(){return this.getFrames().models||[]},b.prototype.getMainFrame=function(){return this.getFrames().at(0)},b.prototype.getMainComponent=function(){var a=this.getMainFrame();return null==a?void 0:a.getComponent()},b.prototype.toJSON=function(a){void 0===a&&(a={});var b=x.Kx.prototype.toJSON.call(this,a),c=(0,r.result)(this,"defaults");return(0,r.forEach)(b,function(a,c){0===c.indexOf("_")&&delete b[c]}),(0,r.forEach)(c,function(a,c){b[c]===a&&delete b[c]}),b},b}(x.Kx),hH=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),hI=function(){return(hI=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},hJ=function(a){function b(b,c){var d=a.call(this,b)||this;return d.on("reset",d.onReset),d.on("remove",d.onRemove),d.model=function(a,b){return void 0===b&&(b={}),new hG(a,hI(hI({},b),{em:c}))},d}return hH(b,a),b.prototype.onReset=function(a,b){var c,d=this;null==(c=null==b?void 0:b.previousModels)||c.map(function(a){return d.onRemove(a,d,b)})},b.prototype.onRemove=function(a,b,c){void 0===c&&(c={}),c.fromUndo||c.temporary||null==a||a.onRemove()},b}(x.pM),hK=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),hL=function(){return(hL=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},hM=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},hN=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},hO="change:selected",hP="main",hQ=function(a){function b(b){var c=a.call(this,b,"PageManager",new hJ([],b),I)||this;c.events=I,c.storageKey="pages",(0,r.bindAll)(c,"_onPageChange");var d=new G.A(c,{_undo:!0});return c.model=d,c.pages.on("reset",c.__onReset,c),c.pages.on("all",c.__onChange,c),d.on(hO,c._onPageChange),c}return hK(b,a),Object.defineProperty(b.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),b.prototype.getAll=function(){return hN([],this.all.models,!0)},b.prototype.__onChange=function(a,b,c,d){var e=this.em,f=this.events;e.trigger(f.all,{event:a,page:b,options:d||c})},b.prototype.__onReset=function(){var a=this.pages.at(0);a&&this.select(a)},b.prototype.onLoad=function(){var a,b=this.pages,c=this.config,d=this.em,e={silent:!0},f=(null==(a=c.pages)?void 0:a.map(function(a){return new hG(a,{em:d,config:c})}))||[];b.add(f,e);var g=b.length?this._initPage():this.add({type:hP},e);g&&this.select(g,e)},b.prototype._onPageChange=function(a,b,c){var d=this.em,e=this.events,f=d.Layers,g=b.getMainComponent();f&&g&&f.setRoot(g),d.trigger(e.select,b,a.previous("selected")),this.__onChange(hO,b,c)},b.prototype.postLoad=function(){var a=this.em,b=this.model,c=this.pages,d=a.UndoManager;d.add(b),d.add(c),c.on("add remove reset change",function(b,c,d){var e=d||c;a.changesUp(d||c,{page:b,options:e})})},b.prototype.add=function(a,b){var c=this;void 0===b&&(b={});var d=this.em,e=this.events;a.id=a.id||this._createId();var f=function(){var d=c.pages.add(new hG(a,{em:c.em,config:c.config}),b);return b.select&&c.select(d),d};return b.silent||d.trigger(e.addBefore,a,f,b),b.abort?void 0:f()},b.prototype.remove=function(a,b){var c=this;void 0===b&&(b={});var d=this.em,e=this.events,f=(0,r.isString)(a)?this.get(a):a,g=function(){return f&&c.pages.remove(f,b),f};return b.silent||d.trigger(e.removeBefore,f,g,b),!b.abort&&g()},b.prototype.move=function(a,b){void 0===b&&(b={});var c=this.pages,d=(0,r.isString)(a)?this.get(a):a,e=b.at,f=void 0===e?0:e,g=hM(b,["at"]);if(d){var h=c.indexOf(d)===f;if(!(f<0)&&!(f>=c.length)&&!h)return this.remove(d,hL(hL({},g),{temporary:!0})),c.add(d,hL(hL({},g),{at:f})),d}},b.prototype.get=function(a){return this.pages.filter(function(b){return b.get(b.idAttribute)===a})[0]},b.prototype.getMain=function(){var a=this.pages;return a.filter(function(a){return a.get("type")===hP})[0]||a.at(0)},b.prototype.getAllWrappers=function(){var a=this.getAll();return(0,r.unique)((0,r.flatten)(a.map(function(a){return a.getAllFrames().map(function(a){return a.getComponent()})})))},b.prototype.select=function(a,b){void 0===b&&(b={});var c=this.em,d=this.model,e=this.events,f=(0,r.isString)(a)?this.get(a):a;return f&&(c.trigger(e.selectBefore,f,b),d.set("selected",f,b)),this},b.prototype.getSelected=function(){return this.model.get("selected")},b.prototype.destroy=function(){var a=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(b){return a[b]=0})},b.prototype.store=function(){return this.getProjectData()},b.prototype.load=function(a){var b=this,c=this.loadProjectData(a,{all:this.pages,reset:!0,onResult:function(a,c){a.forEach(function(a){return b.add(a,c)}),b.__onReset()}});return this.pages.forEach(function(a){return a.getFrames().initRefs()}),c},b.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},b.prototype._createId=function(){var a,b=this.getAll().length+16,c=this.getAllMap();do a=(0,s.createId)(b);while(c[a]);return a},b}(F),hR={placeholder:"eg. Text here"};let hS={assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:hR,alt:hR,title:hR,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}};!function(a){a.add="i18n:add",a.update="i18n:update",a.locale="i18n:locale"}(iS||(iS={}));let hT=iS;var hU=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),hV=function(a){function b(b){var c=a.call(this,b,"I18n",{locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:hS},messagesAdd:void 0})||this;c.events=hT;var d=c.config.messagesAdd;return d&&c.addMessages(d),c.config.detectLocale&&(c.config.locale=c._localLang()),c}return hU(b,a),b.prototype.setLocale=function(a){var b=this.em,c=this.config,d=this.events;return b.trigger(d.locale,{value:a,valuePrev:c.locale}),c.locale=a,this},b.prototype.getLocale=function(){return this.config.locale},b.prototype.getMessages=function(a,b){void 0===b&&(b={});var c=this.config.messages;return a&&!c[a]&&this._debug("'".concat(a,"' i18n lang not found"),b),a?c[a]:c},b.prototype.setMessages=function(a){var b=this.em,c=this.config,d=this.events;return c.messages=a,b.trigger(d.update,a),this},b.prototype.addMessages=function(a){var b=this.em,c=this.events,d=this.config.messages;return b.trigger(c.add,a),this.setMessages((0,s.deepMerge)(d,a)),this},b.prototype.t=function(a,b){void 0===b&&(b={});var c=this.config,d=b.params||{},e=b.l||this.getLocale(),f=b.lFlb||c.localeFallback,g=this._getMsg(a,e,b);return g||(g=this._getMsg(a,f,b)),g||this._debug("'".concat(a,"' i18n key not found in '").concat(e,"' lang"),b),g=g&&(0,r.isString)(g)?this._addParams(g,d):g},b.prototype._localLang=function(){var a=(0,s.hasWin)()&&window.navigator||{},b=a.language||a.userLanguage;return b?b.split("-")[0]:"en"},b.prototype._addParams=function(a,b){var c=RegExp("{([\\w\\d-]*)}","g");return a.replace(c,function(a,c){return b[c]||""}).trim()},b.prototype._getMsg=function(a,b,c){void 0===c&&(c={});var d=this.getMessages(b,c);if(d){var e=d[a];return!e&&a.indexOf(".")>0&&(e=a.split(".").reduce(function(a,b){if(!(0,r.isUndefined)(a))return a[b]},d)),e}},b.prototype._debug=function(a,b){void 0===b&&(b={});var c=this.em,d=this.config;(b.debug||d.debug)&&c&&c.logWarning(a)},b.prototype.destroy=function(){},b}(E),hW=function(){return(hW=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},hX=function(a,b){void 0===b&&(b={});var c=b.prefix||"",d=document.createElement("i");return d.className=c+"resizer-h "+c+"resizer-h-"+a,d.setAttribute("data-"+c+"handler",a),d},hY=function(a,b){var c=b||window,d=a.getBoundingClientRect();return{left:d.left+c.pageXOffset,top:d.top+c.pageYOffset,width:d.width,height:d.height}},hZ=function(){function a(a){void 0===a&&(a={}),this.moved=!1,this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=hW({},this.defOpts),this.setOptions(a),(0,r.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return a.prototype.getConfig=function(){return this.opts},a.prototype.setOptions=function(a,b){void 0===a&&(a={}),this.opts=hW(hW({},b?this.defOpts:this.opts),a),this.setup()},a.prototype.setup=function(){var a=this.opts,b=a.prefix||"",c=a.appendTo||document.body,d=this.container;for(d||((d=document.createElement("div")).className="".concat(b,"resizer-c"),c.appendChild(d),this.container=d);d.firstChild;)d.removeChild(d.firstChild);var e={};for(var f in["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(b){return e[b]=a[b]?hX(b,a):null}),e){var g=e[f];g&&d.appendChild(g)}this.handlers=e,this.mousePosFetcher=a.mousePosFetcher,this.updateTarget=a.updateTarget,this.posFetcher=a.posFetcher,this.onStart=a.onStart,this.onMove=a.onMove,this.onEnd=a.onEnd,this.onUpdateContainer=a.onUpdateContainer},a.prototype.toggleFrames=function(a){if(this.opts.silentFrames){var b=document.querySelectorAll("iframe");(0,r.each)(b,function(b){return b.style.pointerEvents=a?"none":""})}},a.prototype.isHandler=function(a){var b=this.handlers;for(var c in b)if(b[c]===a)return!0;return!1},a.prototype.getFocusedEl=function(){return this.el},a.prototype.getParentEl=function(){var a;return null==(a=this.el)?void 0:a.parentElement},a.prototype.getDocumentEl=function(){return this.opts.docs||[this.el.ownerDocument,document]},a.prototype.getElementPos=function(a,b){void 0===b&&(b={});var c=this.posFetcher;return c?c(a,b):hY(a)},a.prototype.focus=function(a){a&&a===this.el||(this.el=a,this.updateContainer({forceShow:!0}),(0,ab.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},a.prototype.blur=function(){this.container.style.display="none",this.el&&((0,ab.AU)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},a.prototype.start=function(a){var b,c=this.el,d=this.opts;if(this.moved=!1,0===a.button&&c){a.preventDefault(),a.stopPropagation(),null==(b=this.selectedHandler)||b.setPointerCapture(a.pointerId);var e=this.getParentEl(),f=void 0===d?{}:d,g=this.mousePosFetcher,h="data-"+f.prefix+"handler",i=this.getElementPos(c,{avoidFrameZoom:!0,avoidFrameOffset:!0}),j=this.getElementPos(e),k=a.target;this.handlerAttr=k.getAttribute(h),this.clickedHandler=k,this.startDim={t:i.top,l:i.left,w:i.width,h:i.height},this.rectDim={t:i.top,l:i.left,w:i.width,h:i.height},this.startPos=g?g(a):{x:a.clientX,y:a.clientY},this.parentDim={t:j.top,l:j.left,w:j.width,h:j.height};var l=this.getDocumentEl();this.docs=l,(0,ab.on)(l,"pointermove",this.move),(0,ab.on)(l,"keydown",this.handleKeyDown),(0,ab.on)(l,"pointerup",this.stop),(0,r.isFunction)(this.onStart)&&this.onStart(a,{docs:l,config:f,el:c,resizer:this}),this.toggleFrames(!0),f.updateOnMove||this.move(a)}},a.prototype.move=function(a){this.moved=!0;var b,c,d=this.el,e=this.opts,f=this.docs||this.getDocumentEl(),g=(null==(b=this.mousePosFetcher)?void 0:b.call(this,a))||{x:a.clientX,y:a.clientY};this.currentPos=g,this.delta={x:g.x-this.startPos.x,y:g.y-this.startPos.y},this.keys={shift:a.shiftKey,ctrl:a.ctrlKey,alt:a.altKey},this.rectDim=this.calc(this),this.updateRect(!1,a),null==(c=this.onMove)||c.call(this,a,{docs:f,config:e,el:d,resizer:this})},a.prototype.stop=function(a){var b,c,d=this.el,e=this.opts,f=this.docs||this.getDocumentEl();(0,ab.AU)(f,"pointermove",this.move),(0,ab.AU)(f,"keydown",this.handleKeyDown),(0,ab.AU)(f,"pointerup",this.stop),(this.moved||!e.updateOnMove)&&this.updateRect(!0,a),a.pointerId&&(null==(b=this.selectedHandler)||b.releasePointerCapture(a.pointerId)),this.toggleFrames(),null==(c=this.onEnd)||c.call(this,a,{docs:f,config:e,el:d,resizer:this}),this.moved=!1,delete this.docs},a.prototype.updateRect=function(a,b){var c=this.el,d=this.opts,e=this.rectDim,f=this.updateTarget,g=this.getSelectedHandler(),h=d.unitHeight,i=d.unitWidth,j=d.keyWidth,k=d.keyHeight;if((0,r.isFunction)(f))f(c,e,{store:a,selectedHandler:g,resizer:this,config:d,event:b});else{var l=c.style;l[j]=e.w+i,l[k]=e.h+h}this.updateContainer()},a.prototype.updateContainer=function(a){void 0===a&&(a={});var b,c=this.opts,d=this.container,e=this.el,f=d.style;!c.avoidContainerUpdate&&e&&a.forceShow&&(f.display="block"),null==(b=this.onUpdateContainer)||b.call(this,{el:d,resizer:this,opts:hW(hW({},c),a)})},a.prototype.getSelectedHandler=function(){var a=this.handlers;if(this.selectedHandler){for(var b in a)if(a[b]===this.selectedHandler)return b}},a.prototype.handleKeyDown=function(a){27===a.keyCode&&(this.rectDim=this.startDim,this.stop(a))},a.prototype.handleMouseDown=function(a){var b=a.target;this.isHandler(b)?(this.selectedHandler=b,this.start(a)):b!==this.el&&(delete this.selectedHandler,this.blur())},a.prototype.calc=function(a){var b,c=this.opts||{},d=c.step,e=this.startDim,f=c.minDim,g=c.maxDim,h=a.delta.x,i=a.delta.y,j=this.parentDim.w,k=this.parentDim.h,l=c.unitWidth,m=c.unitHeight,n=c.skipUnitAdjustments,o=this.getParentRect(),p="%"===l&&!n,q="%"===m&&!n,r=p?e.w/100*j:e.w,t=q?e.h/100*k:e.h,u={t:e.t-o.top,l:e.l-o.left,w:r,h:t};if(a){var v=a.handlerAttr;~v.indexOf("r")&&(b=Math.max(f,b=p?(0,s.normalizeFloat)((r+h*d)/j*100,.01):(0,s.normalizeFloat)(r+h*d,d)),g&&(b=Math.min(g,b)),u.w=b),~v.indexOf("b")&&(b=Math.max(f,b=q?(0,s.normalizeFloat)((t+i*d)/k*100,.01):(0,s.normalizeFloat)(t+i*d,d)),g&&(b=Math.min(g,b)),u.h=b),~v.indexOf("l")&&(b=Math.max(f,b=p?(0,s.normalizeFloat)((r-h*d)/j*100,.01):(0,s.normalizeFloat)(r-h*d,d)),g&&(b=Math.min(g,b)),u.w=b),~v.indexOf("t")&&(b=Math.max(f,b=q?(0,s.normalizeFloat)((t-i*d)/k*100,.01):(0,s.normalizeFloat)(t-i*d,d)),g&&(b=Math.min(g,b)),u.h=b);var w=c.ratioDefault?!a.keys.shift:a.keys.shift;if(0>v.indexOf("c")&&w){var x=e.w/e.h;u.w/u.h>x?u.h=Math.round(u.w/x):u.w=Math.round(u.h*x)}for(var y in~v.indexOf("l")&&(u.l+=e.w-u.w),~v.indexOf("t")&&(u.t+=e.h-u.h),u)u[y]=parseInt("".concat(u[y]),10);return u}},a.prototype.getParentRect=function(){var a={left:0,top:0,width:0,height:0},b=this.el;if(!b)return a;var c=b.offsetParent;return c&&"BODY"!==c.tagName&&(a=this.getElementPos(c)),a},a}(),h$=function(){return(h$=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};function h_(a){var b=a.getBoundingClientRect();return{top:b.top+document.body.scrollTop,left:b.left+document.body.scrollLeft}}function h0(a,b){return s.matches.call(a,b)}function h1(a){return a?[a].concat(h1(a.parent())):[]}var h2=function(){function a(a){this.timeout=null,this.threshold=a}return a.prototype.updateArgs=function(a){this.lastArgs=a},a.prototype.execute=function(a){var b=this;this.timeout||(this.timeout=setTimeout(function(){b.lastArgs&&a(b.lastArgs),b.timeout=null},this.threshold))},a.prototype.clearTimeout=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),delete this.lastArgs},a}(),h3=function(){return(h3=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},h4=function(){function a(a){this.top=a.top,this.left=a.left,this.height=a.height,this.width=a.width,this.offsets=a.offsets,this.dir=a.dir}return a.prototype.calculateDimensionDifference=function(a){return{topDifference:a.top-this.top,leftDifference:a.left-this.left}},a.prototype.adjustDimensions=function(a){return this.top+=a.topDifference,this.left+=a.leftDifference,this},a.prototype.determinePlacement=function(a,b){var c=this.left+this.width/2,d=this.top+this.height/2;return this.dir?b<d?"before":"after":a<c?"before":"after"},a.prototype.equals=function(a){return!!a&&this.top===a.top&&this.left===a.left&&this.height===a.height&&this.width===a.width&&this.dir===a.dir&&JSON.stringify(this.offsets)===JSON.stringify(a.offsets)},a.prototype.clone=function(){return new a({top:this.top,left:this.left,height:this.height,width:this.width,offsets:h3({},this.offsets),dir:this.dir})},a.prototype.getDropArea=function(a){var b=this.clone(),c=this.adjustDropDimension(this.width,this.left,a),d=c.newSize,e=c.newPosition;b.width=d,b.left=e;var f=this.adjustDropDimension(this.height,this.top,a),g=f.newSize,h=f.newPosition;return b.height=g,b.top=h,b},a.prototype.adjustDropDimension=function(a,b,c){var d=c.ratio,e=c.minUndroppableDimension,f=c.maxUndroppableDimension,g=a*(1-d)/2;return{newSize:a-2*(g=Math.min(g=Math.max(g,e),f)),newPosition:b+g}},a.prototype.isWithinBounds=function(a,b){return a>=this.left&&a<=this.left+this.width&&b>=this.top&&b<=this.top+this.height},a}(),h5=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),h6=function(a){function b(b){var c=a.call(this)||this;return c.sourceNodes=[],c.containerOffset={top:0,left:0},c.moveThreshold=20,c.treeClass=b.treeClass,c.em=b.em,c.containerContext=b.containerContext,c.positionOptions=b.positionOptions,c.dragDirection=b.dragDirection,c.eventHandlers=b.eventHandlers,(0,r.bindAll)(c,"endDrag","cancelDrag","recalculateTargetOnScroll","startSort","onDragStart","onMove"),c.restLastMoveData(),c.rateLimiter=new h2(c.moveThreshold),c}return h5(b,a),b.prototype.startSort=function(a){this.sourceNodes=a,this.bindDragEventHandlers()},b.prototype.bindDragEventHandlers=function(){(0,ab.on)(this.containerContext.container,"dragstart",this.onDragStart),(0,ab.on)(this.containerContext.container,"mousemove dragover",this.onMove),(0,ab.on)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},b.prototype.recalculateTargetOnScroll=function(){var a=this.lastMoveData.mouseEvent;a&&this.onMove(a)},b.prototype.onMove=function(a){this.rateLimiter.updateArgs(a),this.rateLimiter.execute(this.handleMove.bind(this))},b.prototype.handleMove=function(a){this.adjustForScroll();var b,c,d,e,f,g,h,i=this.lastMoveData.targetNode;null==(c=(b=this.eventHandlers).onMouseMove)||c.call(b,a),this.cacheContainerPosition();var j=this.getMousePositionRelativeToContainer(a.clientX,a.clientY),k=j.mouseXRelative,l=j.mouseYRelative,m=this.getMouseTargetElement(a),n=this.getFirstElementWithAModel(m),o=n?null==(d=(0,w.default)(n))?void 0:d.data("model"):void 0,p=o?this.getOrCreateHoveredNode(o):void 0,q=p?this.getIndexInParent(p,p.nodeDimensions,k,l):0,r=p?this.getValidParent(p,0,k,l):void 0;if((null==r?void 0:r.equals(i))||null==(f=(e=this.eventHandlers).onTargetChange)||f.call(e,i,r),!r||!p){this.triggerLegacyOnMoveCallback(a,0),this.triggerMoveEvent(k,l),this.restLastMoveData();return}var s=this.getDropPosition(r,k,l),t=s.index,u=s.placement,v=s.placeholderDimensions;v.equals(this.lastMoveData.placeholderDimensions)&&u===this.lastMoveData.placement||null==(h=(g=this.eventHandlers).onPlaceholderPositionChange)||h.call(g,v,u),this.lastMoveData={targetNode:r,hoveredNode:p,mouseEvent:a,index:t,hoveredIndex:q,placement:u,placeholderDimensions:v},this.triggerMoveEvent(k,l),this.triggerLegacyOnMoveCallback(a,t)},b.prototype.adjustForScroll=function(){var a,b,c=this.lastMoveData.targetNode;if(null==c?void 0:c.element){var d=this.getDim(null==c?void 0:c.element),e=null==(a=c.nodeDimensions)?void 0:a.calculateDimensionDifference(d);e&&c.adjustDimensions(e)}var f=this.lastMoveData.hoveredNode;if(null==f?void 0:f.element){var d=this.getDim(null==f?void 0:f.element),e=null==(b=f.nodeDimensions)?void 0:b.calculateDimensionDifference(d);e&&f.adjustDimensions(e)}},b.prototype.restLastMoveData=function(){this.lastMoveData={targetNode:void 0,index:void 0,placement:void 0,mouseEvent:void 0}},b.prototype.triggerLegacyOnMoveCallback=function(a,b){var c,d,e,f,g=null==(c=this.sourceNodes[0])?void 0:c.model;null==(e=(d=this.eventHandlers).legacyOnMoveClb)||e.call(d,{event:a,target:g,parent:null==(f=this.lastMoveData.targetNode)?void 0:f.model,index:b})},b.prototype.triggerMoveEvent=function(a,b){var c,d=this.lastMoveData,e=d.targetNode,f=d.placement,g=d.index,h=g?g+("after"===f?-1:0):0;this.em.trigger("sorter:drag",{target:(null==e?void 0:e.element)||null,targetModel:null==(c=this.lastMoveData.targetNode)?void 0:c.model,sourceModel:this.sourceNodes[0].model,dims:(null==e?void 0:e.childrenDimensions)||[],pos:{index:h,indexEl:h,placement:f},x:a,y:b})},b.prototype.getDropPosition=function(a,b,c){var d,e=a.nodeDimensions,f=a.childrenDimensions,g=a.getChildren(),h=g&&g.length>0;e=e||this.getDim(a.element),a.nodeDimensions=e,f=f||this.getChildrenDim(a),a.childrenDimensions=f;var i=e.clone(),j=0,k="inside";return h&&(j=(d=function(a,b,c){for(var d,e={index:0,placement:"before"},f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=a.length;m<n;m++){var o=(d=a[m]).top,p=d.left,q=d.height,r=d.width;if(h=p+r,l=o+q,j=p+r/2,k=o+q/2,(!g||!(p>g))&&(!i||!(k>=i))&&(!f||!(h<f)))if(e.index=m,d.dir)if(c<k){e.placement="before";break}else e.placement="after";else c<l&&(i=l),b<j?(g=j,e.placement="before"):(f=j,e.placement="after")}return e}(f,b,c)).index,k=d.placement,i=f[j].clone(),j+=+("after"==k)),{index:j,placement:k,placeholderDimensions:i}},b.prototype.getOrCreateHoveredNode=function(a){var b=this.lastMoveData.hoveredNode,c=new this.treeClass(a),d=c.equals(b),e=d?b:c;return e.nodeDimensions=d?b.nodeDimensions:this.getDim(c.element),e},b.prototype.getMouseTargetElement=function(a){var b=this.containerContext.customTarget,c=this.containerContext.document.elementFromPoint(a.clientX,a.clientY);return b?b({event:a}):c},b.prototype.onDragStart=function(a){this.eventHandlers.onDragStart&&this.eventHandlers.onDragStart(a)},b.prototype.endDrag=function(){this.dropDragged()},b.prototype.cancelDrag=function(){var a,b,c=this.lastMoveData.targetNode;null==(b=(a=this.eventHandlers).onTargetChange)||b.call(a,c,void 0),this.finalizeMove()},b.prototype.finalizeMove=function(){var a,b,c,d;this.cleanupEventListeners(),this.triggerOnDragEndEvent(),null==(b=(a=this.eventHandlers).onEnd)||b.call(a),null==(d=(c=this.eventHandlers).legacyOnEnd)||d.call(c),this.restLastMoveData(),this.rateLimiter.clearTimeout()},b.prototype.dropDragged=function(){var a,b,c=this.lastMoveData,d=c.targetNode,e=c.index;null==(b=(a=this.eventHandlers).onDrop)||b.call(a,d,this.sourceNodes,e),this.finalizeMove()},b.prototype.triggerOnDragEndEvent=function(){var a=this.lastMoveData.targetNode,b=this.sourceNodes[0];this.em.trigger("sorter:drag:end",{targetCollection:a?a.getChildren():null,modelToDrop:null==b?void 0:b.model,warns:[""],validResult:{result:!0,src:this.sourceNodes.map(function(a){return a.element}),srcModel:null==b?void 0:b.model,trg:null==a?void 0:a.element,trgModel:null==a?void 0:a.model,draggable:!0,droppable:!0},dst:null==a?void 0:a.element,srcEl:null==b?void 0:b.element})},b.prototype.getFirstElementWithAModel=function(a){for(;a&&this.containerContext.container.contains(a);){var b;if(b=a,void 0!==(0,w.default)(b).data("model"))return a;a=a.parentElement}return null},b.prototype.getValidParent=function(a,b,c,d){if(a){var e,f,g=this.lastMoveData,h=g.targetNode,i=g.hoveredNode,j=g.hoveredIndex,k=g.mouseEvent,l=a.equals(i);a.nodeDimensions=l?i.nodeDimensions:this.getDim(a.element);var m=this.getIndexInParent(a,a.nodeDimensions,c,d),n=a.isWithinDropBounds(c,d);if(l&&m===j&&n===a.isWithinDropBounds(null!=(e=null==k?void 0:k.clientX)?e:0,null!=(f=null==k?void 0:k.clientY)?f:0)&&h)return h;if(!n)return this.handleParentTraversal(a,c,d);var o=this.sourceNodes.some(function(c){return a.canMove(c,b)});return(this.triggerDragValidation(o,a),o)?a:this.handleParentTraversal(a,c,d)}},b.prototype.handleParentTraversal=function(a,b,c){var d=a.getParent();if(d){var e=this.getIndexInParent(a,a.nodeDimensions,b,c);if(void 0!==e)return this.getValidParent(d,e,b,c)}},b.prototype.getIndexInParent=function(a,b,c,d){var e=a.getParent();if(e){var f=null==e?void 0:e.indexOfChild(a);return b.dir=this.getDirection(a.element,e.element),f+=+("after"==b.determinePlacement(c,d))}},b.prototype.triggerDragValidation=function(a,b){var c=this.sourceNodes[0];return this.em.trigger("sorter:drag:validation",{valid:a,src:null==c?void 0:c.element,srcModel:null==c?void 0:c.model,trg:b.element,trgModel:b.model}),c},b.prototype.cleanupEventListeners=function(){var a=this.containerContext.container;(0,ab.AU)(a,"dragstart",this.onDragStart),(0,ab.AU)(a,"mousemove dragover",this.onMove),(0,ab.AU)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},b.prototype.getDirection=function(a,b){return this.dragDirection===b7.A.Vertical||this.dragDirection!==b7.A.Horizontal&&function(a,b){if((0,ab.ir)(a))return!1;var c=a.style||{},d=(0,w.default)(a),e=(0,w.default)(b);if(c.overflow&&"visible"!==c.overflow)return!1;var f=d.css("float");return(!f||"none"===f)&&("flex"!==e.css("display")||"column"===e.css("flex-direction"))&&!!function(a){switch(a){case"static":case"relative":case"":return!0;default:return!1}}(c.position)&&(["TR","TBODY","THEAD","TFOOT"].includes(a.tagName)||["block","list-item","table","flex","grid"].includes(d.css("display")))}(a,b)},b.prototype.getChildrenDim=function(a){var b=this,c=[],d=a.element;if(!d)return[];var e=a.getChildren();return e&&0!==e.length?((0,r.each)(e,function(a,e){var f=a.element;if(f&&((0,ab.ir)(f)||h0(f,b.containerContext.itemSel))){var g=b.getDim(f);g.dir=b.getDirection(f,d),c.push(g)}}),c):[]},b.prototype.getMousePositionRelativeToContainer=function(a,b){var c=b-this.containerOffset.top+this.containerContext.container.scrollTop,d=a-this.containerOffset.left+this.containerContext.container.scrollLeft;if(this.positionOptions.canvasRelative){var e=this.em.Canvas.getMouseRelativeCanvas({clientX:a,clientY:b},{noScroll:1});d=e.x,c=e.y}return{mouseXRelative:d,mouseYRelative:c}},b.prototype.cacheContainerPosition=function(){var a=h_(this.containerContext.container),b=this.positionOptions.windowMargin?Math.abs(a.top):a.top,c=this.positionOptions.windowMargin?Math.abs(a.left):a.left;this.containerOffset={top:b,left:c}},b.prototype.getDim=function(a){var b,c,d,e,f=this.em,g=this.positionOptions.relative,h=this.positionOptions.windowMargin,i=null==f?void 0:f.Canvas,j=i?i.getElementOffsets(a):{};if(this.positionOptions.canvasRelative&&this.em){var k=i.getElementPos(a,{noScroll:1});b=k.top,c=k.left,d=k.height,e=k.width}else{var l=h_(a);b=g?a.offsetTop:l.top-(h?-1:1)*this.containerOffset.top,c=g?a.offsetLeft:l.left-(h?-1:1)*this.containerOffset.left,d=a.offsetHeight,e=a.offsetWidth}return new h4({top:b,left:c,height:d,width:e,offsets:j})},b}(x.Ss),h7=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),h8=function(a){function b(b){var c=a.call(this)||this;return c.pfx=b.pfx||"",c.allowNesting=b.allowNesting||!1,c.container=b.container,c.setElement(b.el),c.offset={top:b.offset.top||0,left:b.offset.left||0},c.moveLimiter=new h2(100),c}return h7(b,a),b.prototype.show=function(){this.el.style.display="block"},b.prototype.hide=function(){this.moveLimiter.clearTimeout(),this.el.style.display="none"},b.prototype.move=function(a,b){var c=this;this.moveLimiter.updateArgs({elementDimension:a,placement:b}),this.moveLimiter.execute(function(a){var b=a.elementDimension,d=a.placement;c._move(b,d)})},b.prototype._move=function(a,b){var c=0,d=0,e="",f="";this.setOrientationForDimension(a);var g=a.top,h=a.left,i=a.height,j=a.width,k=a.dir,l=a.offsets;if("inside"===b){if(this.setOrientation("horizontal"),!this.allowNesting)return void this.hide();var m=(null==l?void 0:l.paddingTop)||5,n=(null==l?void 0:l.paddingLeft)||5,o=(null==l?void 0:l.borderTopWidth)||0,p=(null==l?void 0:l.borderLeftWidth)||0,q=(null==l?void 0:l.borderRightWidth)||0;c=g+m+o,d=h+n+p,e=Math.max(j-2*n-(p+q),1)+"px",f="auto"}else k?(e=j+"px",f="auto",c="before"===b?g-0:g+i-0,d=h):(e="auto",f=i-0+"px",c=g+0,d="before"===b?h-0:h+j-0,this.setOrientation("vertical"));this.updateStyles(c,d,e,f),this.adjustOffset()},b.prototype.setOrientationForDimension=function(a){this.el.classList.remove("vertical"),this.el.classList.add("horizontal"),a&&!a.dir&&this.setOrientation("vertical")},b.prototype.setOrientation=function(a){this.el.classList.remove("horizontal"),this.el.classList.remove("vertical"),this.el.classList.add(a)},b.prototype.updateStyles=function(a,b,c,d){this.el.style.top=a+"px",this.el.style.left=b+"px",c&&(this.el.style.width=c),d&&(this.el.style.height=d)},b.prototype.adjustOffset=function(){this.$el.css("top","+="+this.offset.top+"px"),this.$el.css("left","+="+this.offset.left+"px")},b}(x.Ss),h9=function(){return(h9=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},ia=function(){function a(a){var b,c=(b={containerContext:{container:"",placeholderElement:"",containerSel:"*",itemSel:"*",pfx:"",document:document},positionOptions:{borderOffset:10,relative:!1,windowMargin:0,offsetTop:0,offsetLeft:0,scale:1,canvasRelative:!1},dragBehavior:{dragDirection:b7.A.Vertical,nested:!1,selectOnEnd:!0},eventHandlers:{}},h$(h$(h$({},b),a),{containerContext:h$(h$({},b.containerContext),a.containerContext),positionOptions:h$(h$({},b.positionOptions),a.positionOptions),dragBehavior:h$(h$({},b.dragBehavior),a.dragBehavior),eventHandlers:h$(h$({},b.eventHandlers),a.eventHandlers)}));(0,r.bindAll)(this,"startSort","cancelDrag","recalculateTargetOnScroll","rollback","updateOffset","handlePlaceholderMove","finalizeMove"),this.containerContext=c.containerContext,this.positionOptions=c.positionOptions,this.dragBehavior=c.dragBehavior,this.eventHandlers=h9(h9({},c.eventHandlers),{onPlaceholderPositionChange:this.handlePlaceholderMove,onEnd:this.finalizeMove}),this.em=a.em,this.treeClass=a.treeClass,this.updateOffset(),this.em.on(this.em.Canvas.events.refresh,this.updateOffset),this.placeholder=this.createPlaceholder(),this.dropLocationDeterminer=new h6({em:this.em,treeClass:this.treeClass,containerContext:this.containerContext,positionOptions:this.positionOptions,dragDirection:this.dragBehavior.dragDirection,eventHandlers:this.eventHandlers})}return a.prototype.startSort=function(a){var b,c,d,e,f,g,h,i=this.getSourceNodes(a),j=i.sourceNodes,k=i.sourcesWithModel;this.sourceNodes=j,this.dropLocationDeterminer.startSort(j),this.bindDragEventHandlers(),null==(c=(b=this.eventHandlers).onStartSort)||c.call(b,this.sourceNodes,this.containerContext.container);var l=null==(d=this.sourceNodes[0])?void 0:d.model;null==(f=(e=this.eventHandlers).legacyOnStartSort)||f.call(e,{sorter:this,target:l,parent:l&&(null==(g=l.parent)?void 0:g.call(l)),index:l&&(null==(h=l.index)?void 0:h.call(l))}),this.em.trigger("sorter:drag:start",a[0],k[0])},a.prototype.validTarget=function(a,b,c){if(!a)return!1;var d=(0,w.default)(a).data("model");if(!d)return!1;var e=new this.treeClass(d);return this.getSourceNodes(b).sourceNodes.some(function(a){return e.canMove(a,c)})},a.prototype.getSourceNodes=function(a){var b=this,c=a.filter(function(a){return!!a.dragSource||b.findValidSourceElement(a.element)}).map(function(a){var b,c;return{model:(null==(b=a.dragSource)?void 0:b.model)||(null==(c=(0,w.default)(a.element))?void 0:c.data("model")),content:a.dragSource}});return{sourceNodes:c.sort(function(a,b){return function(a,b){var c=h1(a),d=h1(b),e=d.filter(function(a){return c.includes(a)})[0];if(!e)return a.model.index()-b.model.index();var f=d[d.indexOf(e)-1];return c[c.indexOf(e)-1].index()-f.index()}(a.model,b.model)}).map(function(a){return new b.treeClass(a.model,a.content)}),sourcesWithModel:c}},a.prototype.recalculateTargetOnScroll=function(){this.dropLocationDeterminer.recalculateTargetOnScroll()},a.prototype.cancelDrag=function(){this.triggerNullOnEndMove(!0),this.dropLocationDeterminer.cancelDrag()},a.prototype.endDrag=function(){this.dropLocationDeterminer.endDrag()},a.prototype.handlePlaceholderMove=function(a,b){this.ensurePlaceholderElement(),this.updatePlaceholderPosition(a,b)},a.prototype.createPlaceholder=function(){return new h8({container:this.containerContext.container,allowNesting:this.dragBehavior.nested,pfx:this.containerContext.pfx,el:this.containerContext.placeholderElement,offset:{top:this.positionOptions.offsetTop,left:this.positionOptions.offsetLeft}})},a.prototype.ensurePlaceholderElement=function(){var a=this.placeholder.el,b=this.containerContext.container;a.ownerDocument.contains(a)||b.append(this.placeholder.el)},a.prototype.updateOffset=function(){var a,b=(null==(a=this.em)?void 0:a.get("canvasOffset"))||{};this.positionOptions.offsetTop=b.top,this.positionOptions.offsetLeft=b.left},a.prototype.findValidSourceElement=function(a){return a&&!h0(a,"".concat(this.containerContext.itemSel,", ").concat(this.containerContext.containerSel))&&(a=function(a,b){if(a)for(var c=a.parentNode;c&&1===c.nodeType;){if(h0(c,b))return c;c=c.parentNode}}(a,this.containerContext.itemSel)),a},a.prototype.bindDragEventHandlers=function(){(0,ab.on)(this.containerContext.document,"keydown",this.rollback)},a.prototype.updatePlaceholderPosition=function(a,b){this.placeholder.move(a,b)},a.prototype.cleanupEventListeners=function(){(0,ab.AU)(this.containerContext.document,"keydown",this.rollback)},a.prototype.finalizeMove=function(){this.cleanupEventListeners(),this.placeholder.hide(),delete this.sourceNodes},a.prototype.rollback=function(a){(0,ab.AU)(this.containerContext.document,"keydown",this.rollback),"Escape"===a.key&&this.cancelDrag()},a.prototype.triggerNullOnEndMove=function(a){var b,c,d,e,f,g=null==(b=this.sourceNodes)?void 0:b[0].model,h={target:g,parent:g&&(null==(c=g.parent)?void 0:c.call(g)),index:g&&(null==(d=g.index)?void 0:d.call(g))};null==(f=(e=this.eventHandlers).legacyOnEndMove)||f.call(e,null,this,h9(h9({},h),{cancelled:a}))},a}(),ib=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ic=function(){return(ic=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},id={id:"sorter-target",type:X.F.Target},ie=function(a){function b(b){var c=b.em,d=b.treeClass,e=b.containerContext,f=b.dragBehavior,g=b.positionOptions,h=b.eventHandlers,i=void 0===h?{}:h,j=a.call(this,{em:c,treeClass:d,containerContext:e,positionOptions:void 0===g?{}:g,dragBehavior:f,eventHandlers:ic(ic({},i),{onStartSort:function(a,b){var c;null==(c=i.onStartSort)||c.call(i,a,b),j.onStartSort()},onDrop:function(a,b,c){var d;null==(d=i.onDrop)||d.call(i,a,b,c),j.onDrop(a,b,c)},onTargetChange:function(a,b){var c;null==(c=i.onTargetChange)||c.call(i,a,b),j.onTargetChange(a,b)},onMouseMove:function(a){var b;null==(b=i.onMouseMove)||b.call(i,a),j.onMouseMove(a)}})})||this;return j.targetIsText=!1,j.onMouseMove=function(a){var b;j.targetIsText&&(null==(b=j.sourceNodes)?void 0:b.some(function(a){return a.isTextable()}))&&j.updateTextViewCursorPosition(a)},j.onDrop=function(a,b,c){a&&b.length>0?0===j.handleNodeAddition(a,b,"number"==typeof c?c:-1).length&&j.triggerNullOnEndMove(!1):j.triggerNullOnEndMove(!0),null==a||a.restNodeState(),j.placeholder.hide()},j.onTargetChange=function(a,b){null==a||a.restNodeState();var c,d=j.em.Canvas;if(!b){j.placeholder.hide(),d.removeSpots(id);return}null==b||b.setSelectedParentState(),j.targetIsText=b.isTextNode(),j.targetIsText&&(null==(c=j.sourceNodes)?void 0:c.some(function(a){return a.isTextable()}))?(b.setContentEditable(!0),j.placeholder.hide()):j.placeholder.show(),[X.F.Select,X.F.Hover,X.F.Spacing].forEach(function(a){return d.removeSpots({type:a})}),d.addSpot(ic(ic({},id),{component:b.model}))},(0,r.bindAll)(j,"handleScrollEvent"),j}return ib(b,a),b.prototype.onStartSort=function(){this.em.clearSelection(),this.setAutoCanvasScroll(!0)},b.prototype.bindDragEventHandlers=function(){this.em.on("frame:scroll",this.handleScrollEvent),a.prototype.bindDragEventHandlers.call(this)},b.prototype.cleanupEventListeners=function(){this.em.off("frame:scroll",this.handleScrollEvent),a.prototype.cleanupEventListeners.call(this)},b.prototype.handleScrollEvent=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=null==(a=null==b?void 0:b[0])?void 0:a.frame;this.em.Canvas.getCanvasView().frame===d&&this.recalculateTargetOnScroll()},b.prototype.handleNodeAddition=function(a,b,c){var d=this;return b.reduce(function(b,e){if(!a.canMove(e,c))return b;if(d.isPositionChanged(a,e,c)){var f=d.moveNode(a,e,c),g=f.index,h=f.addedNode;b.push(h),c=g}return c++,b},[])},b.prototype.isPositionChanged=function(a,b,c){var d=b.getParent(),e=d?d.indexOfChild(b):-1;(null==d?void 0:d.model.cid)===a.model.cid&&e<c&&c--;var f=(null==d?void 0:d.model.cid)===a.model.cid,g=e===c,h=this.targetIsText&&b.isTextable();return!(f&&g&&!h)},b.prototype.moveNode=function(a,b,c){var d=b.getParent();if(d){var e=d.indexOfChild(b);d.removeChildAt(e,{temporary:!0}),d.model.cid===a.model.cid&&e<c&&c--}var f=a.addChildAt(b,c,{action:"move-component"});return f&&this.triggerEndMoveEvent(f),{addedNode:f,index:c}},b.prototype.triggerEndMoveEvent=function(a){var b,c,d,e,f,g;null==(c=(b=this.eventHandlers).legacyOnEndMove)||c.call(b,a.model,this,{target:a.model,parent:a.model&&(null==(e=(d=a.model).parent)?void 0:e.call(d)),index:a.model&&(null==(g=(f=a.model).index)?void 0:g.call(f))})},b.prototype.finalizeMove=function(){var b,c;null==(b=this.em)||b.Canvas.removeSpots(id),null==(c=this.sourceNodes)||c.forEach(function(a){return a.restNodeState()}),this.setAutoCanvasScroll(!1),a.prototype.finalizeMove.call(this)},b.prototype.updateTextViewCursorPosition=function(a){var b=this.em;if(b){var c=b.Canvas,d=c.getDocument(),e=null,f=(0,ab.G2)(a);if(d.caretPositionFromPoint){var g=d.caretPositionFromPoint(f.clientX,f.clientY);g&&(e=d.createRange()).setStart(g.offsetNode,g.offset)}else d.caretRangeFromPoint?e=d.caretRangeFromPoint(f.clientX,f.clientY):a.rangeParent&&(e=d.createRange()).setStart(a.rangeParent,a.rangeOffset);var h=c.getWindow().getSelection();c.getFrameEl().focus(),null==h||h.removeAllRanges(),e&&(null==h||h.addRange(e))}},b.prototype.setAutoCanvasScroll=function(a){var b=this.em,c=null==b?void 0:b.Canvas;c&&(a?c.startAutoscroll():c.stopAutoscroll())},b}(ia),ig=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ih=function(){return(ih=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},ii=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return ig(b,a),b.prototype.defaults=function(){return{values:{}}},b.prototype.initialize=function(){var a=this.collection;this.prop=null==a?void 0:a.prop},b.prototype.getId=function(){return this.cid},b.prototype.getIndex=function(){var a=this.collection;return a?a.indexOf(this):-1},b.prototype.getValues=function(a){void 0===a&&(a={});var b=this.get("values");return a.camelCase?Object.keys(b).reduce(function(a,c){return a[(0,s.camelCase)(c)]=b[c],a},{}):b},b.prototype.getLabel=function(){var a;return null==(a=this.prop)?void 0:a.getLayerLabel(this)},b.prototype.isSelected=function(){var a;return(null==(a=this.prop)?void 0:a.getSelectedLayer())===this},b.prototype.select=function(){var a;return null==(a=this.prop)?void 0:a.selectLayer(this)},b.prototype.remove=function(){var a;return null==(a=this.prop)?void 0:a.removeLayer(this)},b.prototype.move=function(a){var b;return null==(b=this.prop)?void 0:b.moveLayer(this,a)},b.prototype.getStylePreview=function(a){var b;return void 0===a&&(a={}),null==(b=this.prop)?void 0:b.getStylePreview(this,a)},b.prototype.hasPreview=function(){var a;return!!(null==(a=this.prop)?void 0:a.get("preview"))},b.prototype.upValues=function(a){return void 0===a&&(a={}),this.set("values",ih(ih({},this.getValues()),a))},b}(x.Kx),ij=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ik=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return ij(b,a),b.prototype.initialize=function(a,b){void 0===b&&(b={}),this.prop=b.prop},b}(x.pM);ik.prototype.model=ii;var il,im,io,ip,iq,ir,is,it,iu,iv,iw,ix,iy,iz,iA,iB,iC,iD,iE,iF,iG,iH,iI,iJ,iK,iL,iM,iN,iO,iP,iQ,iR,iS,iT,iU=p(3178),iV=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),iW=function(a){function b(b){return a.call(this,b)||this}return iV(b,a),b.prototype.getChildren=function(){return this.model instanceof ik?this.model.models.map(function(a){return new b(a)}):null},b.prototype.getParent=function(){var a=this.model instanceof ii?this.model.collection:null;return a?new b(a):null},b.prototype.addChildAt=function(a,c){if(this.model instanceof ii)throw Error("Cannot add a layer model to another layer model");return new b(this.model.add(a.model,{at:c}))},b.prototype.removeChildAt=function(a){if(this.model instanceof ii)throw Error("Cannot remove a layer model from another layer model");var b=this.model.at(a);b&&this.model.remove(b)},b.prototype.indexOfChild=function(a){return a.model instanceof ii&&this.model instanceof ik?this.model.indexOf(a.model):-1},b.prototype.canMove=function(a,b){return this.model instanceof ik&&!!a.model},Object.defineProperty(b.prototype,"view",{get:function(){return this.model.view},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"element",{get:function(){var a;return null==(a=this.view)?void 0:a.el},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),b}(iU.$),iX=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),iY=function(){return(iY=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},iZ=function(a){function b(b){var c=b.em,d=b.containerContext,e=b.dragBehavior,f=b.positionOptions,g=b.eventHandlers,h=void 0===g?{}:g,i=a.call(this,{em:c,treeClass:iW,containerContext:d,positionOptions:void 0===f?{}:f,dragBehavior:e,eventHandlers:iY({onStartSort:function(a,b){var c;null==(c=h.onStartSort)||c.call(h,a,b),i.onLayerStartSort(a)},onDrop:function(a,b,c){var d;null==(d=h.onDrop)||d.call(h,a,b,c),i.onLayerDrop(a,b,c)},onEnd:function(){i.placeholder.hide()}},h)})||this;return i.onLayerStartSort=function(a){i.em.clearSelection();var b=a[0];i.em.trigger("sorter:drag:start",null==b?void 0:b.element,null==b?void 0:b.model),i.placeholder.show()},i.onLayerDrop=function(a,b,c){if(a){c="number"==typeof c?c:-1;for(var d=0;d<b.length;d++){var e=b[d];if(a.canMove(e,d)){var f=e.getParent(),g=-1;f&&(g=f.indexOfChild(e),f.removeChildAt(g)),c=g<c?c-1:c,a.addChildAt(e,c)}}i.placeholder.hide()}},i}return iX(b,a),b}(ia),i$=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),i_=function(){return(i_=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},i0=function(a){function b(b){var c=a.call(this,b,"Utils")||this;return c.Sorter=ie,c.Resizer=hZ,c.Dragger=ce.A,c.ComponentSorter=ie,c.StyleManagerSorter=iZ,c.helpers=i_({},s),c}return i$(b,a),b.prototype.destroy=function(){},b}(E),i1={},i2={16:!1,18:!1,17:!1,91:!1},i3="all",i4={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,command:91},i5={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},i6=function(a){return i5[a]||a.toUpperCase().charCodeAt(0)},i7=[];for(iT=1;iT<20;iT++)i5["f"+iT]=111+iT;function i8(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return -1}var i9={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function ja(a){var b,c=a.keyCode,d=i8(i7,c);if(d>=0&&i7.splice(d,1),(93==c||224==c)&&(c=91),c in i2)for(b in i2[c]=!1,i4)i4[b]==c&&(jc[b]=!1)}function jb(){for(iT in i2)i2[iT]=!1;for(iT in i4)jc[iT]=!1}function jc(a,b,c){var d,e;d=je(a),void 0===c&&(c=b,b="all");for(var f=0;f<d.length;f++)e=[],(a=d[f].split("+")).length>1&&(e=jf(a),a=[a[a.length-1]]),(a=i6(a=a[0]))in i1||(i1[a]=[]),i1[a].push({shortcut:d[f],scope:b,method:c,key:d[f],mods:e})}for(iT in i4)jc[iT]=!1;function jd(){return i3||"all"}function je(a){var b;return""==(b=(a=a.replace(/\s/g,"")).split(","))[b.length-1]&&(b[b.length-2]+=","),b}function jf(a){for(var b=a.slice(0,a.length-1),c=0;c<b.length;c++)b[c]=i4[b[c]];return b}function jg(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,function(){c(window.event)})}jc.setScope=function(a){i3=a||"all"},jc.getScope=jd,jc.deleteScope=function(a){var b,c,d;for(b in i1)for(d=0,c=i1[b];d<c.length;)c[d].scope===a?c.splice(d,1):d++},jc.filter=function(a){var b=(a.target||a.srcElement).tagName;return"INPUT"!=b&&"SELECT"!=b&&"TEXTAREA"!=b},jc.isPressed=function(a){return"string"==typeof a&&(a=i6(a)),-1!=i8(i7,a)},jc.getPressedKeyCodes=function(){return i7.slice(0)},jc.unbind=function(a,b){var c,d,e,f,g,h=[];for(f=0,c=je(a);f<c.length;f++){if((d=c[f].split("+")).length>1&&(h=jf(d)),a=i6(a=d[d.length-1]),void 0===b&&(b=jd()),!i1[a])return;for(e=0;e<i1[a].length;e++)(g=i1[a][e]).scope===b&&function(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}(g.mods,h)&&(i1[a][e]={})}},jc.handlers=i1,jc.init=function(a){jg(a.document,"keydown",function(a){!function(a){var b,c,d,e,f,g;if(-1==i8(i7,b=a.keyCode)&&i7.push(b),(93==b||224==b)&&(b=91),b in i2){for(d in i2[b]=!0,i4)i4[d]==b&&(jc[d]=!0);return}for(iT in i2)i2[iT]=a[i9[iT]];if(jc.filter.call(this,a)&&b in i1){for(e=0,g=jd();e<i1[b].length;e++)if((c=i1[b][e]).scope==g||"all"==c.scope){for(d in f=c.mods.length>0,i2)(!i2[d]&&i8(c.mods,+d)>-1||i2[d]&&-1==i8(c.mods,+d))&&(f=!1);(0!=c.mods.length||i2[16]||i2[18]||i2[17]||i2[91])&&!f||!1!==c.method(a,c)||(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0))}}}(a)}),jg(a.document,"keyup",ja),jg(a,"focus",jb)};let jh=jc;!function(a){a.add="keymap:add",a.remove="keymap:remove",a.emit="keymap:emit",a.emitId="keymap:emit:"}(d||(d={}));var ji=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jj=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))};(0,s.hasWin)()&&jh.init(window);var jk=function(a){function b(b){var c=a.call(this,b,"Keymaps",{defaults:{"core:undo":{keys:"+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}})||this;return c.keymaster=jh,c.events=d,c.keymaps={},c}return ji(b,a),b.prototype.onLoad=function(){if(!this.em.isHeadless){var a=this.config.defaults;for(var b in a){var c=a[b];this.add(b,c.keys,c.handler,c.opts||{})}}},b.prototype.add=function(a,b,c,d){void 0===d&&(d={});var e=this.em,f=this.events,g=e.Commands,h=e.getEditor(),i=e.Canvas,j={id:a,keys:b,handler:c};return this.keymaps[a]&&this.remove(a),this.keymaps[a]=j,jh(b,function(b,j){var k,l={event:b,h:j},m=(0,r.isString)(c)?g.get(c):c;if(!e.isEditing()&&!h.Canvas.isInputFocused()||d.force){d.prevent&&(null==(k=i.getCanvasView())||k.preventDefault(b)),(0,r.isFunction)(m)?m(h,0,l):g.runCommand(m,l);var n=[a,j.shortcut,b];e.trigger.apply(e,jj([f.emit],n,!1)),e.trigger.apply(e,jj(["".concat(f.emitId).concat(a)],n,!1))}},void 0),e.trigger(f.add,j),j},b.prototype.get=function(a){return this.keymaps[a]},b.prototype.getAll=function(){return this.keymaps},b.prototype.remove=function(a){var b=this.em,c=this.events,d=this.get(a);if(d)return delete this.keymaps[a],d.keys.split(", ").forEach(function(a){jh.unbind(a.trim())}),null==b||b.trigger(c.remove,d),d},b.prototype.removeAll=function(){var a=this;return Object.keys(this.keymaps).forEach(function(b){return a.remove(b)}),jh.handlers={},this},b.prototype.destroy=function(){this.removeAll(),this.keymaps={}},b}(E),jl=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jm=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return jl(b,a),b.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},b.prototype.open=function(){this.set("open",!0)},b.prototype.close=function(){this.set("open",!1)},b}(G.A);!function(a){a.open="modal:open",a.close="modal:close",a.all="modal"}(e||(e={}));var jn=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jo=function(){return(jo=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},jp=function(a){function b(b){var c=a.call(this,b)||this,d=c.model;return c.listenTo(d,"change:open",c.updateOpen),c.listenTo(d,"change:title",c.updateTitle),c.listenTo(d,"change:content",c.updateContent),c}return jn(b,a),b.prototype.template=function(a){var b=a.pfx,c=a.ppfx,d=a.content,e=a.title;return'<div class="'.concat(b,"dialog ").concat(c,"one-bg ").concat(c,'two-color">\n      <div class="').concat(b,'header">\n        <div class="').concat(b,'title">').concat(e,'</div>\n        <div class="').concat(b,'btn-close" data-close-modal>&Cross;</div>\n      </div>\n      <div class="').concat(b,'content">\n        <div id="').concat(b,'c">').concat(d,'</div>\n        <div style="clear:both"></div>\n      </div>\n    </div>\n    <div class="').concat(b,'collector" style="display: none"></div>')},b.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},b.prototype.onClick=function(a){this.config.backdrop&&a.target===this.el&&this.hide()},b.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},b.prototype.getContent=function(){var a=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(a,"content #").concat(a,"c"))),this.$content},b.prototype.getTitle=function(a){return void 0===a&&(a={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),a.$?this.$title:this.$title.get(0)},b.prototype.updateContent=function(){var a=this.getContent(),b=a.children(),c=this.getCollector(),d=this.model.get("content");b.length&&c.append(b),a.empty().append(d)},b.prototype.updateTitle=function(){var a=this.getTitle({$:!0});a&&a.empty().append(this.model.get("title"))},b.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},b.prototype.hide=function(){this.model.close()},b.prototype.show=function(){this.model.open()},b.prototype.updateAttr=function(a){var b=this.pfx,c=this.$el,d=this.el,e=[].slice.call(d.attributes).map(function(a){return a.name});c.removeAttr(e.join(" ")),c.attr(jo(jo({},a||{}),{class:"".concat(b,"container ").concat(a&&a.class||"").trim()}))},b.prototype.render=function(){var a=this.$el,b=this.model.toJSON();return b.pfx=this.pfx,b.ppfx=this.ppfx,a.html(this.template(b)),this.updateAttr(),this.updateOpen(),this},b}(aa),jq=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jr=function(a){function b(b){var c=a.call(this,b,"Modal",{stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}})||this;c.events=e;var d=c.events;return c.model=new jm(c),c.model.on("change:open",function(a,c){b.trigger(c?d.open:d.close)}),c.model.on("change",(0,r.debounce)(function(){var a=c._evData(),e=c.config.custom;(0,r.isFunction)(e)&&e(a),b.trigger(d.all,a)},0)),c}return jq(b,a),b.prototype._evData=function(){var a=this,b=this.getTitle(),c=this.getContent(),d=this.model.attributes;return{open:d.open,attributes:d.attributes,title:(0,r.isString)(b)?(0,ab.GZ)(b):b,content:(0,r.isString)(c)?(0,ab.GZ)(c):c.get?c.get(0):c,close:function(){a.close()}}},b.prototype.postRender=function(a){var b=a.model.config.el||a.el,c=this.render();c&&(null==b||b.appendChild(c))},b.prototype.open=function(a){void 0===a&&(a={});var b=a.attributes||{};return a.title&&this.setTitle(a.title),a.content&&this.setContent(a.content),this.model.set("attributes",b),this.model.open(),this.modal&&this.modal.updateAttr(b),this},b.prototype.close=function(){return this.model.close(),this},b.prototype.onceClose=function(a){var b=this.em,c=this.events;return b.once(c.close,a),this},b.prototype.onceOpen=function(a){var b=this.em,c=this.events;return b.once(c.open,a),this},b.prototype.isOpen=function(){return!!this.model.get("open")},b.prototype.setTitle=function(a){return this.model.set("title",a),this},b.prototype.getTitle=function(){return this.model.get("title")},b.prototype.setContent=function(a){return this.model.set("content"," "),this.model.set("content",a),this},b.prototype.getContent=function(){return this.model.get("content")},b.prototype.getContentEl=function(){var a;return null==(a=this.modal)?void 0:a.getContent().get(0)},b.prototype.getModel=function(){return this.model},b.prototype.render=function(){if(!this.config.custom){var a,b=jp.extend(this.config.extend),c=this.modal&&this.modal.el;return this.modal=new b({el:c,model:this.model,config:this.config}),null==(a=this.modal)?void 0:a.render().el}},b.prototype.destroy=function(){var a;null==(a=this.modal)||a.remove()},b}(E),js="sw-visibility",jt="export-template",ju="open-sm",jv="open-tm",jw="open-layers",jx="open-blocks",jy="fullscreen",jz="preview",jA=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jB=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.get("buttons").length&&d.set("buttons",new jE(d.module,d.get("buttons"))),d}return jA(b,a),b.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(b.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"active",{get:function(){return this.get("active")},set:function(a){this.set("active",a)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),b}(G.A),jC=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jD=function(a){function b(b,c){return a.call(this,b,c,jB)||this}return jC(b,a),b.prototype.deactivateAllExceptOne=function(a,b){this.forEach(function(c,d){c!==a&&(c.set("active",!1),b&&c.get("buttons").length&&c.get("buttons").deactivateAllExceptOne(a,b))})},b.prototype.deactivateAll=function(a,b){var c=a||"";this.forEach(function(a){a.get("context")==c&&a!==b&&a.set("active",!1,{fromCollection:!0})})},b.prototype.disableAllButtons=function(a){var b=a||"";this.forEach(function(a,c){a.get("context")==b&&a.set("disable",!0)})},b.prototype.disableAllButtonsExceptOne=function(a,b){this.forEach(function(c,d){c!==a&&(c.set("disable",!0),b&&c.get("buttons").length&&c.get("buttons").disableAllButtonsExceptOne(a,b))})},b}(K);let jE=jD;jD.prototype.model=jB;var jF=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jG=function(a){function b(b,c){var d=a.call(this,b,c)||this,e=d.get("buttons")||[];return d.buttons=new jE(b,e),d}return jF(b,a),b.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(b.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(a){this.set("buttons",a)},enumerable:!1,configurable:!0}),b}(G.A),jH=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jI=function(a){function b(b,c){return a.call(this,b,c,jG)||this}return jH(b,a),b}(K);jI.prototype.model=jG;var jJ=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jK=function(){return(jK=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},jL=function(a){function b(b){var c=a.call(this,b)||this,d=c.model,e=c.em,f=c.pfx,g=c.ppfx,h=d.className,i=d.attributes,j=i.command,k=i.listen;if(c.id=f+d.get("id"),c.activeCls="".concat(f,"active ").concat(g,"four-color"),c.disableCls="".concat(g,"disabled"),c.btnsVisCls="".concat(f,"visible"),c.className=f+"btn"+(h?" "+h:""),c.listenTo(d,"change",c.render),c.listenTo(d,"change:active updateActive",c.updateActive),c.listenTo(d,"checkActive",c.checkActive),c.listenTo(d,"change:bntsVis",c.updateBtnsVis),c.listenTo(d,"change:attributes",c.updateAttributes),c.listenTo(d,"change:className",c.updateClassName),c.listenTo(d,"change:disable",c.updateDisable),e&&(0,r.isString)(j)&&k){var l={fromListen:!0};c.listenTo(e,"run:".concat(j),function(){return d.set("active",!0,l)}),c.listenTo(e,"stop:".concat(j),function(){return d.set("active",!1,l)})}return e&&e.get&&(c.commands=e.get("Commands")),c}return jJ(b,a),b.prototype.tagName=function(){return this.model.get("tagName")},b.prototype.events=function(){return{click:"clicked"}},b.prototype.updateClassName=function(){var a=this.model,b=this.pfx,c=a.className,d=a.get("attributes").class,e="".concat(d||""," ").concat(b,"btn ").concat(c||"");this.$el.attr("class",e.trim())},b.prototype.updateAttributes=function(){var a=this.em,b=this.model,c=this.$el,d=b.get("attributes")||{},e=a&&a.t&&a.t("panels.buttons.titles.".concat(b.id));c.attr(d),e&&c.attr({title:e}),this.updateClassName()},b.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},b.prototype.updateActive=function(a,b,c){void 0===c&&(c={});var d,e=this.model,f=this.commands,g=this.$el,h=this.activeCls,i=c.fromCollection,j=c.fromListen,k=e.get("context"),l=e.get("options"),m=e.command,n={};m&&(f&&(0,r.isString)(m)?n=f.get(m)||{}:(0,r.isFunction)(m)?n=f.create({run:m}):null!==m&&(0,r.isObject)(m)&&(n=f.create(m)),e.active?(i||null==(d=e.collection)||d.deactivateAll(k,e),e.set("active",!0,{silent:!0}).trigger("checkActive"),j||f.runCommand(n,jK(jK({},l),{sender:e})),n.noStop&&e.set("active",!1)):(g.removeClass(h),j||f.stopCommand(n,jK(jK({},l),{sender:e,force:1}))))},b.prototype.updateDisable=function(){var a=this.disableCls,b=this.model.disable;this.$el[b?"addClass":"removeClass"](a)},b.prototype.checkActive=function(){var a=this.model,b=this.$el,c=this.activeCls;a.active?b.addClass(c):b.removeClass(c)},b.prototype.clicked=function(){var a=this.model;a.get("bntsVis")||a.disable||!a.command||this.toggleActive()},b.prototype.toggleActive=function(){var a=this.model,b=this.em,c=a.active,d=a.togglable;(!c||d)&&(a.active=!c,c?a.runDefaultCommand&&b.runDefault():a.stopDefaultCommand&&b.stopDefault())},b.prototype.render=function(){var a=this.model,b=a.get("label"),c=this.$el;return a.get("el")||c.empty(),this.updateAttributes(),b&&c.append(b),this.checkActive(),this.updateDisable(),this},b}(aa),jM=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jN=function(a){function b(b){var c=a.call(this,{collection:b})||this;return c.listenTo(c.collection,"add",c.addTo),c.listenTo(c.collection,"reset remove",c.render),c.className=c.pfx+"buttons",c}return jM(b,a),b.prototype.addTo=function(a){this.addToCollection(a)},b.prototype.addToCollection=function(a,b){var c=b||null,d=new jL({el:a.get("el"),model:a}).render().el;return c?c.appendChild(d):this.$el.append(d),d},b.prototype.render=function(){var a=this,b=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(c){return a.addToCollection(c,b)}),this.$el.append(b),this.$el.attr("class",(0,r.result)(this,"className")),this},b}(aa),jO=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jP=function(){return(jP=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},jQ=function(a){function b(b){var c=a.call(this,{model:b,el:b.get("el")})||this;return c.className=c.pfx+"panel",c.id=c.pfx+b.get("id"),c.listenTo(b,"change:appendContent",c.appendContent),c.listenTo(b,"change:content",c.updateContent),c.listenTo(b,"change:visible",c.toggleVisible),b.view=c,c}return jO(b,a),b.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},b.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},b.prototype.toggleVisible=function(){if(!this.model.get("visible"))return void this.$el.addClass("".concat(this.ppfx,"hidden"));this.$el.removeClass("".concat(this.ppfx,"hidden"))},b.prototype.attributes=function(){return this.model.get("attributes")},b.prototype.initResize=function(){var a=this.em,b=null==a?void 0:a.Editor,c=this.model.get("resizable");if(b&&c){var d=!0===c?[!0,!0,!0,!0]:c,e=d.length,f=void 0,g=void 0,h=void 0,i=!1;if(2==e){var j=d;f=j[0],h=j[0],g=j[1],i=j[1]}else if(4==e){var j=d;f=j[0],g=j[1],h=j[2],i=j[3]}var k=new b.Utils.Resizer(jP({tc:f,cr:g,bc:h,cl:i,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:b.getConfig().stylePrefix,onEnd:function(){a.Canvas.refresh({all:!0})},posFetcher:function(a,b){var c=b.target,d=a.style,e=k.getConfig(),f=e.keyWidth,g=e.keyHeight,h=a.getBoundingClientRect(),i="container"==c,j=d[f],l=d[g];return{left:0,top:0,width:j&&!i?parseFloat(j):h.width,height:l&&!i?parseFloat(l):h.height}}},c&&"boolean"!=typeof c?c:{}));k.blur=function(){},k.focus(this.el)}},b.prototype.render=function(){var a=this.model.buttons,b=this.$el,c=this.ppfx,d="".concat(this.className," ").concat(this.id," ").concat(c,"one-bg ").concat(c,"two-color");if(b.addClass(d),this.toggleVisible(),a.length){var e=new jN(a);b.append(e.render().el)}return b.append(this.model.get("content")),this},b}(aa),jR=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jS=function(a){function b(b){var c=a.call(this,{collection:b})||this;return c.listenTo(b,"add",c.addTo),c.listenTo(b,"reset",c.render),c.listenTo(b,"remove",c.onRemove),c.className=c.pfx+"panels",c}return jR(b,a),b.prototype.onRemove=function(a){var b=a.view;b&&b.remove()},b.prototype.addTo=function(a){this.addToCollection(a)},b.prototype.addToCollection=function(a,b){var c=b||null,d=a.get("el"),e=new jQ(a),f=e.render().el,g=a.get("appendTo");if(d);else if(g){var h=document.querySelector(g);null==h||h.appendChild(f)}else c?c.appendChild(f):this.$el.append(f);return e.initResize(),f},b.prototype.render=function(){var a=this,b=this.$el,c=document.createDocumentFragment();return b.empty(),this.collection.each(function(b){return a.addToCollection(b,c)}),b.append(c),b.attr("class",this.className),this},b}(aa),jT=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jU=function(a){function b(b){var c=a.call(this,b,"Panels",{stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:js,className:"fa fa-square-o",command:"core:component-outline",context:js,attributes:{title:"View components"}},{id:jz,className:"fa fa-eye",command:jz,context:jz,attributes:{title:"Preview"}},{id:jy,className:"fa fa-arrows-alt",command:jy,context:jy,attributes:{title:"Fullscreen"}},{id:jt,className:"fa fa-code",command:jt,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:ju,className:"fa fa-paint-brush",command:ju,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:jv,className:"fa fa-cog",command:jv,togglable:!1,attributes:{title:"Settings"}},{id:jw,className:"fa fa-bars",command:jw,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:jx,className:"fa fa-th-large",command:jx,togglable:!1,attributes:{title:"Open Blocks"}}]}]})||this;return c.panels=new jI(c,c.config.defaults),c}return jT(b,a),b.prototype.getPanels=function(){return this.panels},b.prototype.getPanelsEl=function(){var a;return null==(a=this.PanelsViewObj)?void 0:a.el},b.prototype.addPanel=function(a){return this.panels.add(a)},b.prototype.removePanel=function(a){return this.panels.remove(a)},b.prototype.getPanel=function(a){var b=this.panels.where({id:a});return b.length?b[0]:null},b.prototype.addButton=function(a,b){var c=this.getPanel(a);return c?c.buttons.add(b):null},b.prototype.removeButton=function(a,b){var c=this.getPanel(a);return c&&c.buttons.remove(b)},b.prototype.getButton=function(a,b){var c=this.getPanel(a);if(c){var d=c.buttons.where({id:b});return d.length?d[0]:null}return null},b.prototype.render=function(){var a;return null==(a=this.PanelsViewObj)||a.remove(),this.PanelsViewObj=new jS(this.panels),this.PanelsViewObj.render().el},b.prototype.active=function(){this.getPanels().each(function(a){a.buttons.each(function(a){a.get("active")&&a.trigger("updateActive")})})},b.prototype.disableButtons=function(){this.getPanels().each(function(a){a.buttons.each(function(a){a.get("disable")&&a.trigger("change:disable")})})},b.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},b}(E),jV=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jW=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},jX=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return jV(b,a),b.prototype.build=function(a,b){void 0===b&&(b={});var c=b.em,d=jW(b,["em"]);if(b.cleanId&&c){var e=c.Css.getAll().toJSON().map(function(a){var b=a.selectors,c=b&&1===b.length&&b.models[0];return c&&c.isId()&&c.get("name")}).filter(Boolean),f=d.attributes;d.attributes=function(a,b){var c=(b="function"==typeof f?f(a,b):b).id;return c&&"i"===c[0]&&!a.get("script")&&!a.get("script-export")&&!a.get("attributes").id&&0>e.indexOf(c)&&delete b.id,b}}return a.toHTML(d)},b}(x.Kx),jY=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),jZ=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return jY(b,a),b.prototype.build=function(a){var b=this,c=a.toJSON();return this.beforeEach(c),(0,r.each)(c,function(a,d){var e=c[d];e instanceof x.Kx?c[d]=b.build(e):e instanceof x.pM&&(c[d]=[],e.length&&e.forEach(function(a,e){c[d][e]=b.build(a)}))}),c},b.prototype.beforeEach=function(a){delete a.status},b}(x.Kx),j$=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),j_=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return j$(b,a),b.prototype.mapModel=function(a){var b,c=this,d="",e=a.get("script-export")||a.get("script"),f=a.get("type"),g=a.get("components"),h=a.getId();if(e){var i=a.get("attributes");i=(0,r.extend)({},i,{id:h}),a.set("attributes",i,{silent:!0});var j=a.getScriptString(e),k=a.get("script-props");if(a.get("scriptUpdated")&&!k)this.mapJs[f+"-"+h]={ids:[h],code:j};else{var l=void 0,m=this.mapJs[f];if(k&&(l=a.__getScriptProps()),m)m.ids.push(h),l&&(m.props[h]=l);else{var n={ids:[h],code:j};l&&((b={})[h]=l,n.props=b),this.mapJs[f]=n}}}return g.forEach(function(a){d+=c.mapModel(a)}),d},b.prototype.build=function(a){this.mapJs={},this.mapModel(a);var b="";for(var c in this.mapJs){var d=this.mapJs[c];if(d.code)if(d.props){if(function(a){var b;return 0===((null==(b=a.toString().match(/\{([\s\S]*)\}/m))?void 0:b[1])||"").replace(/^\s*\/\/.*$/gm,"").trim().length}(d.code))continue;b+="\n          var props = ".concat(JSON.stringify(d.props),";\n          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');\n          var els = document.querySelectorAll(ids);\n          for (var i = 0, len = els.length; i < len; i++) {\n            var el = els[i];\n            (").concat(d.code,".bind(el))(props[el.id]);\n          }")}else{var e="#"+d.ids.join(", #");b+="\n          var items = document.querySelectorAll('".concat(e,"');\n          for (var i = 0, len = items.length; i < len; i++) {\n            (function(){\n").concat(d.code,"\n}.bind(items[i]))();\n          }")}}return b},b}(x.Kx),j0=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),j1=function(){return(j1=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};(0,s.hasWin)()&&(f=p(4408),p(8253),p(7389),p(3640));var j2=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return j0(b,a),b.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},b.prototype.init=function(a){return(0,r.bindAll)(this,"onChange"),this.editor=f.fromTextArea(a,j1({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=a,this.editor.on("change",this.onChange),this},b.prototype.onChange=function(){this.trigger("update",this)},b.prototype.getEditor=function(){return this.editor},b.prototype.getElement=function(){return this.element},b.prototype.setElement=function(a){return this.element=a,this},b.prototype.refresh=function(){return this.getEditor().refresh(),this},b.prototype.focus=function(){return this.getEditor().focus(),this},b.prototype.getContent=function(){var a=this.getEditor();return a&&a.getValue()},b.prototype.setContent=function(a,b){var c=this;void 0===b&&(b={});var d=this.editor;if(d){d.setValue(a);var e=this.get("autoFormat");d.autoFormatRange&&(!0===e||Array.isArray(e)&&e.includes(this.get("codeName")))&&(f.commands.selectAll(d),d.autoFormatRange(d.getCursor(!0),d.getCursor(!1)),f.commands.goDocStart(d)),b.noRefresh||setTimeout(function(){return c.refresh()})}},b}(x.Kx);j2.prototype.CodeMirror=f;var j3=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),j4=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return j3(b,a),b.prototype.template=function(a){var b,c,d=a.pfx,e=a.codeName,f=a.label;return t(g||(b=['\n      <div class="','editor" id="',"",'">\n        <div id="','title">','</div>\n        <div id="','code"></div>\n      </div>\n    '],c=['\n      <div class="','editor" id="',"",'">\n        <div id="','title">','</div>\n        <div id="','code"></div>\n      </div>\n    '],Object.defineProperty?Object.defineProperty(b,"raw",{value:c}):b.raw=c,g=b),d,d,e,d,f,d)},b.prototype.initialize=function(a){this.config=a.config||{},this.pfx=this.config.stylePrefix},b.prototype.render=function(){var a,b=this.model,c=this.pfx,d=this.$el,e=b.toJSON(),f=b.get("input")||(null==(a=b.getElement)?void 0:a.call(b));return e.pfx=c,d.html(this.template(e)),d.attr("class","".concat(c,"editor-c")),d.find("#".concat(c,"code")).append(f),this},b}(x.Ss),j5=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),j6=function(){return(j6=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},j7=function(a){function b(b){var c=a.call(this,b,"CodeManager",{stylePrefix:"cm-",optsCodeViewer:{}})||this;c.EditorView=j4;var d=c.config,e=d.pStylePrefix;return e&&(d.stylePrefix=e+d.stylePrefix),c.generators={},c.viewers={},c.defGenerators={html:new jX,css:new eY,json:new jZ,js:new j_},c.defViewers={CodeMirror:new j2},c.loadDefaultGenerators().loadDefaultViewers(),c}return j5(b,a),b.prototype.addGenerator=function(a,b){return this.generators[a]=b,this},b.prototype.getGenerator=function(a){return this.generators[a]},b.prototype.getGenerators=function(){return this.generators},b.prototype.addViewer=function(a,b){return this.viewers[a]=b,this},b.prototype.getViewer=function(a){return this.viewers[a]},b.prototype.getViewers=function(){return this.viewers},b.prototype.createViewer=function(a){void 0===a&&(a={});var b=(0,r.isUndefined)(a.type)?"CodeMirror":a.type,c=this.getViewer(b)&&this.getViewer(b).clone(),d=document.createElement("div"),e=document.createElement("textarea");return d.appendChild(e),c.set(j6(j6({},this.config.optsCodeViewer),a)),c.init(e),c.setElement(d),c},b.prototype.updateViewer=function(a,b){a.setContent(b)},b.prototype.getCode=function(a,b,c){void 0===c&&(c={}),c.em=this.em;var d=this.getGenerator(b);return d?d.build(a,c):""},b.prototype.loadDefaultGenerators=function(){for(var a in this.defGenerators)this.addGenerator(a,this.defGenerators[a]);return this},b.prototype.loadDefaultViewers=function(){for(var a in this.defViewers)this.addViewer(a,this.defViewers[a]);return this},b.prototype.destroy=function(){},b}(E),j8=p(4729),j9=p.n(j8);!function(a){a.update="update",a.updateBefore="updateBefore",a.undo="undo",a.redo="redo",a.load="load",a.projectLoad="project:load",a.projectLoaded="project:loaded",a.projectGet="project:get",a.log="log",a.telemetryInit="telemetry:init",a.destroy="destroy",a.destroyed="destroyed"}(h||(h={}));var ka=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kb=function(){return(kb=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},kc=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},kd=function(a){return a.avoidStore||a.noUndo||a.partial},ke=function(a){return Object.keys(a.changedAttributes())},kf=new WeakMap,kg=function(a){function b(b){var c=a.call(this,b,"UndoManager",{maximumStackLength:500,trackSelection:!0})||this;return c.config._disable&&(c.config.maximumStackLength=0),c.um=new(j9())(kb({track:!0,register:[]},c.config)),c.um.changeUndoType("change",{condition:function(a){var b=a.get("_undo");if(b){var c=a.get("_undoexc");if((0,r.isArray)(c)&&ke(a).some(function(a){return c.indexOf(a)>=0}))return!1;if((0,r.isBoolean)(b)||(0,r.isArray)(b)&&ke(a).some(function(a){return b.indexOf(a)>=0}))return!0}return!1},on:function(a,b,c){var d=kf.get(a);d||(d=a.previousAttributes(),kf.set(a,d));var e=c||b||{};if(e.noUndo&&setTimeout(function(){kf.delete(a)}),!kd(e)){var f=a.toJSON({fromUndo:!0}),g={object:a,before:d,after:f};if(kf.delete(a),!(0,r.isEmpty)(f))return g}}}),c.um.changeUndoType("add",{on:function(a,b,d){if(void 0===d&&(d={}),!kd(d)&&c.isRegistered(b))return{object:b,before:void 0,after:a,options:kb(kb({},d),{fromUndo:!0})}}}),c.um.changeUndoType("remove",{on:function(a,b,d){if(void 0===d&&(d={}),!kd(d)&&c.isRegistered(b))return{object:b,before:a,after:void 0,options:kb(kb({},d),{fromUndo:!0})}}}),c.um.changeUndoType("reset",{undo:function(a,b){a.reset(b,{fromUndo:!0})},redo:function(a,b,c){a.reset(c,{fromUndo:!0})},on:function(a,b){if(void 0===b&&(b={}),!kd(b)&&c.isRegistered(a))return{object:a,before:b.previousModels,after:kc([],a.models,!0),options:kb(kb({},b),{fromUndo:!0})}}}),c.um.on("undo redo",function(){b.getSelectedAll().map(function(a){return a.trigger("rerender:layer")})}),[h.undo,h.redo].forEach(function(a){return c.um.on(a,function(){return b.trigger(a)})}),c}return ka(b,a),b.prototype.postLoad=function(){var a=this.config,b=this.em;a.trackSelection&&b&&this.add(b.get("selected"))},b.prototype.add=function(a){return this.um.register(a),this},b.prototype.remove=function(a){return this.um.unregister(a),this},b.prototype.removeAll=function(){return this.um.unregisterAll(),this},b.prototype.start=function(){return this.um.startTracking(),this},b.prototype.stop=function(){return this.um.stopTracking(),this},b.prototype.undo=function(a){void 0===a&&(a=!0);var b=this.em,c=this.um;return b.isEditing()||c.undo(a),this},b.prototype.undoAll=function(){return this.um.undoAll(),this},b.prototype.redo=function(a){void 0===a&&(a=!0);var b=this.em,c=this.um;return b.isEditing()||c.redo(a),this},b.prototype.redoAll=function(){return this.um.redoAll(),this},b.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},b.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},b.prototype.isRegistered=function(a){return!!this.getInstance().objectRegistry.isRegistered(a)},b.prototype.getStack=function(){return this.um.stack},b.prototype.getStackGroup=function(){var a=[],b=[];return this.getStack().forEach(function(c){var d=c.get("magicFusionIndex");0>b.indexOf(d)&&(b.push(d),a.push(c))}),a},b.prototype.skip=function(a){var b=!!this.um.isTracking();b&&this.stop(),a(),b&&this.start()},b.prototype.getGroupedStack=function(){var a={},b=this.getStack(),c=function(a,b){var c=a.attributes,d=c.type,e=c.after,f=c.before,g=c.object,h=c.options;return{index:b,type:d,after:e,before:f,object:g,options:void 0===h?{}:h}};return b.forEach(function(b,d){var e=b.get("magicFusionIndex"),f=c(b,d);a[e]?a[e].push(f):a[e]=[f]}),Object.keys(a).map(function(b){var c=a[b];return{index:c[c.length-1].index,actions:c,labels:(0,r.unique)(c.reduce(function(a,b){var c,d=null==(c=b.options)?void 0:c.action;return d&&a.push(d),a},[]))}})},b.prototype.goToGroup=function(a){var b=this;if(a){var c=this.getPointer(),d=a.index-c;(0,r.times)(Math.abs(d),function(){b[d<0?"undo":"redo"](!1)})}},b.prototype.getPointer=function(){return this.getStack().pointer},b.prototype.clear=function(){return this.um.clear(),this},b.prototype.getInstance=function(){return this.um},b.prototype.destroy=function(){this.clear().removeAll()},b}(E),kh=function(){return(kh=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};!function(a){a[a.ACTIVE=1]="ACTIVE",a[a.INACTIVE=0]="INACTIVE",a[a.DISABLED=-1]="DISABLED"}(i||(i={}));var ki="_rte",kj={ACTIVE:1,INACTIVE:0,DISABLED:-1},kk=function(a,b){void 0===b&&(b="A");var c=a.selection()||{},d=c.anchorNode,e=c.focusNode,f=null==d?void 0:d.parentNode,g=null==e?void 0:e.parentNode;return(null==f?void 0:f.nodeName)==b||(null==g?void 0:g.nodeName)==b},kl="data-selectme",km={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(a){return a.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(a){return a.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(a){return a.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(a){return a.exec("strikeThrough")}},link:{icon:'<svg viewBox="0 0 24 24">\n          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />\n        </svg>',name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(a){return a&&a.selection()&&kk(a)?kj.ACTIVE:kj.INACTIVE},result:function(a){kk(a)?a.exec("unlink"):a.insertHTML('<a href="" '.concat(kl,">").concat(a.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:'<svg viewBox="0 0 24 24">\n            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />\n        </svg>',attributes:{title:"Wrap for style"},state:function(a){return(null==a?void 0:a.selection())&&kk(a,"SPAN")?kj.DISABLED:kj.INACTIVE},result:function(a){kk(a,"SPAN")||a.insertHTML("<span ".concat(kl,">").concat(a.selection(),"</span>"),{select:!0})}}},kn=function(){function a(a,b,c){void 0===c&&(c={});var d=this;if(this.em=a,this.settings=c,b[ki])return b[ki];b[ki]=this,this.setEl(b),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var e=(c.actions||[]).map(function(a){var b=a;return(0,r.isString)(a)?b=kh({},km[a]):km[a.name]&&(b=kh(kh({},km[a.name]),a)),b}),f=e.length?e:Object.keys(km).map(function(a){return km[a]});c.classes=kh({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},c.classes);var g=c.classes,h=c.actionbar;if(this.actionbar=h,this.classes=g,this.actions=f,!h){if(!this.isCustom(c.module)){var i=c.actionbarContainer;(h=document.createElement("div")).className=g.actionbar,null==i||i.appendChild(h),this.actionbar=h}f.forEach(function(a){return d.addAction(a)})}return c.styleWithCSS&&this.exec("styleWithCSS"),this}return a.prototype.isCustom=function(a){var b=a||this.em.RichTextEditor;return!!((null==b?void 0:b.config.custom)||(null==b?void 0:b.customRte))},a.prototype.destroy=function(){},a.prototype.setEl=function(a){this.el=a,this.doc=a.ownerDocument},a.prototype.updateActiveActions=function(){var a=this,b=this.getActions();b.forEach(function(b){var c=b.update,d=b.btn,e=a.classes,f=e.active,g=e.inactive,h=e.disabled,j=b.state,k=b.name,l=a.doc,m=i.INACTIVE;if(d&&(d.className=d.className.replace(f,"").trim(),d.className=d.className.replace(g,"").trim(),d.className=d.className.replace(h,"").trim()),j){var n=j(a,l);if(m=n,d)switch(n){case kj.ACTIVE:d.className+=" ".concat(f);break;case kj.INACTIVE:d.className+=" ".concat(g);break;case kj.DISABLED:d.className+=" ".concat(h)}}else l.queryCommandSupported(k)&&l.queryCommandState(k)&&(d&&(d.className+=" ".concat(f)),m=i.ACTIVE);b.currentState=m,null==c||c(a,b)}),b.length&&this.em.RichTextEditor.__dbdTrgCustom()},a.prototype.enable=function(a){return this.enabled?this:this.__toggleEffects(!0,a)},a.prototype.disable=function(){return this.__toggleEffects(!1)},a.prototype.__toggleEffects=function(a,b){void 0===a&&(a=!1),void 0===b&&(b={});var c=a?ab.on:ab.AU,d=this.el,e=this.doc,f=this.actionbarEl();if(f&&(f.style.display=a?"":"none"),d.contentEditable="".concat(!!a),c(d,"mouseup keyup",this.updateActiveActions),c(e,"keydown",this.__onKeydown),c(e,"paste",this.__onPaste),this.enabled=a,a){var g=b.event;if(this.syncActions(),this.updateActiveActions(),g){var h=null;if(e.caretRangeFromPoint){var i=(0,ab.G2)(g);h=e.caretRangeFromPoint(i.clientX,i.clientY)}else g.rangeParent&&(h=e.createRange()).setStart(g.rangeParent,g.rangeOffset);var j=e.getSelection();null==j||j.removeAllRanges(),h&&(null==j||j.addRange(h))}d.focus()}return this},a.prototype.__onKeydown=function(a){var b=this.em,c=b.RichTextEditor.getConfig().onKeydown;if(c)return c({ev:a,rte:this,editor:b.getEditor()});var d=this.doc;"Enter"!==a.key||["insertOrderedList","insertUnorderedList"].some(function(a){return d.queryCommandState(a)})||(d.execCommand("insertLineBreak"),a.preventDefault())},a.prototype.__onPaste=function(a){var b=this.em,c=b.RichTextEditor.getConfig().onPaste;if(c)return c({ev:a,rte:this,editor:b.getEditor()});var d=a.clipboardData,e=d.getData("text"),f=d.getData("text/html");if(e&&!f){a.preventDefault();var g=e.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,g)}},a.prototype.syncActions=function(){var a=this;this.getActions().forEach(function(b){if(a.actionbar&&(!b.state||b.state&&b.state(a,a.doc)>=0)){var c=b.event||"click",d=b.btn;d&&(d["on".concat(c)]=function(){b.result(a,b),a.updateActiveActions()})}})},a.prototype.addAction=function(a,b){void 0===b&&(b={});var c=b.sync,d=this.actionbarEl();if(d){var e=a.icon,f=a.attributes,g=void 0===f?{}:f,h=document.createElement("span");for(var i in h.className=this.classes.button,a.btn=h,g)h.setAttribute(i,g[i]);"string"==typeof e?h.innerHTML=e:h.appendChild(e),d.appendChild(h)}c&&(this.actions.push(a),this.syncActions())},a.prototype.getActions=function(){return this.actions},a.prototype.selection=function(){return this.doc.getSelection()},a.prototype.exec=function(a,b){this.doc.execCommand(a,!1,b)},a.prototype.actionbarEl=function(){return this.actionbar},a.prototype.insertHTML=function(a,b){var c=(void 0===b?{}:b).select,d=this.em,e=this.doc,f=this.el,g=e.getSelection();if(g&&g.rangeCount){var h=(0,s.getComponentModel)(f)||d.getSelected(),i=e.createElement("div"),j=g.getRangeAt(0);j.deleteContents(),(0,r.isString)(a)?i.innerHTML=a:a&&i.appendChild(a),Array.prototype.slice.call(i.childNodes).forEach(function(a){j.insertNode(a)}),g.removeAllRanges(),g.addRange(j),f.focus(),c&&h&&(h.once("rte:disable",function(){var a=h.find("[".concat(kl,"]"))[0];a&&(d.setSelected(a),a.removeAttributes(kl))}),h.trigger("disable"))}},a}();!function(a){a.enable="rte:enable",a.disable="rte:disable",a.custom="rte:custom"}(j||(j={}));var ko=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kp=function(){return(kp=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},kq=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},kr=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},ks=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},kt="".concat(L.refresh," frame:scroll ").concat(Y.I.update),ku=function(a){function b(b){var c=a.call(this,b,"RichTextEditor",{stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1})||this;c.events=j;var d=c.config,e=d.pStylePrefix;e&&(d.stylePrefix=e+d.stylePrefix),c.pfx=d.stylePrefix,c.actions=d.actions||[];var f=new x.Kx;return c.model=f,f.on("change:currentView",c.__trgCustom,c),c.__dbdTrgCustom=(0,r.debounce)(function(){return c.__trgCustom()},0),c}return ko(b,a),b.prototype.onLoad=function(){if((0,s.hasWin)()){var a=this.config,b=a.pStylePrefix,c=a.custom,d=(0,ab.a_)("div",{class:(0,ab.cx)("".concat(b,"rte-toolbar"),!c&&"".concat(b,"one-bg ").concat(b,"rte-toolbar-ui"))});this.toolbar=d,this.initRte((0,ab.a_)("div")),(0,ab.on)(d,"mousedown",function(a){return a.stopPropagation()})}},b.prototype.__trgCustom=function(){var a=this.model,b=this.em,c=this.events;b.trigger(c.custom,{enabled:!!a.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},b.prototype.destroy=function(){var a,b,c;null==(a=this.globalRte)||a.destroy(),null==(c=null==(b=this.customRte)?void 0:b.destroy)||c.call(b),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,ab.YZ)(this.toolbar)},b.prototype.postRender=function(a){var b=a.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),b.getToolsEl().appendChild(this.toolbar)},b.prototype.initRte=function(a){var b=this.globalRte,c=this.em,d=this.pfx,e=this.actionbar,f=this.config,g=this.actions||ks([],f.actions,!0);return b?(b.em=c,b.setEl(a)):(b=new kn(c,a,{classes:{actionbar:"".concat(d,"actionbar"),button:"".concat(d,"action"),active:"".concat(d,"active"),inactive:"".concat(d,"inactive"),disabled:"".concat(d,"disabled")},actions:g,actionbar:e,actionbarContainer:this.toolbar,module:this}),this.globalRte=b),b.actionbar&&(this.actionbar=b.actionbar),b.actions&&(this.actions=b.actions),b},b.prototype.add=function(a,b){var c;void 0===b&&(b={}),b.name=a,null==(c=this.globalRte)||c.addAction(b,{sync:!0})},b.prototype.get=function(a){var b,c;return null==(b=this.globalRte)||b.getActions().forEach(function(b){b.name==a&&(c=b)}),c},b.prototype.getAll=function(){var a;return(null==(a=this.globalRte)?void 0:a.getActions())||[]},b.prototype.remove=function(a){var b,c=this.getAll(),d=this.get(a);if(d){var e=d.btn,f=c.indexOf(d);null==(b=null==e?void 0:e.parentNode)||b.removeChild(e),c.splice(f,1)}return d},b.prototype.run=function(a){var b=this.globalRte,c=(0,r.isString)(a)?this.get(a):a;b&&c&&(c.result(b,c),b.updateActiveActions())},b.prototype.getToolbarEl=function(){return this.toolbar},b.prototype.updatePosition=function(){var a=this.em,b=this.toolbar,c=a.Canvas,d=b.style,e=c.getTargetToElementFixed(this.lastEl,b,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(a){var b=e[a];(0,s.isDef)(b)&&(d[a]=(0,r.isString)(b)?b:(b||0)+"px")})},b.prototype.enable=function(a,b,c){return kq(this,void 0,void 0,function(){var d,e,f,g,h,i;return kr(this,function(j){switch(j.label){case 0:return this.lastEl=a.el,d=this,e=d.customRte,f=d.em,g=d.events,h=a.getChildrenContainer(),this.toolbar.style.display="",[4,e?e.enable(h,b,c):this.initRte(h).enable(c)];case 1:return i=j.sent(),f&&(setTimeout(this.updatePosition.bind(this),0),f.off(kt,this.updatePosition,this),f.on(kt,this.updatePosition,this),f.trigger(g.enable,a,i)),this.model.set({currentView:a}),[2,i]}})})},b.prototype.getContent=function(a,b){return kq(this,void 0,void 0,function(){var c,d;return kr(this,function(e){switch(e.label){case 0:if(c=this.customRte,d=a.getChildrenContainer(),!(c&&b&&(0,r.isFunction)(c.getContent)))return[3,2];return[4,c.getContent(d,b,{view:a})];case 1:return[2,e.sent()];case 2:return[2,d.innerHTML]}})})},b.prototype.hideToolbar=function(){var a=this.toolbar.style,b="-1000px";a.top=b,a.left=b,a.display="none"},b.prototype.disable=function(a,b){return kq(this,arguments,void 0,function(a,b,c){var d,e,f,g,h,i;return void 0===c&&(c={}),kr(this,function(j){switch(j.label){case 0:if(d={},e=this,f=e.em,g=e.events,!(h=this.customRte))return[3,2];return[4,h.disable(a.getChildrenContainer(),b,kp(kp({},c),{view:a}))];case 1:return(i=j.sent())&&(d=i),[3,3];case 2:b&&b.disable(),j.label=3;case 3:return this.hideToolbar(),f&&(f.off(kt,this.updatePosition,this),c.fromMove||f.trigger(g.disable,a,b)),this.model.unset("currentView"),[2,d]}})})},b}(E),kv=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kw=function(){return(kw=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},kx=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},ky=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},kz=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return kv(b,a),b.getDefaults=function(){return(0,r.result)(this.prototype,"defaults")},b.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},b.prototype.initialize=function(a,c){void 0===a&&(a={}),void 0===c&&(c={}),this.em=c.em;var d=this.getId()||"",e=this.get("name")||this.get("label")||"";this.get("property")||this.set("property",(e||d).replace(/ /g,"-"));var f=this.get("property");this.get("id")||this.set("id",f),e||this.set("name",(0,s.capitalize)(f).replace(/-/g," ")),this.on("change",this.__upTargets),b.callInit(this,a,c)},b.prototype.__getParentProp=function(){var a,b;return null==(b=null==(a=this.collection)?void 0:a.opts)?void 0:b.parentProp},b.prototype.__upTargets=function(a,b){var c,d=this;void 0===b&&(b={});var e=this.em.Styles,f=this.getName(),g=b.__clear,h=g?"":this.__getFullValue(b),i=this.__getParentProp(),j=this.changedAttributes(),k=(0,r.keys)(j).reduce(function(a,b){return a[b]=d.previous(b),a},{}),l=ky(ky([],(0,r.keys)(this.__getClearProps()),!0),["__p"],!1),m=(0,r.keys)(j),n=!b.__up&&!i&&(g||l.some(function(a){return m.indexOf(a)>=0})),o=this.get("onChange"),p={property:this,from:k,to:j,value:h,opts:b};e.__trgEv(e.events.propertyUpdate,p),o&&o(p),n&&this.__upTargetsStyle(((c={})[f]=h,c),b)},b.prototype.__upTargetsStyle=function(a,b){var c,d=null==(c=this.em)?void 0:c.get("StyleManager");null==d||d.addStyleTargets(kw(kw({},a),{__p:!!b.avoidStore}),b)},b.prototype._up=function(a,b){void 0===b&&(b={}),b.noTarget&&(b.__up=!0);var c=b.partial,d=kx(b,["partial"]);return a.__p=!!(d.avoidStore||c),this.set(a,kw(kw({},d),{avoidStore:a.__p}))},b.prototype.up=function(a,b){void 0===b&&(b={}),this.set(a,kw(kw({},b),{__up:!0}))},b.prototype.init=function(){},b.prototype.getId=function(){return this.get("id")},b.prototype.getType=function(){return this.get("type")},b.prototype.getName=function(){return this.get("property")},b.prototype.getLabel=function(a){void 0===a&&(a={});var b,c=a.locale,d=this.getId(),e=this.get("name")||this.get("label");return(void 0===c||c)&&(null==(b=this.em)?void 0:b.t("styleManager.properties.".concat(d)))||e},b.prototype.getValue=function(a){void 0===a&&(a={});var b=a.noDefault,c=this.get("value");return this.hasValue()||b?c:this.getDefaultValue()},b.prototype.hasValue=function(a){void 0===a&&(a={});var b=a.noParent&&this.getParentTarget(),c=this.get("value");return!(0,r.isUndefined)(c)&&""!==c&&!b},b.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},b.prototype.getStyle=function(a){void 0===a&&(a={});var b,c=this.getName(),d=a.camelCase?(0,s.camelCase)(c):c;return(b={})[d]=this.__getFullValue(a),b},b.prototype.getDefaultValue=function(){var a=this.get("default");return"".concat((0,r.isUndefined)(a)?this.get("defaults"):a)},b.prototype.upValue=function(a,b){void 0===b&&(b={});var c=null===a||""===a?this.__getClearProps():this.__parseValue(a,b);return this._up(c,b)},b.prototype.isVisible=function(){return!!this.get("visible")},b.prototype.clear=function(a){return void 0===a&&(a={}),this._up(this.__getClearProps(),kw(kw({},a),{__clear:!0})),this},b.prototype.canClear=function(){var a=this.getParent();return a?a.__canClearProp(this):this.hasValue({noParent:!0})},b.prototype.getParent=function(){return this.__getParentProp()},b.prototype.isFull=function(){return!!this.get("full")},b.prototype.__parseValue=function(a,b){return this.parseValue(a,b)},b.prototype.__getClearProps=function(){return{value:"",important:!1}},b.prototype.setValue=function(a,b,c){void 0===b&&(b=!0),void 0===c&&(c={});var d=this.parseValue(a),e=!b;e||this.set({value:void 0},{avoidStore:e,silent:!0}),this.set(d,kw({avoidStore:e},c))},b.prototype.setValueFromInput=function(a,b,c){void 0===c&&(c={}),this.setValue(a,b,kw(kw({},c),{fromInput:1}))},b.prototype.parseValue=function(a,b){void 0===b&&(b={});var c={value:a},d="!important",e=this.get("functionName")||"";if((0,r.isString)(a)&&-1!==a.indexOf(d)&&(c.value=a.replace(d,"").trim(),c.important=!0),!e&&!b.complete)return c;var f=[],g="".concat(c.value).trim(),h=g.indexOf("(")+1,i=e||g.substring(0,h-1);if(i&&(c.functionName=i),!e||0===g.indexOf("".concat(e,"("))){var j=g.lastIndexOf(")");f.push(h),j>=0&&f.push(j),c.value=String.prototype.substring.apply(g,f)}if(b.numeric){var k=parseFloat(c.value);c.unit=c.value.replace(k,""),c.value=k}return c},b.prototype.__getFullValue=function(a){var b=(void 0===a?{}:a).withDefault;return!this.hasValue()&&b?this.getDefaultValue():this.getFullValue()},b.prototype.getFullValue=function(a,b){void 0===b&&(b={});var c=this.get("functionName"),d=this.getDefaultValue(),e=(0,r.isUndefined)(a)?this.get("value"):a,f=this.hasValue();if(e&&d&&e===d)return d;if(c&&f){var g="url"===c?"'".concat(e.replace(/'|"/g,""),"'"):e;e="".concat(c,"(").concat(g,")")}return f&&this.get("important")&&!b.skipImportant&&(e="".concat(e," !important")),e||""},b.prototype.__setParentTarget=function(a){this.up({parentTarget:a})},b.prototype.getParentTarget=function(){return this.get("parentTarget")||null},b.prototype.__parseFn=function(a){void 0===a&&(a="");var b=a.indexOf("(")+1,c=a.lastIndexOf(")");return{name:a.substring(0,b-1).trim(),value:String.prototype.substring.apply(a,[b,c>=0?c:void 0]).trim()}},b.prototype.__checkVisibility=function(a){var b=a.target,c=a.component,d=a.sector,e=a.sectors,f=c||b;if(!f)return!1;var g=this.getId(),h=this.getName(),i=this.attributes,j=i.requires,k=i.requiresParent,l=i.toRequire,m=i.isVisible,n=f.get("unstylable"),o=f.get("stylable-require"),p=f.get("stylable");if((0,r.isFunction)(m))return!!m({property:this,sector:d,target:b,component:c});if((0,r.isArray)(p)&&(p=p.indexOf(h)>=0),(0,r.isArray)(n)&&(p=0>n.indexOf(h)),l&&(p=!b||o&&(o.indexOf(g)>=0||o.indexOf(h)>=0)),e&&j){var q=(0,r.keys)(j);e.forEach(function(a){a.getProperties().forEach(function(a){if((0,r.includes)(q,a.id)){var b=j[a.id];p=p&&(0,r.includes)(b,a.get("value"))}})})}if(k){var t=c&&c.parent(),u=t&&t.getEl();if(u){var v=(0,s.hasWin)()?window.getComputedStyle(u):{};(0,r.each)(k,function(a,b){p=p&&v[b]&&(0,r.includes)(a,v[b])})}else p=!1}return!!p},b}(x.Kx);kz.callParentInit=function(a,b,c,d){void 0===d&&(d={}),a.prototype.initialize.apply(b,[c,kw(kw({},d),{skipInit:1})])},kz.callInit=function(a,b,c){void 0===c&&(c={}),c.skipInit||a.init(b,c)};var kA=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kB=function(){return(kB=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},kC=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},kD=function(a){return"integer"===a||"number"===a},kE=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return kA(b,a),b.prototype.defaults=function(){return kB(kB({},kz.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},b.prototype.initialize=function(a,b){void 0===a&&(a={}),void 0===b&&(b={}),kz.callParentInit(kz,this,a,b);var c=this.em,d=new ls(this.get("properties")||[],{em:c,parentProp:this});this.set("properties",d,{silent:!0}),this.listenTo(d,"change",this.__upProperties),kz.callInit(this,a,b)},Object.defineProperty(b.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),b.prototype.getProperties=function(){return kC([],this.get("properties").models,!0)},b.prototype.getProperty=function(a){return this.properties.filter(function(b){return b.getId()===a||b.getName()===a})[0]},b.prototype.getPropertyAt=function(a){return this.get("properties").at(a)},b.prototype.isDetached=function(){return!!this.get("detached")},b.prototype.getValues=function(a){var b=(void 0===a?{}:a).byName;return this.getProperties().reduce(function(a,c){return a[b?c.getName():c.getId()]="".concat(c.__getFullValue()),a},{})},b.prototype.getSeparator=function(){return this.getSplitSeparator()},b.prototype.getJoin=function(){return this.__getJoin()},b.prototype.getStyleFromProps=function(a){void 0===a&&(a={});var b,c=this.getName(),d=this.__getJoin(),e=this.get("toStyle"),f=this.getValues(),g={};if(e)g=e(f,{join:d,name:c,property:this});else if(f=this.getValues({byName:!0}),this.isDetached())g=f;else{var h=this.getProperties().map(function(a){return a.__getFullValue({withDefault:1})}).filter(Boolean).join(d);(b={})[c]=h,g=b}return this.isDetached()?g[c]="":(g[c]=g[c]||"",g=kB(kB({},g),this.getProperties().reduce(function(a,b){return a[b.getName()]="",a},{}))),a.camelCase?Object.keys(g).reduce(function(a,b){return a[(0,s.camelCase)(b)]=g[b],a},{}):g},b.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},b.prototype.__upProperties=function(a,b){if(void 0===b&&(b={}),!b.__up&&!b.__clearIn){var c=this.__getParentProp();if(c)return c.__upProperties(this,b);this.__upTargetsStyleProps(b,a)}},b.prototype.__upTargetsStyleProps=function(a,b){void 0===a&&(a={});var c,d=this.getStyleFromProps();if(this.isDetached()&&b){var e=b.getName();(c={})[e]=d[e],d=c}this.__upTargetsStyle(d,a)},b.prototype._up=function(a,b){return void 0===b&&(b={}),this.__setProperties(this.__getSplitValue(a.value),b),kz.prototype._up.call(this,a,b),this},b.prototype.getStyle=function(a){return this.getStyleFromProps(a)},b.prototype.__getFullValue=function(a){return(void 0===a&&(a={}),this.isDetached()||a.__clear)?"":bj(this.getStyleFromProps()[this.getName()]||"")},b.prototype.__getJoin=function(){var a=this.get("join");return(0,r.isString)(a)?a:this.get("separator")},b.prototype.__styleHasProps=function(a){return void 0===a&&(a={}),kC([this.getName()],this.getProperties().map(function(a){return a.getName()}),!0).some(function(b){return!(0,r.isUndefined)(a[b])&&""!==a[b]})},b.prototype.__splitValue=function(a,b){return bj(a).split(b).map(function(a){return a.trim()}).filter(Boolean)},b.prototype.__splitStyleName=function(a,b,c){var d=a[b];return this.__splitValue(d||"",c)},b.prototype.__getSplitValue=function(a,b){void 0===a&&(a="");var c=(void 0===b?{}:b).byName,d=this.getProperties(),e=4===d.length&&d.every(function(a){return kD(a.getType())}),f=this.__splitValue(a,this.getSplitSeparator()),g={};return d.forEach(function(a,b){var d=f[b],h=(0,r.isUndefined)(d)?"":d;if(e){var i=f.length;h=f[b]||f[b%i+(1!=i&&i%2?1:0)]||h}g[c?a.getName():a.getId()]=h||""}),g},b.prototype.__getPropsFromStyle=function(a,b){if(void 0===a&&(a={}),void 0===b&&(b={}),!this.__styleHasProps(a))return null;var c=b.byName,d=this.getName(),e=this.getProperties(),f=this.getSplitSeparator(),g=this.get("fromStyle"),h=g?g(a,{property:this,name:d,separator:f}):{};if(!g){var i=a[d];h=this.__getSplitValue(i||"",{byName:c}),e.forEach(function(b){var d=a[b.getName()],e=c?b.getName():b.getId();(0,r.isUndefined)(d)||""===d||(h[e]=d)})}return h},b.prototype.__setProperties=function(a,b){void 0===a&&(a={}),void 0===b&&(b={}),this.getProperties().forEach(function(c){var d=a[c.getId()];c.__getFullValue()!==d&&c.upValue(d,b)});var c=(0,r.keys)(a).map(function(b){return a[b]}).join(" ");this.set("value",c,{silent:!0})},b.prototype.clear=function(){var a=this;return this.getProperties().map(function(b){return b.clear({__clearIn:!a.isDetached()})}),kz.prototype.clear.call(this),this},b.prototype.hasValue=function(a){return this.getProperties().some(function(b){return b.hasValue(a)})},b.prototype.getFullValue=function(){return this.__getFullValue()},b.prototype.__canClearProp=function(a){return this.isDetached()&&a.hasValue({noParent:!0})},b}(kz),kF=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kG=function(){return(kG=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},kH=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},kI=/,(?![^\(]*\))/,kJ=/\s(?![^(]*\))/,kK=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return kF(b,a),b.prototype.defaults=function(){return kG(kG({},kE.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},b.prototype.initialize=function(a,b){void 0===a&&(a={}),void 0===b&&(b={}),kE.callParentInit(kE,this,a,b);var c=new ik(this.get("layers"),{prop:this});c.property=this,c.properties=this.get("properties"),this.set("layers",c,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(c,"add remove",this.__upLayers),kE.callInit(this,a,b)},Object.defineProperty(b.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),b.prototype.getLayers=function(){return this.layers.models},b.prototype.hasLayers=function(){return this.getLayers().length>0},b.prototype.getLayer=function(a){return void 0===a&&(a=0),this.layers.at(a)||void 0},b.prototype.getSelectedLayer=function(){var a=this.get("selectedLayer");return a&&a.getIndex()>=0?a:void 0},b.prototype.selectLayer=function(a){return this.set("selectedLayer",a,{__select:!0})},b.prototype.selectLayerAt=function(a){void 0===a&&(a=0);var b=this.getLayer(a);return b&&this.selectLayer(b)},b.prototype.moveLayer=function(a,b){void 0===b&&(b=0);var c=this.layers,d=a?a.getIndex():-1;d>=0&&(0,r.isNumber)(b)&&b>=0&&b<c.length&&d!==b&&(this.removeLayer(a),c.add(a,{at:b}))},b.prototype.addLayer=function(a,b){void 0===a&&(a={}),void 0===b&&(b={});var c={};return this.getProperties().forEach(function(b){var d=b.getId(),e=a[d];c[d]=(0,r.isUndefined)(e)?b.getDefaultValue():e}),this.layers.push({values:c},b)},b.prototype.removeLayer=function(a){return this.layers.remove(a)},b.prototype.removeLayerAt=function(a){void 0===a&&(a=0);var b=this.getLayer(a);return b?this.removeLayer(b):null},b.prototype.getLayerLabel=function(a){var b="";if(a){var c=this.get("layerLabel"),d=a.getValues(),e=a.getIndex();if(c)b=c(a,{index:e,values:d,property:this});else{var f=[];this.getProperties().map(function(a){f.push(d[a.getId()])}),b=f.filter(Boolean).join(" ")}}return b},b.prototype.getStyleFromLayer=function(a,b){void 0===b&&(b={});var c,d,e=this.__getJoin(),f=this.__getJoinLayers(),g=this.get("toStyle"),h=this.getName(),i=a.getValues();if(g)d=g(i,{join:e,joinLayers:f,name:h,layer:a,property:this});else{var j=this.getProperties().map(function(a){var c=a.getName(),d=i[a.getId()],e=(0,r.isUndefined)(d)?a.getDefaultValue():d;if(b.number&&kD(a.getType())){var f=a.parseValue(d,b.number);e="".concat(f.value).concat(f.unit)}return{name:c,value:e}});d=this.isDetached()?j.reduce(function(a,b){return a[b.name]=b.value,a},{}):((c={})[this.getName()]=j.map(function(a){return a.value}).join(e),c)}return b.camelCase?Object.keys(d).reduce(function(a,b){return a[(0,s.camelCase)(b)]=d[b],a},{}):d},b.prototype.getStylePreview=function(a,b){void 0===b&&(b={});var c={};return this.get("preview")&&(c=this.getStyleFromLayer(a,b)),c},b.prototype.getLayerSeparator=function(){var a=this.get("layerSeparator");return(0,r.isString)(a)?new RegExp("".concat(a,"(?![^\\(]*\\))")):a},b.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},b.prototype.__upProperties=function(a,b){void 0===b&&(b={});var c,d=this.getSelectedLayer();d&&(d.upValues(((c={})[a.getId()]=a.__getFullValue(),c)),b.__up||this.__upTargetsStyleProps(b))},b.prototype.__upLayers=function(a,b,c){this.__upTargetsStyleProps(c||b)},b.prototype.__upTargets=function(a,b){if(void 0===b&&(b={}),!b.__select)return kz.prototype.__upTargets.call(this,a,b)},b.prototype.__upTargetsStyleProps=function(a){void 0===a&&(a={}),this.__upTargetsStyle(this.getStyleFromLayers(a),a)},b.prototype.__upTargetsStyle=function(a,b){return kz.prototype.__upTargetsStyle.call(this,a,b)},b.prototype.__upSelected=function(a,b){var c=(void 0===a?{}:a).noEvent;void 0===b&&(b={});var d=this.em.Styles,e=this.getSelectedLayer(),f=null==e?void 0:e.getValues();f&&this.getProperties().forEach(function(a){var c,d=null!=(c=f[a.getId()])?c:"";a.__getFullValue()!==d&&a.upValue(d,kG(kG({},b),{__up:!0}))}),c||d.__trgEv(d.events.layerSelect,{property:this})},b.prototype._up=function(a,b){void 0===b&&(b={});var c=a.__layers,d=kH(a,["__layers"]);return this.isDetached()||this.__setLayers(void 0===c?[]:c),this.__upSelected({noEvent:!0},b),kz.prototype._up.call(this,d,b),this},b.prototype.__setLayers=function(a,b){void 0===a&&(a=[]),void 0===b&&(b={});var c=this.layers,d=a.map(function(a){return{values:a}});c.length===d.length?d.map(function(a,b){var d;return null==(d=c.at(b))?void 0:d.upValues(a.values)}):c.reset(d),this.set({isEmptyValue:!!b.isEmptyValue}),this.__upSelected({noEvent:!0})},b.prototype.__parseValue=function(a){var b=this,c=this.parseValue(a);return c.__layers=a.split(kI).map(function(a){return a.trim()}).map(function(a){return b.__parseLayer(a)}).filter(Boolean),c},b.prototype.__parseLayer=function(a){var b=this.get("parseLayer"),c=a.split(kJ),d=this.getProperties();return b?b({value:a,values:c}):d.reduce(function(a,b,d){var e=c[d];return a[b.getId()]=(0,r.isUndefined)(e)?b.getDefaultValue():e,a},{})},b.prototype.__getLayersFromStyle=function(a){var b=this;if(void 0===a&&(a={}),!this.__styleHasProps(a))return null;if(this.isEmptyValueStyle(a))return[];var c=this.getName(),d=this.getProperties(),e=this.getLayerSeparator(),f=this.attributes.fromStyle,g=f?f(a,{property:this,name:c,separatorLayers:e}):[];if(!f){var h=this.__splitStyleName(a,c,e).map(function(a){return a.split(b.getSplitSeparator())}).map(function(a){var b={};return d.forEach(function(c,d){var e=a[d];b[c.getId()]=(0,r.isUndefined)(e)?c.getDefaultValue():e}),b});d.forEach(function(c){var d=c.getId();b.__splitStyleName(a,c.getName(),e).map(function(a){var b;return(b={})[d]=a||c.getDefaultValue(),b}).forEach(function(a,b){h[b]=h[b]?kG(kG({},h[b]),a):a})}),g=h}return(0,r.isArray)(g)?g:[g]},b.prototype.getStyle=function(a){return void 0===a&&(a={}),this.getStyleFromLayers(a)},b.prototype.getStyleFromLayers=function(a){var b=this;void 0===a&&(a={});var c={},d=this.getName(),e=this.getLayers(),f=this.getProperties();if(e.map(function(c){return b.getStyleFromLayer(c,a)}).forEach(function(a){(0,r.keys)(a).map(function(b){c[b]||(c[b]=[]),c[b].push(a[b])})}),(0,r.keys)(c).map(function(a){c[a]=c[a].join(b.__getJoinLayers())}),this.isDetached())c[d]="",e.length||f.map(function(a){c[a.getName()]=""});else{var g=f.reduce(function(a,b){return a[b.getName()]="",a},{});c[d]=c[d]||"",c=kG(kG({},c),g)}return kG(kG({},c),a.__clear?{}:this.getEmptyValueStyle())},b.prototype.isEmptyValueStyle=function(a){void 0===a&&(a={});var b=this.getEmptyValueStyle({force:!0}),c=(0,r.keys)(b);return!!c.length&&c.every(function(c){return b[c]===a[c]})},b.prototype.getEmptyValueStyle=function(a){void 0===a&&(a={});var b=this.attributes.emptyValue;if(!b||this.hasLayers()&&!a.force)return{};var c=this.getName(),d=this.getProperties(),e=(0,r.isString)(b)?b:b({property:this});if(!(0,r.isString)(e))return e;var f={};return this.isDetached()?d.map(function(a){f[a.getName()]=e}):f[c]=e,f},b.prototype.__getJoinLayers=function(){var a=this.get("layerJoin"),b=this.get("layerSeparator");return a||((0,r.isString)(b)?b:a)},b.prototype.__getFullValue=function(){return this.get("detached")?"":bj(this.getStyleFromLayers()[this.getName()])},b.prototype.hasValue=function(a){void 0===a&&(a={});var b=a.noParent&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!b},b.prototype.clear=function(a){return void 0===a&&(a={}),this.layers.reset(),this.__upTargetsStyleProps(kG(kG({},a),{__clear:!0})),kz.prototype.clear.call(this),this},b.prototype.__canClearProp=function(){return!1},b.prototype.__getLayers=function(){return this.layers},b}(kE),kL=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kM=function(){return(kM=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},kN=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},kO=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},kP="data-clear-style",kQ=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,b)||this;(0,r.bindAll)(c,"__change","__updateStyle");var d=b.config||{},e=d.em;c.config=d,c.em=e,c.pfx=d.stylePrefix||"",c.ppfx=d.pStylePrefix||"",c.__destroyFn=c.destroy?c.destroy.bind(c):function(){};var f=c.model;f.view=c,c.onValueChange=(0,r.debounce)(c.onValueChange.bind(c),10),c.updateStatus=(0,r.debounce)(c.updateStatus.bind(c),0),c.listenTo(f,"destroy remove",c.remove),c.listenTo(f,"change:visible",c.updateVisibility),c.listenTo(f,"change:name change:className change:full",c.render),c.listenTo(f,"change:value",c.onValueChange),c.listenTo(f,"change:parentTarget",c.updateStatus),c.listenTo(e,"change:device",c.onValueChange);var g=c.init&&c.init.bind(c);return g&&g(),c}return kL(b,a),b.prototype.events=function(){var a;return(a={change:"inputValueChanged"})["click [".concat(kP,"]")]="clear",a},b.prototype.template=function(a){var b=this.pfx,c=this.ppfx;return'\n      <div class="'.concat(b,'label" data-sm-label></div>\n      <div class="').concat(c,'fields" data-sm-fields></div>\n    ')},b.prototype.templateLabel=function(a){var b=this.pfx,c=this.em,d=a.parent,e=a.attributes,f=e.icon,g=e.info,h=null==c?void 0:c.getConfig().icons,i=(null==h?void 0:h.close)||"";return'\n      <span class="'.concat(b,"icon ").concat(void 0===f?"":f,'" title="').concat(void 0===g?"":g,'">\n        ').concat(a.getLabel(),"\n      </span>\n      ").concat(d?"":'<div class="'.concat(b,'clear" style="display: none" ').concat(kP,">").concat(i,"</div>"),"\n    ")},b.prototype.templateInput=function(a){return'\n      <div class="'.concat(this.ppfx,'field">\n        <input placeholder="').concat(a.getDefaultValue(),'"/>\n      </div>\n    ')},b.prototype.remove=function(){var a=this;return x.Ss.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(b){return a[b]=null}),this.__destroyFn(this._getClbOpts()),this},b.prototype.updateStatus=function(){var a,b=this.model,c=this.pfx,d=this.ppfx,e=this.config,f="".concat(d,"four-color"),g="".concat(d,"color-warn"),h=this.$el.children(".".concat(c,"label")),i=this.getClearEl(),j=i?i.style:{};h.removeClass("".concat(f," ").concat(g)),j.display="none",b.hasValue({noParent:!0})&&e.highlightChanged?(h.addClass(f),e.clearProperties&&(j.display="")):b.hasValue()&&e.highlightComputed&&h.addClass(g),null==(a=this.parent)||a.updateStatus()},b.prototype.clear=function(a){a&&a.stopPropagation(),this.model.clear()},b.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(kP,"]"))),this.clearEl},b.prototype.inputValueChanged=function(a){a&&a.stopPropagation(),this.emit||this.model.upValue(a.target.value)},b.prototype.onValueChange=function(a,b,c){void 0===c&&(c={}),this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},b.prototype.setValue=function(a){var b=this.model,c=(0,r.isUndefined)(a)||""===a?b.getDefaultValue():a;if(this.update)return this.__update(c);this.__setValueInput(c)},b.prototype.__setValueInput=function(a){var b=this.getInputEl();b&&(b.value=a)},b.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},b.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},b.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},b.prototype.__unset=function(){var a=this.unset&&this.unset.bind(this);a&&a(this._getClbOpts())},b.prototype.__update=function(a){var b=this.update&&this.update.bind(this);b&&b(kM(kM({},this._getClbOpts()),{value:a}))},b.prototype.__change=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=this.emit&&this.emit.bind(this);c&&c.apply(void 0,kO([this._getClbOpts()],a,!1))},b.prototype.__updateStyle=function(a,b){void 0===b&&(b={});var c=b.complete,d=b.partial;kN(b,["complete","partial"]);var e=this.model,f=!1!==c&&!0!==d;(0,s.isObject)(a)?e.__upTargetsStyle(a,{avoidStore:!f}):e.upValue(a,{partial:!f})},b.prototype._getClbOpts=function(){var a=this.model;return{el:this.el,createdEl:this.createdEl,property:a,props:a.attributes,change:this.__change,updateStyle:this.__updateStyle}},b.prototype.render=function(){this.clearCached();var a=this.pfx,b=this.model,c=this.el,d=this.$el,e=b.getName(),f=b.getType(),g=b.get("className")||"",h="".concat(a,"property"),i="number"===f?"".concat(a).concat(f," ").concat(a,"integer"):"".concat(a).concat(f);this.createdEl&&this.__destroyFn(this._getClbOpts()),d.empty().append(this.template(b)),d.find("[data-sm-label]").append(this.templateLabel(b));var j=this.create&&this.create.bind(this);this.createdEl=j&&j(this._getClbOpts()),d.find("[data-sm-fields]").append(this.createdEl||this.templateInput(b)),c.className="".concat(h," ").concat(i," ").concat(h,"__").concat(e," ").concat(g).trim(),c.className+=b.isFull()?" ".concat(h,"--full"):"";var k=this.onRender&&this.onRender.bind(this);return k&&k(),this.setValue(b.getValue()),this},b.prototype.onRender=function(){},b}(x.Ss),kR=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kS=function(a){function b(b){var c=a.call(this,b)||this;c.config=b.config||{},c.pfx=c.config.stylePrefix||"",c.properties=[],c.parent=b.parent;var d=c.collection;return c.listenTo(d,"add",c.addTo),c.listenTo(d,"reset",c.render),c}return kR(b,a),b.prototype.addTo=function(a,b,c){this.add(a,null,c)},b.prototype.add=function(a,b,c){void 0===c&&(c={});var d=this.parent,e=this.config,f=b||this.el,g=new a.typeView({model:a,config:e});d&&(g.parent=d),g.render();var h=g.el;this.properties.push(g),(0,ab.Sc)(f,h,c.at)},b.prototype.remove=function(){return x.Ss.prototype.remove.apply(this,arguments),this.clearItems(),this},b.prototype.clearItems=function(){this.properties.forEach(function(a){return a.remove()}),this.properties=[]},b.prototype.render=function(){var a=this,b=this.$el,c=this.pfx;this.clearItems();var d=document.createDocumentFragment();return this.collection.forEach(function(b){return a.add(b,d)}),b.empty(),b.append(d),b.attr("class","".concat(c,"properties")),this},b}(x.Ss),kT=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kU=function(){return(kU=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},kV=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return kT(b,a),b.prototype.templateInput=function(){var a=this.pfx;return'\n      <div class="'.concat(a,"field ").concat(a,'composite">\n        <span id="').concat(a,'input-holder"></span>\n      </div>\n    ')},b.prototype.remove=function(){var a;return null==(a=this.props)||a.remove(),kQ.prototype.remove.apply(this,arguments),this},b.prototype.onValueChange=function(){},b.prototype.onRender=function(){var a=this.pfx,b=this.model,c=b.get("properties");if(c.length&&!this.props){var d=b.isDetached(),e=new kS({config:kU(kU({},this.config),{highlightComputed:d,highlightChanged:d}),collection:c,parent:this});e.render(),this.$el.find("#".concat(a,"input-holder")).append(e.el),this.props=e}},b.prototype.clearCached=function(){kQ.prototype.clearCached.apply(this,arguments),delete this.props},b}(kQ),kW=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kX=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return kW(b,a),b.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},b.prototype.template=function(){var a=this.pfx,b=this.ppfx,c=this.em,d=null==c?void 0:c.getConfig().icons,e=(null==d?void 0:d.close)||"",f=(null==d?void 0:d.move)||"";return'\n      <div class="'.concat(a,'label-wrp">\n        <div id="').concat(a,'move" class="').concat(b,'no-touch-actions" data-move-layer>\n          ').concat(f,'\n        </div>\n        <div id="').concat(a,'label" data-label></div>\n        <div id="').concat(a,'preview-box" class="').concat(a,'layer-preview" style="display: none" data-preview-box>\n          <div id="').concat(a,'preview" class="').concat(a,'layer-preview-cnt" data-preview></div>\n        </div>\n        <div id="').concat(a,'close-layer" class="').concat(a,'btn-close" data-close-layer>\n          ').concat(e,'\n        </div>\n      </div>\n      <div id="').concat(a,'inputs" data-properties></div>\n    ')},b.prototype.initialize=function(a){void 0===a&&(a={});var b=this.model,c=a.config||{};this.em=c.em,this.config=c,this.sorter=a.sorter,this.pfx=c.stylePrefix||"",this.ppfx=c.pStylePrefix||"",this.propertyView=a.propertyView;var d=this.propertyView.model;this.listenTo(b,"destroy remove",this.remove),this.listenTo(b,"change:values",this.updateLabel),this.listenTo(d,"change:selectedLayer",this.updateVisibility),b.view=this,b.set({droppable:0,draggable:1}),this.$el.data("model",b)},b.prototype.initSorter=function(){var a;null==(a=this.sorter)||a.startSort([{element:this.el}])},b.prototype.removeItem=function(a){a&&a.stopPropagation(),this.model.remove()},b.prototype.select=function(){this.model.select()},b.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},b.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},b.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},b.prototype.updateLabel=function(){var a=this.model,b=a.getLabel();if(this.getLabelEl().innerHTML=b,a.hasPreview()){var c=this.getPreviewEl(),d=a.getStylePreview({number:{min:-3,max:3}}),e=(0,r.keys)(d).map(function(a){return"".concat(a,":").concat(d[a])}).join(";");c.setAttribute("style",e)}},b.prototype.updateVisibility=function(){var a,b=this.pfx,c=this.model,d=this.propertyView,e=this.getPropertiesWrapper(),f=c.isSelected();e.style.display=f?"":"none",this.$el[f?"addClass":"removeClass"]("".concat(b,"active")),f&&e.appendChild(null==(a=d.props)?void 0:a.el)},b.prototype.render=function(){var a=this.el,b=this.pfx,c=this.model;return a.innerHTML=this.template(),a.className="".concat(b,"layer"),c.hasPreview()&&(a.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},b}(x.Ss),kY=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),kZ=function(a){function b(b){var c=a.call(this,b)||this,d=c.collection,e=b.config||{},f=e.em,g=e.stylePrefix||"",h=e.pStylePrefix||"";c.config=e,c.pfx=g,c.ppfx=h,c.propertyView=b.propertyView,c.className="".concat(g,"layers ").concat(h,"field"),c.listenTo(d,"add",c.addTo),c.listenTo(d,"reset",c.reset),c.items=[];var i=c.createPlaceholder(e.pStylePrefix);c.$el.append(i);var j=null==f?void 0:f.Utils;return c.sorter=j?new j.StyleManagerSorter({em:f,containerContext:{container:c.el,containerSel:".".concat(g,"layers"),itemSel:".".concat(g,"layer"),pfx:e.pStylePrefix,document:document,placeholderElement:i},dragBehavior:{dragDirection:b7.A.Vertical,nested:!1}}):void 0,d.view=c,c.$el.data("model",d),c.$el.data("collection",d),c}return kY(b,a),b.prototype.addTo=function(a){var b=this.collection.indexOf(a);this.addToCollection(a,null,b)},b.prototype.addToCollection=function(a,b,c){var d=b||null,e=this.propertyView,f=this.config,g=this.sorter,h=this.$el,i=new kX({model:a,config:f,sorter:g,propertyView:e}),j=i.render().el;if(this.items.push(i),d)d.appendChild(j);else if(void 0!==c){var k="before";h.children().length===c&&(c--,k="after"),c<0?h.append(j):h.children().eq(c)[k](j)}else h.append(j);return j},b.prototype.reset=function(a,b){this.clearItems(),this.render()},b.prototype.remove=function(){return this.clearItems(),x.Ss.prototype.remove.apply(this,arguments),this},b.prototype.clearItems=function(){this.items.forEach(function(a){return a.remove()}),this.items=[]},b.prototype.render=function(){var a=this,b=this.$el,c=document.createDocumentFragment();return b.empty(),this.collection.forEach(function(b){return a.addToCollection(b,c)}),b.append(c),b.attr("class",this.className),this},b.prototype.createPlaceholder=function(a){var b=document.createElement("div"),c=document.createElement("div");return this.el.parentNode,b.className=a+"placeholder",b.style.display="none",b.style.pointerEvents="none",c.className=a+"placeholder-int",b.appendChild(c),b},b}(x.Ss),k$=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),k_=function(){return(k_=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},k0=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return k$(b,a),b.prototype.events=function(){return k_(k_({},kV.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},b.prototype.templateInput=function(){var a=this.pfx,b=this.em,c=null==b?void 0:b.getConfig().icons,d=(null==c?void 0:c.plus)||"+";return'\n      <div class="'.concat(a,"field ").concat(a,'stack">\n        <button type="button" id="').concat(a,'add" data-add-layer>\n          ').concat(d,"\n        </button>\n        <div data-layers-wrapper></div>\n      </div>\n    ")},b.prototype.init=function(){var a=this.model;this.listenTo(a.layers,"change reset",this.updateStatus),this.listenTo(a,"change:isEmptyValue",this.updateStatus)},b.prototype.addLayer=function(){this.model.addLayer({},{at:0})},b.prototype.setValue=function(){},b.prototype.remove=function(){var a;return null==(a=this.layersView)||a.remove(),kV.prototype.remove.apply(this,arguments),this},b.prototype.clearCached=function(){kV.prototype.clearCached.apply(this,arguments),delete this.layersView},b.prototype.onRender=function(){var a=this.model,b=this.el,c=this.config,d=a.get("properties");if(d.length&&!this.props){var e=new kS({config:k_(k_({},c),{highlightComputed:!1,highlightChanged:!1}),collection:d,parent:this});e.render();var f=new kZ({collection:a.layers,config:c,propertyView:this});f.render(),b.querySelector("[data-layers-wrapper]").appendChild(f.el),this.props=e,this.layersView=f}},b}(kV),k1=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),k2=function(){return(k2=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},k3=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return k1(b,a),b.prototype.events=function(){return k2(k2({},kQ.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},b.prototype.templateInput=function(){var a,b=this.pfx,c=this.em,d=null==(a=this.em)?void 0:a.getConfig().icons,e=null==d?void 0:d.close;return'\n      <div class="'.concat(b,"field ").concat(b,"file\">\n        <div id='").concat(b,"input-holder'>\n          <div class=\"").concat(b,'btn-c">\n            <button class="').concat(b,'btn" id="').concat(b,'images" type="button" data-open-assets>\n              ').concat(c.t("styleManager.fileButton"),'\n            </button>\n          </div>\n          <div style="clear:both;"></div>\n        </div>\n        <div id="').concat(b,'preview-box" class="').concat(b,'preview-file" data-preview-box>\n          <div id="').concat(b,'preview-file" class="').concat(b,'preview-file-cnt" data-preview></div>\n          <div id="').concat(b,'close" class="').concat(b,'preview-file-close" data-clear-asset>').concat(e,"</div>\n        </div>\n      </div>\n    ")},b.prototype.__setValueInput=function(a){var b=this.model,c=this.el,d=b.getDefaultValue(),e=c.querySelector("[data-preview-box]"),f=c.querySelector("[data-preview]");e.style.display=a&&a!==d?"":"none",f.style.backgroundImage=a||b.getDefaultValue()},b.prototype.openAssetManager=function(){var a,b=this,c=null==(a=this.em)?void 0:a.Assets;null==c||c.open({select:function(a,d){var e=(0,r.isString)(a)?a:a.get("src");b.model.upValue(e,{partial:!d}),d&&c.close()},types:["image"],accept:"image/*"})},b}(kQ),k4=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),k5=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return k4(b,a),b.prototype.templateInput=function(a){return""},b.prototype.init=function(){var a=this.model;this.listenTo(a,"change:unit",this.onValueChange),this.listenTo(a,"change:units",this.render)},b.prototype.setValue=function(a){},b.prototype.onRender=function(){var a=this.ppfx,b=this.model,c=this.el;if(!this.inputInst){var d=b.input;d.ppfx=a,d.render(),c.querySelector(".".concat(a,"fields")).appendChild(d.el),this.input=d.inputEl.get(0),this.inputInst=d}},b.prototype.clearCached=function(){kQ.prototype.clearCached.apply(this,arguments),this.inputInst=null},b}(kQ),k6=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),k7=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return k6(b,a),b.prototype.setValue=function(a){var b;null==(b=this.inputInst)||b.setValue(a,{fromTarget:1,def:this.model.getDefaultValue()})},b.prototype.remove=function(){var a=this;k5.prototype.remove.apply(this,arguments);var b=this.inputInst;return b&&b.remove&&b.remove(),["inputInst","$color"].forEach(function(b){return a[b]=null}),this},b.prototype.__handleChange=function(a,b){this.model.upValue(a,{partial:b})},b.prototype.onRender=function(){var a;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var b=this.ppfx,c=this.model,d=this.em,e=this.el,f=new gt({target:d,model:c,ppfx:b,onChange:this.__handleChange}).render();e.querySelector(".".concat(b,"fields")).appendChild(f.el),this.input=null==(a=f.inputEl)?void 0:a.get(0),this.inputInst=f}},b}(k5),k8=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),k9=function(){return(k9=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},la=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},lb=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return k8(b,a),b.prototype.defaults=function(){return k9(k9({},kz.getDefaults()),{options:[],full:0})},b.prototype.getOptions=function(){var a=this.attributes,b=a.options,c=a.list;return(b&&b.length?b:c)||[]},b.prototype.getOption=function(a){var b=this,c=(0,s.isDef)(a)?a:this.getValue();return this.getOptions().filter(function(a){return b.getOptionId(a)===c})[0]||null},b.prototype.setOptions=function(a){return void 0===a&&(a=[]),this.set("options",a),this},b.prototype.addOption=function(a){if(a){var b=this.getOptions();this.setOptions(la(la([],b,!0),[a],!1))}return this},b.prototype.getOptionId=function(a){return(0,s.isDef)(a.id)?a.id:a.value},b.prototype.getOptionLabel=function(a,b){void 0===b&&(b={});var c,d=b.locale,e=((0,r.isString)(a)?this.getOption(a):a)||{},f=this.getOptionId(e),g=e.label||e.name||f,h=b.property||this.getId();return(void 0===d||d)&&(null==(c=this.em)?void 0:c.t("styleManager.options.".concat(h,".").concat(f)))||g},b.prototype.initialize=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];kz.prototype.initialize.apply(this,a),this.listenTo(this,"change:options",this.__onOptionChange)},b.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},b}(kz),lc=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ld=function(a){function b(b){var c=a.call(this,b)||this;return c.listenTo(c.model,"change:options",c.updateOptions),c}return lc(b,a),b.prototype.templateInput=function(){var a=this.pfx,b=this.ppfx;return'\n      <div class="'.concat(b,"field ").concat(b,'select">\n        <span id="').concat(a,'input-holder"></span>\n        <div class="').concat(b,'sel-arrow">\n          <div class="').concat(b,'d-s-arrow"></div>\n        </div>\n      </div>\n    ')},b.prototype.updateOptions=function(){delete this.input,this.onRender()},b.prototype.onRender=function(){var a=this.pfx,b=this.model,c=b.getOptions();if(!this.input){var d=[];c.forEach(function(a){var c=b.getOptionId(a),e=b.getOptionLabel(c),f=a.style?a.style.replace(/"/g,"&quot;"):"",g=c.replace(/"/g,"&quot;");d.push('<option value="'.concat(g,'" ').concat(f?'style="'.concat(f,'"'):"",">").concat(e,"</option>"))});var e=this.el.querySelector("#".concat(a,"input-holder"));e.innerHTML="<select>".concat(d.join(""),"</select>"),this.input=e.firstChild}},b.prototype.__setValueInput=function(a){var b=this.model,c=this.getInputEl(),d=b.getOptions()[0],e=d?b.getOptionId(d):"";c&&(c.value=a||e)},b}(kQ),le=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lf=function(){return(lf=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},lg=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return le(b,a),b.prototype.defaults=function(){return lf(lf({},lb.getDefaults()),{full:1})},b}(lb),lh=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),li=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return lh(b,a),b.prototype.templateInput=function(){var a=this.ppfx;return'<div class="'.concat(a,"field ").concat(a,'field-radio"></div>')},b.prototype.onRender=function(){var a=this.pfx,b=this.ppfx,c=this.model,d="".concat(b,"radio-item-label"),e=c.getName(),f=c.getOptions(),g="".concat(a,"radio ").concat(a,"radio-").concat(e),h=c.cid;if(!this.input){var i=[];f.forEach(function(f){var j=f.className?"".concat(f.className," ").concat(a,"icon ").concat(d):"",k=c.getOptionId(f),l="".concat(e,"-").concat(k,"-").concat(h),m=j?"":c.getOptionLabel(k),n=f.title?'title="'.concat(f.title,'"'):"",o=c.getValue()===k?"checked":"";i.push('\n          <div class="'.concat(b,'radio-item">\n            <input type="radio" class="').concat(g,'" id="').concat(l,'" name="').concat(e,"-").concat(h,'" value="').concat(k,'" ').concat(o,'/>\n            <label class="').concat(j||d,'" ').concat(n,' for="').concat(l,'">').concat(m,"</label>\n          </div>\n        "))});var j=this.el.querySelector(".".concat(b,"field"));j.innerHTML='<div class="'.concat(b,'radio-items">').concat(i.join(""),"</div>"),this.input=j.firstChild}},b.prototype.__setValueInput=function(a){var b,c=this.model,d=a||c.getDefaultValue(),e=null==(b=this.getInputEl())?void 0:b.querySelector('[value="'.concat(d,'"]'));e&&(e.checked=!0)},b}(ld),lj=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lk=function(){return(lk=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},ll=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return lj(b,a),b.prototype.defaults=function(){return lk(lk({},kz.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},b.prototype.getUnits=function(){return this.get("units")||[]},b.prototype.getUnit=function(){return this.get("unit")},b.prototype.getMin=function(){return this.get("min")},b.prototype.getMax=function(){return this.get("max")},b.prototype.getStep=function(){return this.get("step")},b.prototype.upUnit=function(a,b){return void 0===b&&(b={}),this._up({unit:a},b)},b.prototype.initialize=function(a,b){void 0===a&&(a={}),void 0===b&&(b={}),kz.callParentInit(kz,this,a,b);var c=this.get("unit"),d=this.getUnits();this.input=(0,s.hasWin)()?new gx({model:this}):void 0,d.length&&!c&&this.set("unit",d[0],{silent:!0}),kz.callInit(this,a,b)},b.prototype.__getClearProps=function(){return lk(lk({},kz.prototype.__getClearProps()),{unit:""})},b.prototype.parseValue=function(a,b){void 0===b&&(b={});var c=kz.prototype.parseValue.apply(this,arguments),d=this.input.validateInputValue(c.value,lk({deepCheck:1},b)),e=d.value,f=d.unit;return c.value=e,c.unit=f,c},b.prototype.getFullValue=function(){var a=this.get("value"),b=this.get("unit"),c=(0,r.isUndefined)(a)?"":"".concat(a),d=!(0,r.isUndefined)(b)&&c?b:"",e="".concat(c).concat(d);return kz.prototype.getFullValue.apply(this,[e])},b}(kz),lm=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),ln=function(){return(ln=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},lo=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return lm(b,a),b.prototype.defaults=function(){return ln(ln({},ll.getDefaults()),{showInput:1})},b}(ll),lp=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lq=function(){return(lq=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},lr=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return lp(b,a),b.prototype.events=function(){return lq(lq({},k5.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},b.prototype.templateInput=function(a){var b=this.ppfx;return'\n      <div class="'.concat(b,"field ").concat(b,'field-range">\n        <input type="range" min="').concat(a.get("min"),'" max="').concat(a.get("max"),'" step="').concat(a.get("step"),'"/>\n      </div>\n    ')},b.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},b.prototype.inputValueChanged=function(a){a.stopPropagation(),this.model.upValue(this.getSliderEl().value)},b.prototype.inputValueChangedSoft=function(a){a.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},b.prototype.setValue=function(a){var b=this.model,c=b.parseValue(a);this.getSliderEl().value=""===a?b.getDefaultValue():parseFloat(c.value),k5.prototype.setValue.apply(this,arguments)},b.prototype.onRender=function(){k5.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},b.prototype.clearCached=function(){k5.prototype.clearCached.apply(this,arguments),delete this.slider},b}(k5);let ls=x.pM.extend(hj).extend({extendViewApi:1,init:function(){var a=this.opts,b=this.em,c=a.module||(null==b?void 0:b.get("StyleManager"));c&&(c.__listenAdd(this,c.events.propertyAdd),c.__listenRemove(this,c.events.propertyRemove))},types:[{id:"stack",model:kK,view:k0,isType:function(a){if(a&&"stack"==a.type)return a}},{id:"composite",model:kE,view:kV,isType:function(a){if(a&&"composite"==a.type)return a}},{id:"file",model:kz,view:k3,isType:function(a){if(a&&"file"==a.type)return a}},{id:"color",model:kz,view:k7,isType:function(a){if(a&&"color"==a.type)return a}},{id:"select",model:lb,view:ld,isType:function(a){if(a&&"select"==a.type)return a}},{id:"radio",model:lg,view:li,isType:function(a){if(a&&"radio"==a.type)return a}},{id:"slider",model:lo,view:lr,isType:function(a){if(a&&"slider"==a.type)return a}},{id:"integer",model:ll,view:k5,isType:function(a){if(a&&"integer"==a.type)return a}},{id:"number",model:ll,view:k5,isType:function(a){if(a&&"number"==a.type)return a}},{id:"base",model:kz,view:kQ,isType:function(a){return a.type="base",a}}]});var lt=function(){return(lt=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},lu=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},lv=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},lw=function(a){return a.map(function(a){return{id:a}})},lx=function(){function a(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var a=", sans-serif",b=["flex-start","flex-end","center"],c=lv(lv([],b,!0),["baseline","stretch"],!1);this.optsBgSize=lw(["auto","cover","contain"]),this.optsBgAttach=lw(["scroll","fixed","local"]),this.optsBgRepeat=lw(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=lw(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=lw(["visible","hidden","scroll","auto"]),this.optsDir=lw(["row","row-reverse","column","column-reverse"]),this.opstDisplay=lw(["block","inline","inline-block","flex","none"]),this.optsTransitFn=lw(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=lw(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=lw(["none","left","right"]),this.optsPos=lw(["static","relative","absolute","fixed"]),this.optsTextAlign=lw(["left","center","right","justify"]),this.optsFlexAlign=lw(c),this.optsJustCont=lw(lv(lv([],b,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=lw(lv(lv([],b,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=lw(lv(["auto"],c,!0)),this.optsTransitProp=lw(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=lw(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=lw(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+a,"Arial Black, Gadget"+a,"Brush Script MT"+a,"Comic Sans MS, cursive"+a,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+a,"Impact, Charcoal"+a,"Lucida Sans Unicode, Lucida Grande"+a,"Tahoma, Geneva"+a,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+a,"Verdana, Geneva"+a].map(function(a){return{id:a,label:a.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return a.prototype.__sub=function(a){var b=this;return function(){return a.map(function(a){if((0,r.isString)(a))return b.get(a);var c=a.extend,d=lu(a,["extend"]);return lt(lt({},b.get(c)),d)})}},a.prototype.init=function(){var a=this,b=this.fixedValues,c=this.requireFlex,d=this.typeNumber;return this.props={},[["text-shadow-h",{type:d,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:b},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:c},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:d,default:"0",requiresParent:c}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:c},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:c},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(a,b){var c=b.values,d=c["box-shadow-h"],e=c["box-shadow-v"],f=c["box-shadow-blur"],g=c["box-shadow-spread"];return"".concat(d," ").concat(e," ").concat(f," ").concat(g)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(a,b){var c=b.values,d=c["text-shadow-h"],e=c["text-shadow-v"],f=c["text-shadow-blur"];return"".concat(d," ").concat(e," ").concat(f)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(a,b){var c=b.values;return[c["background-repeat-sub"]||"",c["background-position-sub"]||"",c["background-attachment-sub"]||"",c["background-size-sub"]||""].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(a,b){var c=b.property,d=a[b.name]||"",e=c.getLayerSeparator();return d?d.split(e).map(function(a){var b=c.__parseFn(a);return{"transform-type":b.name,"transform-value":b.value}}):[]},toStyle:function(a,b){var c,d=b.name;return(c={})[d]="".concat(a["transform-type"],"(").concat(a["transform-value"],")"),c},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(a){var b=a.property;if(a.to.value){var c=b.getOption(),d=lt({},c.propValue||{}),e=b.getParent().getProperty("transform-value"),f=e.getUnit();(!f||(null==d?void 0:d.units.indexOf(f))<0)&&(d.unit=(null==d?void 0:d.units[0])||""),e.up(d)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]].forEach(function(b){var c=b[0],d=b[1],e=b[2];a.add(c,d||{},{from:e})}),this},a.prototype.add=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c={});var d=c.from||"",e=this.props[d||a]||{},f=lt(lt(lt({},e),{property:a}),b);return f.properties&&(0,r.isFunction)(f.properties)&&(f.properties=f.properties()),this.props[a]=f,f},a.prototype.get=function(a){return this.props[a]},a.prototype.build=function(a){var b=this,c=[];return((0,r.isString)(a)?[a]:a).forEach(function(a){c.push(b.get(a)||{property:a})}),c},a}(),ly=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lz=function(){return(lz=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},lA=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},lB=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},lC=function(a){function b(b,c){void 0===c&&(c={});var d=a.call(this,b)||this,e=c.em;d.em=e;var f=b||{},g=d.buildProperties(f.buildProps),h=d.get("name")||"";d.get("id")||d.set("id",h.replace(/ /g,"_").toLowerCase());var i=new ls((g?d.extendProperties(g):d.get("properties").map(function(a){return(0,r.isString)(a)?d.buildProperties(a)[0]:a}).filter(Boolean)).map(function(a){return d.checkExtend(a)}),{em:e});return i.sector=d,d.set("properties",i),d}return ly(b,a),b.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(b.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),b.prototype.getId=function(){return this.get("id")},b.prototype.getName=function(){var a,b=this.getId();return(null==(a=this.em)?void 0:a.t("styleManager.sectors.".concat(b)))||this.get("name")},b.prototype.setName=function(a){return this.set("name",a)},b.prototype.isOpen=function(){return!!this.get("open")},b.prototype.setOpen=function(a){return this.set("open",a)},b.prototype.isVisible=function(){return!!this.get("visible")},b.prototype.getProperties=function(a){void 0===a&&(a={});var b=this.properties;return(b.models?lB([],b.models,!0):b).filter(function(b){var c=!0;return a.withValue&&(c=b.hasValue({noParent:!0})),a.withParentValue&&(c=!b.hasValue({noParent:!0})&&b.hasValue()),c})},b.prototype.getProperty=function(a){return this.getProperties().filter(function(b){return b.get("id")===a})[0]||void 0},b.prototype.addProperty=function(a,b){return this.properties.add(this.checkExtend(a),b)},b.prototype.extendProperties=function(a,b,c){void 0===c&&(c=!1);for(var d=a.length,e=b||this.get("properties"),f=this.get("extendBuilded"),g=[],h=0,i=e.length;h<i;h++){for(var j=e[h],k=0,l=0;l<d;l++){var m=a[l];if(j.property==m.property||j.id==m.property){var n=j.properties;n&&n.length&&(j.properties=this.extendProperties(m.properties||[],n,1)),a[l]=f?(0,r.extend)(m,j):j,g[l]=a[l],k=1;continue}}k||(a.push(j),g.push(j))}return c?g.filter(function(a){return a}):a},b.prototype.checkExtend=function(a){var b=((0,r.isString)(a)?{extend:a}:a)||{},c=b.extend,d=lA(b,["extend"]);return c?lz(lz({},this.buildProperties([c])[0]||{}),d):a},b.prototype.buildProperties=function(a){var b,c=a||[];if(!c.length)return[];var d=null==(b=this.em)?void 0:b.Styles.builtIn;return null==d?void 0:d.build(c)},b}(x.Kx),lD=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lE=function(){return(lE=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},lF=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return lD(b,a),b.prototype.initialize=function(a,b){void 0===b&&(b={});var c=b.module,d=b.em;this.em=d,this.module=c,this.listenTo(this,"reset",this.onReset)},b.prototype.model=function(a,b){void 0===b&&(b={});var c=b.collection.em;return new lC(a,lE(lE({},b),{em:c}))},b.prototype.onReset=function(a,b){void 0===b&&(b={}),(b.previousModels||[]).forEach(function(a){return a.get("properties").reset()})},b}(x.pM);!function(a){a.sectorAdd="style:sector:add",a.sectorRemove="style:sector:remove",a.sectorUpdate="style:sector:update",a.propertyAdd="style:property:add",a.propertyRemove="style:property:remove",a.propertyUpdate="style:property:update",a.target="style:target",a.layerSelect="style:layer:select",a.custom="style:custom",a.all="style"}(k||(k={}));var lG=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lH=function(a){function b(b){var c=a.call(this,b)||this,d=b.config||{},e=c.model,f=d.em;return c.config=d,c.em=f,c.pfx=d.stylePrefix||"",c.listenTo(e,"destroy remove",c.remove),c.listenTo(e,"change:open",c.updateOpen),c.listenTo(e,"change:visible",c.updateVisibility),c}return lG(b,a),b.prototype.template=function(a){var b,c,d,e=a.pfx,f=a.label,g=null==(d=this.em)?void 0:d.getConfig().icons,h=(null==g?void 0:g.caret)||"",i="".concat(e,"sector-");return t(l||(b=['\n      <div class="','title" data-sector-title>\n        <div class="','caret">$','</div>\n        <div class="','label">',"</div>\n      </div>\n    "],c=['\n      <div class="','title" data-sector-title>\n        <div class="','caret">$','</div>\n        <div class="','label">',"</div>\n      </div>\n    "],Object.defineProperty?Object.defineProperty(b,"raw",{value:c}):b.raw=c,l=b),i,i,h,i,f)},b.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},b.prototype.updateOpen=function(){var a=this.$el,b=this.model,c=this.pfx,d=b.isOpen();a[d?"addClass":"removeClass"]("".concat(c,"open")),this.getPropertiesEl().style.display=d?"":"none"},b.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},b.prototype.getPropertiesEl=function(){var a=this.$el,b=this.pfx;return a.find(".".concat(b,"properties")).get(0)},b.prototype.toggle=function(){var a=this.model;a.setOpen(!a.get("open"))},b.prototype.renderProperties=function(){var a=this.model,b=this.config,c=a.get("properties");if(c){var d=new kS({collection:c,config:b});this.$el.append(d.render().el)}},b.prototype.render=function(){var a=this.pfx,b=this.model,c=this.$el,d=b.getId(),e=b.getName();return c.html(this.template({pfx:a,label:e})),this.renderProperties(),c.attr("class","".concat(a,"sector ").concat(a,"sector__").concat(d," no-select")),this.updateOpen(),this},b}(x.Ss),lI=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lJ=function(a){function b(b){void 0===b&&(b={});var c=a.call(this,b)||this,d=b.module,e=b.config,f=c.collection;return c.pfx=(null==e?void 0:e.stylePrefix)||"",c.ppfx=(null==e?void 0:e.pStylePrefix)||"",c.config=e,c.module=d,c.listenTo(f,"add",c.addTo),c.listenTo(f,"reset",c.render),c}return lI(b,a),b.prototype.remove=function(){var a=this;return x.Ss.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(b){return a[b]={}}),this},b.prototype.addTo=function(a,b,c){void 0===c&&(c={}),this.addToCollection(a,null,c)},b.prototype.addToCollection=function(a,b,c){void 0===c&&(c={});var d=this.config,e=this.el,f=new lH({model:a,config:d}).render().el;return(0,ab.Sc)(b||e,f,c.at),f},b.prototype.render=function(){var a=this,b=this.$el,c=this.pfx,d=this.ppfx;b.empty();var e=document.createDocumentFragment();return this.collection.each(function(b){return a.addToCollection(b,e)}),b.append(e),b.addClass("".concat(c,"sectors ").concat(d,"one-bg ").concat(d,"two-color")),this},b}(x.Ss),lK=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lL=function(){return(lL=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},lM=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},lN=function(a){return a||0===a},lO=function(a){function b(b){var c=a.call(this,b,"StyleManager",new lF([],{em:b}),k,{sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]})||this;c.events=k,c.Sector=lC,c.storageKey="",(0,r.bindAll)(c,"__clearStateTarget");var d=c.events,e=c.config,f=e.pStylePrefix;f&&(e.stylePrefix=f+e.stylePrefix),c.builtIn=new lx,c.properties=new ls([],{em:b,module:c}),c.sectors=c.all;var g=new x.Kx({targets:[]});c.model=g;var h=Y.I.update;c.upAll=(0,r.debounce)(function(){return c.__upSel()},0),g.listenTo(b,"component:toggled ".concat(h,":classes change:state change:device frame:resized selector:type"),c.upAll),g.listenTo(b,"component:toggled",c.__clearStateTarget);var i=(0,r.debounce)(function(){c.__upProps(),c.__trgCustom()},0);g.listenTo(b,"styleable:change undo redo",i);var j=(0,r.debounce)(function(){return c.__trgCustom()},0);return g.listenTo(b,"".concat(d.layerSelect," ").concat(d.target),j),g.on("change:lastTarget",function(){return b.trigger(d.target,c.getSelected())}),c}return lK(b,a),b.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},b.prototype.__trgCustom=function(a){void 0===a&&(a={}),this.__ctn=this.__ctn||a.container,this.em.trigger(this.events.custom,{container:this.__ctn})},b.prototype.__trgEv=function(a){for(var b,c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];(b=this.em).trigger.apply(b,lM([a],c,!1))},b.prototype.__clearStateTarget=function(){var a=this,b=this.em,c=this.__getStateTarget();c&&(null==b||b.skip(function(){b.Css.remove(c),a.model.set({stateTarget:null})}))},b.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},b.prototype.postRender=function(){this.__appendTo()},b.prototype.addSector=function(a,b,c){void 0===c&&(c={});var d=this.getSector(a);return d||(b.id=a,d=this.sectors.add(b,c)),d},b.prototype.getSector=function(a,b){void 0===b&&(b={});var c=this.sectors.where({id:a})[0];return!c&&b.warn&&this._logNoSector(a),c||null},b.prototype.getSectors=function(a){void 0===a&&(a={});var b=this.sectors,c=b&&b.models?a.array?lM([],b.models,!0):b:[];return a.visible?c.filter(function(a){return a.isVisible()}):c},b.prototype.removeSector=function(a){return this.getSectors().remove(this.getSector(a,{warn:!0}))},b.prototype.addProperty=function(a,b,c){void 0===c&&(c={});var d,e=this.getSector(a,{warn:!0});return e&&(d=e.addProperty(b,c)),d},b.prototype.getProperty=function(a,b){var c,d=this.getSector(a,{warn:!0});return d&&(c=d.properties.filter(function(a){return a.get("property")===b||a.get("id")===b})[0]),c},b.prototype.getProperties=function(a){var b,c=this.getSector(a,{warn:!0});return c&&(b=c.properties),b},b.prototype.removeProperty=function(a,b){var c=this.getProperties(a);return c?c.remove(this.getProperty(a,b)):null},b.prototype.select=function(a,b){var c=this;void 0===b&&(b={});var d=this.em,e=(0,r.isArray)(a)?a:[a],f=b.stylable,g=d.Css,h=[];e.filter(Boolean).forEach(function(a){var b=a;if((0,r.isString)(a)){var c=g.getRule(a)||g.setRule(a);(0,r.isUndefined)(f)||c.set({stylable:f}),b=c}h.push(b)});var i=b.component||h.filter(function(a){return(0,s.isComponent)(a)}).reverse()[0];h=h.map(function(a){return c.getModelToStyle(a)});var j=d.getState(),k=h.slice().reverse()[0],l=this.getParentRules(k,{state:j,component:i}),m=this.__getStateTarget();return d.skip(function(){var a;if(j&&(null==(a=null==k?void 0:k.getState)?void 0:a.call(k))){var b=k.getStyle();m?m.setStyle(b):m=g.getAll().add({selectors:"gjs-selected",style:b,shallow:!0,important:!0})}else m&&(g.remove(m),m=void 0)}),this.model.set({targets:h,lastTarget:k,lastTargetParents:l,stateTarget:m,component:i}),this.__upProps(b),h},b.prototype.getSelected=function(){return this.model.get("lastTarget")},b.prototype.getSelectedAll=function(){return this.model.get("targets")},b.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},b.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},b.prototype.addStyleTargets=function(a,b){this.getSelectedAll().map(function(c){return c.addStyle(a,b)});var c=this.getSelected();c&&this.__emitCmpStyleUpdate(a);var d=this.__getStateTarget();c&&(null==d||d.setStyle(c.getStyle(),b))},b.prototype.getBuiltIn=function(a){return this.builtIn.get(a)},b.prototype.getBuiltInAll=function(){return this.builtIn.props},b.prototype.addBuiltIn=function(a,b){return this.builtIn.add(a,b)},b.prototype.getModelToStyle=function(a,b){void 0===b&&(b={});var c=this.em,d=b.skipAdd;if(c&&(null==a?void 0:a.toHTML)){var e=c.getConfig(),f=c.UndoManager,g=c.Css,h=c.Selectors,i=h?h.getConfig():{},j=e.devicePreviewMode?"":c.get("state"),k=a.get("classes").getStyleable(),l=k.length,m=!i.componentFirst||b.useClasses,n={noCount:1},o={state:j,addOpts:n};f.skip(function(){var b;if(l&&m){var f=c.getCurrentMedia();(b=g.get(k,j,f))||d||(b=g.add(k,j,f,{},n))}else if(e.avoidInlineStyle){var h=a.getId();(b=g.getIdRule(h,o))||d||(b=g.setIdRule(h,{},o)),a.is("wrapper")&&b.set("wrapper",1,n)}b&&(a=b)})}return a},b.prototype.getParentRules=function(a,b){var c=void 0===b?{}:b,d=c.state,e=c.component,f=this.em,g=[];if(f&&a){var h=f.Css,i=f.CodeManager.getGenerator("css"),j=a.toHTML?a:a.getComponent(),k={array:!0},l=[],m=[],n=[],o=[],p=function(a){return a.length?h.getRules().filter(function(b){var c=b.getSelectors().map(function(a){return a.getFullName()});return 0!==c.length&&c.every(function(b){return a.indexOf(b)>=0})}):[]},q=function(a){return a?h.getRules().filter(function(b){return b.selectorsToString()===a}):[]};j?(l=h.getRules("#".concat(j.getId())),m=q(j.get("tagName")),o=(e?p(e.getSelectors().getFullName(k)):[]).concat(m).concat(l)):(l=e?h.getRules("#".concat(e.getId())):[],m=q((null==e?void 0:e.get("tagName"))||""),n=p(((null==e?void 0:e.getSelectors().getFullName(k))||[]).filter(function(b){return -1===a.getSelectors().getFullName(k).findIndex(function(a){return a===b})}).concat(a.getSelectors().getFullName(k))),o=m.concat(l).concat(n));var s=o.filter(function(a){return(0,r.isUndefined)(d)?1:a.get("state")===d}).sort(i.sortRules).reverse();g=s.slice(s.indexOf(a)+1)}return g},b.prototype.addType=function(a,b){this.properties.addType(a,b)},b.prototype.getType=function(a){return this.properties.getType(a)},b.prototype.getTypes=function(){return this.properties.getTypes()},b.prototype.createType=function(a,b){var c=void 0===b?{}:b,d=c.model,e=c.view,f=this.config,g=this.getType(a);if(g)return new g.view(lL({model:new g.model(void 0===d?{}:d),config:f},void 0===e?{}:e))},b.prototype.render=function(){var a=this.config,b=this.em,c=this.SectView,d=c&&c.el;return this.SectView=new lJ({el:d,em:b,config:a,module:this,collection:this.sectors}),this.SectView.render().el},b.prototype._logNoSector=function(a){var b=this.em;b&&b.logWarning("'".concat(a,"' sector not found"))},b.prototype.__emitCmpStyleUpdate=function(a,b){void 0===b&&(b={});var c=this.em;if(!a.__p){var d=this.getSelectedAll(),e=b.components||c.getSelectedAll(),f=Array.isArray(e)?e:[e],g=lL({},a);delete g.__p,f.forEach(function(a){return!d.includes(a)&&a.__onStyleChange(g)})}},b.prototype.__upProps=function(a){var b=this;void 0===a&&(a={});var c=this.getSelected();if(c){var d=this.sectors,e=this.model.get("component"),f=this.getSelectedParents(),g=c.getStyle(),h=f.map(function(a){return{target:a,style:a.getStyle()}});d.map(function(c){c.getProperties().map(function(c){b.__upProp(c,g,h,a)})}),d.forEach(function(a){var b=a.getProperties();b.forEach(function(b){var f=b.__checkVisibility({target:c,sector:a,component:e,sectors:d.models});b.set("visible",f)});var f=b.some(function(a){return a.isVisible()});a.set("visible",f)})}},b.prototype.__upProp=function(a,b,c,d){var e=this,f=a.getName(),g=b[f],h=lN(g),i="stack"===a.getType(),j="composite"===a.getType(),k=lL(lL({},d),{__up:!0}),l=i?a.__getLayersFromStyle(b):[],m=j?a.__getPropsFromStyle(b):{},n=h?g:null,o=null;if(i&&null===l||j&&null===m){var p=i?"__getLayersFromStyle":"__getPropsFromStyle",q=c.filter(function(b){return null!==a[p](b.style)})[0];if(q){n=q.style[f],o=q.target;var r=a[p](q.style);i?l=r:m=r}}else if(!h){n=null;var q=c.filter(function(a){return lN(a.style[f])})[0];q&&(n=q.style[f],o=q.target)}if(a.__setParentTarget(o),j||i||a.__getFullValue()===n||a.upValue(n,k),i&&a.__setLayers(l||[],{isEmptyValue:a.isEmptyValueStyle(b)}),j){var s=a.getProperties();if(a.isDetached()){var t=a.__getPropsFromStyle(b,{byName:!0})||{},u=c.map(function(b){return lL(lL({},b),{style:a.__getPropsFromStyle(b.style,{byName:!0})||{}})});s.map(function(a){return e.__upProp(a,t,u,d)})}else a.__setProperties(m||{},k),a.getProperties().map(function(a){return a.__setParentTarget(o)})}},b.prototype.destroy=function(){var a;[this.properties,this.sectors].forEach(function(a){a.reset(),a.stopListening()}),null==(a=this.SectView)||a.remove(),this.model.stopListening(),this.upAll.cancel()},b}(F);!function(a){a.currentIndex="currentIndex",a.startIndex="startIndex",a.currentItem="currentItem",a.currentKey="currentKey",a.endIndex="endIndex",a.collectionId="collectionId",a.totalItems="totalItems",a.remainingItems="remainingItems"}(m||(m={}));var lP=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lQ=function(){return(lQ=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},lR=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.em=c,d.model=function(a,b){return void 0===b&&(b={}),new cN(a,lQ(lQ({},b),{em:c}))},d}return lP(b,a),b}(x.pM),lS=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lT=function(){return(lT=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},lU=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},lV=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},lW=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},lX=function(a){function b(b){var c=a.call(this,b,"DataSources",new lR([],b),it,{autoloadProviders:!1})||this;return c.storageKey="dataSources",c.events=it,c.dataComponentTypes=iq,c.dataCollectionKeys=ir,c.dataCollectionStateTypes=m,c.dataOperationTypes={any:iu,boolean:iv,number:iw,string:ix},Object.assign(c,u.Events),c}return lS(b,a),b.prototype.destroy=function(){},b.prototype.add=function(a,b){void 0===b&&(b={});var c=this.all;return a.id=a.id||this._createId(),c.add(a,b)},b.prototype.get=function(a){return this.all.get(a)},b.prototype.getAll=function(){return lW([],this.all.models,!0)},b.prototype.getValue=function(a,b,c){return(0,s.get)((null==c?void 0:c.context)||this.getContext(),a,b)},b.prototype.setValue=function(a,b){var c=this.fromPath(a),d=(c[0],c[1]),e=c[2];if(d&&(e||""===e)){var f=lT({},d.attributes);if((0,s.set)(f,e||"",b))return d.set(f),!0}return!1},b.prototype.getContext=function(){return this.all.reduce(function(a,b){return a[b.id]=b.records.reduce(function(a,b,c){var d=lT({},b.attributes);return delete d.__p,a[b.id||c]=d,a},{}),a},{})},b.prototype.remove=function(a,b){return this.__remove(a,b)},b.prototype.fromPath=function(a){var b=[],c=(0,s.stringToPath)(a||""),d=c[0],e=c[1],f=c.slice(2),g=this.get(d),h=null==g?void 0:g.records.get(e);return g&&b.push(g),h&&(b.push(h),f.length&&b.push(f.join("."))),b},b.prototype.store=function(){var a,b=[];return this.all.forEach(function(a){var c=a.attributes,d=c.skipFromStorage,e=(c.transformers,c.records),f=c.schema,g=lV(c,["skipFromStorage","transformers","records","schema"]);d||b.push(lT(lT({},g),{id:g.id,schema:(0,r.isEmpty)(f)?void 0:f,records:g.provider?void 0:e}))}),(a={})[this.storageKey]=b,a},b.prototype.load=function(a){var b=this.config,c=this.all,d=this.events,e=this.em,f=this.loadProjectData(a);if(b.autoloadProviders){var g,h,i,j,k=c.filter(function(a){return a.hasProvider});k.length&&(g=this,h=void 0,i=void 0,j=function(){return lU(this,function(a){switch(a.label){case 0:return e.trigger(d.providerLoadAllBefore),[4,Promise.all(k.map(function(a){return a.loadProvider()}))];case 1:return a.sent(),e.trigger(d.providerLoadAll),[2]}})},new(i||(i=Promise))(function(a,b){function c(a){try{e(j.next(a))}catch(a){b(a)}}function d(a){try{e(j.throw(a))}catch(a){b(a)}}function e(b){var e;b.done?a(b.value):((e=b.value)instanceof i?e:new i(function(a){a(e)})).then(c,d)}e((j=j.apply(g,h||[])).next())}))}return f},b.prototype.postLoad=function(){var a=this.em,b=this.all;a.listenTo(b,x.e2,function(b,c,d){var e=d||c;a.changesUp(e,{dataSource:b,options:e})}),this.em.UndoManager.add(b)},b}(F),lY=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),lZ=function(){return(lZ=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},l$=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},l_=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},l0=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},l1=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))};v().$=w.default;var l2=[i0,hV,jk,kg,gg,hE,fQ,lO,fA,jr,j7,jU,ku,gJ,g7,cq,gZ,fm,lX],l3=[lX,hv,e7,hQ,eU,fA];!function(a){var b=a.$;if(b&&b.prototype&&"jQuery"!==b.prototype.constructor.name){var c=b.fn;c.hide=function(){return this.css("display","none")},c.show=function(){return this.css("display","block")},c.focus=function(){var a=this.get(0);return a&&a.focus(),this},c.bind=function(a,b){return this.on(a,b)},c.unbind=function(a,b){if(!(0,r.isObject)(a))return this.off(a,b);for(var c in a)a.hasOwnProperty(c)&&this.off(c,a[c]);return this},c.click=function(a){return a?this.on("click",a):this.trigger("click")},c.change=function(a){return a?this.on("change",a):this.trigger("change")},c.keydown=function(a){return a?this.on("keydown",a):this.trigger("keydown")},c.delegate=function(a,b,c,d){return d||(d=c),this.on(b,a,function(a){a.data=c,d(a)})},c.scrollLeft=function(){var a=this.get(0),b=(a=9==a.nodeType?a.defaultView:a)instanceof Window?a:null;return b?b.pageXOffset:a.scrollLeft||0},c.scrollTop=function(){var a=this.get(0),b=(a=9==a.nodeType?a.defaultView:a)instanceof Window?a:null;return b?b.pageYOffset:a.scrollTop||0};var d=b.prototype.offset;c.offset=function(a){var b,c;return a&&(b=a.top,c=a.left),void 0!==b&&this.css("top","".concat(b,"px")),void 0!==c&&this.css("left","".concat(c,"px")),d.call(this)},b.map=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c};var e=Array.prototype.indexOf;b.inArray=function(a,b,c){return null==b?-1:e.call(b,a,c)},b.Event=function(a,c){if(!(this instanceof b.Event))return new b.Event(a,c);this.type=a,this.isDefaultPrevented=function(){return!1}}}}({$:w.default});var l4={debug:console.log,info:console.info,warning:console.warn,error:console.error},l5=function(a){function b(b){void 0===b&&(b={});var c=a.call(this)||this;c.Model=x.Kx,c.Collection=x.pM,c.events=h,c.__skip=!1,c.defaultRunning=!1,c.loadTriggered=!1,c.destroyed=!1,c._isStoring=!1,c._config=b;var d=c.config;c.set("Config",b),c.set("modules",[]),c.set("toLoad",[]),c.set("storables",[]),c.set("selected",new A),c.set("dmode",d.dragMode);var e=d.el,f=d.log,g=!0===f?(0,r.keys)(l4):(0,r.isArray)(f)?f:[];return(0,r.bindAll)(c,"initBaseColorPicker"),e&&d.fromElement&&(d.components=e.innerHTML),c.attrsOrig=e?(0,r.toArray)(e.attributes).reduce(function(a,b){return a[b.nodeName]=b.nodeValue,a},{}):"",d.components&&!d.pageManager&&(d.pageManager={pages:[{component:d.components}]}),l2.forEach(function(a){return c.loadModule(a)}),l3.forEach(function(a){return c.loadStorableModule(a)}),c.on("change:componentHovered",c.componentHovered,c),c.on("change:changesCount",c.updateChanges,c),c.on("change:readyLoad change:readyCanvas",c._checkReady,c),g.forEach(function(a){return c.listenLog(a)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(a){var b=a.from,d=a.to;c.listenTo(c,b,function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];c.trigger.apply(c,l1([d],a,!1)),c.logWarning("The event '".concat(b,"' is deprecated, replace it with '").concat(d,"'"))})}),c}return lY(b,a),b.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(b.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"DataSources",{get:function(){return this.get("DataSources")},enumerable:!1,configurable:!0}),b.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},b.prototype.getContainer=function(){return this.config.el},b.prototype.listenLog=function(a){var b=this;this.listenTo(this,"log:".concat(a),function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];if(b.config.log){var e=l4[a];null==e||e.apply(void 0,c)}})},Object.defineProperty(b.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"version",{get:function(){var a;return(null==(a=this.config.grapesjs)?void 0:a.version)||""},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"isHeadless",{get:function(){return!!this.config.headless},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"isShallow",{get:function(){return!!this.get("isShallow")},enumerable:!1,configurable:!0}),b.prototype.initModules=function(){this.modules.forEach(function(a){return a.onInit()})},b.prototype.getConfig=function(a){var b=this.config;return(0,r.isUndefined)(a)?b:b[a]},b.prototype.loadOnStart=function(){var a=this,c=this.config,d=c.projectData,e=c.headless,f={initial:!0},g=this.Storage;this.toLoad.reverse().forEach(function(a){return a.onLoad()});var h=function(){a.modules.forEach(function(b){return b.postLoad&&b.postLoad(a)}),a.set("readyLoad",1)};e?(d&&this.loadData(d,f),h()):this._storageTimeout=setTimeout(function(){return l$(a,void 0,void 0,function(){var a;return l_(this,function(b){switch(b.label){case 0:if(!d)return[3,1];return this.loadData(d,f),[3,5];case 1:if(!(null==g?void 0:g.canAutoload()))return[3,5];b.label=2;case 2:return b.trys.push([2,4,,5]),[4,this.load({},f)];case 3:return b.sent(),[3,5];case 4:return a=b.sent(),this.logError(a),[3,5];case 5:return h(),[2]}})})});var i=new b({noticeOnUnload:!1,storageManager:!1,undoManager:!1});i.set({isShallow:!0}),i.Pages.onLoad(),i.Canvas.postLoad(),this.set("shallow",i)},b.prototype.updateChanges=function(a,b,c){var d=this,e=this.Storage,f=this.getDirtyCount();c.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return d.trigger(h.update)})),this.config.noticeOnUnload&&(window.onbeforeunload=f?function(){return!0}:null),e.isAutosave()&&f>=e.getStepsBeforeSave()&&this.store().catch(function(a){return d.logError(a)})},b.prototype.loadModule=function(a){var b=new a(this);return this.set(b.name,b),b.onLoad&&this.toLoad.push(b),this.modules.push(b),b},b.prototype.loadStorableModule=function(a){var b=this.loadModule(a);return this.storables.push(b),b},b.prototype.init=function(a,b){void 0===b&&(b={}),this.destroyed&&(this.initialize(b),this.destroyed=!1),this.set("Editor",a)},b.prototype.getEditor=function(){return this.get("Editor")},b.prototype.handleUpdates=function(a,b){var c=this;void 0===a&&(a={}),this.__skip||!this.loadTriggered||a.temporary||a.noCount||a.avoidStore||a.partial||(this.trigger(this.events.updateBefore,b),this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var b=c.getDirtyCount()||0;a.unset;var d=l0(a,["unset"]);c.set("changesCount",b+1,d)},0))},b.prototype.changesUp=function(a,b){this.handleUpdates(a,b)},b.prototype.componentHovered=function(a,b,c){var d=this.previous("componentHovered");d&&this.trigger("component:unhovered",d,c),b&&this.trigger("component:hovered",b,c)},b.prototype.getSelected=function(){return this.selected.lastComponent()},b.prototype.getSelectedAll=function(){return this.selected.allComponents()},b.prototype.setSelected=function(a,b){var c=this;void 0===b&&(b={});var d=b.event,e=d&&(d.ctrlKey||d.metaKey),f=(d||{}).shiftKey,g=((0,r.isArray)(a)?a:[a]).map(function(a){var b,c;return(null==(c=null==(b=null==a?void 0:a.delegate)?void 0:b.select)?void 0:c.call(b,a))||a}).filter(Boolean),h=this.getSelectedAll(),i=this.getConfig().multipleSelection,j=(0,r.isArray)(a);(j||!a)&&this.removeSelected(h.filter(function(a){return!(0,r.contains)(g,a)})),g.forEach(function(a){if(a&&(c.trigger(Y.I.selectBefore,a,b),!a.get("selectable")||b.abort))if(!b.useValid)return;else{for(var d=a.parent();d&&!d.get("selectable");)d=d.parent();a=d}if(e&&i)return c.toggleSelected(a);if(f&&i){if(c.isEditing())return;c.clearSelection(c.Canvas.getWindow());var g,k,l=a.collection,m=a.index();if(c.getSelectedAll().forEach(function(a){var b=a.collection,c=a.index();b===l&&(c<m?g=(0,r.isUndefined)(g)?c:Math.max(g,c):c>m&&(k=(0,r.isUndefined)(k)?c:Math.min(k,c)))}),!(0,r.isUndefined)(g))for(;g!==m;)c.addSelected(l.at(g),b),g++;if(!(0,r.isUndefined)(k))for(;k!==m;)c.addSelected(l.at(k),b),k--;return c.addSelected(a,b)}j||c.removeSelected(h.filter(function(b){return b!==a})),c.addSelected(a,b)})},b.prototype.addSelected=function(a,b){var c=this;void 0===b&&(b={}),((0,r.isArray)(a)?a:[a]).forEach(function(a){var d=c.selected;if(!(!a||!a.get("selectable")||a.parents().some(function(a){return d.hasComponent(a)}))&&(b.forceChange&&c.removeSelected(a,b),d.allComponents().filter(function(b){return(0,r.contains)(b.parents(),a)}).forEach(function(a){return c.removeSelected(a,b)}),d.addComponent(a,b),c.trigger(Y.I.select,a,b),c.Canvas.addSpot({type:X.F.Select,component:a}),b.activate)){var e=a.getView();(null==e?void 0:e.rendered)?e.onActive(b.event):a.once(Y.I.render,function(a){return a.view.onActive(b.event)})}})},b.prototype.removeSelected=function(a,b){var c=this;void 0===b&&(b={}),this.selected.removeComponent(a,b),((0,r.isArray)(a)?a:[a]).forEach(function(a){return c.Canvas.removeSpots({type:X.F.Select,component:a})})},b.prototype.toggleSelected=function(a,b){var c=this;void 0===b&&(b={}),((0,r.isArray)(a)?a:[a]).forEach(function(a){c.selected.hasComponent(a)?c.removeSelected(a,b):c.addSelected(a,b)})},b.prototype.setHovered=function(a,b){var c=this;void 0===b&&(b={});var d=function(a,b){var d=c.config,e=c.Canvas,f=c.getHovered(),g=c.getSelectedAll(),h=X.F.Hover,i=X.F.Spacing;c.set("componentHovered",a||null,b),f&&(e.removeSpots({type:h,component:f}),e.removeSpots({type:i,component:f})),a&&(e.addSpot({type:h,component:a}),(!g.includes(a)||d.showOffsetsSelected)&&e.addSpot({type:i,component:a}))};if(!a)return d();var e="component:hover";if(b.forceChange&&d(),this.trigger("".concat(e,":before"),a,b),!a.get("hoverable"))if(!b.useValid||b.abort)return;else{for(var f=a.parent();f&&!f.get("hoverable");)f=f.parent();a=f}b.abort||(d(a,b),this.trigger(e,a,b))},b.prototype.getHovered=function(){return this.get("componentHovered")},b.prototype.setComponents=function(a,b){return void 0===b&&(b={}),this.Components.setComponents(a,b)},b.prototype.getComponents=function(){var a=this.Components,b=this.CodeManager;if(a&&b){var c=a.getComponents();return b.getCode(c,"json")}},b.prototype.setStyle=function(a,b){void 0===b&&(b={});var c=this.Css;return c.clear(b),c.getAll().add(a,b),this},b.prototype.addStyle=function(a,b){void 0===b&&(b={});var c=this.getStyle().add(a,b);return(0,r.isArray)(c)?c:[c]},b.prototype.getStyle=function(){return this.Css.getAll()},b.prototype.setState=function(a){return this.set("state",a),this},b.prototype.getState=function(){return this.get("state")||""},b.prototype.getHtml=function(a){void 0===a&&(a={});var b=this.config,c=b.optsHtml,d=b.jsInHtml?this.getJs(a):"",e=a.component||this.Components.getComponent(),f=e?this.CodeManager.getCode(e,"html",lZ(lZ({},c),a)):"";return f+(d?"<script>".concat(d,"<\/script>"):"")},b.prototype.getCss=function(a){void 0===a&&(a={});var b=this.config,c=b.optsCss,d=a.avoidProtected,e=(0,r.isUndefined)(a.keepUnusedStyles)?b.keepUnusedStyles:a.keepUnusedStyles,f=this.Css,g=a.component||this.Components.getComponent(),h=!d&&b.protectedCss||"",i=g&&this.CodeManager.getCode(g,"css",lZ(lZ({cssc:f,keepUnusedStyles:e},c),a));return g?a.json?i:h+i:""},b.prototype.getJs=function(a){void 0===a&&(a={});var b=a.component||this.Components.getWrapper();return b?this.CodeManager.getCode(b,"js").trim():""},b.prototype.store=function(a){return l$(this,void 0,void 0,function(){var b,c=this;return l_(this,function(d){switch(d.label){case 0:if(this._isStoring)return[2];return this._isStoring=!0,setTimeout(function(){c.clearDirtyCount()},1),b=this.storeData(),[4,this.Storage.store(b,a)];case 1:return d.sent(),setTimeout(function(){c._isStoring=!1},1),[2,b]}})})},b.prototype.load=function(a){return l$(this,arguments,void 0,function(a,b){var c;return void 0===b&&(b={}),l_(this,function(d){switch(d.label){case 0:return[4,this.Storage.load(a)];case 1:return c=d.sent(),this.loadData(c,b),[4,(0,s.wait)()];case 2:return d.sent(),b.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,c]}})})},b.prototype.storeData=function(){var a={},b=this.getEditing();b&&b.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(b){a=lZ(lZ({},a),b.store(1))});var c=JSON.parse(JSON.stringify(a));return this.trigger(h.projectGet,{project:c}),c},b.prototype.loadData=function(a,b){void 0===a&&(a={}),void 0===b&&(b={});var c={project:a,options:b,initial:!!b.initial},d=!1;return(0,s.isEmptyObj)(a)||(this.storables.forEach(function(a){return a.clear()}),this.storables.forEach(function(b){return b.load(a)}),d=!0),this.trigger(h.projectLoad,lZ(lZ({},c),{loaded:d})),d&&this.trigger(h.projectLoaded,c),a},b.prototype.getDeviceModel=function(){var a=this.get("device");return this.Devices.get(a)},b.prototype.runDefault=function(a){void 0===a&&(a={});var b=this.Commands.get(this.config.defaultCommand);b&&!this.defaultRunning&&(b.stop(this,this,a),b.run(this,this,a),this.defaultRunning=!0)},b.prototype.stopDefault=function(a){void 0===a&&(a={});var b=this.Commands;if(b){var c=b.get(this.config.defaultCommand);c&&this.defaultRunning&&(c.stop(this,this,a),this.defaultRunning=!1)}},b.prototype.refreshCanvas=function(a){void 0===a&&(a={}),this.Canvas.refresh({spots:a.tools})},b.prototype.clearSelection=function(a){var b;null==(b=(a||window).getSelection())||b.removeAllRanges()},b.prototype.getCurrentMedia=function(){var a=this.config,b=this.getDeviceModel(),c=a.mediaCondition,d=a.devicePreviewMode,e=b&&b.get("widthMedia");return b&&e&&!d?"(".concat(c,": ").concat(e,")"):""},b.prototype.getWrapper=function(){return this.Components.getWrapper()},b.prototype.setCurrentFrame=function(a){return this.set("currentFrame",a)},b.prototype.getCurrentFrame=function(){return this.get("currentFrame")},b.prototype.getCurrentFrameModel=function(){var a;return null==(a=this.getCurrentFrame()||{})?void 0:a.model},b.prototype.getIcon=function(a){return(this.config.icons||{})[a]||""},b.prototype.getDirtyCount=function(){return this.get("changesCount")},b.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},b.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},b.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},b.prototype.setDragMode=function(a){return this.set("dmode",a)},b.prototype.getDragMode=function(a){return(null==a?void 0:a.getDragMode())||this.get("dmode")||""},b.prototype.t=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=this.get("I18n");return null==c?void 0:c.t.apply(c,a)},b.prototype.inAbsoluteMode=function(a){return"absolute"===this.getDragMode(a)},b.prototype.destroyAll=function(){var a=this,b=this.config,c=this.view;this.trigger(h.destroy);var d=this.getEditor(),e=(b.grapesjs||{}).editors,f=void 0===e?[]:e,g=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),null==g||g.destroyAll(),this.stopListening(),this.stopDefault(),(this.modules||[]).slice().reverse().forEach(function(a){return a.destroy()}),(null==c?void 0:c.remove)&&c.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(b){return a[b]={}}),f.splice(f.indexOf(d),1),(0,s.hasWin)()&&(0,w.default)(b.el).empty().attr(this.attrsOrig),this.trigger(h.destroyed)},b.prototype.getEditing=function(){var a=this.get("editing");return a&&a.model||void 0},b.prototype.setEditing=function(a){return this.set("editing",a),this},b.prototype.isEditing=function(){return!!this.get("editing")},b.prototype.log=function(a,b){void 0===b&&(b={});var c=h.log,d=b.ns,e=b.level,f=void 0===e?"debug":e;if(this.trigger(c,a,b),f&&this.trigger("".concat(c,":").concat(f),a,b),d){var g="".concat(c,"-").concat(d);this.trigger(g,a,b),f&&this.trigger("".concat(g,":").concat(f),a,b)}},b.prototype.logInfo=function(a,b){this.log(a,lZ(lZ({},b),{level:"info"}))},b.prototype.logWarning=function(a,b){this.log(a,lZ(lZ({},b),{level:"warning"}))},b.prototype.logError=function(a,b){this.log(a,lZ(lZ({},b),{level:"error"}))},b.prototype.initBaseColorPicker=function(a,b){void 0===b&&(b={});var c=this.config,d=c.colorPicker,e=c.el,f=c.stylePrefix;return(0,w.default)(a).spectrum(lZ(lZ({containerClassName:"".concat(f,"one-bg ").concat(f,"two-color"),appendTo:e||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:""},b),void 0===d?{}:d))},b.prototype.skip=function(a){this.__skip=!0;var b=this.UndoManager;b?b.skip(a):a(),this.__skip=!1},b.prototype.data=function(a,b,c){var d="_gjs-data";if(a[d]||(a[d]={}),(0,r.isUndefined)(c))return a[d][b];a[d][b]=c},b}(x.Kx),l6=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),l7=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},l8=function(a){function b(b){var c=a.call(this,{model:b})||this,d=b.Panels,e=b.UndoManager;return b.view=c,b.once("change:ready",function(){d.active(),d.disableButtons(),b.getConfig().telemetry&&c.sendTelemetryData().catch(function(){}),setTimeout(function(){b.trigger(h.load,b.Editor),b.loadTriggered=!0,e.clear(),b.clearDirtyCount()})}),c}return l6(b,a),b.prototype.render=function(){var a=this,b=this.$el,c=this.model,d=c.Panels,e=c.Canvas,f=c.config,g=c.modules,h=f.stylePrefix,i=["".concat(h,"editor")];f.customUI||i.push("".concat(h,"one-bg ").concat(h,"two-color"));var j=(0,w.default)(f.el||"body ".concat(f.container));f.cssIcons&&(0,s.appendStyles)(f.cssIcons,{unique:!0,prepand:!0}),b.empty(),f.width&&j.css("width",f.width),f.height&&j.css("height",f.height),b.append(e.render()),b.append(d.render());var k=c.shallow.Canvas.render();return k.style.display="none",b.append(k),b.attr("class",i.join(" ")),j.addClass("".concat(h,"editor-cont")).empty().append(b),g.forEach(function(b){var c;return null==(c=b.postRender)?void 0:c.call(b,a)}),this},b.prototype.sendTelemetryData=function(){var a,b,c,d;return a=this,b=void 0,c=void 0,d=function(){var a,b,c,d,e,f,g;return l7(this,function(i){switch(i.label){case 0:if("localhost"===(a=window.location.hostname)||a.includes("localhost")||(b="gjs_telemetry_sent_",c=this.model.version,d="".concat(b).concat(c),sessionStorage.getItem(d)))return[2];return[4,fetch("".concat("https://app.grapesjs.com","/api/gjs/telemetry/collect"),{method:"POST",body:JSON.stringify({domain:a,version:c})})];case 1:if((e=i.sent()).ok)return[3,3];return f=Error.bind,g="Failed to send telemetry data ".concat,[4,e.text()];case 2:throw new(f.apply(Error,[void 0,g.apply("Failed to send telemetry data ",[i.sent()])]));case 3:return sessionStorage.setItem(d,"true"),Object.keys(sessionStorage).forEach(function(a){a.startsWith(b)&&a!==d&&sessionStorage.removeItem(a)}),this.trigger(h.telemetryInit),[2]}})},new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},b}(x.Ss),l9=function(){return(l9=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},ma=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},mb=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},mc=function(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))},md=function(){function a(a,b){void 0===a&&(a={}),void 0===b&&(b={}),this.events=h,this.html=t;var c,d={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1,telemetry:!0};this.config=l9(l9(l9({},d),a),{pStylePrefix:null!=(c=a.stylePrefix)?c:d.stylePrefix}),this.em=new l5(this.config),this.$=b.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(a.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DataSources",{get:function(){return this.em.DataSources},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(a){return this.em.getConfig(a)},a.prototype.getHtml=function(a){return this.em.getHtml(a)},a.prototype.getCss=function(a){return this.em.getCss(a)},a.prototype.getJs=function(a){return this.em.getJs(a)},a.prototype.getComponents=function(){return this.Components.getComponents()},a.prototype.getWrapper=function(){return this.Components.getWrapper()},a.prototype.setComponents=function(a,b){return void 0===b&&(b={}),this.em.setComponents(a,b),this},a.prototype.addComponents=function(a,b){return this.getWrapper().append(a,b)},a.prototype.getStyle=function(){return this.em.Css.getAll()},a.prototype.setStyle=function(a,b){return void 0===b&&(b={}),this.em.setStyle(a,b),this},a.prototype.addStyle=function(a,b){return void 0===b&&(b={}),this.em.addStyle(a,b)},a.prototype.getSelected=function(){return this.em.getSelected()},a.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},a.prototype.getSelectedToStyle=function(){var a=this.em.getSelected();if(a)return this.StyleManager.getModelToStyle(a)},a.prototype.select=function(a,b){return this.em.setSelected(a,b),this},a.prototype.selectAdd=function(a){return this.em.addSelected(a),this},a.prototype.selectRemove=function(a){return this.em.removeSelected(a),this},a.prototype.selectToggle=function(a){return this.em.toggleSelected(a),this},a.prototype.getEditing=function(){return this.em.getEditing()},a.prototype.setDevice=function(a){return this.em.set("device",a),this},a.prototype.getDevice=function(){return this.em.get("device")},a.prototype.runCommand=function(a,b){return void 0===b&&(b={}),this.Commands.run(a,b)},a.prototype.stopCommand=function(a,b){return void 0===b&&(b={}),this.Commands.stop(a,b)},a.prototype.store=function(a){return ma(this,void 0,void 0,function(){return mb(this,function(b){switch(b.label){case 0:return[4,this.em.store(a)];case 1:return[2,b.sent()]}})})},a.prototype.load=function(a){return ma(this,arguments,void 0,function(a,b){return void 0===b&&(b={}),mb(this,function(c){switch(c.label){case 0:return[4,this.em.load(a,b)];case 1:return[2,c.sent()]}})})},a.prototype.getProjectData=function(){return this.em.storeData()},a.prototype.loadProjectData=function(a,b){return void 0===b&&(b={}),this.em.loadData(a,b)},a.prototype.storeData=function(){return this.em.storeData()},a.prototype.loadData=function(a){return this.em.loadData(a)},a.prototype.getContainer=function(){return this.config.el},a.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},a.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},a.prototype.refresh=function(a){this.em.refreshCanvas(a)},a.prototype.setCustomRte=function(a){this.RichTextEditor.customRte=a},a.prototype.setCustomParserCss=function(a){return this.Parser.getConfig().parserCss=a,this},a.prototype.setDragMode=function(a){return this.em.setDragMode(a),this},a.prototype.log=function(a,b){return void 0===b&&(b={}),this.em.log(a,b),this},a.prototype.t=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(a=this.em).t.apply(a,b)},a.prototype.on=function(a,b){return this.em.on(a,b),this},a.prototype.once=function(a,b){return this.em.once(a,b),this},a.prototype.off=function(a,b){return this.em.off(a,b),this},a.prototype.trigger=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return this.em.trigger.apply(this.em,mc([a],b,!0)),this},a.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},a.prototype.getEl=function(){var a;return null==(a=this.editorView)?void 0:a.el},a.prototype.getModel=function(){return this.em},a.prototype.render=function(){var a;return null==(a=this.editorView)||a.remove(),this.editorView=new l8(this.em),this.editorView.render().el},a.prototype.onReady=function(a){this.em.get("ready")?a(this):this.em.on("load",a)},a}(),me=function(a,b){var c=b.get(a);if(!c){var d=(0,s.getGlobal)()[a];c=(null==d?void 0:d.default)||d}return c},mf=function(a,b){return(0,r.isString)(a)?me(a,b):(null==a?void 0:a.default)||a},mg=function(a,b){a.getModel().logWarning("Plugin ".concat(b," not found"),{context:"plugins",plugin:b})},mh=function(){function a(){this.plugins={}}return a.prototype.add=function(a,b){var c=this.get(a);return c||(this.plugins[a]=b,b)},a.prototype.get=function(a){return this.plugins[a]},a.prototype.getAll=function(){return this.plugins},a}(),mi=function(){return(mi=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)};!function(){if((0,s.hasWin)()&&function(){for(var a,b=window.navigator.userAgent,c=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],d=0;d<c.length&&!(a=c[d][1].exec(b));d++);return!!a}()){var a=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(b){return b||(b=""),a.apply(document.implementation,[b])}}}();var mj=new mh,mk=[],ml=function(a,b){var c=mf(a,mj);return function(d){c?c(d,b||{}):mg(d,a)}},mm={$:w.default,editors:mk,plugins:mj,usePlugin:ml,version:"0.22.14",init:function(a){void 0===a&&(a={});var b=a.headless,c=a.container;if(!c&&!b)throw Error("'container' is required");var d=mi(mi({autorender:!0,plugins:[],pluginsOpts:{}},a),{grapesjs:this,el:b?void 0:(0,r.isElement)(c)?c:document.querySelector(c)}),e=new md(d,{$:w.default}),f=e.getModel();return f.initModules(),d.plugins.forEach(function(a){var b=mf(a,mj),c=d.pluginsOpts[a]||{};b?b(e,c):mg(e,a)}),f.loadOnStart(),d.autorender&&!b&&e.render(),mk.push(e),e}};let mn=mm;var mo=q.Ay,mp=q.I0,mq=q.nu}};
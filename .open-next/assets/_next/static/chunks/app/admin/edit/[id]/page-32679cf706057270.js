(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5931],{11312:(e,t,i)=>{"use strict";i.d(t,{default:()=>r});var n=i(95155),a=i(12115);function r(e){let{id:t}=e,r=(0,a.useRef)(null),l=(0,a.useRef)(null),[o,s]=(0,a.useState)(!0),[d,c]=(0,a.useState)(!1),[p,u]=(0,a.useState)("");async function g(){var e,t,i;let n=l.current;if(n){c(!0),u("");try{let i={html:null!=(e=n.getHtml())?e:"",css:null!=(t=n.getCss())?t:""};console.log(i),console.log()}catch(e){u(null!=(i=null==e?void 0:e.message)?i:"Save failed ❌")}finally{c(!1),setTimeout(()=>u(""),2500)}}}return(0,a.useEffect)(()=>{let e=!1;return async function(){try{if(s(!0),u(""),!r.current)return;let n=await fetch("/api/admin/pages/".concat(t),{cache:"no-store"}),a=n.ok?await n.json():{html:"",css:""};if(e)return;let o=(await Promise.all([i.e(2729),i.e(5376)]).then(i.bind(i,52280))).default,d=(await i.e(757).then(i.t.bind(i,90757,23))).default,c=(await i.e(4239).then(i.t.bind(i,4239,23))).default,p=(await i.e(3975).then(i.t.bind(i,3975,23))).default,g=(await i.e(3297).then(i.t.bind(i,73297,23))).default,h=(await i.e(6837).then(i.t.bind(i,86837,23))).default;if(l.current){try{l.current.destroy()}catch(e){}l.current=null}let m=o.init({container:r.current,height:"100%",width:"auto",fromElement:!1,storageManager:!1,blockManager:{appendTo:"#blocks"},layerManager:{appendTo:"#layers"},traitManager:{appendTo:"#traits"},selectorManager:{componentFirst:!0},styleManager:{appendTo:"#styles",clearProperties:!0,sectors:[{name:"Layout",open:!0,buildProps:["display","position","top","right","left","bottom"]},{name:"Flex",open:!1,buildProps:["flex-direction","flex-wrap","justify-content","align-items","align-content","gap"]},{name:"Size",open:!1,buildProps:["width","height","max-width","min-height"]},{name:"Spacing",open:!1,buildProps:["margin","padding","margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left"]},{name:"Typography",open:!1,buildProps:["font-family","font-size","font-weight","letter-spacing","line-height","color","text-align","text-decoration","text-transform"]},{name:"Background",open:!1,buildProps:["background","background-color","background-image","background-size"]},{name:"Border",open:!1,buildProps:["border","border-radius","border-color","border-width","border-style"]},{name:"Effects",open:!1,buildProps:["box-shadow","opacity"]},{name:"Extra",open:!1,buildProps:["overflow","cursor","z-index"]}]},deviceManager:{devices:[{name:"Desktop",width:""},{name:"Tablet",width:"768px",widthMedia:"992px"},{name:"Mobile",width:"375px",widthMedia:"480px"}]},plugins:[d,c,p,g,h],pluginsOpts:{[d]:{blocksBasicOpts:{flexGrid:!0}}},panels:{defaults:[{id:"top",el:".gjs-topbar",buttons:[{id:"undo",command:"core:undo",label:"Undo"},{id:"redo",command:"core:redo",label:"Redo"},{id:"preview",command:"preview",label:"Preview"},{id:"fullscreen",command:"fullscreen",label:"Full"},{id:"export",command:"export-template",label:"Export"}]}]}});a.html&&m.setComponents(a.html),a.css&&m.setStyle(a.css),m.BlockManager.add("flex-container",{label:"Flex Container",category:"Layout",content:'<div style="display:flex;gap:12px;padding:16px;align-items:flex-start;"></div>'}),l.current=m,e||s(!1)}catch(t){if(console.error("GrapesJS init error:",t),!e){var n;u("Init error: ".concat(null!=(n=null==t?void 0:t.message)?n:String(t))),s(!1)}}}(),()=>{if(e=!0,l.current){try{l.current.destroy()}catch(e){}l.current=null}}},[t]),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"320px 1fr 320px",height:"100vh"},children:[(0,n.jsxs)("aside",{style:{borderRight:"1px solid #eee",overflow:"auto",padding:12},children:[(0,n.jsx)("button",{onClick:g,disabled:o||d,style:{padding:"10px 12px",border:"1px solid #ddd",borderRadius:10},children:d?"Saving...":"Save"}),(0,n.jsx)("div",{style:{fontSize:12,opacity:.8,marginTop:8},children:p}),(0,n.jsx)("hr",{style:{margin:"14px 0"}}),(0,n.jsx)("h3",{style:{margin:"8px 0"},children:"Blocks"}),(0,n.jsx)("div",{id:"blocks",className:"font-bold"}),(0,n.jsx)("hr",{style:{margin:"14px 0"}}),(0,n.jsx)("h3",{style:{margin:"8px 0"},children:"Layers"}),(0,n.jsx)("div",{id:"layers"})]}),(0,n.jsxs)("main",{style:{minWidth:0},children:[(0,n.jsx)("div",{className:"gjs-topbar",style:{borderBottom:"1px solid #eee",padding:8}}),o&&(0,n.jsx)("div",{style:{padding:12},children:"Loading editor… (check console if stuck)"}),(0,n.jsx)("div",{ref:r,style:{height:"calc(100vh - 44px)"}})]}),(0,n.jsxs)("aside",{style:{borderLeft:"1px solid #eee",overflow:"auto",padding:12},children:[(0,n.jsx)("h3",{style:{margin:"8px 0"},children:"Traits"}),(0,n.jsx)("div",{id:"traits"}),(0,n.jsx)("hr",{style:{margin:"14px 0"}}),(0,n.jsx)("h3",{style:{margin:"8px 0"},children:"Styles"}),(0,n.jsx)("div",{id:"styles",className:"font-[1000] text-2xl"})]})]})}i(23206),i(19706)},16296:(e,t,i)=>{Promise.resolve().then(i.bind(i,11312))},19706:()=>{},23206:()=>{}},e=>{e.O(0,[6025,5489,8441,1255,7358],()=>e(e.s=16296)),_N_E=e.O()}]);
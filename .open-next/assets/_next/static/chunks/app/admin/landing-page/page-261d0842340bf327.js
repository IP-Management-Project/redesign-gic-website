(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7890],{12161:(e,a,r)=>{"use strict";r.d(a,{A:()=>h});var l=r(95155),t=r(12115),s=r(13563),n=r(31328),i=r(69210),c=r(88407),o=r(85986),d=r(74891),u=r(36245);function h(e){let{title:a,isOpen:r,onClose:h,isSaving:g=!1,onSave:p,children:m}=e,x=t.useRef(null),{moveProps:f}=(0,n.P)({targetRef:x});return(0,l.jsx)(i.Y,{isOpen:r,onOpenChange:h,size:"2xl",scrollBehavior:"inside",children:(0,l.jsx)(c.g,{children:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.c,{...f,className:"cursor-move",children:a}),(0,l.jsx)(d.h,{children:m}),(0,l.jsxs)(u.q,{className:"justify-between",children:[(0,l.jsx)(s.T,{variant:"flat",onPress:e,children:"Cancel"}),(0,l.jsx)(s.T,{color:"primary",onPress:p,isLoading:g,children:"Save changes"})]})]})})})}},16313:(e,a,r)=>{Promise.resolve().then(r.bind(r,33368))},33368:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>ec});var l=r(95155),t=r(12115),s=r(51303),n=r(98967),i=r.n(n),c=r(98134),o=r.n(c),d=r(69210),u=r(88407),h=r(85986),g=r(74891),p=r(80331),m=r(51336),x=r(77039),f=r(20280),v=r(22544),S=r(6005),j=r(36245),b=r(13563),w=r(53088);let y={backgroundImage:"",logoText:"",discoverLabel:""},N={heroTitle1:"",heroTitle2:"",heroSubtitle:""};function k(e){var a,r,s,n,c;let{isOpen:k,onClose:C}=e,{data:T}=(0,w.Z)(),P=(0,w.Y)(),D=i()(null==T?void 0:T.hero)?y:null!=(n=null==T?void 0:T.hero)?n:y,V=i()(null==T||null==(a=T.locales)?void 0:a.en)?N:null!=(c=null==T||null==(r=T.locales)?void 0:r.en)?c:N,[L,I]=t.useState({"hero.backgroundImage":"","hero.logoText":"","hero.discoverLabel":"","locales.en.heroTitle1":"","locales.en.heroTitle2":"","locales.en.heroSubtitle":""}),[E,R]=t.useState(""),[K,A]=t.useState(!1),U=null==(s=L["hero.backgroundImage"])?void 0:s.trim(),H=!!U;t.useEffect(()=>{var e,a,r,l,t,s;k&&(I({"hero.backgroundImage":null!=(e=D.backgroundImage)?e:"","hero.logoText":null!=(a=D.logoText)?a:"","hero.discoverLabel":null!=(r=D.discoverLabel)?r:"","locales.en.heroTitle1":null!=(l=V.heroTitle1)?l:"","locales.en.heroTitle2":null!=(t=V.heroTitle2)?t:"","locales.en.heroSubtitle":null!=(s=V.heroSubtitle)?s:""}),R(""),A(!1))},[k,D.backgroundImage,D.logoText,D.discoverLabel,V]);let F=(e,a)=>{I(r=>({...r,[e]:a}))},O=async e=>{if(e){A(!0);try{let a=await new Promise((a,r)=>{let l=new FileReader;l.onerror=()=>r(Error("Failed to read file")),l.onload=()=>{var e;return a(String(null!=(e=l.result)?e:""))},l.readAsDataURL(e)});R(e.name),F("hero.backgroundImage",a)}finally{A(!1)}}},Z=()=>{let e={"hero.backgroundImage":o()(L,"hero.backgroundImage",""),"hero.logoText":o()(L,"hero.logoText",""),"hero.discoverLabel":o()(L,"hero.discoverLabel",""),"locales.en.heroTitle1":o()(L,"locales.en.heroTitle1",""),"locales.en.heroTitle2":o()(L,"locales.en.heroTitle2",""),"locales.en.heroSubtitle":o()(L,"locales.en.heroSubtitle","")};P.mutate({section:"hero",data:e},{onSuccess:()=>C()})};return(0,l.jsx)(d.Y,{isOpen:k,onOpenChange:e=>!e&&C(),size:"4xl",scrollBehavior:"inside",children:(0,l.jsx)(u.g,{children:()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.c,{className:"flex flex-col gap-1",children:"Edit Hero"}),(0,l.jsxs)(g.h,{className:"gap-5",children:[(0,l.jsx)(p.Z,{className:"overflow-hidden",children:(0,l.jsxs)(m.U,{className:"p-0",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"h-96 w-full bg-red-300",children:H?(0,l.jsx)(x.W,{src:U,alt:"GIC background preview",removeWrapper:!0,width:200,height:500,className:"h-100 w-full objec t-cover"}):(0,l.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-default-100",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-base font-semibold",children:"No background image yet"}),(0,l.jsx)("div",{className:"text-sm text-default-500",children:"Upload an image or paste a URL below."})]})})}),(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-end",children:(0,l.jsx)("div",{className:"w-full bg-gradient-to-t from-black/70 via-black/30 to-transparent p-5",children:(0,l.jsxs)("div",{className:"max-w-2xl",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-white/80",children:L["hero.logoText"]||"Logo text"}),(0,l.jsxs)("div",{className:"mt-2 text-2xl font-semibold leading-tight text-white",children:[(L["locales.en.heroTitle1"]||"Hero title line 1")+" ",(0,l.jsx)("span",{className:"opacity-95",children:L["locales.en.heroTitle2"]||"Hero title line 2"})]}),(0,l.jsx)("div",{className:"mt-2 text-sm text-white/80",children:L["locales.en.heroSubtitle"]||"Hero subtitle goes here."}),(0,l.jsx)("div",{className:"mt-4 inline-flex rounded-full bg-white/15 px-3 py-1 text-xs text-white/90 backdrop-blur",children:L["hero.discoverLabel"]||"Discover"})]})})})]}),(E||K)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f.y,{}),(0,l.jsx)("div",{className:"px-4 py-3 text-sm text-default-600",children:K?"Reading image…":"Using uploaded image: ".concat(E)})]})]})}),(0,l.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Hero background image URL",placeholder:"https://...",value:L["hero.backgroundImage"],onValueChange:e=>F("hero.backgroundImage",e),description:"Paste an image URL, or upload an image to replace it."}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-default-700",children:"Upload new background image"}),(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;return O(null==(a=e.target.files)?void 0:a[0])},className:"block w-full cursor-pointer rounded-medium border border-default-200 bg-default-50 px-3 py-2 text-sm text-default-700 file:mr-4 file:rounded-medium file:border-0 file:bg-default-200 file:px-3 file:py-2 file:text-sm file:font-medium file:text-default-800 hover:bg-default-100"}),(0,l.jsx)("div",{className:"text-xs text-default-500",children:"Tip: This updates the preview immediately. Saving will store what you see."})]})]}),(0,l.jsx)(f.y,{}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Hero logo text",value:L["hero.logoText"],onValueChange:e=>F("hero.logoText",e)}),(0,l.jsx)(v.r,{label:"Discover label",value:L["hero.discoverLabel"],onValueChange:e=>F("hero.discoverLabel",e)}),(0,l.jsx)(v.r,{label:"Hero title line 1",value:L["locales.en.heroTitle1"],onValueChange:e=>F("locales.en.heroTitle1",e)}),(0,l.jsx)(v.r,{label:"Hero title line 2",value:L["locales.en.heroTitle2"],onValueChange:e=>F("locales.en.heroTitle2",e)}),(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsx)(S.P,{label:"Hero subtitle",value:L["locales.en.heroSubtitle"],onValueChange:e=>F("locales.en.heroSubtitle",e),minRows:3})})]})]}),(0,l.jsxs)(j.q,{children:[(0,l.jsx)(b.T,{variant:"flat",onPress:C,isDisabled:P.isPending,children:"Cancel"}),(0,l.jsx)(b.T,{color:"primary",onPress:Z,isLoading:P.isPending,isDisabled:K,children:"Save"})]})]})})})}var C=r(99537),T=r(37665);let P={statsKicker:"",statsTitle:"",statsDesc:""};function D(e){var a,r,s,n;let{isOpen:c,onClose:x}=e,{data:y}=(0,w.Z)(),N=(0,w.Y)(),k=i()(null==y||null==(a=y.dict)?void 0:a.stats)?P:null!=(s=null==y||null==(r=y.dict)?void 0:r.stats)?s:P,D=i()(null==y?void 0:y.statsItems)?[]:null!=(n=null==y?void 0:y.statsItems)?n:[],[V,L]=t.useState({}),[I,E]=t.useState("header");t.useEffect(()=>{var e,a,r;if(!c)return;let l={"dict.stats.statsKicker":String(null!=(e=k.statsKicker)?e:""),"dict.stats.statsTitle":String(null!=(a=k.statsTitle)?a:""),"dict.stats.statsDesc":String(null!=(r=k.statsDesc)?r:"")};D.forEach((e,a)=>{var r,t,s,n;l["statsItems.".concat(a,".label")]=String(null!=(r=e.label)?r:""),l["statsItems.".concat(a,".value")]=String(null!=(t=e.value)?t:""),l["statsItems.".concat(a,".helper")]=String(null!=(s=e.helper)?s:""),l["statsItems.".concat(a,".icon")]=String(null!=(n=e.icon)?n:"")}),L(l),E("header")},[c,k,D]);let R=(e,a)=>{L(r=>({...r,[e]:a}))},K=()=>{let e={"dict.stats.statsKicker":String(o()(V,"dict.stats.statsKicker","")),"dict.stats.statsTitle":String(o()(V,"dict.stats.statsTitle","")),"dict.stats.statsDesc":String(o()(V,"dict.stats.statsDesc",""))};D.forEach((a,r)=>{e["statsItems.".concat(r,".label")]=String(o()(V,"statsItems.".concat(r,".label"),"")),e["statsItems.".concat(r,".value")]=String(o()(V,"statsItems.".concat(r,".value"),"")),e["statsItems.".concat(r,".helper")]=String(o()(V,"statsItems.".concat(r,".helper"),"")),e["statsItems.".concat(r,".icon")]=String(o()(V,"statsItems.".concat(r,".icon"),""))}),N.mutate({section:"stats",data:e},{onSuccess:()=>x()})},A="header"===I,U=A?-1:Number(String(I).replace("stat-",""));return(0,l.jsx)(d.Y,{isOpen:c,onOpenChange:e=>!e&&x(),size:"4xl",scrollBehavior:"inside",children:(0,l.jsx)(u.g,{children:()=>{var e,a,r,t,s,n,i;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.c,{className:"flex flex-col gap-1",children:"Edit Stats"}),(0,l.jsx)(g.h,{children:(0,l.jsx)(p.Z,{children:(0,l.jsxs)(m.U,{className:"gap-4",children:[(0,l.jsxs)(C.r,{"aria-label":"Stats editor",selectedKey:I,onSelectionChange:e=>E(String(e)),variant:"underlined",color:"primary",children:[(0,l.jsx)(T.i,{title:"Header"},"header"),D.map((e,a)=>(0,l.jsx)(T.i,{title:"Stat ".concat(a+1)},"stat-".concat(a)))]}),(0,l.jsx)(f.y,{}),A?(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Stats kicker",value:String(null!=(e=o()(V,"dict.stats.statsKicker",""))?e:""),onValueChange:e=>R("dict.stats.statsKicker",e)}),(0,l.jsx)(v.r,{label:"Stats title",value:String(null!=(a=o()(V,"dict.stats.statsTitle",""))?a:""),onValueChange:e=>R("dict.stats.statsTitle",e)}),(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsx)(S.P,{label:"Stats description",value:String(null!=(r=o()(V,"dict.stats.statsDesc",""))?r:""),onValueChange:e=>R("dict.stats.statsDesc",e),minRows:3})})]}):(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Label",value:String(null!=(t=o()(V,"statsItems.".concat(U,".label"),""))?t:""),onValueChange:e=>R("statsItems.".concat(U,".label"),e)}),(0,l.jsx)(v.r,{label:"Value",value:String(null!=(s=o()(V,"statsItems.".concat(U,".value"),""))?s:""),onValueChange:e=>R("statsItems.".concat(U,".value"),e)}),(0,l.jsx)(v.r,{label:"Helper",value:String(null!=(n=o()(V,"statsItems.".concat(U,".helper"),""))?n:""),onValueChange:e=>R("statsItems.".concat(U,".helper"),e)}),(0,l.jsx)(v.r,{label:"Icon",value:String(null!=(i=o()(V,"statsItems.".concat(U,".icon"),""))?i:""),onValueChange:e=>R("statsItems.".concat(U,".icon"),e)})]})]})})}),(0,l.jsxs)(j.q,{children:[(0,l.jsx)(b.T,{variant:"flat",onPress:x,isDisabled:N.isPending,children:"Cancel"}),(0,l.jsx)(b.T,{color:"primary",onPress:K,isLoading:N.isPending,children:"Save"})]})]})}})})}let V={pillarsKicker:"",pillarsTitle:"",pillarsDesc:"",pillarsCtaLabel:""};function L(e){var a,r,s,n;let{isOpen:c,onClose:x}=e,{data:y}=(0,w.Z)(),N=(0,w.Y)(),k=i()(null==y||null==(a=y.dict)?void 0:a.pillars)?V:null!=(s=null==y||null==(r=y.dict)?void 0:r.pillars)?s:V,P=i()(null==y?void 0:y.pillars)?[]:null!=(n=null==y?void 0:y.pillars)?n:[],[D,L]=t.useState({}),[I,E]=t.useState("header");t.useEffect(()=>{var e,a,r,l;if(!c)return;let t={"dict.pillars.pillarsKicker":String(null!=(e=k.pillarsKicker)?e:""),"dict.pillars.pillarsTitle":String(null!=(a=k.pillarsTitle)?a:""),"dict.pillars.pillarsDesc":String(null!=(r=k.pillarsDesc)?r:""),"dict.pillars.pillarsCtaLabel":String(null!=(l=k.pillarsCtaLabel)?l:"")};P.forEach((e,a)=>{var r,l,s,n,i,c;t["pillars.".concat(a,".number")]=String(null!=(r=e.number)?r:""),t["pillars.".concat(a,".title")]=String(null!=(l=e.title)?l:""),t["pillars.".concat(a,".desc")]=String(null!=(s=e.desc)?s:""),t["pillars.".concat(a,".icon")]=String(null!=(n=e.icon)?n:""),t["pillars.".concat(a,".color")]=String(null!=(i=e.color)?i:""),t["pillars.".concat(a,".href")]=String(null!=(c=e.href)?c:"")}),L(t),E("header")},[c,k,P]);let R=(e,a)=>{L(r=>({...r,[e]:a}))},K=()=>{let e={"dict.pillars.pillarsKicker":String(o()(D,"dict.pillars.pillarsKicker","")),"dict.pillars.pillarsTitle":String(o()(D,"dict.pillars.pillarsTitle","")),"dict.pillars.pillarsDesc":String(o()(D,"dict.pillars.pillarsDesc","")),"dict.pillars.pillarsCtaLabel":String(o()(D,"dict.pillars.pillarsCtaLabel",""))};P.forEach((a,r)=>{e["pillars.".concat(r,".number")]=String(o()(D,"pillars.".concat(r,".number"),"")),e["pillars.".concat(r,".title")]=String(o()(D,"pillars.".concat(r,".title"),"")),e["pillars.".concat(r,".desc")]=String(o()(D,"pillars.".concat(r,".desc"),"")),e["pillars.".concat(r,".icon")]=String(o()(D,"pillars.".concat(r,".icon"),"")),e["pillars.".concat(r,".color")]=String(o()(D,"pillars.".concat(r,".color"),"")),e["pillars.".concat(r,".href")]=String(o()(D,"pillars.".concat(r,".href"),""))}),N.mutate({section:"pillars",data:e},{onSuccess:()=>x()})},A="header"===I,U=A?-1:Number(String(I).replace("pillar-",""));return(0,l.jsx)(d.Y,{isOpen:c,onOpenChange:e=>!e&&x(),size:"5xl",scrollBehavior:"inside",children:(0,l.jsx)(u.g,{children:()=>{var e,a,r,t,s,n,i,c,d,u;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.c,{className:"flex flex-col gap-1",children:"Edit Pillars"}),(0,l.jsx)(g.h,{children:(0,l.jsx)(p.Z,{children:(0,l.jsxs)(m.U,{className:"gap-4",children:[(0,l.jsxs)(C.r,{"aria-label":"Pillars editor",selectedKey:I,onSelectionChange:e=>E(String(e)),variant:"underlined",color:"primary",children:[(0,l.jsx)(T.i,{title:"Header"},"header"),P.map((e,a)=>(0,l.jsx)(T.i,{title:"Pillar ".concat(a+1)},"pillar-".concat(a)))]}),(0,l.jsx)(f.y,{}),A?(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Pillars kicker",value:String(null!=(e=o()(D,"dict.pillars.pillarsKicker",""))?e:""),onValueChange:e=>R("dict.pillars.pillarsKicker",e)}),(0,l.jsx)(v.r,{label:"Pillars title",value:String(null!=(a=o()(D,"dict.pillars.pillarsTitle",""))?a:""),onValueChange:e=>R("dict.pillars.pillarsTitle",e)}),(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsx)(S.P,{label:"Pillars description",value:String(null!=(r=o()(D,"dict.pillars.pillarsDesc",""))?r:""),onValueChange:e=>R("dict.pillars.pillarsDesc",e),minRows:3})}),(0,l.jsx)(v.r,{className:"md:col-span-2",label:"Pillars CTA label",value:String(null!=(t=o()(D,"dict.pillars.pillarsCtaLabel",""))?t:""),onValueChange:e=>R("dict.pillars.pillarsCtaLabel",e)})]}):(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Number",value:String(null!=(s=o()(D,"pillars.".concat(U,".number"),""))?s:""),onValueChange:e=>R("pillars.".concat(U,".number"),e)}),(0,l.jsx)(v.r,{label:"Title",value:String(null!=(n=o()(D,"pillars.".concat(U,".title"),""))?n:""),onValueChange:e=>R("pillars.".concat(U,".title"),e)}),(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsx)(S.P,{label:"Description",value:String(null!=(i=o()(D,"pillars.".concat(U,".desc"),""))?i:""),onValueChange:e=>R("pillars.".concat(U,".desc"),e),minRows:3})}),(0,l.jsx)(v.r,{label:"Icon",value:String(null!=(c=o()(D,"pillars.".concat(U,".icon"),""))?c:""),onValueChange:e=>R("pillars.".concat(U,".icon"),e)}),(0,l.jsx)(v.r,{label:"Color",value:String(null!=(d=o()(D,"pillars.".concat(U,".color"),""))?d:""),onValueChange:e=>R("pillars.".concat(U,".color"),e)}),(0,l.jsx)(v.r,{className:"md:col-span-2",label:"Href",value:String(null!=(u=o()(D,"pillars.".concat(U,".href"),""))?u:""),onValueChange:e=>R("pillars.".concat(U,".href"),e)})]})]})})}),(0,l.jsxs)(j.q,{children:[(0,l.jsx)(b.T,{variant:"flat",onPress:x,isDisabled:N.isPending,children:"Cancel"}),(0,l.jsx)(b.T,{color:"primary",onPress:K,isLoading:N.isPending,children:"Save"})]})]})}})})}var I=r(43418),E=r(12161);let R={facultyKicker:"",facultyTitle:"",facultyDesc:""};function K(e){var a,r,s;let{isOpen:n,onClose:c}=e,{data:d}=(0,w.Z)(),u=(0,w.Y)(),h=i()(null==d||null==(a=d.dict)?void 0:a.t)?R:null!=(s=null==d||null==(r=d.dict)?void 0:r.t)?s:R,[g,p]=t.useState({}),m=t.useMemo(()=>[{key:"dict.t.facultyKicker",label:"Faculty kicker",value:h.facultyKicker},{key:"dict.t.facultyTitle",label:"Faculty title",value:h.facultyTitle},{key:"dict.t.facultyDesc",label:"Faculty description",value:h.facultyDesc,multiline:!0}],[h]);return t.useEffect(()=>{n&&p(m.reduce((e,a)=>(e[a.key]=a.value,e),{}))},[m,n]),(0,l.jsx)(E.A,{title:"Edit Faculty",isOpen:n,onClose:c,onSave:()=>{let e=m.reduce((e,a)=>{var r;let l=o()(g,a.key,null!=(r=g[a.key])?r:"");return e[a.key]=a.parse?a.parse(String(l)):String(l),e},{});u.mutate({section:"faculty",data:e},{onSuccess:()=>{c()}})},isSaving:u.isPending,children:(0,l.jsx)(I.A,{fields:m,formValues:g,onChange:(e,a)=>{p(r=>({...r,[e]:a}))},description:"Update the faculty section heading and description."})})}var A=r(36026),U=r(36783);let H={partnersKicker:"",partnersTitle:"",partnersDesc:""},F={feature:{image:"",kicker:"",title:"",desc:""},stats:[],regions:[],affiliationsLabel:"",pathways:[],partners:[]};function O(e){return"true"===(null!=e?e:"").trim().toLowerCase()}function Z(e){let a=(null!=e?e:"").trim();return!!a&&(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("data:image/"))}function W(e){let{label:a,value:r,onChange:s,description:n,previewAlt:i}=e,[c,o]=t.useState(!1),[d,u]=t.useState(""),h=Z(r),g=async e=>{if(e){o(!0);try{let a=await new Promise((a,r)=>{let l=new FileReader;l.onerror=()=>r(Error("Failed to read file")),l.onload=()=>{var e;return a(String(null!=(e=l.result)?e:""))},l.readAsDataURL(e)});u(e.name),s(a)}finally{o(!1)}}};return(0,l.jsxs)(p.Z,{children:[(0,l.jsxs)(A.d,{className:"flex flex-col items-start gap-1",children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-default-800",children:a}),n?(0,l.jsx)("div",{className:"text-xs text-default-500",children:n}):null]}),(0,l.jsxs)(m.U,{className:"gap-4",children:[(0,l.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Image URL",placeholder:"https://...",value:r,onValueChange:s,description:"Paste a link, or upload a new image below."}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-default-700",children:"Upload image"}),(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;return g(null==(a=e.target.files)?void 0:a[0])},className:"block w-full cursor-pointer rounded-medium border border-default-200 bg-default-50 px-3 py-2 text-sm text-default-700 file:mr-4 file:rounded-medium file:border-0 file:bg-default-200 file:px-3 file:py-2 file:text-sm file:font-medium file:text-default-800 hover:bg-default-100"}),(0,l.jsx)("div",{className:"text-xs text-default-500",children:c?"Reading image…":d?"Uploaded: ".concat(d):"Uploads update preview instantly."})]})]}),(0,l.jsx)(f.y,{}),(0,l.jsx)("div",{className:"overflow-hidden rounded-large border border-default-200 bg-default-50",children:(0,l.jsx)("div",{className:"aspect-[16/7] w-full",children:h?(0,l.jsx)(x.W,{src:r,alt:null!=i?i:"Image preview",removeWrapper:!0,className:"h-full w-full object-cover"}):(0,l.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-default-700",children:"No preview"}),(0,l.jsx)("div",{className:"text-xs text-default-500",children:"Add a valid https URL or upload an image."})]})})})})]})]})}function Y(e,a,r){let l=[...e],[t]=l.splice(a,1);return l.splice(r,0,t),l}function z(e){var a,r,s,n,i,c;let{partnersList:d,setPartnersList:u,formValues:h,setFormValues:g,selectedIndex:f,onSelect:S}=e,j=t.useRef(null),w=(e,a)=>{g(r=>({...r,[e]:a}))};if(null==f)return(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-default-800",children:"Partner logos"}),(0,l.jsx)("div",{className:"text-xs text-default-500",children:"Click a logo to edit. Drag cards to reorder."})]}),(0,l.jsx)(b.T,{color:"primary",variant:"flat",onPress:()=>{u(e=>[{name:"",src:"",url:""},...e]),g(e=>{let a={...e};for(let r=d.length;r>=1;r--)a["partners.partners.".concat(r,".name")]=String(o()(e,"partners.partners.".concat(r-1,".name"),"")),a["partners.partners.".concat(r,".src")]=String(o()(e,"partners.partners.".concat(r-1,".src"),"")),a["partners.partners.".concat(r,".url")]=String(o()(e,"partners.partners.".concat(r-1,".url"),""));return a["partners.partners.0.name"]="",a["partners.partners.0.src"]="",a["partners.partners.0.url"]="",a}),S(0)},children:"Add partner"})]}),(0,l.jsx)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:d.map((e,a)=>{var r,t;let s=String(o()(h,"partners.partners.".concat(a,".name"),null!=(r=e.name)?r:""))||"Untitled",n=String(o()(h,"partners.partners.".concat(a,".src"),null!=(t=e.src)?t:"")),i=Z(n);return(0,l.jsx)(p.Z,{isPressable:!0,onPress:()=>S(a),draggable:!0,onDragStart:()=>{j.current=a},onDragOver:e=>e.preventDefault(),onDrop:()=>(e=>{let a=j.current;j.current=null,null!=a&&a!==e&&u(r=>{let l=Y(r,a,e);if(g(e=>(function(e){let{prevForm:a,prevPartners:r,nextPartners:l}=e,t=r.map((e,r)=>({name:String(o()(a,"partners.partners.".concat(r,".name"),"")),src:String(o()(a,"partners.partners.".concat(r,".src"),"")),url:String(o()(a,"partners.partners.".concat(r,".url"),""))})),s={...a};l.forEach((e,a)=>{let l=(e=>{var a,l,s;let n=r.findIndex(a=>a===e||a.name===e.name&&a.src===e.src&&a.url===e.url);return n>=0?t[n]:{name:null!=(a=e.name)?a:"",src:null!=(l=e.src)?l:"",url:null!=(s=e.url)?s:""}})(e);s["partners.partners.".concat(a,".name")]=l.name,s["partners.partners.".concat(a,".src")]=l.src,s["partners.partners.".concat(a,".url")]=l.url});for(let e=l.length;e<r.length;e++)delete s["partners.partners.".concat(e,".name")],delete s["partners.partners.".concat(e,".src")],delete s["partners.partners.".concat(e,".url")];return s})({prevForm:e,prevPartners:r,nextPartners:l})),null!=f){let e=r[f],a=l.findIndex(a=>a===e);S(a>=0?a:null)}return l})})(a),className:"border border-default-200",children:(0,l.jsx)(m.U,{className:"gap-3",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"h-12 w-12 overflow-hidden rounded-medium border border-default-200 bg-default-50",children:i?(0,l.jsx)(x.W,{src:n,alt:"".concat(s," logo"),removeWrapper:!0,className:"h-full w-full object-contain"}):(0,l.jsx)("div",{className:"flex h-full w-full items-center justify-center text-xs text-default-500",children:"Logo"})}),(0,l.jsxs)("div",{className:"min-w-0",children:[(0,l.jsx)("div",{className:"truncate text-sm font-semibold text-default-800",children:s}),(0,l.jsx)("div",{className:"text-xs text-default-500",children:"Click to edit"})]})]})})},a)})})]});let y="partners.partners.".concat(f,".name"),N="partners.partners.".concat(f,".url"),k="partners.partners.".concat(f,".src"),C=String(o()(h,y,null!=(n=null==(a=d[f])?void 0:a.name)?n:"")),T=String(o()(h,N,null!=(i=null==(r=d[f])?void 0:r.url)?i:"")),P=String(o()(h,k,null!=(c=null==(s=d[f])?void 0:s.src)?c:""));return(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-default-800",children:"Edit partner"}),(0,l.jsx)("div",{className:"text-xs text-default-500",children:"Update name, website, and logo."})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(b.T,{variant:"flat",onPress:()=>S(null),children:"Cancel"}),(0,l.jsx)(b.T,{color:"danger",variant:"flat",onPress:()=>{u(e=>{let a=e.filter((e,a)=>a!==f);return g(a=>{let r=e.map((e,r)=>({name:String(o()(a,"partners.partners.".concat(r,".name"),"")),src:String(o()(a,"partners.partners.".concat(r,".src"),"")),url:String(o()(a,"partners.partners.".concat(r,".url"),""))})).filter((e,a)=>a!==f),l={...a};r.forEach((e,a)=>{l["partners.partners.".concat(a,".name")]=e.name,l["partners.partners.".concat(a,".src")]=e.src,l["partners.partners.".concat(a,".url")]=e.url});let t=r.length;return delete l["partners.partners.".concat(t,".name")],delete l["partners.partners.".concat(t,".src")],delete l["partners.partners.".concat(t,".url")],l}),a}),S(null)},children:"Delete"})]})]}),(0,l.jsxs)(p.Z,{children:[(0,l.jsx)(A.d,{className:"text-sm font-semibold text-default-800",children:"Details"}),(0,l.jsxs)(m.U,{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"School / Partner name",value:C,onValueChange:e=>w(y,e)}),(0,l.jsx)(v.r,{label:"Website URL",value:T,onValueChange:e=>w(N,e)})]})]}),(0,l.jsx)(W,{label:"Logo",value:P,onChange:e=>w(k,e),description:"Paste a link or upload a new logo.",previewAlt:"".concat(C||"Partner"," logo preview")})]})}function B(e){let{regionsList:a,setRegionsList:r,formValues:s,setFormValues:n}=e,i=t.useRef(null);return(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-default-800",children:"Regions"}),(0,l.jsx)("div",{className:"text-xs text-default-500",children:"Add, delete, and drag to reorder."})]}),(0,l.jsx)(b.T,{color:"primary",variant:"flat",onPress:()=>{r(e=>["",...e]),n(e=>{let r={...e};for(let l=a.length;l>=1;l--)r["partners.regions.".concat(l)]=String(o()(e,"partners.regions.".concat(l-1),""));return r["partners.regions.0"]="",r})},children:"Add region"})]}),(0,l.jsxs)("div",{className:"grid gap-3",children:[a.map((e,a)=>{var t;return(0,l.jsx)(p.Z,{draggable:!0,onDragStart:()=>{i.current=a},onDragOver:e=>e.preventDefault(),onDrop:()=>(e=>{let a=i.current;i.current=null,null!=a&&a!==e&&r(r=>{let l=Y(r,a,e);return n(e=>(function(e){let{prevForm:a,prevRegions:r,nextRegions:l}=e,t=r.map((e,r)=>String(o()(a,"partners.regions.".concat(r),""))),s={...a};l.forEach((e,a)=>{s["partners.regions.".concat(a)]=(e=>{let a=r.findIndex(a=>a===e);return a>=0?t[a]:null!=e?e:""})(e)});for(let e=l.length;e<r.length;e++)delete s["partners.regions.".concat(e)];return s})({prevForm:e,prevRegions:r,nextRegions:l})),l})})(a),className:"border border-default-200",children:(0,l.jsxs)(m.U,{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[(0,l.jsx)(v.r,{label:"Region ".concat(a+1),value:String(null!=(t=o()(s,"partners.regions.".concat(a),""))?t:""),onValueChange:e=>{let r;return r="partners.regions.".concat(a),n(a=>({...a,[r]:e}))}}),(0,l.jsx)(b.T,{color:"danger",variant:"flat",onPress:()=>{r(e=>{let r=e.filter((e,r)=>r!==a);return n(r=>{let l=e.map((e,a)=>String(o()(r,"partners.regions.".concat(a),""))).filter((e,r)=>r!==a),t={...r};return l.forEach((e,a)=>t["partners.regions.".concat(a)]=e),delete t["partners.regions.".concat(l.length)],t}),r})},children:"Delete"})]})},a)}),0===a.length?(0,l.jsx)("div",{className:"rounded-large border border-default-200 bg-default-50 p-4 text-sm text-default-600",children:"No regions yet. Click “Add region”."}):null]})]})}function M(e){var a,r;let{isOpen:s,onClose:n}=e,{data:c}=(0,w.Z)(),x=(0,w.Y)(),y=i()(null==c?void 0:c.dict)?H:null!=(a=null==c?void 0:c.dict)?a:H,N=i()(null==c?void 0:c.partners)?F:null!=(r=null==c?void 0:c.partners)?r:F,[k,P]=t.useState({}),[D,V]=t.useState("copy"),[L,I]=t.useState(null),[E,R]=t.useState([]),[K,A]=t.useState([]);t.useEffect(()=>{var e,a,r,l,t,n,i,c,o,d,u,h,g,p,m,x,f,v;if(!s)return;R((null!=(i=N.partners)?i:[]).map(e=>{var a,r,l;return{name:null!=(a=e.name)?a:"",src:null!=(r=e.src)?r:"",url:null!=(l=e.url)?l:""}})),A([...null!=(c=N.regions)?c:[]]);let S={"dict.partnersKicker":String(null!=(o=y.partnersKicker)?o:""),"dict.partnersTitle":String(null!=(d=y.partnersTitle)?d:""),"dict.partnersDesc":String(null!=(u=y.partnersDesc)?u:""),"partners.feature.image":String(null!=(h=null==(e=N.feature)?void 0:e.image)?h:""),"partners.feature.kicker":String(null!=(g=null==(a=N.feature)?void 0:a.kicker)?g:""),"partners.feature.title":String(null!=(p=null==(r=N.feature)?void 0:r.title)?p:""),"partners.feature.desc":String(null!=(m=null==(l=N.feature)?void 0:l.desc)?m:""),"partners.affiliationsLabel":String(null!=(x=N.affiliationsLabel)?x:"")};null==(t=N.stats)||t.forEach((e,a)=>{var r,l;S["partners.stats.".concat(a,".value")]=String(null!=(r=null==e?void 0:e.value)?r:""),S["partners.stats.".concat(a,".label")]=String(null!=(l=null==e?void 0:e.label)?l:"")}),(null!=(f=N.regions)?f:[]).forEach((e,a)=>{S["partners.regions.".concat(a)]=String(null!=e?e:"")}),(null!=(v=N.partners)?v:[]).forEach((e,a)=>{var r,l,t;S["partners.partners.".concat(a,".name")]=String(null!=(r=null==e?void 0:e.name)?r:""),S["partners.partners.".concat(a,".src")]=String(null!=(l=null==e?void 0:e.src)?l:""),S["partners.partners.".concat(a,".url")]=String(null!=(t=null==e?void 0:e.url)?t:"")}),null==(n=N.pathways)||n.forEach((e,a)=>{var r,l,t,s,n,i;S["partners.pathways.".concat(a,".title")]=String(null!=(r=null==e?void 0:e.title)?r:""),S["partners.pathways.".concat(a,".desc")]=String(null!=(l=null==e?void 0:e.desc)?l:""),S["partners.pathways.".concat(a,".imgSrc")]=String(null!=(t=null==e?void 0:e.imgSrc)?t:""),S["partners.pathways.".concat(a,".href")]=String(null!=(s=null==e?void 0:e.href)?s:""),S["partners.pathways.".concat(a,".icon")]=String(null!=(n=null==e?void 0:e.icon)?n:""),S["partners.pathways.".concat(a,".isWide")]=String(null!=(i=null==e?void 0:e.isWide)&&i)}),P(S),V("copy"),I(null)},[s,y,N]);let Z=(e,a)=>P(r=>({...r,[e]:a})),Y=()=>{var e,a,r,l,t,s;let i={"dict.partnersKicker":String(o()(k,"dict.partnersKicker","")),"dict.partnersTitle":String(o()(k,"dict.partnersTitle","")),"dict.partnersDesc":String(o()(k,"dict.partnersDesc","")),"partners.feature.image":String(o()(k,"partners.feature.image","")),"partners.feature.kicker":String(o()(k,"partners.feature.kicker","")),"partners.feature.title":String(o()(k,"partners.feature.title","")),"partners.feature.desc":String(o()(k,"partners.feature.desc","")),"partners.affiliationsLabel":String(o()(k,"partners.affiliationsLabel",""))};null==(e=N.stats)||e.forEach((e,a)=>{i["partners.stats.".concat(a,".value")]=String(o()(k,"partners.stats.".concat(a,".value"),"")),i["partners.stats.".concat(a,".label")]=String(o()(k,"partners.stats.".concat(a,".label"),""))}),K.forEach((e,a)=>{i["partners.regions.".concat(a)]=String(o()(k,"partners.regions.".concat(a),""))});for(let e=K.length;e<(null!=(t=null==(a=N.regions)?void 0:a.length)?t:0);e++)i["partners.regions.".concat(e)]="";E.forEach((e,a)=>{var r,l,t;i["partners.partners.".concat(a,".name")]=String(o()(k,"partners.partners.".concat(a,".name"),null!=(r=e.name)?r:"")),i["partners.partners.".concat(a,".src")]=String(o()(k,"partners.partners.".concat(a,".src"),null!=(l=e.src)?l:"")),i["partners.partners.".concat(a,".url")]=String(o()(k,"partners.partners.".concat(a,".url"),null!=(t=e.url)?t:""))});for(let e=E.length;e<(null!=(s=null==(r=N.partners)?void 0:r.length)?s:0);e++)i["partners.partners.".concat(e,".name")]="",i["partners.partners.".concat(e,".src")]="",i["partners.partners.".concat(e,".url")]="";null==(l=N.pathways)||l.forEach((e,a)=>{i["partners.pathways.".concat(a,".title")]=String(o()(k,"partners.pathways.".concat(a,".title"),"")),i["partners.pathways.".concat(a,".desc")]=String(o()(k,"partners.pathways.".concat(a,".desc"),"")),i["partners.pathways.".concat(a,".imgSrc")]=String(o()(k,"partners.pathways.".concat(a,".imgSrc"),"")),i["partners.pathways.".concat(a,".href")]=String(o()(k,"partners.pathways.".concat(a,".href"),"")),i["partners.pathways.".concat(a,".icon")]=String(o()(k,"partners.pathways.".concat(a,".icon"),"")),i["partners.pathways.".concat(a,".isWide")]=O(String(o()(k,"partners.pathways.".concat(a,".isWide"),"false")))}),x.mutate({section:"partners",data:i},{onSuccess:()=>n()})},M=D.startsWith("pathway-")?Number(D.replace("pathway-","")):-1,_="partners"===D&&null!=L;return(0,l.jsx)(d.Y,{isOpen:s,onOpenChange:e=>!e&&n(),size:"5xl",scrollBehavior:"inside",children:(0,l.jsx)(u.g,{children:()=>{var e,a,r,s,i,c,d,u,w,y,H,F,q,G,J,Q,X;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.c,{className:"flex flex-col gap-1",children:"Edit Partners"}),(0,l.jsx)(g.h,{children:(0,l.jsx)(p.Z,{children:(0,l.jsxs)(m.U,{className:"gap-4",children:[(0,l.jsxs)(C.r,{"aria-label":"Partners editor",selectedKey:D,onSelectionChange:e=>{V(String(e)),"partners"!==String(e)&&I(null)},variant:"underlined",color:"primary",children:[(0,l.jsx)(T.i,{title:"Copy"},"copy"),(0,l.jsx)(T.i,{title:"Feature"},"feature"),(0,l.jsx)(T.i,{title:"Stats (".concat(null!=(r=null==(e=N.stats)?void 0:e.length)?r:0,")")},"stats"),(0,l.jsx)(T.i,{title:"Regions (".concat(K.length,")")},"regions"),(0,l.jsx)(T.i,{title:"Affiliations"},"affiliations"),(0,l.jsx)(T.i,{title:"Logos (".concat(E.length,")")},"partners"),null==(a=N.pathways)?void 0:a.map((e,a)=>(0,l.jsx)(T.i,{title:"Pathway ".concat(a+1)},"pathway-".concat(a)))]}),(0,l.jsx)(f.y,{}),"copy"===D&&(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Partners kicker",value:String(null!=(s=o()(k,"dict.partnersKicker",""))?s:""),onValueChange:e=>Z("dict.partnersKicker",e)}),(0,l.jsx)(v.r,{label:"Partners title",value:String(null!=(i=o()(k,"dict.partnersTitle",""))?i:""),onValueChange:e=>Z("dict.partnersTitle",e)}),(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsx)(S.P,{label:"Partners description",value:String(null!=(c=o()(k,"dict.partnersDesc",""))?c:""),onValueChange:e=>Z("dict.partnersDesc",e),minRows:3})})]}),"feature"===D&&(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsx)(W,{label:"Feature image",value:String(null!=(d=o()(k,"partners.feature.image",""))?d:""),onChange:e=>Z("partners.feature.image",e),description:"Shown in the partners highlight section.",previewAlt:"Partners feature image preview"}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Feature kicker",value:String(null!=(u=o()(k,"partners.feature.kicker",""))?u:""),onValueChange:e=>Z("partners.feature.kicker",e)}),(0,l.jsx)(v.r,{label:"Feature title",value:String(null!=(w=o()(k,"partners.feature.title",""))?w:""),onValueChange:e=>Z("partners.feature.title",e)}),(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsx)(S.P,{label:"Feature description",value:String(null!=(y=o()(k,"partners.feature.desc",""))?y:""),onValueChange:e=>Z("partners.feature.desc",e),minRows:3})})]})]}),"stats"===D&&(0,l.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:(null!=(H=N.stats)?H:[]).map((e,a)=>{var r,s;return(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(v.r,{label:"Stat ".concat(a+1," value"),value:String(null!=(r=o()(k,"partners.stats.".concat(a,".value"),""))?r:""),onValueChange:e=>Z("partners.stats.".concat(a,".value"),e)}),(0,l.jsx)(v.r,{label:"Stat ".concat(a+1," label"),value:String(null!=(s=o()(k,"partners.stats.".concat(a,".label"),""))?s:""),onValueChange:e=>Z("partners.stats.".concat(a,".label"),e)})]},a)})}),"regions"===D&&(0,l.jsx)(B,{regionsList:K,setRegionsList:A,formValues:k,setFormValues:P}),"affiliations"===D&&(0,l.jsx)("div",{className:"grid gap-4",children:(0,l.jsx)(v.r,{label:"Affiliations label",value:String(null!=(F=o()(k,"partners.affiliationsLabel",""))?F:""),onValueChange:e=>Z("partners.affiliationsLabel",e)})}),"partners"===D&&(0,l.jsx)(z,{partnersList:E,setPartnersList:R,formValues:k,setFormValues:P,selectedIndex:L,onSelect:I}),M>=0&&(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Title",value:String(null!=(q=o()(k,"partners.pathways.".concat(M,".title"),""))?q:""),onValueChange:e=>Z("partners.pathways.".concat(M,".title"),e)}),(0,l.jsx)(v.r,{label:"Icon",value:String(null!=(G=o()(k,"partners.pathways.".concat(M,".icon"),""))?G:""),onValueChange:e=>Z("partners.pathways.".concat(M,".icon"),e)}),(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsx)(S.P,{label:"Description",value:String(null!=(J=o()(k,"partners.pathways.".concat(M,".desc"),""))?J:""),onValueChange:e=>Z("partners.pathways.".concat(M,".desc"),e),minRows:3})})]}),(0,l.jsx)(W,{label:"Pathway image",value:String(null!=(Q=o()(k,"partners.pathways.".concat(M,".imgSrc"),""))?Q:""),onChange:e=>Z("partners.pathways.".concat(M,".imgSrc"),e),description:"Shown on the pathway card.",previewAlt:"Pathway image preview"}),(0,l.jsx)(v.r,{label:"Href",value:String(null!=(X=o()(k,"partners.pathways.".concat(M,".href"),""))?X:""),onValueChange:e=>Z("partners.pathways.".concat(M,".href"),e)}),(0,l.jsxs)("div",{className:"md:col-span-2 flex items-center justify-between gap-4 rounded-large border border-default-200 bg-default-50 px-4 py-3",children:[(0,l.jsxs)("div",{className:"min-w-0",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-default-800",children:"Wide card"}),(0,l.jsx)("div",{className:"text-xs text-default-500",children:"Makes this pathway use the wide layout."})]}),(0,l.jsx)(U.Z,{isSelected:O(String(o()(k,"partners.pathways.".concat(M,".isWide"),"false"))),onValueChange:e=>Z("partners.pathways.".concat(M,".isWide"),String(e))})]})]})]})})}),_?null:(0,l.jsxs)(j.q,{children:[(0,l.jsx)(b.T,{variant:"flat",onPress:n,isDisabled:x.isPending,children:"Cancel"}),(0,l.jsx)(b.T,{color:"primary",onPress:Y,isLoading:x.isPending,children:"Save"})]})]})}})})}var _=r(17787),q=r(49027),G=r(27587);function J(e){let{id:a,children:r}=e,{attributes:t,listeners:s,setNodeRef:n,transform:i,transition:c,isDragging:o}=(0,q.gl)({id:a}),d={transform:G.Ks.Transform.toString(i),transition:c,zIndex:o?50:"auto",opacity:o?.6:1};return(0,l.jsx)("div",{ref:n,style:d,...t,...s,className:"touch-none",children:r})}function Q(e){let{isOpen:a,onClose:r}=e,{data:s}=(0,w.Z)(),n=(0,w.Y)(),[i,c]=t.useState([]),[o,x]=t.useState([]),[y,N]=t.useState({}),[k,P]=t.useState("copy"),D=(0,_.FR)((0,_.MS)(_.AN,{activationConstraint:{distance:8}}),(0,_.MS)(_.uN,{coordinateGetter:q.JR}));t.useEffect(()=>{var e,r,l,t,n,i,o,d,u,h,g,p,m,f,v,S;if(!a)return;let j=(null!=(g=null==s||null==(e=s.careers)?void 0:e.partners)?g:[]).map((e,a)=>({id:"partner-".concat(a,"-").concat(Date.now()),value:e})),b=(null!=(p=null==s||null==(r=s.careers)?void 0:r.roles)?p:[]).map((e,a)=>({...e,id:e.id||"role-".concat(a,"-").concat(Date.now())}));c(j),x(b),N({"dict.carrer.careersKicker":String(null!=(m=null==s||null==(t=s.dict)||null==(l=t.carrer)?void 0:l.careersKicker)?m:""),"dict.carrer.careersTitle":String(null!=(f=null==s||null==(i=s.dict)||null==(n=i.carrer)?void 0:n.careersTitle)?f:""),"dict.carrer.careersDesc":String(null!=(v=null==s||null==(d=s.dict)||null==(o=d.carrer)?void 0:o.careersDesc)?v:""),"dict.carrer.careersNote":String(null!=(S=null==s||null==(h=s.dict)||null==(u=h.carrer)?void 0:u.careersNote)?S:"")})},[a,s]);let V=(e,a)=>N(r=>({...r,[e]:a}));return(0,l.jsx)(d.Y,{isOpen:a,onOpenChange:e=>!e&&r(),size:"5xl",scrollBehavior:"inside",children:(0,l.jsxs)(u.g,{children:[(0,l.jsx)(h.c,{children:"Edit Careers"}),(0,l.jsx)(g.h,{children:(0,l.jsx)(p.Z,{children:(0,l.jsxs)(m.U,{className:"gap-4",children:[(0,l.jsxs)(C.r,{selectedKey:k,onSelectionChange:e=>P(String(e)),variant:"underlined",color:"primary",children:[(0,l.jsx)(T.i,{title:"Header"},"copy"),(0,l.jsx)(T.i,{title:"Partners (".concat(i.length,")")},"partners"),(0,l.jsx)(T.i,{title:"Roles (".concat(o.length,")")},"roles")]}),(0,l.jsx)(f.y,{}),"copy"===k&&(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Kicker",value:y["dict.carrer.careersKicker"],onValueChange:e=>V("dict.carrer.careersKicker",e)}),(0,l.jsx)(v.r,{label:"Title",value:y["dict.carrer.careersTitle"],onValueChange:e=>V("dict.carrer.careersTitle",e)}),(0,l.jsx)(S.P,{className:"md:col-span-2",label:"Description",value:y["dict.carrer.careersDesc"],onValueChange:e=>V("dict.carrer.careersDesc",e)})]}),"partners"===k&&(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsx)(b.T,{color:"primary",variant:"flat",onPress:()=>{c([{id:"new-p-".concat(Date.now()),value:""},...i])},className:"self-end w-1/6",children:"Add Partner"}),(0,l.jsx)(_.Mp,{sensors:D,collisionDetection:_.fp,onDragEnd:e=>{let{active:a,over:r}=e;r&&a.id!==r.id&&c(e=>{let l=e.findIndex(e=>e.id===a.id),t=e.findIndex(e=>e.id===r.id);return(0,q.be)(e,l,t)})},children:(0,l.jsx)(q.gB,{items:i.map(e=>e.id),strategy:q._G,children:i.map((e,a)=>(0,l.jsx)(J,{id:e.id,children:(0,l.jsx)(p.Z,{className:"border border-default-200 cursor-grab active:cursor-grabbing",children:(0,l.jsxs)(m.U,{className:"flex flex-row items-center gap-4",children:[(0,l.jsx)("div",{className:"text-default-400",children:"☰"}),(0,l.jsx)(v.r,{label:"Partner ".concat(a+1),value:e.value,onValueChange:e=>{let r=[...i];r[a].value=e,c(r)}}),(0,l.jsx)(b.T,{isIconOnly:!0,color:"danger",variant:"light",onPress:()=>c(i.filter(a=>a.id!==e.id)),children:"✕"})]})})},e.id))})})]}),"roles"===k&&(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsx)(b.T,{color:"primary",variant:"flat",onPress:()=>{x([{id:"new-r-".concat(Date.now()),title:"",growth:"",color:""},...o])},className:"w-1/6",children:"Add Role"}),(0,l.jsx)(_.Mp,{sensors:D,collisionDetection:_.fp,onDragEnd:e=>{let{active:a,over:r}=e;r&&a.id!==r.id&&x(e=>{let l=e.findIndex(e=>e.id===a.id),t=e.findIndex(e=>e.id===r.id);return(0,q.be)(e,l,t)})},children:(0,l.jsx)(q.gB,{items:o.map(e=>e.id),strategy:q._G,children:o.map((e,a)=>(0,l.jsx)(J,{id:e.id,children:(0,l.jsx)(p.Z,{className:"border border-default-200 cursor-grab active:cursor-grabbing",children:(0,l.jsxs)(m.U,{className:"flex flex-row items-center gap-4 p-4",children:[(0,l.jsx)("div",{className:"flex-none text-default-400 cursor-grab active:cursor-grabbing p-1",children:"☰"}),(0,l.jsxs)("div",{className:"flex-grow grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,l.jsx)(v.r,{size:"sm",label:"Title",placeholder:"Role name",value:e.title,onValueChange:e=>{let r=[...o];r[a].title=e,x(r)}}),(0,l.jsx)(v.r,{size:"sm",label:"Growth",placeholder:"e.g. +20%",value:e.growth,onValueChange:e=>{let r=[...o];r[a].growth=e,x(r)}}),(0,l.jsx)(v.r,{size:"sm",label:"Color",placeholder:"hex or name",value:e.color,onValueChange:e=>{let r=[...o];r[a].color=e,x(r)}})]}),(0,l.jsx)(b.T,{isIconOnly:!0,className:"flex-none",color:"danger",variant:"light",onPress:()=>x(o.filter(a=>a.id!==e.id)),children:"✕"})]})})},e.id))})})]})]})})}),(0,l.jsxs)(j.q,{children:[(0,l.jsx)(b.T,{variant:"flat",onPress:r,children:"Cancel"}),(0,l.jsx)(b.T,{color:"primary",onPress:()=>{let e={"dict.carrer.careersKicker":y["dict.carrer.careersKicker"],"dict.carrer.careersTitle":y["dict.carrer.careersTitle"],"dict.carrer.careersDesc":y["dict.carrer.careersDesc"],"dict.carrer.careersNote":y["dict.carrer.careersNote"]};e["careers.partners"]=i.map(e=>e.value),e["careers.roles"]=o.map(e=>{let{id:a,...r}=e;return r}),n.mutate({section:"careers",data:e},{onSuccess:r})},isLoading:n.isPending,children:"Save"})]})]})})}let X={researchKicker:"",researchTitle:"",researchDesc:""},$={hero:{image:"",chip:"",title:"",desc:"",ctaLabel:"",ctaHref:""},featured:{image:"",kicker:"",title:"",alt:""},labs:[],impact:{kicker:"",title:"",desc:"",ctaLabel:"",ctaHref:""},stats:[]};function ee(e){let{label:a,value:r,onChange:s,description:n,previewAlt:i}=e,[c,o]=t.useState(!1),[d,u]=t.useState(""),h=function(e){let a=(null!=e?e:"").trim();return!!a&&(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("data:image/"))}(r),g=async e=>{if(e){o(!0);try{let a=await new Promise((a,r)=>{let l=new FileReader;l.onerror=()=>r(Error("Failed to read file")),l.onload=()=>{var e;return a(String(null!=(e=l.result)?e:""))},l.readAsDataURL(e)});u(e.name),s(a)}finally{o(!1)}}};return(0,l.jsxs)(p.Z,{children:[(0,l.jsxs)(A.d,{className:"flex flex-col items-start gap-1",children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-default-800",children:a}),n?(0,l.jsx)("div",{className:"text-xs text-default-500",children:n}):null]}),(0,l.jsxs)(m.U,{className:"gap-4",children:[(0,l.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Image URL",placeholder:"https://...",value:r,onValueChange:s,description:"Paste a link, or upload a new image below."}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-default-700",children:"Upload image"}),(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;return g(null==(a=e.target.files)?void 0:a[0])},className:"block w-full cursor-pointer rounded-medium border border-default-200 bg-default-50 px-3 py-2 text-sm text-default-700 file:mr-4 file:rounded-medium file:border-0 file:bg-default-200 file:px-3 file:py-2 file:text-sm file:font-medium file:text-default-800 hover:bg-default-100"}),(0,l.jsx)("div",{className:"text-xs text-default-500",children:c?"Reading image…":d?"Uploaded: ".concat(d):"Uploads update preview instantly."})]})]}),(0,l.jsx)(f.y,{}),(0,l.jsx)("div",{className:"overflow-hidden rounded-large border border-default-200 bg-default-50",children:(0,l.jsx)("div",{className:"aspect-[16/7] w-full",children:h?(0,l.jsx)(x.W,{src:r,alt:null!=i?i:"Image preview",removeWrapper:!0,className:"h-full w-full object-cover"}):(0,l.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-default-700",children:"No preview"}),(0,l.jsx)("div",{className:"text-xs text-default-500",children:"Add a valid https URL or upload an image."})]})})})})]})]})}function ea(e,a,r){let l=[...e],[t]=l.splice(a,1);return l.splice(r,0,t),l}function er(e){var a,r,s,n;let{isOpen:c,onClose:x}=e,{data:y}=(0,w.Z)(),N=(0,w.Y)(),k=i()(null==y||null==(a=y.dict)?void 0:a.research)?X:null!=(s=null==y||null==(r=y.dict)?void 0:r.research)?s:X,P=i()(null==y?void 0:y.researchShowcase)?$:null!=(n=null==y?void 0:y.researchShowcase)?n:$,[D,V]=t.useState({}),[L,I]=t.useState("copy"),[E,R]=t.useState([]),K=t.useRef(null);t.useEffect(()=>{var e,a,r,l,t,s,n,i,o,d,u,h,g,p,m,x,f,v,S,j,b,w,y,N,C,T,D,L,E,K,A,U,H,F,O,Z;if(!c)return;R([...null!=(x=P.labs)?x:[]]);let W={"dict.research.researchKicker":String(null!=(f=k.researchKicker)?f:""),"dict.research.researchTitle":String(null!=(v=k.researchTitle)?v:""),"dict.research.researchDesc":String(null!=(S=k.researchDesc)?S:""),"researchShowcase.hero.image":String(null!=(j=null==(e=P.hero)?void 0:e.image)?j:""),"researchShowcase.hero.chip":String(null!=(b=null==(a=P.hero)?void 0:a.chip)?b:""),"researchShowcase.hero.title":String(null!=(w=null==(r=P.hero)?void 0:r.title)?w:""),"researchShowcase.hero.desc":String(null!=(y=null==(l=P.hero)?void 0:l.desc)?y:""),"researchShowcase.hero.ctaLabel":String(null!=(N=null==(t=P.hero)?void 0:t.ctaLabel)?N:""),"researchShowcase.hero.ctaHref":String(null!=(C=null==(s=P.hero)?void 0:s.ctaHref)?C:""),"researchShowcase.featured.image":String(null!=(T=null==(n=P.featured)?void 0:n.image)?T:""),"researchShowcase.featured.kicker":String(null!=(D=null==(i=P.featured)?void 0:i.kicker)?D:""),"researchShowcase.featured.title":String(null!=(L=null==(o=P.featured)?void 0:o.title)?L:""),"researchShowcase.featured.alt":String(null!=(E=null==(d=P.featured)?void 0:d.alt)?E:""),"researchShowcase.impact.kicker":String(null!=(K=null==(u=P.impact)?void 0:u.kicker)?K:""),"researchShowcase.impact.title":String(null!=(A=null==(h=P.impact)?void 0:h.title)?A:""),"researchShowcase.impact.desc":String(null!=(U=null==(g=P.impact)?void 0:g.desc)?U:""),"researchShowcase.impact.ctaLabel":String(null!=(H=null==(p=P.impact)?void 0:p.ctaLabel)?H:""),"researchShowcase.impact.ctaHref":String(null!=(F=null==(m=P.impact)?void 0:m.ctaHref)?F:"")};(null!=(O=P.labs)?O:[]).forEach((e,a)=>{var r,l,t;W["researchShowcase.labs.".concat(a,".image")]=String(null!=(r=null==e?void 0:e.image)?r:""),W["researchShowcase.labs.".concat(a,".title")]=String(null!=(l=null==e?void 0:e.title)?l:""),W["researchShowcase.labs.".concat(a,".alt")]=String(null!=(t=null==e?void 0:e.alt)?t:"")}),(null!=(Z=P.stats)?Z:[]).forEach((e,a)=>{var r,l;W["researchShowcase.stats.".concat(a,".label")]=String(null!=(r=null==e?void 0:e.label)?r:""),W["researchShowcase.stats.".concat(a,".value")]=String(null!=(l=null==e?void 0:e.value)?l:"")}),V(W),I("copy")},[c,k,P]);let U=(e,a)=>V(r=>({...r,[e]:a})),H=()=>{R(e=>[{image:"",title:"",alt:""},...e]),V(e=>{let a={...e};for(let r=E.length;r>=1;r--)a["researchShowcase.labs.".concat(r,".image")]=String(o()(e,"researchShowcase.labs.".concat(r-1,".image"),"")),a["researchShowcase.labs.".concat(r,".title")]=String(o()(e,"researchShowcase.labs.".concat(r-1,".title"),"")),a["researchShowcase.labs.".concat(r,".alt")]=String(o()(e,"researchShowcase.labs.".concat(r-1,".alt"),""));return a["researchShowcase.labs.0.image"]="",a["researchShowcase.labs.0.title"]="",a["researchShowcase.labs.0.alt"]="",a}),I("labs")},F=()=>{var e,a,r;let l={"dict.research.researchKicker":String(o()(D,"dict.research.researchKicker","")),"dict.research.researchTitle":String(o()(D,"dict.research.researchTitle","")),"dict.research.researchDesc":String(o()(D,"dict.research.researchDesc","")),"researchShowcase.hero.image":String(o()(D,"researchShowcase.hero.image","")),"researchShowcase.hero.chip":String(o()(D,"researchShowcase.hero.chip","")),"researchShowcase.hero.title":String(o()(D,"researchShowcase.hero.title","")),"researchShowcase.hero.desc":String(o()(D,"researchShowcase.hero.desc","")),"researchShowcase.hero.ctaLabel":String(o()(D,"researchShowcase.hero.ctaLabel","")),"researchShowcase.hero.ctaHref":String(o()(D,"researchShowcase.hero.ctaHref","")),"researchShowcase.featured.image":String(o()(D,"researchShowcase.featured.image","")),"researchShowcase.featured.kicker":String(o()(D,"researchShowcase.featured.kicker","")),"researchShowcase.featured.title":String(o()(D,"researchShowcase.featured.title","")),"researchShowcase.featured.alt":String(o()(D,"researchShowcase.featured.alt","")),"researchShowcase.impact.kicker":String(o()(D,"researchShowcase.impact.kicker","")),"researchShowcase.impact.title":String(o()(D,"researchShowcase.impact.title","")),"researchShowcase.impact.desc":String(o()(D,"researchShowcase.impact.desc","")),"researchShowcase.impact.ctaLabel":String(o()(D,"researchShowcase.impact.ctaLabel","")),"researchShowcase.impact.ctaHref":String(o()(D,"researchShowcase.impact.ctaHref",""))};E.forEach((e,a)=>{l["researchShowcase.labs.".concat(a,".image")]=String(o()(D,"researchShowcase.labs.".concat(a,".image"),"")),l["researchShowcase.labs.".concat(a,".title")]=String(o()(D,"researchShowcase.labs.".concat(a,".title"),"")),l["researchShowcase.labs.".concat(a,".alt")]=String(o()(D,"researchShowcase.labs.".concat(a,".alt"),""))});for(let r=E.length;r<(null!=(a=null==(e=P.labs)?void 0:e.length)?a:0);r++)l["researchShowcase.labs.".concat(r,".image")]="",l["researchShowcase.labs.".concat(r,".title")]="",l["researchShowcase.labs.".concat(r,".alt")]="";(null!=(r=P.stats)?r:[]).forEach((e,a)=>{l["researchShowcase.stats.".concat(a,".label")]=String(o()(D,"researchShowcase.stats.".concat(a,".label"),"")),l["researchShowcase.stats.".concat(a,".value")]=String(o()(D,"researchShowcase.stats.".concat(a,".value"),""))}),N.mutate({section:"research",data:l},{onSuccess:()=>x()})};return(0,l.jsx)(d.Y,{isOpen:c,onOpenChange:e=>!e&&x(),size:"5xl",scrollBehavior:"inside",children:(0,l.jsx)(u.g,{children:()=>{var e,a,r,s,n,i,c,d,u,w,y,k,O,Z,W,Y,z,B,M,_,q;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.c,{className:"flex flex-col gap-1",children:"Edit Research"}),(0,l.jsx)(g.h,{children:(0,l.jsx)(p.Z,{children:(0,l.jsxs)(m.U,{className:"gap-4",children:[(0,l.jsxs)(C.r,{"aria-label":"Research editor",selectedKey:L,onSelectionChange:e=>I(String(e)),variant:"underlined",color:"primary",children:[(0,l.jsx)(T.i,{title:"Copy"},"copy"),(0,l.jsx)(T.i,{title:"Hero"},"hero"),(0,l.jsx)(T.i,{title:"Featured"},"featured"),(0,l.jsx)(T.i,{title:"Labs (".concat(E.length,")")},"labs"),(0,l.jsx)(T.i,{title:"Impact"},"impact"),(0,l.jsx)(T.i,{title:"Stats (".concat(null!=(a=null==(e=P.stats)?void 0:e.length)?a:0,")")},"stats")]}),(0,l.jsx)(f.y,{}),"copy"===L&&(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Research kicker",value:String(null!=(r=o()(D,"dict.research.researchKicker",""))?r:""),onValueChange:e=>U("dict.research.researchKicker",e)}),(0,l.jsx)(v.r,{label:"Research title",value:String(null!=(s=o()(D,"dict.research.researchTitle",""))?s:""),onValueChange:e=>U("dict.research.researchTitle",e)}),(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsx)(S.P,{label:"Research description",value:String(null!=(n=o()(D,"dict.research.researchDesc",""))?n:""),onValueChange:e=>U("dict.research.researchDesc",e),minRows:3})})]}),"hero"===L&&(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsx)(ee,{label:"Research hero image",value:String(null!=(i=o()(D,"researchShowcase.hero.image",""))?i:""),onChange:e=>U("researchShowcase.hero.image",e),description:"Shown in the research hero section.",previewAlt:"Research hero image preview"}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Hero chip",value:String(null!=(c=o()(D,"researchShowcase.hero.chip",""))?c:""),onValueChange:e=>U("researchShowcase.hero.chip",e)}),(0,l.jsx)(v.r,{label:"Hero title",value:String(null!=(d=o()(D,"researchShowcase.hero.title",""))?d:""),onValueChange:e=>U("researchShowcase.hero.title",e)}),(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsx)(S.P,{label:"Hero description",value:String(null!=(u=o()(D,"researchShowcase.hero.desc",""))?u:""),onValueChange:e=>U("researchShowcase.hero.desc",e),minRows:3})}),(0,l.jsx)(v.r,{label:"Hero CTA label",value:String(null!=(w=o()(D,"researchShowcase.hero.ctaLabel",""))?w:""),onValueChange:e=>U("researchShowcase.hero.ctaLabel",e)}),(0,l.jsx)(v.r,{label:"Hero CTA href",value:String(null!=(y=o()(D,"researchShowcase.hero.ctaHref",""))?y:""),onValueChange:e=>U("researchShowcase.hero.ctaHref",e)})]})]}),"featured"===L&&(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsx)(ee,{label:"Featured lab image",value:String(null!=(k=o()(D,"researchShowcase.featured.image",""))?k:""),onChange:e=>U("researchShowcase.featured.image",e),description:"Large featured card image.",previewAlt:"Featured lab image preview"}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Featured kicker",value:String(null!=(O=o()(D,"researchShowcase.featured.kicker",""))?O:""),onValueChange:e=>U("researchShowcase.featured.kicker",e)}),(0,l.jsx)(v.r,{label:"Featured title",value:String(null!=(Z=o()(D,"researchShowcase.featured.title",""))?Z:""),onValueChange:e=>U("researchShowcase.featured.title",e)}),(0,l.jsx)(v.r,{className:"md:col-span-2",label:"Featured alt text",value:String(null!=(W=o()(D,"researchShowcase.featured.alt",""))?W:""),onValueChange:e=>U("researchShowcase.featured.alt",e)})]})]}),"labs"===L&&(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-default-800",children:"Labs"}),(0,l.jsx)("div",{className:"text-xs text-default-500",children:"Drag to reorder. New lab added at top."})]}),(0,l.jsx)(b.T,{color:"primary",variant:"flat",onPress:H,children:"Add lab"})]}),(0,l.jsxs)("div",{className:"grid gap-4",children:[E.map((e,a)=>{var r,t,s;return(0,l.jsxs)(p.Z,{draggable:!0,onDragStart:()=>{K.current=a},onDragOver:e=>e.preventDefault(),onDrop:()=>(e=>{let a=K.current;K.current=null,null!=a&&a!==e&&(R(r=>ea(r,a,e)),V(r=>{let l=ea(E.map((e,a)=>({image:String(o()(r,"researchShowcase.labs.".concat(a,".image"),"")),title:String(o()(r,"researchShowcase.labs.".concat(a,".title"),"")),alt:String(o()(r,"researchShowcase.labs.".concat(a,".alt"),""))})),a,e),t={...r};return l.forEach((e,a)=>{t["researchShowcase.labs.".concat(a,".image")]=e.image,t["researchShowcase.labs.".concat(a,".title")]=e.title,t["researchShowcase.labs.".concat(a,".alt")]=e.alt}),t}))})(a),className:"border border-default-200",children:[(0,l.jsxs)(A.d,{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"text-sm font-semibold text-default-800",children:["Lab ",a+1]}),(0,l.jsx)(b.T,{color:"danger",variant:"flat",onPress:()=>{R(e=>e.filter((e,r)=>r!==a)),V(e=>{let r=E.map((a,r)=>({image:String(o()(e,"researchShowcase.labs.".concat(r,".image"),"")),title:String(o()(e,"researchShowcase.labs.".concat(r,".title"),"")),alt:String(o()(e,"researchShowcase.labs.".concat(r,".alt"),""))})).filter((e,r)=>r!==a),l={...e};r.forEach((e,a)=>{l["researchShowcase.labs.".concat(a,".image")]=e.image,l["researchShowcase.labs.".concat(a,".title")]=e.title,l["researchShowcase.labs.".concat(a,".alt")]=e.alt});let t=r.length;return delete l["researchShowcase.labs.".concat(t,".image")],delete l["researchShowcase.labs.".concat(t,".title")],delete l["researchShowcase.labs.".concat(t,".alt")],l})},children:"Delete"})]}),(0,l.jsxs)(m.U,{className:"grid gap-4",children:[(0,l.jsx)(ee,{label:"Lab image",value:String(null!=(r=o()(D,"researchShowcase.labs.".concat(a,".image"),""))?r:""),onChange:e=>U("researchShowcase.labs.".concat(a,".image"),e),description:"Shown on the lab card.",previewAlt:"Lab ".concat(a+1," image preview")}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Lab title",value:String(null!=(t=o()(D,"researchShowcase.labs.".concat(a,".title"),""))?t:""),onValueChange:e=>U("researchShowcase.labs.".concat(a,".title"),e)}),(0,l.jsx)(v.r,{label:"Alt text",value:String(null!=(s=o()(D,"researchShowcase.labs.".concat(a,".alt"),""))?s:""),onValueChange:e=>U("researchShowcase.labs.".concat(a,".alt"),e)})]})]})]},a)}),0===E.length?(0,l.jsx)("div",{className:"rounded-large border border-default-200 bg-default-50 p-4 text-sm text-default-600",children:"No labs yet. Click “Add lab”."}):null]})]}),"impact"===L&&(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(v.r,{label:"Impact kicker",value:String(null!=(Y=o()(D,"researchShowcase.impact.kicker",""))?Y:""),onValueChange:e=>U("researchShowcase.impact.kicker",e)}),(0,l.jsx)(v.r,{label:"Impact title",value:String(null!=(z=o()(D,"researchShowcase.impact.title",""))?z:""),onValueChange:e=>U("researchShowcase.impact.title",e)}),(0,l.jsx)("div",{className:"md:col-span-2",children:(0,l.jsx)(S.P,{label:"Impact description",value:String(null!=(B=o()(D,"researchShowcase.impact.desc",""))?B:""),onValueChange:e=>U("researchShowcase.impact.desc",e),minRows:3})}),(0,l.jsx)(v.r,{label:"Impact CTA label",value:String(null!=(M=o()(D,"researchShowcase.impact.ctaLabel",""))?M:""),onValueChange:e=>U("researchShowcase.impact.ctaLabel",e)}),(0,l.jsx)(v.r,{label:"Impact CTA href",value:String(null!=(_=o()(D,"researchShowcase.impact.ctaHref",""))?_:""),onValueChange:e=>U("researchShowcase.impact.ctaHref",e)})]}),"stats"===L&&(0,l.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:(null!=(q=P.stats)?q:[]).map((e,a)=>{var r,s;return(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(v.r,{label:"Research stat ".concat(a+1," label"),value:String(null!=(r=o()(D,"researchShowcase.stats.".concat(a,".label"),""))?r:""),onValueChange:e=>U("researchShowcase.stats.".concat(a,".label"),e)}),(0,l.jsx)(v.r,{label:"Research stat ".concat(a+1," value"),value:String(null!=(s=o()(D,"researchShowcase.stats.".concat(a,".value"),""))?s:""),onValueChange:e=>U("researchShowcase.stats.".concat(a,".value"),e)})]},a)})})]})})}),(0,l.jsxs)(j.q,{children:[(0,l.jsx)(b.T,{variant:"flat",onPress:x,isDisabled:N.isPending,children:"Cancel"}),(0,l.jsx)(b.T,{color:"primary",onPress:F,isLoading:N.isPending,children:"Save"})]})]})}})})}let el={newsKicker:"",newsTitle:"",newsDesc:""};function et(e){var a,r,s;let{isOpen:n,onClose:c}=e,{data:d}=(0,w.Z)(),u=(0,w.Y)(),h=i()(null==d||null==(a=d.dict)?void 0:a.event)?el:null!=(s=null==d||null==(r=d.dict)?void 0:r.event)?s:el,[g,p]=t.useState({}),m=t.useMemo(()=>[{key:"dict.event.newsKicker",label:"Events kicker",value:h.newsKicker},{key:"dict.event.newsTitle",label:"Events title",value:h.newsTitle},{key:"dict.event.newsDesc",label:"Events description",value:h.newsDesc,multiline:!0}],[h]);return t.useEffect(()=>{n&&p(m.reduce((e,a)=>(e[a.key]=a.value,e),{}))},[m,n]),(0,l.jsx)(E.A,{title:"Edit Events",isOpen:n,onClose:c,onSave:()=>{let e=m.reduce((e,a)=>{var r;let l=o()(g,a.key,null!=(r=g[a.key])?r:""),t=a.parse;return e[a.key]=t?t(String(l)):String(l),e},{});u.mutate({section:"events",data:e},{onSuccess:()=>{c()}})},isSaving:u.isPending,children:(0,l.jsx)(I.A,{fields:m,formValues:g,onChange:(e,a)=>{p(r=>({...r,[e]:a}))},description:"Update the events section heading and description."})})}let es={finalTitle:"",finalDesc:"",cta1:""},en={kicker:"",buttonHref:""};function ei(e){var a,r,s,n;let{isOpen:c,onClose:d}=e,{data:u}=(0,w.Z)(),h=(0,w.Y)(),g=i()(null==u||null==(a=u.locales)?void 0:a.en)?es:null!=(s=null==u||null==(r=u.locales)?void 0:r.en)?s:es,p=i()(null==u?void 0:u.finalCta)?en:null!=(n=null==u?void 0:u.finalCta)?n:en,[m,x]=t.useState({}),f=t.useMemo(()=>[{key:"locales.en.finalTitle",label:"Final CTA title",value:g.finalTitle},{key:"locales.en.finalDesc",label:"Final CTA description",value:g.finalDesc,multiline:!0},{key:"locales.en.cta1",label:"CTA button label",value:g.cta1},{key:"finalCta.kicker",label:"CTA kicker",value:p.kicker},{key:"finalCta.buttonHref",label:"CTA button href",value:p.buttonHref}],[p,g]);return t.useEffect(()=>{c&&x(f.reduce((e,a)=>(e[a.key]=a.value,e),{}))},[f,c]),(0,l.jsx)(E.A,{title:"Edit Final CTA",isOpen:c,onClose:d,onSave:()=>{let e=f.reduce((e,a)=>{var r;let l=o()(m,a.key,null!=(r=m[a.key])?r:""),t=a.parse;return e[a.key]=t?t(String(l)):String(l),e},{});h.mutate({section:"cta",data:e},{onSuccess:()=>{d()}})},isSaving:h.isPending,children:(0,l.jsx)(I.A,{fields:f,formValues:m,onChange:(e,a)=>{x(r=>({...r,[e]:a}))},description:"Update the final CTA heading and button details."})})}function ec(){let[e,a]=t.useState(null);return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(s.default,{editable:!0,onEditSection:e=>{a(e)}}),(0,l.jsx)(k,{isOpen:"hero"===e,onClose:()=>a(null)}),(0,l.jsx)(D,{isOpen:"stats"===e,onClose:()=>a(null)}),(0,l.jsx)(L,{isOpen:"pillars"===e,onClose:()=>a(null)}),(0,l.jsx)(K,{isOpen:"faculty"===e,onClose:()=>a(null)}),(0,l.jsx)(M,{isOpen:"partners"===e,onClose:()=>a(null)}),(0,l.jsx)(Q,{isOpen:"careers"===e,onClose:()=>a(null)}),(0,l.jsx)(er,{isOpen:"research"===e,onClose:()=>a(null)}),(0,l.jsx)(et,{isOpen:"events"===e,onClose:()=>a(null)}),(0,l.jsx)(ei,{isOpen:"cta"===e,onClose:()=>a(null)})]})}},43418:(e,a,r)=>{"use strict";r.d(a,{A:()=>c});var l=r(95155);r(12115);var t=r(6005),s=r(22544),n=r(98134),i=r.n(n);function c(e){let{fields:a,formValues:r,onChange:n,description:c}=e;return(0,l.jsxs)("div",{className:"space-y-4",children:[c?(0,l.jsx)("p",{className:"text-sm text-default-500",children:c}):null,a.map(e=>{var a,c;return e.multiline?(0,l.jsx)(t.P,{label:e.label,value:String(i()(r,e.key,null!=(a=r[e.key])?a:"")),minRows:3,onValueChange:a=>n(e.key,a)},e.key):(0,l.jsx)(s.r,{label:e.label,value:String(i()(r,e.key,null!=(c=r[e.key])?c:"")),onValueChange:a=>n(e.key,a)},e.key)})]})}}},e=>{e.O(0,[1543,7793,1828,1568,2059,2454,280,6879,7730,4438,324,3540,1629,3586,2114,6715,3821,2619,1443,3393,4145,6713,9567,711,2058,1303,8441,1255,7358],()=>e(e.s=16313)),_N_E=e.O()}]);